var Pm=Object.defineProperty;var Lm=(t,e,n)=>e in t?Pm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Be=(t,e,n)=>(Lm(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function gc(t,e){const n=Object.create(null),s=t.split(",");for(let r=0;r<s.length;r++)n[s[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}function yc(t){if(G(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=ke(s)?Vm(s):yc(s);if(r)for(const i in r)e[i]=r[i]}return e}else{if(ke(t))return t;if(we(t))return t}}const Fm=/;(?![^(]*\))/g,$m=/:([^]+)/,Um=/\/\*.*?\*\//gs;function Vm(t){const e={};return t.replace(Um,"").split(Fm).forEach(n=>{if(n){const s=n.split($m);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function vc(t){let e="";if(ke(t))e=t;else if(G(t))for(let n=0;n<t.length;n++){const s=vc(t[n]);s&&(e+=s+" ")}else if(we(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Bm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jm=gc(Bm);function $h(t){return!!t||t===""}const gs=t=>ke(t)?t:t==null?"":G(t)||we(t)&&(t.toString===jh||!Q(t.toString))?JSON.stringify(t,Uh,2):String(t),Uh=(t,e)=>e&&e.__v_isRef?Uh(t,e.value):as(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r])=>(n[`${s} =>`]=r,n),{})}:Vh(e)?{[`Set(${e.size})`]:[...e.values()]}:we(e)&&!G(e)&&!qh(e)?String(e):e,me={},os=[],St=()=>{},qm=()=>!1,zm=/^on[^a-z]/,Gi=t=>zm.test(t),wc=t=>t.startsWith("onUpdate:"),nt=Object.assign,Ec=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Hm=Object.prototype.hasOwnProperty,ne=(t,e)=>Hm.call(t,e),G=Array.isArray,as=t=>Wi(t)==="[object Map]",Vh=t=>Wi(t)==="[object Set]",Q=t=>typeof t=="function",ke=t=>typeof t=="string",_c=t=>typeof t=="symbol",we=t=>t!==null&&typeof t=="object",Bh=t=>we(t)&&Q(t.then)&&Q(t.catch),jh=Object.prototype.toString,Wi=t=>jh.call(t),Km=t=>Wi(t).slice(8,-1),qh=t=>Wi(t)==="[object Object]",Tc=t=>ke(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,hi=gc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qi=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Gm=/-(\w)/g,Bt=Qi(t=>t.replace(Gm,(e,n)=>n?n.toUpperCase():"")),Wm=/\B([A-Z])/g,Ms=Qi(t=>t.replace(Wm,"-$1").toLowerCase()),Ji=Qi(t=>t.charAt(0).toUpperCase()+t.slice(1)),Vo=Qi(t=>t?`on${Ji(t)}`:""),fr=(t,e)=>!Object.is(t,e),fi=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Ti=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},ya=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Vu;const Qm=()=>Vu||(Vu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Et;class Jm{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Et,!e&&Et&&(this.index=(Et.scopes||(Et.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Et;try{return Et=this,e()}finally{Et=n}}}on(){Et=this}off(){Et=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Xm(t,e=Et){e&&e.active&&e.effects.push(t)}function Ym(){return Et}const bc=t=>{const e=new Set(t);return e.w=0,e.n=0,e},zh=t=>(t.w&gn)>0,Hh=t=>(t.n&gn)>0,Zm=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=gn},eg=t=>{const{deps:e}=t;if(e.length){let n=0;for(let s=0;s<e.length;s++){const r=e[s];zh(r)&&!Hh(r)?r.delete(t):e[n++]=r,r.w&=~gn,r.n&=~gn}e.length=n}},va=new WeakMap;let Js=0,gn=1;const wa=30;let Tt;const Pn=Symbol(""),Ea=Symbol("");class Sc{constructor(e,n=null,s){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Xm(this,s)}run(){if(!this.active)return this.fn();let e=Tt,n=ln;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Tt,Tt=this,ln=!0,gn=1<<++Js,Js<=wa?Zm(this):Bu(this),this.fn()}finally{Js<=wa&&eg(this),gn=1<<--Js,Tt=this.parent,ln=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Tt===this?this.deferStop=!0:this.active&&(Bu(this),this.onStop&&this.onStop(),this.active=!1)}}function Bu(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ln=!0;const Kh=[];function Os(){Kh.push(ln),ln=!1}function Ps(){const t=Kh.pop();ln=t===void 0?!0:t}function ot(t,e,n){if(ln&&Tt){let s=va.get(t);s||va.set(t,s=new Map);let r=s.get(n);r||s.set(n,r=bc()),Gh(r)}}function Gh(t,e){let n=!1;Js<=wa?Hh(t)||(t.n|=gn,n=!zh(t)):n=!t.has(Tt),n&&(t.add(Tt),Tt.deps.push(t))}function Jt(t,e,n,s,r,i){const o=va.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&G(t)){const c=Number(s);o.forEach((u,l)=>{(l==="length"||l>=c)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":G(t)?Tc(n)&&a.push(o.get("length")):(a.push(o.get(Pn)),as(t)&&a.push(o.get(Ea)));break;case"delete":G(t)||(a.push(o.get(Pn)),as(t)&&a.push(o.get(Ea)));break;case"set":as(t)&&a.push(o.get(Pn));break}if(a.length===1)a[0]&&_a(a[0]);else{const c=[];for(const u of a)u&&c.push(...u);_a(bc(c))}}function _a(t,e){const n=G(t)?t:[...t];for(const s of n)s.computed&&ju(s);for(const s of n)s.computed||ju(s)}function ju(t,e){(t!==Tt||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const tg=gc("__proto__,__v_isRef,__isVue"),Wh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(_c)),ng=Ic(),sg=Ic(!1,!0),rg=Ic(!0),qu=ig();function ig(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=ie(this);for(let i=0,o=this.length;i<o;i++)ot(s,"get",i+"");const r=s[e](...n);return r===-1||r===!1?s[e](...n.map(ie)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Os();const s=ie(this)[e].apply(this,n);return Ps(),s}}),t}function og(t){const e=ie(this);return ot(e,"has",t),e.hasOwnProperty(t)}function Ic(t=!1,e=!1){return function(s,r,i){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&i===(t?e?Tg:Zh:e?Yh:Xh).get(s))return s;const o=G(s);if(!t){if(o&&ne(qu,r))return Reflect.get(qu,r,i);if(r==="hasOwnProperty")return og}const a=Reflect.get(s,r,i);return(_c(r)?Wh.has(r):tg(r))||(t||ot(s,"get",r),e)?a:Ge(a)?o&&Tc(r)?a:a.value:we(a)?t?ef(a):Nr(a):a}}const ag=Qh(),cg=Qh(!0);function Qh(t=!1){return function(n,s,r,i){let o=n[s];if(ys(o)&&Ge(o)&&!Ge(r))return!1;if(!t&&(!bi(r)&&!ys(r)&&(o=ie(o),r=ie(r)),!G(n)&&Ge(o)&&!Ge(r)))return o.value=r,!0;const a=G(n)&&Tc(s)?Number(s)<n.length:ne(n,s),c=Reflect.set(n,s,r,i);return n===ie(i)&&(a?fr(r,o)&&Jt(n,"set",s,r):Jt(n,"add",s,r)),c}}function ug(t,e){const n=ne(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&n&&Jt(t,"delete",e,void 0),s}function lg(t,e){const n=Reflect.has(t,e);return(!_c(e)||!Wh.has(e))&&ot(t,"has",e),n}function hg(t){return ot(t,"iterate",G(t)?"length":Pn),Reflect.ownKeys(t)}const Jh={get:ng,set:ag,deleteProperty:ug,has:lg,ownKeys:hg},fg={get:rg,set(t,e){return!0},deleteProperty(t,e){return!0}},dg=nt({},Jh,{get:sg,set:cg}),Cc=t=>t,Xi=t=>Reflect.getPrototypeOf(t);function Jr(t,e,n=!1,s=!1){t=t.__v_raw;const r=ie(t),i=ie(e);n||(e!==i&&ot(r,"get",e),ot(r,"get",i));const{has:o}=Xi(r),a=s?Cc:n?xc:dr;if(o.call(r,e))return a(t.get(e));if(o.call(r,i))return a(t.get(i));t!==r&&t.get(e)}function Xr(t,e=!1){const n=this.__v_raw,s=ie(n),r=ie(t);return e||(t!==r&&ot(s,"has",t),ot(s,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function Yr(t,e=!1){return t=t.__v_raw,!e&&ot(ie(t),"iterate",Pn),Reflect.get(t,"size",t)}function zu(t){t=ie(t);const e=ie(this);return Xi(e).has.call(e,t)||(e.add(t),Jt(e,"add",t,t)),this}function Hu(t,e){e=ie(e);const n=ie(this),{has:s,get:r}=Xi(n);let i=s.call(n,t);i||(t=ie(t),i=s.call(n,t));const o=r.call(n,t);return n.set(t,e),i?fr(e,o)&&Jt(n,"set",t,e):Jt(n,"add",t,e),this}function Ku(t){const e=ie(this),{has:n,get:s}=Xi(e);let r=n.call(e,t);r||(t=ie(t),r=n.call(e,t)),s&&s.call(e,t);const i=e.delete(t);return r&&Jt(e,"delete",t,void 0),i}function Gu(){const t=ie(this),e=t.size!==0,n=t.clear();return e&&Jt(t,"clear",void 0,void 0),n}function Zr(t,e){return function(s,r){const i=this,o=i.__v_raw,a=ie(o),c=e?Cc:t?xc:dr;return!t&&ot(a,"iterate",Pn),o.forEach((u,l)=>s.call(r,c(u),c(l),i))}}function ei(t,e,n){return function(...s){const r=this.__v_raw,i=ie(r),o=as(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=r[t](...s),l=n?Cc:e?xc:dr;return!e&&ot(i,"iterate",c?Ea:Pn),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[l(h[0]),l(h[1])]:l(h),done:d}},[Symbol.iterator](){return this}}}}function rn(t){return function(...e){return t==="delete"?!1:this}}function pg(){const t={get(i){return Jr(this,i)},get size(){return Yr(this)},has:Xr,add:zu,set:Hu,delete:Ku,clear:Gu,forEach:Zr(!1,!1)},e={get(i){return Jr(this,i,!1,!0)},get size(){return Yr(this)},has:Xr,add:zu,set:Hu,delete:Ku,clear:Gu,forEach:Zr(!1,!0)},n={get(i){return Jr(this,i,!0)},get size(){return Yr(this,!0)},has(i){return Xr.call(this,i,!0)},add:rn("add"),set:rn("set"),delete:rn("delete"),clear:rn("clear"),forEach:Zr(!0,!1)},s={get(i){return Jr(this,i,!0,!0)},get size(){return Yr(this,!0)},has(i){return Xr.call(this,i,!0)},add:rn("add"),set:rn("set"),delete:rn("delete"),clear:rn("clear"),forEach:Zr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=ei(i,!1,!1),n[i]=ei(i,!0,!1),e[i]=ei(i,!1,!0),s[i]=ei(i,!0,!0)}),[t,n,e,s]}const[mg,gg,yg,vg]=pg();function Ac(t,e){const n=e?t?vg:yg:t?gg:mg;return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(ne(n,r)&&r in s?n:s,r,i)}const wg={get:Ac(!1,!1)},Eg={get:Ac(!1,!0)},_g={get:Ac(!0,!1)},Xh=new WeakMap,Yh=new WeakMap,Zh=new WeakMap,Tg=new WeakMap;function bg(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sg(t){return t.__v_skip||!Object.isExtensible(t)?0:bg(Km(t))}function Nr(t){return ys(t)?t:Rc(t,!1,Jh,wg,Xh)}function Ig(t){return Rc(t,!1,dg,Eg,Yh)}function ef(t){return Rc(t,!0,fg,_g,Zh)}function Rc(t,e,n,s,r){if(!we(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const o=Sg(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return r.set(t,a),a}function cs(t){return ys(t)?cs(t.__v_raw):!!(t&&t.__v_isReactive)}function ys(t){return!!(t&&t.__v_isReadonly)}function bi(t){return!!(t&&t.__v_isShallow)}function tf(t){return cs(t)||ys(t)}function ie(t){const e=t&&t.__v_raw;return e?ie(e):t}function nf(t){return Ti(t,"__v_skip",!0),t}const dr=t=>we(t)?Nr(t):t,xc=t=>we(t)?ef(t):t;function sf(t){ln&&Tt&&(t=ie(t),Gh(t.dep||(t.dep=bc())))}function rf(t,e){t=ie(t);const n=t.dep;n&&_a(n)}function Ge(t){return!!(t&&t.__v_isRef===!0)}function Cg(t){return of(t,!1)}function Ag(t){return of(t,!0)}function of(t,e){return Ge(t)?t:new Rg(t,e)}class Rg{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:ie(e),this._value=n?e:dr(e)}get value(){return sf(this),this._value}set value(e){const n=this.__v_isShallow||bi(e)||ys(e);e=n?e:ie(e),fr(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:dr(e),rf(this))}}function us(t){return Ge(t)?t.value:t}const xg={get:(t,e,n)=>us(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Ge(r)&&!Ge(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function af(t){return cs(t)?t:new Proxy(t,xg)}var cf;class Dg{constructor(e,n,s,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[cf]=!1,this._dirty=!0,this.effect=new Sc(e,()=>{this._dirty||(this._dirty=!0,rf(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const e=ie(this);return sf(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}cf="__v_isReadonly";function Ng(t,e,n=!1){let s,r;const i=Q(t);return i?(s=t,r=St):(s=t.get,r=t.set),new Dg(s,r,i||!r,n)}function hn(t,e,n,s){let r;try{r=s?t(...s):t()}catch(i){Yi(i,e,n)}return r}function It(t,e,n,s){if(Q(t)){const i=hn(t,e,n,s);return i&&Bh(i)&&i.catch(o=>{Yi(o,e,n)}),i}const r=[];for(let i=0;i<t.length;i++)r.push(It(t[i],e,n,s));return r}function Yi(t,e,n,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const u=i.ec;if(u){for(let l=0;l<u.length;l++)if(u[l](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){hn(c,null,10,[t,o,a]);return}}kg(t,n,r,s)}function kg(t,e,n,s=!0){console.error(t)}let pr=!1,Ta=!1;const He=[];let Mt=0;const ls=[];let Ht=null,xn=0;const uf=Promise.resolve();let Dc=null;function lf(t){const e=Dc||uf;return t?e.then(this?t.bind(this):t):e}function Mg(t){let e=Mt+1,n=He.length;for(;e<n;){const s=e+n>>>1;mr(He[s])<t?e=s+1:n=s}return e}function Nc(t){(!He.length||!He.includes(t,pr&&t.allowRecurse?Mt+1:Mt))&&(t.id==null?He.push(t):He.splice(Mg(t.id),0,t),hf())}function hf(){!pr&&!Ta&&(Ta=!0,Dc=uf.then(df))}function Og(t){const e=He.indexOf(t);e>Mt&&He.splice(e,1)}function Pg(t){G(t)?ls.push(...t):(!Ht||!Ht.includes(t,t.allowRecurse?xn+1:xn))&&ls.push(t),hf()}function Wu(t,e=pr?Mt+1:0){for(;e<He.length;e++){const n=He[e];n&&n.pre&&(He.splice(e,1),e--,n())}}function ff(t){if(ls.length){const e=[...new Set(ls)];if(ls.length=0,Ht){Ht.push(...e);return}for(Ht=e,Ht.sort((n,s)=>mr(n)-mr(s)),xn=0;xn<Ht.length;xn++)Ht[xn]();Ht=null,xn=0}}const mr=t=>t.id==null?1/0:t.id,Lg=(t,e)=>{const n=mr(t)-mr(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function df(t){Ta=!1,pr=!0,He.sort(Lg);const e=St;try{for(Mt=0;Mt<He.length;Mt++){const n=He[Mt];n&&n.active!==!1&&hn(n,null,14)}}finally{Mt=0,He.length=0,ff(),pr=!1,Dc=null,(He.length||ls.length)&&df()}}function Fg(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||me;let r=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const l=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=s[l]||me;d&&(r=n.map(m=>ke(m)?m.trim():m)),h&&(r=n.map(ya))}let a,c=s[a=Vo(e)]||s[a=Vo(Bt(e))];!c&&i&&(c=s[a=Vo(Ms(e))]),c&&It(c,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,It(u,t,6,r)}}function pf(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!Q(t)){const c=u=>{const l=pf(u,e,!0);l&&(a=!0,nt(o,l))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(we(t)&&s.set(t,null),null):(G(i)?i.forEach(c=>o[c]=null):nt(o,i),we(t)&&s.set(t,o),o)}function Zi(t,e){return!t||!Gi(e)?!1:(e=e.slice(2).replace(/Once$/,""),ne(t,e[0].toLowerCase()+e.slice(1))||ne(t,Ms(e))||ne(t,e))}let gt=null,eo=null;function Si(t){const e=gt;return gt=t,eo=t&&t.type.__scopeId||null,e}function to(t){eo=t}function no(){eo=null}function Ln(t,e=gt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&sl(-1);const i=Si(e);let o;try{o=t(...r)}finally{Si(i),s._d&&sl(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Bo(t){const{type:e,vnode:n,proxy:s,withProxy:r,props:i,propsOptions:[o],slots:a,attrs:c,emit:u,render:l,renderCache:h,data:d,setupState:m,ctx:v,inheritAttrs:w}=t;let C,R;const F=Si(t);try{if(n.shapeFlag&4){const Z=r||s;C=kt(l.call(Z,Z,h,i,m,d,v)),R=c}else{const Z=e;C=kt(Z.length>1?Z(i,{attrs:c,slots:a,emit:u}):Z(i,null)),R=e.props?c:$g(c)}}catch(Z){sr.length=0,Yi(Z,t,1),C=he(Vn)}let M=C;if(R&&w!==!1){const Z=Object.keys(R),{shapeFlag:Te}=M;Z.length&&Te&7&&(o&&Z.some(wc)&&(R=Ug(R,o)),M=vs(M,R))}return n.dirs&&(M=vs(M),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&(M.transition=n.transition),C=M,Si(F),C}const $g=t=>{let e;for(const n in t)(n==="class"||n==="style"||Gi(n))&&((e||(e={}))[n]=t[n]);return e},Ug=(t,e)=>{const n={};for(const s in t)(!wc(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Vg(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Qu(s,o,u):!!o;if(c&8){const l=e.dynamicProps;for(let h=0;h<l.length;h++){const d=l[h];if(o[d]!==s[d]&&!Zi(u,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Qu(s,o,u):!0:!!o;return!1}function Qu(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Zi(n,i))return!0}return!1}function Bg({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const jg=t=>t.__isSuspense;function qg(t,e){e&&e.pendingBranch?G(t)?e.effects.push(...t):e.effects.push(t):Pg(t)}function di(t,e){if(xe){let n=xe.provides;const s=xe.parent&&xe.parent.provides;s===n&&(n=xe.provides=Object.create(s)),n[t]=e}}function Qt(t,e,n=!1){const s=xe||gt;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Q(e)?e.call(s.proxy):e}}const ti={};function pi(t,e,n){return mf(t,e,n)}function mf(t,e,{immediate:n,deep:s,flush:r,onTrack:i,onTrigger:o}=me){const a=Ym()===(xe==null?void 0:xe.scope)?xe:null;let c,u=!1,l=!1;if(Ge(t)?(c=()=>t.value,u=bi(t)):cs(t)?(c=()=>t,s=!0):G(t)?(l=!0,u=t.some(M=>cs(M)||bi(M)),c=()=>t.map(M=>{if(Ge(M))return M.value;if(cs(M))return Nn(M);if(Q(M))return hn(M,a,2)})):Q(t)?e?c=()=>hn(t,a,2):c=()=>{if(!(a&&a.isUnmounted))return h&&h(),It(t,a,3,[d])}:c=St,e&&s){const M=c;c=()=>Nn(M())}let h,d=M=>{h=R.onStop=()=>{hn(M,a,4)}},m;if(vr)if(d=St,e?n&&It(e,a,3,[c(),l?[]:void 0,d]):c(),r==="sync"){const M=Fy();m=M.__watcherHandles||(M.__watcherHandles=[])}else return St;let v=l?new Array(t.length).fill(ti):ti;const w=()=>{if(R.active)if(e){const M=R.run();(s||u||(l?M.some((Z,Te)=>fr(Z,v[Te])):fr(M,v)))&&(h&&h(),It(e,a,3,[M,v===ti?void 0:l&&v[0]===ti?[]:v,d]),v=M)}else R.run()};w.allowRecurse=!!e;let C;r==="sync"?C=w:r==="post"?C=()=>rt(w,a&&a.suspense):(w.pre=!0,a&&(w.id=a.uid),C=()=>Nc(w));const R=new Sc(c,C);e?n?w():v=R.run():r==="post"?rt(R.run.bind(R),a&&a.suspense):R.run();const F=()=>{R.stop(),a&&a.scope&&Ec(a.scope.effects,R)};return m&&m.push(F),F}function zg(t,e,n){const s=this.proxy,r=ke(t)?t.includes(".")?gf(s,t):()=>s[t]:t.bind(s,s);let i;Q(e)?i=e:(i=e.handler,n=e);const o=xe;ws(this);const a=mf(r,i.bind(s),n);return o?ws(o):$n(),a}function gf(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}function Nn(t,e){if(!we(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Ge(t))Nn(t.value,e);else if(G(t))for(let n=0;n<t.length;n++)Nn(t[n],e);else if(Vh(t)||as(t))t.forEach(n=>{Nn(n,e)});else if(qh(t))for(const n in t)Nn(t[n],e);return t}function at(t){return Q(t)?{setup:t,name:t.name}:t}const mi=t=>!!t.type.__asyncLoader,yf=t=>t.type.__isKeepAlive;function Hg(t,e){vf(t,"a",e)}function Kg(t,e){vf(t,"da",e)}function vf(t,e,n=xe){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(so(e,s,n),n){let r=n.parent;for(;r&&r.parent;)yf(r.parent.vnode)&&Gg(s,e,n,r),r=r.parent}}function Gg(t,e,n,s){const r=so(e,t,s,!0);wf(()=>{Ec(s[e],r)},n)}function so(t,e,n=xe,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Os(),ws(n);const a=It(e,n,t,o);return $n(),Ps(),a});return s?r.unshift(i):r.push(i),i}}const nn=t=>(e,n=xe)=>(!vr||t==="sp")&&so(t,(...s)=>e(...s),n),Wg=nn("bm"),Qg=nn("m"),Jg=nn("bu"),Xg=nn("u"),Yg=nn("bum"),wf=nn("um"),Zg=nn("sp"),ey=nn("rtg"),ty=nn("rtc");function ny(t,e=xe){so("ec",t,e)}function sy(t,e){const n=gt;if(n===null)return t;const s=oo(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,c,u=me]=e[i];o&&(Q(o)&&(o={mounted:o,updated:o}),o.deep&&Nn(a),r.push({dir:o,instance:s,value:a,oldValue:void 0,arg:c,modifiers:u}))}return t}function In(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(Os(),It(c,n,8,[t.el,a,t,e]),Ps())}}const Ef="components";function $e(t,e){return iy(Ef,t,!0,e)||t}const ry=Symbol();function iy(t,e,n=!0,s=!1){const r=gt||xe;if(r){const i=r.type;if(t===Ef){const a=Oy(i,!1);if(a&&(a===e||a===Bt(e)||a===Ji(Bt(e))))return i}const o=Ju(r[t]||i[t],e)||Ju(r.appContext[t],e);return!o&&s?i:o}}function Ju(t,e){return t&&(t[e]||t[Bt(e)]||t[Ji(Bt(e))])}function _f(t,e,n,s){let r;const i=n&&n[s];if(G(t)||ke(t)){r=new Array(t.length);for(let o=0,a=t.length;o<a;o++)r[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,i&&i[o])}else if(we(t))if(t[Symbol.iterator])r=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const u=o[a];r[a]=e(t[u],u,a,i&&i[a])}}else r=[];return n&&(n[s]=r),r}const ba=t=>t?Mf(t)?oo(t)||t.proxy:ba(t.parent):null,nr=nt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ba(t.parent),$root:t=>ba(t.root),$emit:t=>t.emit,$options:t=>kc(t),$forceUpdate:t=>t.f||(t.f=()=>Nc(t.update)),$nextTick:t=>t.n||(t.n=lf.bind(t.proxy)),$watch:t=>zg.bind(t)}),jo=(t,e)=>t!==me&&!t.__isScriptSetup&&ne(t,e),oy={get({_:t},e){const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(jo(s,e))return o[e]=1,s[e];if(r!==me&&ne(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&ne(u,e))return o[e]=3,i[e];if(n!==me&&ne(n,e))return o[e]=4,n[e];Sa&&(o[e]=0)}}const l=nr[e];let h,d;if(l)return e==="$attrs"&&ot(t,"get",e),l(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==me&&ne(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,ne(d,e))return d[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return jo(r,e)?(r[e]=n,!0):s!==me&&ne(s,e)?(s[e]=n,!0):ne(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==me&&ne(t,o)||jo(e,o)||(a=i[0])&&ne(a,o)||ne(s,o)||ne(nr,o)||ne(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ne(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let Sa=!0;function ay(t){const e=kc(t),n=t.proxy,s=t.ctx;Sa=!1,e.beforeCreate&&Xu(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:u,created:l,beforeMount:h,mounted:d,beforeUpdate:m,updated:v,activated:w,deactivated:C,beforeDestroy:R,beforeUnmount:F,destroyed:M,unmounted:Z,render:Te,renderTracked:Ve,renderTriggered:ft,errorCaptured:dt,serverPrefetch:Wn,expose:Rt,inheritAttrs:sn,components:xt,directives:Qn,filters:bn}=e;if(u&&cy(u,s,null,t.appContext.config.unwrapInjectedRef),o)for(const fe in o){const ue=o[fe];Q(ue)&&(s[fe]=ue.bind(n))}if(r){const fe=r.call(n,n);we(fe)&&(t.data=Nr(fe))}if(Sa=!0,i)for(const fe in i){const ue=i[fe],yt=Q(ue)?ue.bind(n,n):Q(ue.get)?ue.get.bind(n,n):St,Sn=!Q(ue)&&Q(ue.set)?ue.set.bind(n):St,vt=pt({get:yt,set:Sn});Object.defineProperty(s,fe,{enumerable:!0,configurable:!0,get:()=>vt.value,set:st=>vt.value=st})}if(a)for(const fe in a)Tf(a[fe],s,n,fe);if(c){const fe=Q(c)?c.call(n):c;Reflect.ownKeys(fe).forEach(ue=>{di(ue,fe[ue])})}l&&Xu(l,t,"c");function Ie(fe,ue){G(ue)?ue.forEach(yt=>fe(yt.bind(n))):ue&&fe(ue.bind(n))}if(Ie(Wg,h),Ie(Qg,d),Ie(Jg,m),Ie(Xg,v),Ie(Hg,w),Ie(Kg,C),Ie(ny,dt),Ie(ty,Ve),Ie(ey,ft),Ie(Yg,F),Ie(wf,Z),Ie(Zg,Wn),G(Rt))if(Rt.length){const fe=t.exposed||(t.exposed={});Rt.forEach(ue=>{Object.defineProperty(fe,ue,{get:()=>n[ue],set:yt=>n[ue]=yt})})}else t.exposed||(t.exposed={});Te&&t.render===St&&(t.render=Te),sn!=null&&(t.inheritAttrs=sn),xt&&(t.components=xt),Qn&&(t.directives=Qn)}function cy(t,e,n=St,s=!1){G(t)&&(t=Ia(t));for(const r in t){const i=t[r];let o;we(i)?"default"in i?o=Qt(i.from||r,i.default,!0):o=Qt(i.from||r):o=Qt(i),Ge(o)&&s?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function Xu(t,e,n){It(G(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Tf(t,e,n,s){const r=s.includes(".")?gf(n,s):()=>n[s];if(ke(t)){const i=e[t];Q(i)&&pi(r,i)}else if(Q(t))pi(r,t.bind(n));else if(we(t))if(G(t))t.forEach(i=>Tf(i,e,n,s));else{const i=Q(t.handler)?t.handler.bind(n):e[t.handler];Q(i)&&pi(r,i,t)}}function kc(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(u=>Ii(c,u,o,!0)),Ii(c,e,o)),we(e)&&i.set(e,c),c}function Ii(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Ii(t,i,n,!0),r&&r.forEach(o=>Ii(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=uy[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const uy={data:Yu,props:An,emits:An,methods:An,computed:An,beforeCreate:Ye,created:Ye,beforeMount:Ye,mounted:Ye,beforeUpdate:Ye,updated:Ye,beforeDestroy:Ye,beforeUnmount:Ye,destroyed:Ye,unmounted:Ye,activated:Ye,deactivated:Ye,errorCaptured:Ye,serverPrefetch:Ye,components:An,directives:An,watch:hy,provide:Yu,inject:ly};function Yu(t,e){return e?t?function(){return nt(Q(t)?t.call(this,this):t,Q(e)?e.call(this,this):e)}:e:t}function ly(t,e){return An(Ia(t),Ia(e))}function Ia(t){if(G(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ye(t,e){return t?[...new Set([].concat(t,e))]:e}function An(t,e){return t?nt(nt(Object.create(null),t),e):e}function hy(t,e){if(!t)return e;if(!e)return t;const n=nt(Object.create(null),t);for(const s in e)n[s]=Ye(t[s],e[s]);return n}function fy(t,e,n,s=!1){const r={},i={};Ti(i,io,1),t.propsDefaults=Object.create(null),bf(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Ig(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function dy(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=ie(r),[c]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const l=t.vnode.dynamicProps;for(let h=0;h<l.length;h++){let d=l[h];if(Zi(t.emitsOptions,d))continue;const m=e[d];if(c)if(ne(i,d))m!==i[d]&&(i[d]=m,u=!0);else{const v=Bt(d);r[v]=Ca(c,a,v,m,t,!1)}else m!==i[d]&&(i[d]=m,u=!0)}}}else{bf(t,e,r,i)&&(u=!0);let l;for(const h in a)(!e||!ne(e,h)&&((l=Ms(h))===h||!ne(e,l)))&&(c?n&&(n[h]!==void 0||n[l]!==void 0)&&(r[h]=Ca(c,a,h,void 0,t,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!ne(e,h))&&(delete i[h],u=!0)}u&&Jt(t,"set","$attrs")}function bf(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(hi(c))continue;const u=e[c];let l;r&&ne(r,l=Bt(c))?!i||!i.includes(l)?n[l]=u:(a||(a={}))[l]=u:Zi(t.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=ie(n),u=a||me;for(let l=0;l<i.length;l++){const h=i[l];n[h]=Ca(r,c,h,u[h],t,!ne(u,h))}}return o}function Ca(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=ne(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&Q(c)){const{propsDefaults:u}=r;n in u?s=u[n]:(ws(r),s=u[n]=c.call(null,e),$n())}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Ms(n))&&(s=!0))}return s}function Sf(t,e,n=!1){const s=e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let c=!1;if(!Q(t)){const l=h=>{c=!0;const[d,m]=Sf(h,e,!0);nt(o,d),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!i&&!c)return we(t)&&s.set(t,os),os;if(G(i))for(let l=0;l<i.length;l++){const h=Bt(i[l]);Zu(h)&&(o[h]=me)}else if(i)for(const l in i){const h=Bt(l);if(Zu(h)){const d=i[l],m=o[h]=G(d)||Q(d)?{type:d}:Object.assign({},d);if(m){const v=nl(Boolean,m.type),w=nl(String,m.type);m[0]=v>-1,m[1]=w<0||v<w,(v>-1||ne(m,"default"))&&a.push(h)}}}const u=[o,a];return we(t)&&s.set(t,u),u}function Zu(t){return t[0]!=="$"}function el(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function tl(t,e){return el(t)===el(e)}function nl(t,e){return G(e)?e.findIndex(n=>tl(n,t)):Q(e)&&tl(e,t)?0:-1}const If=t=>t[0]==="_"||t==="$stable",Mc=t=>G(t)?t.map(kt):[kt(t)],py=(t,e,n)=>{if(e._n)return e;const s=Ln((...r)=>Mc(e(...r)),n);return s._c=!1,s},Cf=(t,e,n)=>{const s=t._ctx;for(const r in t){if(If(r))continue;const i=t[r];if(Q(i))e[r]=py(r,i,s);else if(i!=null){const o=Mc(i);e[r]=()=>o}}},Af=(t,e)=>{const n=Mc(e);t.slots.default=()=>n},my=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=ie(e),Ti(e,"_",n)):Cf(e,t.slots={})}else t.slots={},e&&Af(t,e);Ti(t.slots,io,1)},gy=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=me;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(nt(r,e),!n&&a===1&&delete r._):(i=!e.$stable,Cf(e,r)),o=e}else e&&(Af(t,e),o={default:1});if(i)for(const a in r)!If(a)&&!(a in o)&&delete r[a]};function Rf(){return{app:null,config:{isNativeTag:qm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yy=0;function vy(t,e){return function(s,r=null){Q(s)||(s=Object.assign({},s)),r!=null&&!we(r)&&(r=null);const i=Rf(),o=new Set;let a=!1;const c=i.app={_uid:yy++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:$y,get config(){return i.config},set config(u){},use(u,...l){return o.has(u)||(u&&Q(u.install)?(o.add(u),u.install(c,...l)):Q(u)&&(o.add(u),u(c,...l))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,l){return l?(i.components[u]=l,c):i.components[u]},directive(u,l){return l?(i.directives[u]=l,c):i.directives[u]},mount(u,l,h){if(!a){const d=he(s,r);return d.appContext=i,l&&e?e(d,u):t(d,u,h),a=!0,c._container=u,u.__vue_app__=c,oo(d.component)||d.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(u,l){return i.provides[u]=l,c}};return c}}function Aa(t,e,n,s,r=!1){if(G(t)){t.forEach((d,m)=>Aa(d,e&&(G(e)?e[m]:e),n,s,r));return}if(mi(s)&&!r)return;const i=s.shapeFlag&4?oo(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:c}=t,u=e&&e.r,l=a.refs===me?a.refs={}:a.refs,h=a.setupState;if(u!=null&&u!==c&&(ke(u)?(l[u]=null,ne(h,u)&&(h[u]=null)):Ge(u)&&(u.value=null)),Q(c))hn(c,a,12,[o,l]);else{const d=ke(c),m=Ge(c);if(d||m){const v=()=>{if(t.f){const w=d?ne(h,c)?h[c]:l[c]:c.value;r?G(w)&&Ec(w,i):G(w)?w.includes(i)||w.push(i):d?(l[c]=[i],ne(h,c)&&(h[c]=l[c])):(c.value=[i],t.k&&(l[t.k]=c.value))}else d?(l[c]=o,ne(h,c)&&(h[c]=o)):m&&(c.value=o,t.k&&(l[t.k]=o))};o?(v.id=-1,rt(v,n)):v()}}}const rt=qg;function wy(t){return Ey(t)}function Ey(t,e){const n=Qm();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:l,parentNode:h,nextSibling:d,setScopeId:m=St,insertStaticContent:v}=t,w=(f,p,g,y=null,_=null,A=null,k=!1,I=null,x=!!p.dynamicChildren)=>{if(f===p)return;f&&!Hs(f,p)&&(y=D(f),st(f,_,A,!0),f=null),p.patchFlag===-2&&(x=!1,p.dynamicChildren=null);const{type:b,ref:U,shapeFlag:P}=p;switch(b){case ro:C(f,p,g,y);break;case Vn:R(f,p,g,y);break;case qo:f==null&&F(p,g,y,k);break;case Ze:xt(f,p,g,y,_,A,k,I,x);break;default:P&1?Te(f,p,g,y,_,A,k,I,x):P&6?Qn(f,p,g,y,_,A,k,I,x):(P&64||P&128)&&b.process(f,p,g,y,_,A,k,I,x,te)}U!=null&&_&&Aa(U,f&&f.ref,A,p||f,!p)},C=(f,p,g,y)=>{if(f==null)s(p.el=a(p.children),g,y);else{const _=p.el=f.el;p.children!==f.children&&u(_,p.children)}},R=(f,p,g,y)=>{f==null?s(p.el=c(p.children||""),g,y):p.el=f.el},F=(f,p,g,y)=>{[f.el,f.anchor]=v(f.children,p,g,y,f.el,f.anchor)},M=({el:f,anchor:p},g,y)=>{let _;for(;f&&f!==p;)_=d(f),s(f,g,y),f=_;s(p,g,y)},Z=({el:f,anchor:p})=>{let g;for(;f&&f!==p;)g=d(f),r(f),f=g;r(p)},Te=(f,p,g,y,_,A,k,I,x)=>{k=k||p.type==="svg",f==null?Ve(p,g,y,_,A,k,I,x):Wn(f,p,_,A,k,I,x)},Ve=(f,p,g,y,_,A,k,I)=>{let x,b;const{type:U,props:P,shapeFlag:V,transition:H,dirs:X}=f;if(x=f.el=o(f.type,A,P&&P.is,P),V&8?l(x,f.children):V&16&&dt(f.children,x,null,y,_,A&&U!=="foreignObject",k,I),X&&In(f,null,y,"created"),ft(x,f,f.scopeId,k,y),P){for(const le in P)le!=="value"&&!hi(le)&&i(x,le,null,P[le],A,f.children,y,_,O);"value"in P&&i(x,"value",null,P.value),(b=P.onVnodeBeforeMount)&&Nt(b,y,f)}X&&In(f,null,y,"beforeMount");const de=(!_||_&&!_.pendingBranch)&&H&&!H.persisted;de&&H.beforeEnter(x),s(x,p,g),((b=P&&P.onVnodeMounted)||de||X)&&rt(()=>{b&&Nt(b,y,f),de&&H.enter(x),X&&In(f,null,y,"mounted")},_)},ft=(f,p,g,y,_)=>{if(g&&m(f,g),y)for(let A=0;A<y.length;A++)m(f,y[A]);if(_){let A=_.subTree;if(p===A){const k=_.vnode;ft(f,k,k.scopeId,k.slotScopeIds,_.parent)}}},dt=(f,p,g,y,_,A,k,I,x=0)=>{for(let b=x;b<f.length;b++){const U=f[b]=I?an(f[b]):kt(f[b]);w(null,U,p,g,y,_,A,k,I)}},Wn=(f,p,g,y,_,A,k)=>{const I=p.el=f.el;let{patchFlag:x,dynamicChildren:b,dirs:U}=p;x|=f.patchFlag&16;const P=f.props||me,V=p.props||me;let H;g&&Cn(g,!1),(H=V.onVnodeBeforeUpdate)&&Nt(H,g,p,f),U&&In(p,f,g,"beforeUpdate"),g&&Cn(g,!0);const X=_&&p.type!=="foreignObject";if(b?Rt(f.dynamicChildren,b,I,g,y,X,A):k||ue(f,p,I,null,g,y,X,A,!1),x>0){if(x&16)sn(I,p,P,V,g,y,_);else if(x&2&&P.class!==V.class&&i(I,"class",null,V.class,_),x&4&&i(I,"style",P.style,V.style,_),x&8){const de=p.dynamicProps;for(let le=0;le<de.length;le++){const Ce=de[le],wt=P[Ce],Xn=V[Ce];(Xn!==wt||Ce==="value")&&i(I,Ce,wt,Xn,_,f.children,g,y,O)}}x&1&&f.children!==p.children&&l(I,p.children)}else!k&&b==null&&sn(I,p,P,V,g,y,_);((H=V.onVnodeUpdated)||U)&&rt(()=>{H&&Nt(H,g,p,f),U&&In(p,f,g,"updated")},y)},Rt=(f,p,g,y,_,A,k)=>{for(let I=0;I<p.length;I++){const x=f[I],b=p[I],U=x.el&&(x.type===Ze||!Hs(x,b)||x.shapeFlag&70)?h(x.el):g;w(x,b,U,null,y,_,A,k,!0)}},sn=(f,p,g,y,_,A,k)=>{if(g!==y){if(g!==me)for(const I in g)!hi(I)&&!(I in y)&&i(f,I,g[I],null,k,p.children,_,A,O);for(const I in y){if(hi(I))continue;const x=y[I],b=g[I];x!==b&&I!=="value"&&i(f,I,b,x,k,p.children,_,A,O)}"value"in y&&i(f,"value",g.value,y.value)}},xt=(f,p,g,y,_,A,k,I,x)=>{const b=p.el=f?f.el:a(""),U=p.anchor=f?f.anchor:a("");let{patchFlag:P,dynamicChildren:V,slotScopeIds:H}=p;H&&(I=I?I.concat(H):H),f==null?(s(b,g,y),s(U,g,y),dt(p.children,g,U,_,A,k,I,x)):P>0&&P&64&&V&&f.dynamicChildren?(Rt(f.dynamicChildren,V,g,_,A,k,I),(p.key!=null||_&&p===_.subTree)&&xf(f,p,!0)):ue(f,p,g,U,_,A,k,I,x)},Qn=(f,p,g,y,_,A,k,I,x)=>{p.slotScopeIds=I,f==null?p.shapeFlag&512?_.ctx.activate(p,g,y,k,x):bn(p,g,y,_,A,k,x):qs(f,p,x)},bn=(f,p,g,y,_,A,k)=>{const I=f.component=xy(f,y,_);if(yf(f)&&(I.ctx.renderer=te),Dy(I),I.asyncDep){if(_&&_.registerDep(I,Ie),!f.el){const x=I.subTree=he(Vn);R(null,x,p,g)}return}Ie(I,f,p,g,_,A,k)},qs=(f,p,g)=>{const y=p.component=f.component;if(Vg(f,p,g))if(y.asyncDep&&!y.asyncResolved){fe(y,p,g);return}else y.next=p,Og(y.update),y.update();else p.el=f.el,y.vnode=p},Ie=(f,p,g,y,_,A,k)=>{const I=()=>{if(f.isMounted){let{next:U,bu:P,u:V,parent:H,vnode:X}=f,de=U,le;Cn(f,!1),U?(U.el=X.el,fe(f,U,k)):U=X,P&&fi(P),(le=U.props&&U.props.onVnodeBeforeUpdate)&&Nt(le,H,U,X),Cn(f,!0);const Ce=Bo(f),wt=f.subTree;f.subTree=Ce,w(wt,Ce,h(wt.el),D(wt),f,_,A),U.el=Ce.el,de===null&&Bg(f,Ce.el),V&&rt(V,_),(le=U.props&&U.props.onVnodeUpdated)&&rt(()=>Nt(le,H,U,X),_)}else{let U;const{el:P,props:V}=p,{bm:H,m:X,parent:de}=f,le=mi(p);if(Cn(f,!1),H&&fi(H),!le&&(U=V&&V.onVnodeBeforeMount)&&Nt(U,de,p),Cn(f,!0),P&&J){const Ce=()=>{f.subTree=Bo(f),J(P,f.subTree,f,_,null)};le?p.type.__asyncLoader().then(()=>!f.isUnmounted&&Ce()):Ce()}else{const Ce=f.subTree=Bo(f);w(null,Ce,g,y,f,_,A),p.el=Ce.el}if(X&&rt(X,_),!le&&(U=V&&V.onVnodeMounted)){const Ce=p;rt(()=>Nt(U,de,Ce),_)}(p.shapeFlag&256||de&&mi(de.vnode)&&de.vnode.shapeFlag&256)&&f.a&&rt(f.a,_),f.isMounted=!0,p=g=y=null}},x=f.effect=new Sc(I,()=>Nc(b),f.scope),b=f.update=()=>x.run();b.id=f.uid,Cn(f,!0),b()},fe=(f,p,g)=>{p.component=f;const y=f.vnode.props;f.vnode=p,f.next=null,dy(f,p.props,y,g),gy(f,p.children,g),Os(),Wu(),Ps()},ue=(f,p,g,y,_,A,k,I,x=!1)=>{const b=f&&f.children,U=f?f.shapeFlag:0,P=p.children,{patchFlag:V,shapeFlag:H}=p;if(V>0){if(V&128){Sn(b,P,g,y,_,A,k,I,x);return}else if(V&256){yt(b,P,g,y,_,A,k,I,x);return}}H&8?(U&16&&O(b,_,A),P!==b&&l(g,P)):U&16?H&16?Sn(b,P,g,y,_,A,k,I,x):O(b,_,A,!0):(U&8&&l(g,""),H&16&&dt(P,g,y,_,A,k,I,x))},yt=(f,p,g,y,_,A,k,I,x)=>{f=f||os,p=p||os;const b=f.length,U=p.length,P=Math.min(b,U);let V;for(V=0;V<P;V++){const H=p[V]=x?an(p[V]):kt(p[V]);w(f[V],H,g,null,_,A,k,I,x)}b>U?O(f,_,A,!0,!1,P):dt(p,g,y,_,A,k,I,x,P)},Sn=(f,p,g,y,_,A,k,I,x)=>{let b=0;const U=p.length;let P=f.length-1,V=U-1;for(;b<=P&&b<=V;){const H=f[b],X=p[b]=x?an(p[b]):kt(p[b]);if(Hs(H,X))w(H,X,g,null,_,A,k,I,x);else break;b++}for(;b<=P&&b<=V;){const H=f[P],X=p[V]=x?an(p[V]):kt(p[V]);if(Hs(H,X))w(H,X,g,null,_,A,k,I,x);else break;P--,V--}if(b>P){if(b<=V){const H=V+1,X=H<U?p[H].el:y;for(;b<=V;)w(null,p[b]=x?an(p[b]):kt(p[b]),g,X,_,A,k,I,x),b++}}else if(b>V)for(;b<=P;)st(f[b],_,A,!0),b++;else{const H=b,X=b,de=new Map;for(b=X;b<=V;b++){const ut=p[b]=x?an(p[b]):kt(p[b]);ut.key!=null&&de.set(ut.key,b)}let le,Ce=0;const wt=V-X+1;let Xn=!1,Fu=0;const zs=new Array(wt);for(b=0;b<wt;b++)zs[b]=0;for(b=H;b<=P;b++){const ut=f[b];if(Ce>=wt){st(ut,_,A,!0);continue}let Dt;if(ut.key!=null)Dt=de.get(ut.key);else for(le=X;le<=V;le++)if(zs[le-X]===0&&Hs(ut,p[le])){Dt=le;break}Dt===void 0?st(ut,_,A,!0):(zs[Dt-X]=b+1,Dt>=Fu?Fu=Dt:Xn=!0,w(ut,p[Dt],g,null,_,A,k,I,x),Ce++)}const $u=Xn?_y(zs):os;for(le=$u.length-1,b=wt-1;b>=0;b--){const ut=X+b,Dt=p[ut],Uu=ut+1<U?p[ut+1].el:y;zs[b]===0?w(null,Dt,g,Uu,_,A,k,I,x):Xn&&(le<0||b!==$u[le]?vt(Dt,g,Uu,2):le--)}}},vt=(f,p,g,y,_=null)=>{const{el:A,type:k,transition:I,children:x,shapeFlag:b}=f;if(b&6){vt(f.component.subTree,p,g,y);return}if(b&128){f.suspense.move(p,g,y);return}if(b&64){k.move(f,p,g,te);return}if(k===Ze){s(A,p,g);for(let P=0;P<x.length;P++)vt(x[P],p,g,y);s(f.anchor,p,g);return}if(k===qo){M(f,p,g);return}if(y!==2&&b&1&&I)if(y===0)I.beforeEnter(A),s(A,p,g),rt(()=>I.enter(A),_);else{const{leave:P,delayLeave:V,afterLeave:H}=I,X=()=>s(A,p,g),de=()=>{P(A,()=>{X(),H&&H()})};V?V(A,X,de):de()}else s(A,p,g)},st=(f,p,g,y=!1,_=!1)=>{const{type:A,props:k,ref:I,children:x,dynamicChildren:b,shapeFlag:U,patchFlag:P,dirs:V}=f;if(I!=null&&Aa(I,null,g,f,!0),U&256){p.ctx.deactivate(f);return}const H=U&1&&V,X=!mi(f);let de;if(X&&(de=k&&k.onVnodeBeforeUnmount)&&Nt(de,p,f),U&6)E(f.component,g,y);else{if(U&128){f.suspense.unmount(g,y);return}H&&In(f,null,p,"beforeUnmount"),U&64?f.type.remove(f,p,g,_,te,y):b&&(A!==Ze||P>0&&P&64)?O(b,p,g,!1,!0):(A===Ze&&P&384||!_&&U&16)&&O(x,p,g),y&&Jn(f)}(X&&(de=k&&k.onVnodeUnmounted)||H)&&rt(()=>{de&&Nt(de,p,f),H&&In(f,null,p,"unmounted")},g)},Jn=f=>{const{type:p,el:g,anchor:y,transition:_}=f;if(p===Ze){Qr(g,y);return}if(p===qo){Z(f);return}const A=()=>{r(g),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(f.shapeFlag&1&&_&&!_.persisted){const{leave:k,delayLeave:I}=_,x=()=>k(g,A);I?I(f.el,A,x):x()}else A()},Qr=(f,p)=>{let g;for(;f!==p;)g=d(f),r(f),f=g;r(p)},E=(f,p,g)=>{const{bum:y,scope:_,update:A,subTree:k,um:I}=f;y&&fi(y),_.stop(),A&&(A.active=!1,st(k,f,p,g)),I&&rt(I,p),rt(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},O=(f,p,g,y=!1,_=!1,A=0)=>{for(let k=A;k<f.length;k++)st(f[k],p,g,y,_)},D=f=>f.shapeFlag&6?D(f.component.subTree):f.shapeFlag&128?f.suspense.next():d(f.anchor||f.el),$=(f,p,g)=>{f==null?p._vnode&&st(p._vnode,null,null,!0):w(p._vnode||null,f,p,null,null,null,g),Wu(),ff(),p._vnode=f},te={p:w,um:st,m:vt,r:Jn,mt:bn,mc:dt,pc:ue,pbc:Rt,n:D,o:t};let Ee,J;return e&&([Ee,J]=e(te)),{render:$,hydrate:Ee,createApp:vy($,Ee)}}function Cn({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function xf(t,e,n=!1){const s=t.children,r=e.children;if(G(s)&&G(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=an(r[i]),a.el=o.el),n||xf(o,a)),a.type===ro&&(a.el=o.el)}}function _y(t){const e=t.slice(),n=[0];let s,r,i,o,a;const c=t.length;for(s=0;s<c;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const Ty=t=>t.__isTeleport,Ze=Symbol(void 0),ro=Symbol(void 0),Vn=Symbol(void 0),qo=Symbol(void 0),sr=[];let bt=null;function re(t=!1){sr.push(bt=t?null:[])}function by(){sr.pop(),bt=sr[sr.length-1]||null}let gr=1;function sl(t){gr+=t}function Df(t){return t.dynamicChildren=gr>0?bt||os:null,by(),gr>0&&bt&&bt.push(t),t}function pe(t,e,n,s,r,i){return Df(be(t,e,n,s,r,i,!0))}function yr(t,e,n,s,r){return Df(he(t,e,n,s,r,!0))}function Ra(t){return t?t.__v_isVNode===!0:!1}function Hs(t,e){return t.type===e.type&&t.key===e.key}const io="__vInternal",Nf=({key:t})=>t??null,gi=({ref:t,ref_key:e,ref_for:n})=>t!=null?ke(t)||Ge(t)||Q(t)?{i:gt,r:t,k:e,f:!!n}:t:null;function be(t,e=null,n=null,s=0,r=null,i=t===Ze?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Nf(e),ref:e&&gi(e),scopeId:eo,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:gt};return a?(Oc(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=ke(n)?8:16),gr>0&&!o&&bt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&bt.push(c),c}const he=Sy;function Sy(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===ry)&&(t=Vn),Ra(t)){const a=vs(t,e,!0);return n&&Oc(a,n),gr>0&&!i&&bt&&(a.shapeFlag&6?bt[bt.indexOf(t)]=a:bt.push(a)),a.patchFlag|=-2,a}if(Py(t)&&(t=t.__vccOpts),e){e=Iy(e);let{class:a,style:c}=e;a&&!ke(a)&&(e.class=vc(a)),we(c)&&(tf(c)&&!G(c)&&(c=nt({},c)),e.style=yc(c))}const o=ke(t)?1:jg(t)?128:Ty(t)?64:we(t)?4:Q(t)?2:0;return be(t,e,n,s,r,o,i,!0)}function Iy(t){return t?tf(t)||io in t?nt({},t):t:null}function vs(t,e,n=!1){const{props:s,ref:r,patchFlag:i,children:o}=t,a=e?Cy(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Nf(a),ref:e&&e.ref?n&&r?G(r)?r.concat(gi(e)):[r,gi(e)]:gi(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ze?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&vs(t.ssContent),ssFallback:t.ssFallback&&vs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Fn(t=" ",e=0){return he(ro,null,t,e)}function kf(t="",e=!1){return e?(re(),yr(Vn,null,t)):he(Vn,null,t)}function kt(t){return t==null||typeof t=="boolean"?he(Vn):G(t)?he(Ze,null,t.slice()):typeof t=="object"?an(t):he(ro,null,String(t))}function an(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:vs(t)}function Oc(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(G(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Oc(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(io in e)?e._ctx=gt:r===3&&gt&&(gt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Q(e)?(e={default:e,_ctx:gt},n=32):(e=String(e),s&64?(n=16,e=[Fn(e)]):n=8);t.children=e,t.shapeFlag|=n}function Cy(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=vc([e.class,s.class]));else if(r==="style")e.style=yc([e.style,s.style]);else if(Gi(r)){const i=e[r],o=s[r];o&&i!==o&&!(G(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Nt(t,e,n,s=null){It(t,e,7,[n,s])}const Ay=Rf();let Ry=0;function xy(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Ay,i={uid:Ry++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Jm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Sf(s,r),emitsOptions:pf(s,r),emit:null,emitted:null,propsDefaults:me,inheritAttrs:s.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Fg.bind(null,i),t.ce&&t.ce(i),i}let xe=null;const ws=t=>{xe=t,t.scope.on()},$n=()=>{xe&&xe.scope.off(),xe=null};function Mf(t){return t.vnode.shapeFlag&4}let vr=!1;function Dy(t,e=!1){vr=e;const{props:n,children:s}=t.vnode,r=Mf(t);fy(t,n,r,e),my(t,s);const i=r?Ny(t,e):void 0;return vr=!1,i}function Ny(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=nf(new Proxy(t.ctx,oy));const{setup:s}=n;if(s){const r=t.setupContext=s.length>1?My(t):null;ws(t),Os();const i=hn(s,t,0,[t.props,r]);if(Ps(),$n(),Bh(i)){if(i.then($n,$n),e)return i.then(o=>{rl(t,o,e)}).catch(o=>{Yi(o,t,0)});t.asyncDep=i}else rl(t,i,e)}else Of(t,e)}function rl(t,e,n){Q(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:we(e)&&(t.setupState=af(e)),Of(t,n)}let il;function Of(t,e,n){const s=t.type;if(!t.render){if(!e&&il&&!s.render){const r=s.template||kc(t).template;if(r){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=s,u=nt(nt({isCustomElement:i,delimiters:a},o),c);s.render=il(r,u)}}t.render=s.render||St}ws(t),Os(),ay(t),Ps(),$n()}function ky(t){return new Proxy(t.attrs,{get(e,n){return ot(t,"get","$attrs"),e[n]}})}function My(t){const e=s=>{t.exposed=s||{}};let n;return{get attrs(){return n||(n=ky(t))},slots:t.slots,emit:t.emit,expose:e}}function oo(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(af(nf(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in nr)return nr[n](t)},has(e,n){return n in e||n in nr}}))}function Oy(t,e=!0){return Q(t)?t.displayName||t.name:t.name||e&&t.__name}function Py(t){return Q(t)&&"__vccOpts"in t}const pt=(t,e)=>Ng(t,e,vr);function Pf(t,e,n){const s=arguments.length;return s===2?we(e)&&!G(e)?Ra(e)?he(t,null,[e]):he(t,e):he(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Ra(n)&&(n=[n]),he(t,e,n))}const Ly=Symbol(""),Fy=()=>Qt(Ly),$y="3.2.47",Uy="http://www.w3.org/2000/svg",Dn=typeof document<"u"?document:null,ol=Dn&&Dn.createElement("template"),Vy={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e?Dn.createElementNS(Uy,t):Dn.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Dn.createTextNode(t),createComment:t=>Dn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Dn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{ol.innerHTML=s?`<svg>${t}</svg>`:t;const a=ol.content;if(s){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function By(t,e,n){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function jy(t,e,n){const s=t.style,r=ke(n);if(n&&!r){if(e&&!ke(e))for(const i in e)n[i]==null&&xa(s,i,"");for(const i in n)xa(s,i,n[i])}else{const i=s.display;r?e!==n&&(s.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=i)}}const al=/\s*!important$/;function xa(t,e,n){if(G(n))n.forEach(s=>xa(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=qy(t,e);al.test(n)?t.setProperty(Ms(s),n.replace(al,""),"important"):t[s]=n}}const cl=["Webkit","Moz","ms"],zo={};function qy(t,e){const n=zo[e];if(n)return n;let s=Bt(e);if(s!=="filter"&&s in t)return zo[e]=s;s=Ji(s);for(let r=0;r<cl.length;r++){const i=cl[r]+s;if(i in t)return zo[e]=i}return e}const ul="http://www.w3.org/1999/xlink";function zy(t,e,n,s,r){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(ul,e.slice(6,e.length)):t.setAttributeNS(ul,e,n);else{const i=jm(e);n==null||i&&!$h(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function Hy(t,e,n,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const c=n??"";(t.value!==c||t.tagName==="OPTION")&&(t.value=c),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=$h(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function es(t,e,n,s){t.addEventListener(e,n,s)}function Ky(t,e,n,s){t.removeEventListener(e,n,s)}function Gy(t,e,n,s,r=null){const i=t._vei||(t._vei={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=Wy(e);if(s){const u=i[e]=Xy(s,r);es(t,a,u,c)}else o&&(Ky(t,a,o,c),i[e]=void 0)}}const ll=/(?:Once|Passive|Capture)$/;function Wy(t){let e;if(ll.test(t)){e={};let s;for(;s=t.match(ll);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ms(t.slice(2)),e]}let Ho=0;const Qy=Promise.resolve(),Jy=()=>Ho||(Qy.then(()=>Ho=0),Ho=Date.now());function Xy(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;It(Yy(s,n.value),e,5,[s])};return n.value=t,n.attached=Jy(),n}function Yy(t,e){if(G(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const hl=/^on[a-z]/,Zy=(t,e,n,s,r=!1,i,o,a,c)=>{e==="class"?By(t,s,r):e==="style"?jy(t,n,s):Gi(e)?wc(e)||Gy(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ev(t,e,s,r))?Hy(t,e,s,i,o,a,c):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),zy(t,e,s,r))};function ev(t,e,n,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&hl.test(e)&&Q(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||hl.test(e)&&ke(n)?!1:e in t}const fl=t=>{const e=t.props["onUpdate:modelValue"]||!1;return G(e)?n=>fi(e,n):e};function tv(t){t.target.composing=!0}function dl(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const nv={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t._assign=fl(r);const i=s||r.props&&r.props.type==="number";es(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=ya(a)),t._assign(a)}),n&&es(t,"change",()=>{t.value=t.value.trim()}),e||(es(t,"compositionstart",tv),es(t,"compositionend",dl),es(t,"change",dl))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:s,number:r}},i){if(t._assign=fl(i),t.composing||document.activeElement===t&&t.type!=="range"&&(n||s&&t.value.trim()===e||(r||t.type==="number")&&ya(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},sv=nt({patchProp:Zy},Vy);let pl;function rv(){return pl||(pl=wy(sv))}const iv=(...t)=>{const e=rv().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=ov(s);if(!r)return;const i=e._component;!Q(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function ov(t){return ke(t)?document.querySelector(t):t}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const ts=typeof window<"u";function av(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ae=Object.assign;function Ko(t,e){const n={};for(const s in e){const r=e[s];n[s]=Ct(r)?r.map(t):t(r)}return n}const rr=()=>{},Ct=Array.isArray,cv=/\/$/,uv=t=>t.replace(cv,"");function Go(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=dv(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:o}}function lv(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function ml(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function hv(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Es(e.matched[s],n.matched[r])&&Lf(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Es(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Lf(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!fv(t[n],e[n]))return!1;return!0}function fv(t,e){return Ct(t)?gl(t,e):Ct(e)?gl(e,t):t===e}function gl(t,e){return Ct(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function dv(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/");let r=n.length-1,i,o;for(i=0;i<s.length;i++)if(o=s[i],o!==".")if(o==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(i-(i===s.length?1:0)).join("/")}var wr;(function(t){t.pop="pop",t.push="push"})(wr||(wr={}));var ir;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ir||(ir={}));function pv(t){if(!t)if(ts){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),uv(t)}const mv=/^[^#]+#/;function gv(t,e){return t.replace(mv,"#")+e}function yv(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const ao=()=>({left:window.pageXOffset,top:window.pageYOffset});function vv(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=yv(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function yl(t,e){return(history.state?history.state.position-e:-1)+t}const Da=new Map;function wv(t,e){Da.set(t,e)}function Ev(t){const e=Da.get(t);return Da.delete(t),e}let _v=()=>location.protocol+"//"+location.host;function Ff(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,c=r.slice(a);return c[0]!=="/"&&(c="/"+c),ml(c,"")}return ml(n,t)+s+r}function Tv(t,e,n,s){let r=[],i=[],o=null;const a=({state:d})=>{const m=Ff(t,location),v=n.value,w=e.value;let C=0;if(d){if(n.value=m,e.value=d,o&&o===v){o=null;return}C=w?d.position-w.position:0}else s(m);r.forEach(R=>{R(n.value,v,{delta:C,type:wr.pop,direction:C?C>0?ir.forward:ir.back:ir.unknown})})};function c(){o=n.value}function u(d){r.push(d);const m=()=>{const v=r.indexOf(d);v>-1&&r.splice(v,1)};return i.push(m),m}function l(){const{history:d}=window;d.state&&d.replaceState(ae({},d.state,{scroll:ao()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",l),{pauseListeners:c,listen:u,destroy:h}}function vl(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?ao():null}}function bv(t){const{history:e,location:n}=window,s={value:Ff(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,l){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:_v()+t+c;try{e[l?"replaceState":"pushState"](u,"",d),r.value=u}catch(m){console.error(m),n[l?"replace":"assign"](d)}}function o(c,u){const l=ae({},e.state,vl(r.value.back,c,r.value.forward,!0),u,{position:r.value.position});i(c,l,!0),s.value=c}function a(c,u){const l=ae({},r.value,e.state,{forward:c,scroll:ao()});i(l.current,l,!0);const h=ae({},vl(s.value,c,null),{position:l.position+1},u);i(c,h,!1),s.value=c}return{location:s,state:r,push:a,replace:o}}function Sv(t){t=pv(t);const e=bv(t),n=Tv(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=ae({location:"",base:t,go:s,createHref:gv.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function Iv(t){return typeof t=="string"||t&&typeof t=="object"}function $f(t){return typeof t=="string"||typeof t=="symbol"}const on={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Uf=Symbol("");var wl;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(wl||(wl={}));function _s(t,e){return ae(new Error,{type:t,[Uf]:!0},e)}function zt(t,e){return t instanceof Error&&Uf in t&&(e==null||!!(t.type&e))}const El="[^/]+?",Cv={sensitive:!1,strict:!1,start:!0,end:!0},Av=/[.+*?^${}()[\]/\\]/g;function Rv(t,e){const n=ae({},Cv,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const l=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let h=0;h<u.length;h++){const d=u[h];let m=40+(n.sensitive?.25:0);if(d.type===0)h||(r+="/"),r+=d.value.replace(Av,"\\$&"),m+=40;else if(d.type===1){const{value:v,repeatable:w,optional:C,regexp:R}=d;i.push({name:v,repeatable:w,optional:C});const F=R||El;if(F!==El){m+=10;try{new RegExp(`(${F})`)}catch(Z){throw new Error(`Invalid custom RegExp for param "${v}" (${F}): `+Z.message)}}let M=w?`((?:${F})(?:/(?:${F}))*)`:`(${F})`;h||(M=C&&u.length<2?`(?:/${M})`:"/"+M),C&&(M+="?"),r+=M,m+=20,C&&(m+=-8),w&&(m+=-20),F===".*"&&(m+=-50)}l.push(m)}s.push(l)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const l=u.match(o),h={};if(!l)return null;for(let d=1;d<l.length;d++){const m=l[d]||"",v=i[d-1];h[v.name]=m&&v.repeatable?m.split("/"):m}return h}function c(u){let l="",h=!1;for(const d of t){(!h||!l.endsWith("/"))&&(l+="/"),h=!1;for(const m of d)if(m.type===0)l+=m.value;else if(m.type===1){const{value:v,repeatable:w,optional:C}=m,R=v in u?u[v]:"";if(Ct(R)&&!w)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const F=Ct(R)?R.join("/"):R;if(!F)if(C)d.length<2&&(l.endsWith("/")?l=l.slice(0,-1):h=!0);else throw new Error(`Missing required param "${v}"`);l+=F}}return l||"/"}return{re:o,score:s,keys:i,parse:a,stringify:c}}function xv(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Dv(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=xv(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(_l(s))return 1;if(_l(r))return-1}return r.length-s.length}function _l(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Nv={type:0,value:""},kv=/[a-zA-Z0-9_]/;function Mv(t){if(!t)return[[]];if(t==="/")return[[Nv]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,c,u="",l="";function h(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:l,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function d(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(u&&h(),o()):c===":"?(h(),n=1):d();break;case 4:d(),n=s;break;case 1:c==="("?n=2:kv.test(c)?d():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+c:n=3:l+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,l="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),h(),o(),r}function Ov(t,e,n){const s=Rv(Mv(t.path),n),r=ae(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Pv(t,e){const n=[],s=new Map;e=Sl({strict:!1,end:!0,sensitive:!1},e);function r(l){return s.get(l)}function i(l,h,d){const m=!d,v=Lv(l);v.aliasOf=d&&d.record;const w=Sl(e,l),C=[v];if("alias"in l){const M=typeof l.alias=="string"?[l.alias]:l.alias;for(const Z of M)C.push(ae({},v,{components:d?d.record.components:v.components,path:Z,aliasOf:d?d.record:v}))}let R,F;for(const M of C){const{path:Z}=M;if(h&&Z[0]!=="/"){const Te=h.record.path,Ve=Te[Te.length-1]==="/"?"":"/";M.path=h.record.path+(Z&&Ve+Z)}if(R=Ov(M,h,w),d?d.alias.push(R):(F=F||R,F!==R&&F.alias.push(R),m&&l.name&&!bl(R)&&o(l.name)),v.children){const Te=v.children;for(let Ve=0;Ve<Te.length;Ve++)i(Te[Ve],R,d&&d.children[Ve])}d=d||R,(R.record.components&&Object.keys(R.record.components).length||R.record.name||R.record.redirect)&&c(R)}return F?()=>{o(F)}:rr}function o(l){if($f(l)){const h=s.get(l);h&&(s.delete(l),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(l);h>-1&&(n.splice(h,1),l.record.name&&s.delete(l.record.name),l.children.forEach(o),l.alias.forEach(o))}}function a(){return n}function c(l){let h=0;for(;h<n.length&&Dv(l,n[h])>=0&&(l.record.path!==n[h].record.path||!Vf(l,n[h]));)h++;n.splice(h,0,l),l.record.name&&!bl(l)&&s.set(l.record.name,l)}function u(l,h){let d,m={},v,w;if("name"in l&&l.name){if(d=s.get(l.name),!d)throw _s(1,{location:l});w=d.record.name,m=ae(Tl(h.params,d.keys.filter(F=>!F.optional).map(F=>F.name)),l.params&&Tl(l.params,d.keys.map(F=>F.name))),v=d.stringify(m)}else if("path"in l)v=l.path,d=n.find(F=>F.re.test(v)),d&&(m=d.parse(v),w=d.record.name);else{if(d=h.name?s.get(h.name):n.find(F=>F.re.test(h.path)),!d)throw _s(1,{location:l,currentLocation:h});w=d.record.name,m=ae({},h.params,l.params),v=d.stringify(m)}const C=[];let R=d;for(;R;)C.unshift(R.record),R=R.parent;return{name:w,path:v,params:m,matched:C,meta:$v(C)}}return t.forEach(l=>i(l)),{addRoute:i,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function Tl(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Lv(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Fv(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Fv(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="boolean"?n:n[s];return e}function bl(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function $v(t){return t.reduce((e,n)=>ae(e,n.meta),{})}function Sl(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function Vf(t,e){return e.children.some(n=>n===t||Vf(t,n))}const Bf=/#/g,Uv=/&/g,Vv=/\//g,Bv=/=/g,jv=/\?/g,jf=/\+/g,qv=/%5B/g,zv=/%5D/g,qf=/%5E/g,Hv=/%60/g,zf=/%7B/g,Kv=/%7C/g,Hf=/%7D/g,Gv=/%20/g;function Pc(t){return encodeURI(""+t).replace(Kv,"|").replace(qv,"[").replace(zv,"]")}function Wv(t){return Pc(t).replace(zf,"{").replace(Hf,"}").replace(qf,"^")}function Na(t){return Pc(t).replace(jf,"%2B").replace(Gv,"+").replace(Bf,"%23").replace(Uv,"%26").replace(Hv,"`").replace(zf,"{").replace(Hf,"}").replace(qf,"^")}function Qv(t){return Na(t).replace(Bv,"%3D")}function Jv(t){return Pc(t).replace(Bf,"%23").replace(jv,"%3F")}function Xv(t){return t==null?"":Jv(t).replace(Vv,"%2F")}function Ci(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Yv(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(jf," "),o=i.indexOf("="),a=Ci(o<0?i:i.slice(0,o)),c=o<0?null:Ci(i.slice(o+1));if(a in e){let u=e[a];Ct(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function Il(t){let e="";for(let n in t){const s=t[n];if(n=Qv(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Ct(s)?s.map(i=>i&&Na(i)):[s&&Na(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function Zv(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Ct(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const ew=Symbol(""),Cl=Symbol(""),Lc=Symbol(""),Kf=Symbol(""),ka=Symbol("");function Ks(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function cn(t,e,n,s,r){const i=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(_s(4,{from:n,to:e})):h instanceof Error?a(h):Iv(h)?a(_s(2,{from:e,to:h})):(i&&s.enterCallbacks[r]===i&&typeof h=="function"&&i.push(h),o())},u=t.call(s&&s.instances[r],e,n,c);let l=Promise.resolve(u);t.length<3&&(l=l.then(c)),l.catch(h=>a(h))})}function Wo(t,e,n,s){const r=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(tw(a)){const u=(a.__vccOpts||a)[e];u&&r.push(cn(u,n,s,i,o))}else{let c=a();r.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const l=av(u)?u.default:u;i.components[o]=l;const d=(l.__vccOpts||l)[e];return d&&cn(d,n,s,i,o)()}))}}return r}function tw(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Al(t){const e=Qt(Lc),n=Qt(Kf),s=pt(()=>e.resolve(us(t.to))),r=pt(()=>{const{matched:c}=s.value,{length:u}=c,l=c[u-1],h=n.matched;if(!l||!h.length)return-1;const d=h.findIndex(Es.bind(null,l));if(d>-1)return d;const m=Rl(c[u-2]);return u>1&&Rl(l)===m&&h[h.length-1].path!==m?h.findIndex(Es.bind(null,c[u-2])):d}),i=pt(()=>r.value>-1&&iw(n.params,s.value.params)),o=pt(()=>r.value>-1&&r.value===n.matched.length-1&&Lf(n.params,s.value.params));function a(c={}){return rw(c)?e[us(t.replace)?"replace":"push"](us(t.to)).catch(rr):Promise.resolve()}return{route:s,href:pt(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}const nw=at({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Al,setup(t,{slots:e}){const n=Nr(Al(t)),{options:s}=Qt(Lc),r=pt(()=>({[xl(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[xl(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:Pf("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),sw=nw;function rw(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function iw(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Ct(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Rl(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const xl=(t,e,n)=>t??e??n,ow=at({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Qt(ka),r=pt(()=>t.route||s.value),i=Qt(Cl,0),o=pt(()=>{let u=us(i);const{matched:l}=r.value;let h;for(;(h=l[u])&&!h.components;)u++;return u}),a=pt(()=>r.value.matched[o.value]);di(Cl,pt(()=>o.value+1)),di(ew,a),di(ka,r);const c=Cg();return pi(()=>[c.value,a.value,t.name],([u,l,h],[d,m,v])=>{l&&(l.instances[h]=u,m&&m!==l&&u&&u===d&&(l.leaveGuards.size||(l.leaveGuards=m.leaveGuards),l.updateGuards.size||(l.updateGuards=m.updateGuards))),u&&l&&(!m||!Es(l,m)||!d)&&(l.enterCallbacks[h]||[]).forEach(w=>w(u))},{flush:"post"}),()=>{const u=r.value,l=t.name,h=a.value,d=h&&h.components[l];if(!d)return Dl(n.default,{Component:d,route:u});const m=h.props[l],v=m?m===!0?u.params:typeof m=="function"?m(u):m:null,C=Pf(d,ae({},v,e,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(h.instances[l]=null)},ref:c}));return Dl(n.default,{Component:C,route:u})||C}}});function Dl(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const aw=ow;function cw(t){const e=Pv(t.routes,t),n=t.parseQuery||Yv,s=t.stringifyQuery||Il,r=t.history,i=Ks(),o=Ks(),a=Ks(),c=Ag(on);let u=on;ts&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=Ko.bind(null,E=>""+E),h=Ko.bind(null,Xv),d=Ko.bind(null,Ci);function m(E,O){let D,$;return $f(E)?(D=e.getRecordMatcher(E),$=O):$=E,e.addRoute($,D)}function v(E){const O=e.getRecordMatcher(E);O&&e.removeRoute(O)}function w(){return e.getRoutes().map(E=>E.record)}function C(E){return!!e.getRecordMatcher(E)}function R(E,O){if(O=ae({},O||c.value),typeof E=="string"){const f=Go(n,E,O.path),p=e.resolve({path:f.path},O),g=r.createHref(f.fullPath);return ae(f,p,{params:d(p.params),hash:Ci(f.hash),redirectedFrom:void 0,href:g})}let D;if("path"in E)D=ae({},E,{path:Go(n,E.path,O.path).path});else{const f=ae({},E.params);for(const p in f)f[p]==null&&delete f[p];D=ae({},E,{params:h(E.params)}),O.params=h(O.params)}const $=e.resolve(D,O),te=E.hash||"";$.params=l(d($.params));const Ee=lv(s,ae({},E,{hash:Wv(te),path:$.path})),J=r.createHref(Ee);return ae({fullPath:Ee,hash:te,query:s===Il?Zv(E.query):E.query||{}},$,{redirectedFrom:void 0,href:J})}function F(E){return typeof E=="string"?Go(n,E,c.value.path):ae({},E)}function M(E,O){if(u!==E)return _s(8,{from:O,to:E})}function Z(E){return ft(E)}function Te(E){return Z(ae(F(E),{replace:!0}))}function Ve(E){const O=E.matched[E.matched.length-1];if(O&&O.redirect){const{redirect:D}=O;let $=typeof D=="function"?D(E):D;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=F($):{path:$},$.params={}),ae({query:E.query,hash:E.hash,params:"path"in $?{}:E.params},$)}}function ft(E,O){const D=u=R(E),$=c.value,te=E.state,Ee=E.force,J=E.replace===!0,f=Ve(D);if(f)return ft(ae(F(f),{state:typeof f=="object"?ae({},te,f.state):te,force:Ee,replace:J}),O||D);const p=D;p.redirectedFrom=O;let g;return!Ee&&hv(s,$,D)&&(g=_s(16,{to:p,from:$}),Sn($,$,!0,!1)),(g?Promise.resolve(g):Wn(p,$)).catch(y=>zt(y)?zt(y,2)?y:yt(y):fe(y,p,$)).then(y=>{if(y){if(zt(y,2))return ft(ae({replace:J},F(y.to),{state:typeof y.to=="object"?ae({},te,y.to.state):te,force:Ee}),O||p)}else y=sn(p,$,!0,J,te);return Rt(p,$,y),y})}function dt(E,O){const D=M(E,O);return D?Promise.reject(D):Promise.resolve()}function Wn(E,O){let D;const[$,te,Ee]=uw(E,O);D=Wo($.reverse(),"beforeRouteLeave",E,O);for(const f of $)f.leaveGuards.forEach(p=>{D.push(cn(p,E,O))});const J=dt.bind(null,E,O);return D.push(J),Yn(D).then(()=>{D=[];for(const f of i.list())D.push(cn(f,E,O));return D.push(J),Yn(D)}).then(()=>{D=Wo(te,"beforeRouteUpdate",E,O);for(const f of te)f.updateGuards.forEach(p=>{D.push(cn(p,E,O))});return D.push(J),Yn(D)}).then(()=>{D=[];for(const f of E.matched)if(f.beforeEnter&&!O.matched.includes(f))if(Ct(f.beforeEnter))for(const p of f.beforeEnter)D.push(cn(p,E,O));else D.push(cn(f.beforeEnter,E,O));return D.push(J),Yn(D)}).then(()=>(E.matched.forEach(f=>f.enterCallbacks={}),D=Wo(Ee,"beforeRouteEnter",E,O),D.push(J),Yn(D))).then(()=>{D=[];for(const f of o.list())D.push(cn(f,E,O));return D.push(J),Yn(D)}).catch(f=>zt(f,8)?f:Promise.reject(f))}function Rt(E,O,D){for(const $ of a.list())$(E,O,D)}function sn(E,O,D,$,te){const Ee=M(E,O);if(Ee)return Ee;const J=O===on,f=ts?history.state:{};D&&($||J?r.replace(E.fullPath,ae({scroll:J&&f&&f.scroll},te)):r.push(E.fullPath,te)),c.value=E,Sn(E,O,D,J),yt()}let xt;function Qn(){xt||(xt=r.listen((E,O,D)=>{if(!Qr.listening)return;const $=R(E),te=Ve($);if(te){ft(ae(te,{replace:!0}),$).catch(rr);return}u=$;const Ee=c.value;ts&&wv(yl(Ee.fullPath,D.delta),ao()),Wn($,Ee).catch(J=>zt(J,12)?J:zt(J,2)?(ft(J.to,$).then(f=>{zt(f,20)&&!D.delta&&D.type===wr.pop&&r.go(-1,!1)}).catch(rr),Promise.reject()):(D.delta&&r.go(-D.delta,!1),fe(J,$,Ee))).then(J=>{J=J||sn($,Ee,!1),J&&(D.delta&&!zt(J,8)?r.go(-D.delta,!1):D.type===wr.pop&&zt(J,20)&&r.go(-1,!1)),Rt($,Ee,J)}).catch(rr)}))}let bn=Ks(),qs=Ks(),Ie;function fe(E,O,D){yt(E);const $=qs.list();return $.length?$.forEach(te=>te(E,O,D)):console.error(E),Promise.reject(E)}function ue(){return Ie&&c.value!==on?Promise.resolve():new Promise((E,O)=>{bn.add([E,O])})}function yt(E){return Ie||(Ie=!E,Qn(),bn.list().forEach(([O,D])=>E?D(E):O()),bn.reset()),E}function Sn(E,O,D,$){const{scrollBehavior:te}=t;if(!ts||!te)return Promise.resolve();const Ee=!D&&Ev(yl(E.fullPath,0))||($||!D)&&history.state&&history.state.scroll||null;return lf().then(()=>te(E,O,Ee)).then(J=>J&&vv(J)).catch(J=>fe(J,E,O))}const vt=E=>r.go(E);let st;const Jn=new Set,Qr={currentRoute:c,listening:!0,addRoute:m,removeRoute:v,hasRoute:C,getRoutes:w,resolve:R,options:t,push:Z,replace:Te,go:vt,back:()=>vt(-1),forward:()=>vt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:qs.add,isReady:ue,install(E){const O=this;E.component("RouterLink",sw),E.component("RouterView",aw),E.config.globalProperties.$router=O,Object.defineProperty(E.config.globalProperties,"$route",{enumerable:!0,get:()=>us(c)}),ts&&!st&&c.value===on&&(st=!0,Z(r.location).catch(te=>{}));const D={};for(const te in on)D[te]=pt(()=>c.value[te]);E.provide(Lc,O),E.provide(Kf,Nr(D)),E.provide(ka,c);const $=E.unmount;Jn.add(E),E.unmount=function(){Jn.delete(E),Jn.size<1&&(u=on,xt&&xt(),xt=null,c.value=on,st=!1,Ie=!1),$()}}};return Qr}function Yn(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function uw(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Es(u,a))?s.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(u=>Es(u,c))||r.push(c))}return[n,s,r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},lw=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Wf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,l=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|u>>6,m=u&63;c||(m=64,o||(d=64)),s.push(n[l],n[h],n[d],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Gf(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||u==null||h==null)throw new hw;const d=i<<2|a>>4;if(s.push(d),u!==64){const m=a<<4&240|u>>2;if(s.push(m),h!==64){const v=u<<6&192|h;s.push(v)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fw=function(t){const e=Gf(t);return Wf.encodeByteArray(e,!0)},Ai=function(t){return fw(t).replace(/\./g,"")},dw=function(t){try{return Wf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=()=>pw().__FIREBASE_DEFAULTS__,gw=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dw(t[1]);return e&&JSON.parse(e)},Qf=()=>{try{return mw()||gw()||yw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vw=t=>{var e,n;return(n=(e=Qf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ww=t=>{const e=vw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Ew=()=>{var t;return(t=Qf())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ai(JSON.stringify(n)),Ai(JSON.stringify(o)),a].join(".")}function bw(){try{return typeof indexedDB=="object"}catch{return!1}}function Sw(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="FirebaseError";class Ls extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Iw,Object.setPrototypeOf(this,Ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jf.prototype.create)}}class Jf{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Cw(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ls(r,a,s)}}function Cw(t,e){return t.replace(Aw,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Aw=/\{\$([^}]+)}/g;function Ma(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Nl(i)&&Nl(o)){if(!Ma(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Nl(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t){return t&&t._delegate?t._delegate:t}class Er{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new _w;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Dw(e))try{this.getOrInitializeService({instanceIdentifier:Rn})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Rn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rn){return this.instances.has(e)}getOptions(e=Rn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:xw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Rn){return this.component?this.component.multipleInstances?e:Rn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xw(t){return t===Rn?void 0:t}function Dw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Rw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const kw={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},Mw=oe.INFO,Ow={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},Pw=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Ow[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xf{constructor(e){this.name=e,this._logLevel=Mw,this._logHandler=Pw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const Lw=(t,e)=>e.some(n=>t instanceof n);let kl,Ml;function Fw(){return kl||(kl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $w(){return Ml||(Ml=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yf=new WeakMap,Oa=new WeakMap,Zf=new WeakMap,Qo=new WeakMap,Fc=new WeakMap;function Uw(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(fn(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Yf.set(n,t)}).catch(()=>{}),Fc.set(e,t),e}function Vw(t){if(Oa.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Oa.set(t,e)}let Pa={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Oa.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zf.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Bw(t){Pa=t(Pa)}function jw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Jo(this),e,...n);return Zf.set(s,e.sort?e.sort():[e]),fn(s)}:$w().includes(t)?function(...e){return t.apply(Jo(this),e),fn(Yf.get(this))}:function(...e){return fn(t.apply(Jo(this),e))}}function qw(t){return typeof t=="function"?jw(t):(t instanceof IDBTransaction&&Vw(t),Lw(t,Fw())?new Proxy(t,Pa):t)}function fn(t){if(t instanceof IDBRequest)return Uw(t);if(Qo.has(t))return Qo.get(t);const e=qw(t);return e!==t&&(Qo.set(t,e),Fc.set(e,t)),e}const Jo=t=>Fc.get(t);function zw(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=fn(o);return s&&o.addEventListener("upgradeneeded",c=>{s(fn(o.result),c.oldVersion,c.newVersion,fn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Hw=["get","getKey","getAll","getAllKeys","count"],Kw=["put","add","delete","clear"],Xo=new Map;function Ol(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xo.get(e))return Xo.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=Kw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Hw.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&c.done]))[0]};return Xo.set(e,i),i}Bw(t=>({...t,get:(e,n,s)=>Ol(e,n)||t.get(e,n,s),has:(e,n)=>!!Ol(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ww(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Ww(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const La="@firebase/app",Pl="0.9.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new Xf("@firebase/app"),Qw="@firebase/app-compat",Jw="@firebase/analytics-compat",Xw="@firebase/analytics",Yw="@firebase/app-check-compat",Zw="@firebase/app-check",e0="@firebase/auth",t0="@firebase/auth-compat",n0="@firebase/database",s0="@firebase/database-compat",r0="@firebase/functions",i0="@firebase/functions-compat",o0="@firebase/installations",a0="@firebase/installations-compat",c0="@firebase/messaging",u0="@firebase/messaging-compat",l0="@firebase/performance",h0="@firebase/performance-compat",f0="@firebase/remote-config",d0="@firebase/remote-config-compat",p0="@firebase/storage",m0="@firebase/storage-compat",g0="@firebase/firestore",y0="@firebase/firestore-compat",v0="firebase",w0="9.21.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="[DEFAULT]",E0={[La]:"fire-core",[Qw]:"fire-core-compat",[Xw]:"fire-analytics",[Jw]:"fire-analytics-compat",[Zw]:"fire-app-check",[Yw]:"fire-app-check-compat",[e0]:"fire-auth",[t0]:"fire-auth-compat",[n0]:"fire-rtdb",[s0]:"fire-rtdb-compat",[r0]:"fire-fn",[i0]:"fire-fn-compat",[o0]:"fire-iid",[a0]:"fire-iid-compat",[c0]:"fire-fcm",[u0]:"fire-fcm-compat",[l0]:"fire-perf",[h0]:"fire-perf-compat",[f0]:"fire-rc",[d0]:"fire-rc-compat",[p0]:"fire-gcs",[m0]:"fire-gcs-compat",[g0]:"fire-fst",[y0]:"fire-fst-compat","fire-js":"fire-js",[v0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new Map,$a=new Map;function _0(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xi(t){const e=t.name;if($a.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;$a.set(e,t);for(const n of Ri.values())_0(n,t);return!0}function T0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},dn=new Jf("app","Firebase",b0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=w0;function ed(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Fa,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw dn.create("bad-app-name",{appName:String(r)});if(n||(n=Ew()),!n)throw dn.create("no-options");const i=Ri.get(r);if(i){if(Ma(n,i.options)&&Ma(s,i.config))return i;throw dn.create("duplicate-app",{appName:r})}const o=new Nw(r);for(const c of $a.values())o.addComponent(c);const a=new S0(n,s,o);return Ri.set(r,a),a}function C0(t=Fa){const e=Ri.get(t);if(!e&&t===Fa)return ed();if(!e)throw dn.create("no-app",{appName:t});return e}function hs(t,e,n){var s;let r=(s=E0[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(a.join(" "));return}xi(new Er(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="firebase-heartbeat-database",R0=1,_r="firebase-heartbeat-store";let Yo=null;function td(){return Yo||(Yo=zw(A0,R0,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_r)}}}).catch(t=>{throw dn.create("idb-open",{originalErrorMessage:t.message})})),Yo}async function x0(t){try{return(await td()).transaction(_r).objectStore(_r).get(nd(t))}catch(e){if(e instanceof Ls)Bn.warn(e.message);else{const n=dn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bn.warn(n.message)}}}async function Ll(t,e){try{const s=(await td()).transaction(_r,"readwrite");return await s.objectStore(_r).put(e,nd(t)),s.done}catch(n){if(n instanceof Ls)Bn.warn(n.message);else{const s=dn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bn.warn(s.message)}}}function nd(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=1024,N0=30*24*60*60*1e3;class k0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new O0(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Fl();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const i=new Date(r.date).valueOf();return Date.now()-i<=N0}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Fl(),{heartbeatsToSend:n,unsentEntries:s}=M0(this._heartbeatsCache.heartbeats),r=Ai(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Fl(){return new Date().toISOString().substring(0,10)}function M0(t,e=D0){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),$l(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),$l(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class O0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bw()?Sw().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await x0(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ll(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ll(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $l(t){return Ai(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t){xi(new Er("platform-logger",e=>new Gw(e),"PRIVATE")),xi(new Er("heartbeat",e=>new k0(e),"PRIVATE")),hs(La,Pl,t),hs(La,Pl,"esm2017"),hs("fire-js","")}P0("");var L0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N,$c=$c||{},z=L0||self;function Di(){}function co(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function kr(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function F0(t){return Object.prototype.hasOwnProperty.call(t,Zo)&&t[Zo]||(t[Zo]=++$0)}var Zo="closure_uid_"+(1e9*Math.random()>>>0),$0=0;function U0(t,e,n){return t.call.apply(t.bind,arguments)}function V0(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,s),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function We(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?We=U0:We=V0,We.apply(null,arguments)}function ni(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function Pe(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(s,r,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(s,o)}}function En(){this.s=this.s,this.o=this.o}var B0=0;En.prototype.s=!1;En.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),B0!=0)&&F0(this)};En.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sd=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Uc(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function Ul(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(co(s)){const r=t.length||0,i=s.length||0;t.length=r+i;for(let o=0;o<i;o++)t[r+o]=s[o]}else t.push(s)}}function Qe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Qe.prototype.h=function(){this.defaultPrevented=!0};var j0=function(){if(!z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{z.addEventListener("test",Di,e),z.removeEventListener("test",Di,e)}catch{}return t}();function Ni(t){return/^[\s\xa0]*$/.test(t)}var Vl=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ea(t,e){return t<e?-1:t>e?1:0}function uo(){var t=z.navigator;return t&&(t=t.userAgent)?t:""}function Ot(t){return uo().indexOf(t)!=-1}function Vc(t){return Vc[" "](t),t}Vc[" "]=Di;function rd(t,e,n){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=n(e)}var q0=Ot("Opera"),Ts=Ot("Trident")||Ot("MSIE"),id=Ot("Edge"),Ua=id||Ts,od=Ot("Gecko")&&!(uo().toLowerCase().indexOf("webkit")!=-1&&!Ot("Edge"))&&!(Ot("Trident")||Ot("MSIE"))&&!Ot("Edge"),z0=uo().toLowerCase().indexOf("webkit")!=-1&&!Ot("Edge");function ad(){var t=z.document;return t?t.documentMode:void 0}var ki;e:{var ta="",na=function(){var t=uo();if(od)return/rv:([^\);]+)(\)|;)/.exec(t);if(id)return/Edge\/([\d\.]+)/.exec(t);if(Ts)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(z0)return/WebKit\/(\S+)/.exec(t);if(q0)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(na&&(ta=na?na[1]:""),Ts){var sa=ad();if(sa!=null&&sa>parseFloat(ta)){ki=String(sa);break e}}ki=ta}var H0={};function K0(){return rd(H0,9,function(){let t=0;const e=Vl(String(ki)).split("."),n=Vl("9").split("."),s=Math.max(e.length,n.length);for(let o=0;t==0&&o<s;o++){var r=e[o]||"",i=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r[0].length==0&&i[0].length==0)break;t=ea(r[1].length==0?0:parseInt(r[1],10),i[1].length==0?0:parseInt(i[1],10))||ea(r[2].length==0,i[2].length==0)||ea(r[2],i[2]),r=r[3],i=i[3]}while(t==0)}return 0<=t})}var Va;if(z.document&&Ts){var Bl=ad();Va=Bl||parseInt(ki,10)||void 0}else Va=void 0;var G0=Va;function Tr(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(od){e:{try{Vc(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:W0[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Tr.$.h.call(this)}}Pe(Tr,Qe);var W0={2:"touch",3:"pen",4:"mouse"};Tr.prototype.h=function(){Tr.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Mr="closure_listenable_"+(1e6*Math.random()|0),Q0=0;function J0(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=r,this.key=++Q0,this.fa=this.ia=!1}function lo(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Bc(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function cd(t){const e={};for(const n in t)e[n]=t[n];return e}const jl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ud(t,e){let n,s;for(let r=1;r<arguments.length;r++){s=arguments[r];for(n in s)t[n]=s[n];for(let i=0;i<jl.length;i++)n=jl[i],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function ho(t){this.src=t,this.g={},this.h=0}ho.prototype.add=function(t,e,n,s,r){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=ja(t,e,s,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new J0(e,this.src,i,!!s,r),e.ia=n,t.push(e)),e};function Ba(t,e){var n=e.type;if(n in t.g){var s=t.g[n],r=sd(s,e),i;(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(lo(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ja(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==s)return r}return-1}var jc="closure_lm_"+(1e6*Math.random()|0),ra={};function ld(t,e,n,s,r){if(s&&s.once)return fd(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)ld(t,e[i],n,s,r);return null}return n=Hc(n),t&&t[Mr]?t.O(e,n,kr(s)?!!s.capture:!!s,r):hd(t,e,n,!1,s,r)}function hd(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=kr(r)?!!r.capture:!!r,a=zc(t);if(a||(t[jc]=a=new ho(t)),n=a.add(e,n,s,o,i),n.proxy)return n;if(s=X0(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)j0||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(pd(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function X0(){function t(n){return e.call(t.src,t.listener,n)}const e=Y0;return t}function fd(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)fd(t,e[i],n,s,r);return null}return n=Hc(n),t&&t[Mr]?t.P(e,n,kr(s)?!!s.capture:!!s,r):hd(t,e,n,!0,s,r)}function dd(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)dd(t,e[i],n,s,r);else s=kr(s)?!!s.capture:!!s,n=Hc(n),t&&t[Mr]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=ja(i,n,s,r),-1<n&&(lo(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=zc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ja(e,n,s,r)),(n=-1<t?e[t]:null)&&qc(n))}function qc(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Mr])Ba(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(pd(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=zc(e))?(Ba(n,t),n.h==0&&(n.src=null,e[jc]=null)):lo(t)}}}function pd(t){return t in ra?ra[t]:ra[t]="on"+t}function Y0(t,e){if(t.fa)t=!0;else{e=new Tr(e,this);var n=t.listener,s=t.la||t.src;t.ia&&qc(t),t=n.call(s,e)}return t}function zc(t){return t=t[jc],t instanceof ho?t:null}var ia="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hc(t){return typeof t=="function"?t:(t[ia]||(t[ia]=function(e){return t.handleEvent(e)}),t[ia])}function Oe(){En.call(this),this.i=new ho(this),this.S=this,this.J=null}Pe(Oe,En);Oe.prototype[Mr]=!0;Oe.prototype.removeEventListener=function(t,e,n,s){dd(this,t,e,n,s)};function Ue(t,e){var n,s=t.J;if(s)for(n=[];s;s=s.J)n.push(s);if(t=t.S,s=e.type||e,typeof e=="string")e=new Qe(e,t);else if(e instanceof Qe)e.target=e.target||t;else{var r=e;e=new Qe(s,t),ud(e,r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=si(o,s,!0,e)&&r}if(o=e.g=t,r=si(o,s,!0,e)&&r,r=si(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)o=e.g=n[i],r=si(o,s,!1,e)&&r}Oe.prototype.N=function(){if(Oe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)lo(n[s]);delete t.g[e],t.h--}}this.J=null};Oe.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};Oe.prototype.P=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function si(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Ba(t.i,o),r=a.call(c,s)!==!1&&r}}return r&&!s.defaultPrevented}var Kc=z.JSON.stringify;function Z0(){var t=yd;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class e1{constructor(){this.h=this.g=null}add(e,n){const s=md.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var md=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new t1,t=>t.reset());class t1{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function n1(t){z.setTimeout(()=>{throw t},0)}function gd(t,e){qa||s1(),za||(qa(),za=!0),yd.add(t,e)}var qa;function s1(){var t=z.Promise.resolve(void 0);qa=function(){t.then(r1)}}var za=!1,yd=new e1;function r1(){for(var t;t=Z0();){try{t.h.call(t.g)}catch(n){n1(n)}var e=md;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}za=!1}function fo(t,e){Oe.call(this),this.h=t||1,this.g=e||z,this.j=We(this.qb,this),this.l=Date.now()}Pe(fo,Oe);N=fo.prototype;N.ga=!1;N.T=null;N.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ue(this,"tick"),this.ga&&(Gc(this),this.start()))}};N.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Gc(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}N.N=function(){fo.$.N.call(this),Gc(this),delete this.g};function Wc(t,e,n){if(typeof t=="function")n&&(t=We(t,n));else if(t&&typeof t.handleEvent=="function")t=We(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:z.setTimeout(t,e||0)}function vd(t){t.g=Wc(()=>{t.g=null,t.i&&(t.i=!1,vd(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class i1 extends En{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vd(this)}N(){super.N(),this.g&&(z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(t){En.call(this),this.h=t,this.g={}}Pe(br,En);var ql=[];function wd(t,e,n,s){Array.isArray(n)||(n&&(ql[0]=n.toString()),n=ql);for(var r=0;r<n.length;r++){var i=ld(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Ed(t){Bc(t.g,function(e,n){this.g.hasOwnProperty(n)&&qc(e)},t),t.g={}}br.prototype.N=function(){br.$.N.call(this),Ed(this)};br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function po(){this.g=!0}po.prototype.Ea=function(){this.g=!1};function o1(t,e,n,s,r,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&h[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function a1(t,e,n,s,r,i,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+`
`+n+`
`+i+" "+o})}function rs(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+u1(t,n)+(s?" "+s:"")})}function c1(t,e){t.info(function(){return"TIMEOUT: "+e})}po.prototype.info=function(){};function u1(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Kc(n)}catch{return e}}var Hn={},zl=null;function mo(){return zl=zl||new Oe}Hn.Ta="serverreachability";function _d(t){Qe.call(this,Hn.Ta,t)}Pe(_d,Qe);function Sr(t){const e=mo();Ue(e,new _d(e))}Hn.STAT_EVENT="statevent";function Td(t,e){Qe.call(this,Hn.STAT_EVENT,t),this.stat=e}Pe(Td,Qe);function et(t){const e=mo();Ue(e,new Td(e,t))}Hn.Ua="timingevent";function bd(t,e){Qe.call(this,Hn.Ua,t),this.size=e}Pe(bd,Qe);function Or(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return z.setTimeout(function(){t()},e)}var go={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Sd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Qc(){}Qc.prototype.h=null;function Hl(t){return t.h||(t.h=t.i())}function Id(){}var Pr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Jc(){Qe.call(this,"d")}Pe(Jc,Qe);function Xc(){Qe.call(this,"c")}Pe(Xc,Qe);var Ha;function yo(){}Pe(yo,Qc);yo.prototype.g=function(){return new XMLHttpRequest};yo.prototype.i=function(){return{}};Ha=new yo;function Lr(t,e,n,s){this.l=t,this.j=e,this.m=n,this.W=s||1,this.U=new br(this),this.P=l1,t=Ua?125:void 0,this.V=new fo(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Cd}function Cd(){this.i=null,this.g="",this.h=!1}var l1=45e3,Ka={},Mi={};N=Lr.prototype;N.setTimeout=function(t){this.P=t};function Ga(t,e,n){t.L=1,t.v=wo(Yt(e)),t.s=n,t.S=!0,Ad(t,null)}function Ad(t,e){t.G=Date.now(),Fr(t),t.A=Yt(t.v);var n=t.A,s=t.W;Array.isArray(s)||(s=[String(s)]),Pd(n.i,"t",s),t.C=0,n=t.l.I,t.h=new Cd,t.g=np(t.l,n?e:null,!t.s),0<t.O&&(t.M=new i1(We(t.Pa,t,t.g),t.O)),wd(t.U,t.g,"readystatechange",t.nb),e=t.I?cd(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Sr(),o1(t.j,t.u,t.A,t.m,t.W,t.s)}N.nb=function(t){t=t.target;const e=this.M;e&&Gt(t)==3?e.l():this.Pa(t)};N.Pa=function(t){try{if(t==this.g)e:{const l=Gt(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>l)&&(l!=3||Ua||this.g&&(this.h.h||this.g.ja()||Ql(this.g)))){this.J||l!=4||e==7||(e==8||0>=h?Sr(3):Sr(2)),vo(this);var n=this.g.da();this.aa=n;t:if(Rd(this)){var s=Ql(this.g);t="";var r=s.length,i=Gt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),or(this);var o="";break t}this.h.i=new z.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,a1(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.ba&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ni(a)){var u=a;break t}}u=null}if(n=u)rs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wa(this,n);else{this.i=!1,this.o=3,et(12),kn(this),or(this);break e}}this.S?(xd(this,l,o),Ua&&this.i&&l==3&&(wd(this.U,this.V,"tick",this.mb),this.V.start())):(rs(this.j,this.m,o,null),Wa(this,o)),l==4&&kn(this),this.i&&!this.J&&(l==4?Yd(this.l,this):(this.i=!1,Fr(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,et(12)):(this.o=0,et(13)),kn(this),or(this)}}}catch{}finally{}};function Rd(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function xd(t,e,n){let s=!0,r;for(;!t.J&&t.C<n.length;)if(r=h1(t,n),r==Mi){e==4&&(t.o=4,et(14),s=!1),rs(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Ka){t.o=4,et(15),rs(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else rs(t.j,t.m,r,null),Wa(t,r);Rd(t)&&r!=Mi&&r!=Ka&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,et(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.ca&&(t.ca=!0,e=t.l,e.g==t&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ru(e),e.L=!0,et(11))):(rs(t.j,t.m,n,"[Invalid Chunked Response]"),kn(t),or(t))}N.mb=function(){if(this.g){var t=Gt(this.g),e=this.g.ja();this.C<e.length&&(vo(this),xd(this,t,e),this.i&&t!=4&&Fr(this))}};function h1(t,e){var n=t.C,s=e.indexOf(`
`,n);return s==-1?Mi:(n=Number(e.substring(n,s)),isNaN(n)?Ka:(s+=1,s+n>e.length?Mi:(e=e.substr(s,n),t.C=s+n,e)))}N.cancel=function(){this.J=!0,kn(this)};function Fr(t){t.Y=Date.now()+t.P,Dd(t,t.P)}function Dd(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Or(We(t.lb,t),e)}function vo(t){t.B&&(z.clearTimeout(t.B),t.B=null)}N.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(c1(this.j,this.A),this.L!=2&&(Sr(),et(17)),kn(this),this.o=2,or(this)):Dd(this,this.Y-t)};function or(t){t.l.H==0||t.J||Yd(t.l,t)}function kn(t){vo(t);var e=t.M;e&&typeof e.ra=="function"&&e.ra(),t.M=null,Gc(t.V),Ed(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ra())}function Wa(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Qa(n.h,t))){if(!t.K&&Qa(n.h,t)&&n.H==3){try{var s=n.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var r=s;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Li(n),To(n);else break e;su(n),et(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.M&&n.A==0&&!n.v&&(n.v=Or(We(n.ib,n),6e3));if(1>=$d(n.h)&&n.na){try{n.na()}catch{}n.na=void 0}}else Mn(n,11)}else if((t.K||n.g==t)&&Li(n),!Ni(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let u=r[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.J=u[1],n.oa=u[2];const l=u[3];l!=null&&(n.qa=l,n.j.info("VER="+n.qa));const h=u[4];h!=null&&(n.Ga=h,n.j.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(s=1.5*d,n.K=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const m=t.g;if(m){const v=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var i=s.h;i.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Yc(i,i.h),i.h=null))}if(s.F){const w=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(s.Da=w,ye(s.G,s.F,w))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-t.G,n.j.info("Handshake RTT: "+n.S+"ms")),s=n;var o=t;if(s.wa=tp(s,s.I?s.oa:null,s.Y),o.K){Ud(s.h,o);var a=o,c=s.K;c&&a.setTimeout(c),a.B&&(vo(a),Fr(a)),s.g=o}else Jd(s);0<n.i.length&&bo(n)}else u[0]!="stop"&&u[0]!="close"||Mn(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Mn(n,7):nu(n):u[0]!="noop"&&n.l&&n.l.Aa(u),n.A=0)}}Sr(4)}catch{}}function f1(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(co(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function d1(t){if(t.sa&&typeof t.sa=="function")return t.sa();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(co(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function Nd(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(co(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=d1(t),s=f1(t),r=s.length,i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}var kd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function p1(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Un(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Un){this.h=e!==void 0?e:t.h,Oi(this,t.j),this.s=t.s,this.g=t.g,Pi(this,t.m),this.l=t.l,e=t.i;var n=new Ir;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Kl(this,n),this.o=t.o}else t&&(n=String(t).match(kd))?(this.h=!!e,Oi(this,n[1]||"",!0),this.s=Xs(n[2]||""),this.g=Xs(n[3]||"",!0),Pi(this,n[4]),this.l=Xs(n[5]||"",!0),Kl(this,n[6]||"",!0),this.o=Xs(n[7]||"")):(this.h=!!e,this.i=new Ir(null,this.h))}Un.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ys(e,Gl,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ys(e,Gl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ys(n,n.charAt(0)=="/"?y1:g1,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ys(n,w1)),t.join("")};function Yt(t){return new Un(t)}function Oi(t,e,n){t.j=n?Xs(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Pi(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Kl(t,e,n){e instanceof Ir?(t.i=e,E1(t.i,t.h)):(n||(e=Ys(e,v1)),t.i=new Ir(e,t.h))}function ye(t,e,n){t.i.set(e,n)}function wo(t){return ye(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Xs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ys(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,m1),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function m1(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Gl=/[#\/\?@]/g,g1=/[#\?:]/g,y1=/[#\?]/g,v1=/[#\?@]/g,w1=/#/g;function Ir(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function _n(t){t.g||(t.g=new Map,t.h=0,t.i&&p1(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}N=Ir.prototype;N.add=function(t,e){_n(this),this.i=null,t=Fs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Md(t,e){_n(t),e=Fs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Od(t,e){return _n(t),e=Fs(t,e),t.g.has(e)}N.forEach=function(t,e){_n(this),this.g.forEach(function(n,s){n.forEach(function(r){t.call(e,r,s,this)},this)},this)};N.sa=function(){_n(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const r=t[s];for(let i=0;i<r.length;i++)n.push(e[s])}return n};N.Z=function(t){_n(this);let e=[];if(typeof t=="string")Od(this,t)&&(e=e.concat(this.g.get(Fs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};N.set=function(t,e){return _n(this),this.i=null,t=Fs(this,t),Od(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};N.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Pd(t,e,n){Md(t,e),0<n.length&&(t.i=null,t.g.set(Fs(t,e),Uc(n)),t.h+=n.length)}N.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const i=encodeURIComponent(String(s)),o=this.Z(s);for(s=0;s<o.length;s++){var r=i;o[s]!==""&&(r+="="+encodeURIComponent(String(o[s]))),t.push(r)}}return this.i=t.join("&")};function Fs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function E1(t,e){e&&!t.j&&(_n(t),t.i=null,t.g.forEach(function(n,s){var r=s.toLowerCase();s!=r&&(Md(this,s),Pd(this,r,n))},t)),t.j=e}var _1=class{constructor(t,e){this.h=t,this.g=e}};function Ld(t){this.l=t||T1,z.PerformanceNavigationTiming?(t=z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(z.g&&z.g.Ka&&z.g.Ka()&&z.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var T1=10;function Fd(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function $d(t){return t.h?1:t.g?t.g.size:0}function Qa(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Yc(t,e){t.g?t.g.add(e):t.h=e}function Ud(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Ld.prototype.cancel=function(){if(this.i=Vd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Vd(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Uc(t.i)}function Zc(){}Zc.prototype.stringify=function(t){return z.JSON.stringify(t,void 0)};Zc.prototype.parse=function(t){return z.JSON.parse(t,void 0)};function b1(){this.g=new Zc}function S1(t,e,n){const s=n||"";try{Nd(t,function(r,i){let o=r;kr(r)&&(o=Kc(r)),e.push(s+i+"="+encodeURIComponent(o))})}catch(r){throw e.push(s+"type="+encodeURIComponent("_badmap")),r}}function I1(t,e){const n=new po;if(z.Image){const s=new Image;s.onload=ni(ri,n,s,"TestLoadImage: loaded",!0,e),s.onerror=ni(ri,n,s,"TestLoadImage: error",!1,e),s.onabort=ni(ri,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=ni(ri,n,s,"TestLoadImage: timeout",!1,e),z.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function ri(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch{}}function $r(t){this.l=t.fc||null,this.j=t.ob||!1}Pe($r,Qc);$r.prototype.g=function(){return new Eo(this.l,this.j)};$r.prototype.i=function(t){return function(){return t}}({});function Eo(t,e){Oe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=eu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pe(Eo,Oe);var eu=0;N=Eo.prototype;N.open=function(t,e){if(this.readyState!=eu)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Cr(this)};N.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ur(this)),this.readyState=eu};N.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Cr(this)),this.g&&(this.readyState=3,Cr(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bd(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Bd(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}N.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ur(this):Cr(this),this.readyState==3&&Bd(this)}};N.Za=function(t){this.g&&(this.response=this.responseText=t,Ur(this))};N.Ya=function(t){this.g&&(this.response=t,Ur(this))};N.ka=function(){this.g&&Ur(this)};function Ur(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Cr(t)}N.setRequestHeader=function(t,e){this.v.append(t,e)};N.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};N.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Cr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var C1=z.JSON.parse;function Se(t){Oe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=jd,this.L=this.M=!1}Pe(Se,Oe);var jd="",A1=/^https?$/i,R1=["POST","PUT"];N=Se.prototype;N.Oa=function(t){this.M=t};N.ha=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ha.g(),this.C=this.u?Hl(this.u):Hl(Ha),this.g.onreadystatechange=We(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){Wl(this,i);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const i of s.keys())n.set(i,s.get(i));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),r=z.FormData&&t instanceof z.FormData,!(0<=sd(R1,e))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Hd(this),0<this.B&&((this.L=x1(this.g))?(this.g.timeout=this.B,this.g.ontimeout=We(this.ua,this)):this.A=Wc(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Wl(this,i)}};function x1(t){return Ts&&K0()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}N.ua=function(){typeof $c<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ue(this,"timeout"),this.abort(8))};function Wl(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,qd(t),_o(t)}function qd(t){t.F||(t.F=!0,Ue(t,"complete"),Ue(t,"error"))}N.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ue(this,"complete"),Ue(this,"abort"),_o(this))};N.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_o(this,!0)),Se.$.N.call(this)};N.La=function(){this.s||(this.G||this.v||this.l?zd(this):this.kb())};N.kb=function(){zd(this)};function zd(t){if(t.h&&typeof $c<"u"&&(!t.C[1]||Gt(t)!=4||t.da()!=2)){if(t.v&&Gt(t)==4)Wc(t.La,0,t);else if(Ue(t,"readystatechange"),Gt(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=a===0){var r=String(t.I).match(kd)[1]||null;if(!r&&z.self&&z.self.location){var i=z.self.location.protocol;r=i.substr(0,i.length-1)}s=!A1.test(r?r.toLowerCase():"")}n=s}if(n)Ue(t,"complete"),Ue(t,"success");else{t.m=6;try{var o=2<Gt(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",qd(t)}}finally{_o(t)}}}}function _o(t,e){if(t.g){Hd(t);const n=t.g,s=t.C[0]?Di:null;t.g=null,t.C=null,e||Ue(t,"ready");try{n.onreadystatechange=s}catch{}}}function Hd(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(z.clearTimeout(t.A),t.A=null)}function Gt(t){return t.g?t.g.readyState:0}N.da=function(){try{return 2<Gt(this)?this.g.status:-1}catch{return-1}};N.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};N.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),C1(e)}};function Ql(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case jd:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}N.Ia=function(){return this.m};N.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Kd(t){let e="";return Bc(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function tu(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Kd(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ye(t,e,n))}function Gs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Gd(t){this.Ga=0,this.i=[],this.j=new po,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Gs("failFast",!1,t),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Gs("baseRetryDelayMs",5e3,t),this.hb=Gs("retryDelaySeedMs",1e4,t),this.eb=Gs("forwardChannelMaxRetries",2,t),this.xa=Gs("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.K=void 0,this.I=t&&t.supportsCrossDomainXhr||!1,this.J="",this.h=new Ld(t&&t.concurrentRequestLimit),this.Ja=new b1,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.j.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}N=Gd.prototype;N.qa=8;N.H=1;function nu(t){if(Wd(t),t.H==3){var e=t.W++,n=Yt(t.G);ye(n,"SID",t.J),ye(n,"RID",e),ye(n,"TYPE","terminate"),Vr(t,n),e=new Lr(t,t.j,e,void 0),e.L=2,e.v=wo(Yt(n)),n=!1,z.navigator&&z.navigator.sendBeacon&&(n=z.navigator.sendBeacon(e.v.toString(),"")),!n&&z.Image&&(new Image().src=e.v,n=!0),n||(e.g=np(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Fr(e)}ep(t)}function To(t){t.g&&(ru(t),t.g.cancel(),t.g=null)}function Wd(t){To(t),t.u&&(z.clearTimeout(t.u),t.u=null),Li(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&z.clearTimeout(t.m),t.m=null)}function bo(t){Fd(t.h)||t.m||(t.m=!0,gd(t.Na,t),t.C=0)}function D1(t,e){return $d(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.F.concat(t.i),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Or(We(t.Na,t,e),Zd(t,t.C)),t.C++,!0)}N.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new Lr(this,this.j,t,void 0);let i=this.s;if(this.U&&(i?(i=cd(i),ud(i,this.U)):i=this.U),this.o!==null||this.O||(r.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var s=this.i[n];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Qd(this,r,e),n=Yt(this.G),ye(n,"RID",t),ye(n,"CVER",22),this.F&&ye(n,"X-HTTP-Session-Id",this.F),Vr(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(Kd(i)))+"&"+e:this.o&&tu(n,this.o,i)),Yc(this.h,r),this.bb&&ye(n,"TYPE","init"),this.P?(ye(n,"$req",e),ye(n,"SID","null"),r.ba=!0,Ga(r,n,null)):Ga(r,n,e),this.H=2}}else this.H==3&&(t?Jl(this,t):this.i.length==0||Fd(this.h)||Jl(this))};function Jl(t,e){var n;e?n=e.m:n=t.W++;const s=Yt(t.G);ye(s,"SID",t.J),ye(s,"RID",n),ye(s,"AID",t.V),Vr(t,s),t.o&&t.s&&tu(s,t.o,t.s),n=new Lr(t,t.j,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.i=e.F.concat(t.i)),e=Qd(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Yc(t.h,n),Ga(n,s,e)}function Vr(t,e){t.ma&&Bc(t.ma,function(n,s){ye(e,s,n)}),t.l&&Nd({},function(n,s){ye(e,s,n)})}function Qd(t,e,n){n=Math.min(t.i.length,n);var s=t.l?We(t.l.Va,t.l,t):null;e:{var r=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=r[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<n;c++){let u=r[c].h;const l=r[c].g;if(u-=i,0>u)i=Math.max(0,r[c].h-100),a=!1;else try{S1(l,o,"req"+u+"_")}catch{s&&s(l)}}if(a){s=o.join("&");break e}}}return t=t.i.splice(0,n),e.F=t,s}function Jd(t){t.g||t.u||(t.ba=1,gd(t.Ma,t),t.A=0)}function su(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Or(We(t.Ma,t),Zd(t,t.A)),t.A++,!0)}N.Ma=function(){if(this.u=null,Xd(this),this.ca&&!(this.L||this.g==null||0>=this.S)){var t=2*this.S;this.j.info("BP detection timer enabled: "+t),this.B=Or(We(this.jb,this),t)}};N.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,et(10),To(this),Xd(this))};function ru(t){t.B!=null&&(z.clearTimeout(t.B),t.B=null)}function Xd(t){t.g=new Lr(t,t.j,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Yt(t.wa);ye(e,"RID","rpc"),ye(e,"SID",t.J),ye(e,"CI",t.M?"0":"1"),ye(e,"AID",t.V),ye(e,"TYPE","xmlhttp"),Vr(t,e),t.o&&t.s&&tu(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.oa,n.L=1,n.v=wo(Yt(e)),n.s=null,n.S=!0,Ad(n,t)}N.ib=function(){this.v!=null&&(this.v=null,To(this),su(this),et(19))};function Li(t){t.v!=null&&(z.clearTimeout(t.v),t.v=null)}function Yd(t,e){var n=null;if(t.g==e){Li(t),ru(t),t.g=null;var s=2}else if(Qa(t.h,e))n=e.F,Ud(t.h,e),s=1;else return;if(t.H!=0){if(t.ta=e.aa,e.i)if(s==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;s=mo(),Ue(s,new bd(s,n)),bo(t)}else Jd(t);else if(r=e.o,r==3||r==0&&0<t.ta||!(s==1&&D1(t,e)||s==2&&su(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:Mn(t,5);break;case 4:Mn(t,10);break;case 3:Mn(t,6);break;default:Mn(t,2)}}}function Zd(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.l||(n*=2),n*e}function Mn(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var s=We(t.pb,t);n||(n=new Un("//www.google.com/images/cleardot.gif"),z.location&&z.location.protocol=="http"||Oi(n,"https"),wo(n)),I1(n.toString(),s)}else et(2);t.H=0,t.l&&t.l.za(e),ep(t),Wd(t)}N.pb=function(t){t?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function ep(t){if(t.H=0,t.pa=[],t.l){const e=Vd(t.h);(e.length!=0||t.i.length!=0)&&(Ul(t.pa,e),Ul(t.pa,t.i),t.h.i.length=0,Uc(t.i),t.i.length=0),t.l.ya()}}function tp(t,e,n){var s=n instanceof Un?Yt(n):new Un(n,void 0);if(s.g!="")e&&(s.g=e+"."+s.g),Pi(s,s.m);else{var r=z.location;s=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var i=new Un(null,void 0);s&&Oi(i,s),e&&(i.g=e),r&&Pi(i,r),n&&(i.l=n),s=i}return n=t.F,e=t.Da,n&&e&&ye(s,n,e),ye(s,"VER",t.qa),Vr(t,s),s}function np(t,e,n){if(e&&!t.I)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Se(new $r({ob:!0})):new Se(t.va),e.Oa(t.I),e}function sp(){}N=sp.prototype;N.Ba=function(){};N.Aa=function(){};N.za=function(){};N.ya=function(){};N.Va=function(){};function Fi(){if(Ts&&!(10<=Number(G0)))throw Error("Environmental error: no available transport.")}Fi.prototype.g=function(t,e){return new ht(t,e)};function ht(t,e){Oe.call(this),this.g=new Gd(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ni(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ni(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new $s(this)}Pe(ht,Oe);ht.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var t=this.g,e=this.l,n=this.h||void 0;et(0),t.Y=e,t.ma=n||{},t.M=t.aa,t.G=tp(t,null,t.Y),bo(t)};ht.prototype.close=function(){nu(this.g)};ht.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Kc(t),t=n);e.i.push(new _1(e.fb++,t)),e.H==3&&bo(e)};ht.prototype.N=function(){this.g.l=null,delete this.j,nu(this.g),delete this.g,ht.$.N.call(this)};function rp(t){Jc.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Pe(rp,Jc);function ip(){Xc.call(this),this.status=1}Pe(ip,Xc);function $s(t){this.g=t}Pe($s,sp);$s.prototype.Ba=function(){Ue(this.g,"a")};$s.prototype.Aa=function(t){Ue(this.g,new rp(t))};$s.prototype.za=function(t){Ue(this.g,new ip)};$s.prototype.ya=function(){Ue(this.g,"b")};function N1(){this.blockSize=-1}function At(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Pe(At,N1);At.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function oa(t,e,n){n||(n=0);var s=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)s[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)s[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var i=t.g[3],o=e+(i^n&(r^i))+s[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(r^e&(n^r))+s[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=r+(n^i&(e^n))+s[2]+606105819&4294967295,r=i+(o<<17&4294967295|o>>>15),o=n+(e^r&(i^e))+s[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(i^n&(r^i))+s[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(r^e&(n^r))+s[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=r+(n^i&(e^n))+s[6]+2821735955&4294967295,r=i+(o<<17&4294967295|o>>>15),o=n+(e^r&(i^e))+s[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(i^n&(r^i))+s[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(r^e&(n^r))+s[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=r+(n^i&(e^n))+s[10]+4294925233&4294967295,r=i+(o<<17&4294967295|o>>>15),o=n+(e^r&(i^e))+s[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(i^n&(r^i))+s[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(r^e&(n^r))+s[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=r+(n^i&(e^n))+s[14]+2792965006&4294967295,r=i+(o<<17&4294967295|o>>>15),o=n+(e^r&(i^e))+s[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^i&(n^r))+s[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^r&(e^n))+s[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(i^e))+s[11]+643717713&4294967295,r=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(r^i))+s[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^i&(n^r))+s[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^r&(e^n))+s[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(i^e))+s[15]+3634488961&4294967295,r=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(r^i))+s[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^i&(n^r))+s[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^r&(e^n))+s[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(i^e))+s[3]+4107603335&4294967295,r=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(r^i))+s[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^i&(n^r))+s[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^r&(e^n))+s[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(i^e))+s[7]+1735328473&4294967295,r=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(r^i))+s[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^i)+s[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^r)+s[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=r+(i^e^n)+s[11]+1839030562&4294967295,r=i+(o<<16&4294967295|o>>>16),o=n+(r^i^e)+s[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^i)+s[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^r)+s[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=r+(i^e^n)+s[7]+4139469664&4294967295,r=i+(o<<16&4294967295|o>>>16),o=n+(r^i^e)+s[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^i)+s[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^r)+s[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=r+(i^e^n)+s[3]+3572445317&4294967295,r=i+(o<<16&4294967295|o>>>16),o=n+(r^i^e)+s[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^i)+s[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^r)+s[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=r+(i^e^n)+s[15]+530742520&4294967295,r=i+(o<<16&4294967295|o>>>16),o=n+(r^i^e)+s[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~i))+s[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~r))+s[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=r+(e^(i|~n))+s[14]+2878612391&4294967295,r=i+(o<<15&4294967295|o>>>17),o=n+(i^(r|~e))+s[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~i))+s[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~r))+s[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=r+(e^(i|~n))+s[10]+4293915773&4294967295,r=i+(o<<15&4294967295|o>>>17),o=n+(i^(r|~e))+s[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~i))+s[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~r))+s[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=r+(e^(i|~n))+s[6]+2734768916&4294967295,r=i+(o<<15&4294967295|o>>>17),o=n+(i^(r|~e))+s[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~i))+s[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~r))+s[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=r+(e^(i|~n))+s[2]+718787259&4294967295,r=i+(o<<15&4294967295|o>>>17),o=n+(i^(r|~e))+s[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+i&4294967295}At.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,s=this.m,r=this.h,i=0;i<e;){if(r==0)for(;i<=n;)oa(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(s[r++]=t.charCodeAt(i++),r==this.blockSize){oa(this,s),r=0;break}}else for(;i<e;)if(s[r++]=t[i++],r==this.blockSize){oa(this,s),r=0;break}}this.h=r,this.i+=e};At.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)t[n++]=this.g[e]>>>s&255;return t};function ce(t,e){this.h=e;for(var n=[],s=!0,r=t.length-1;0<=r;r--){var i=t[r]|0;s&&i==e||(n[r]=i,s=!1)}this.g=n}var k1={};function iu(t){return-128<=t&&128>t?rd(k1,t,function(e){return new ce([e|0],0>e?-1:0)}):new ce([t|0],0>t?-1:0)}function Lt(t){if(isNaN(t)||!isFinite(t))return fs;if(0>t)return Fe(Lt(-t));for(var e=[],n=1,s=0;t>=n;s++)e[s]=t/n|0,n*=Ja;return new ce(e,0)}function op(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Fe(op(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Lt(Math.pow(e,8)),s=fs,r=0;r<t.length;r+=8){var i=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+i),e);8>i?(i=Lt(Math.pow(e,i)),s=s.R(i).add(Lt(o))):(s=s.R(n),s=s.add(Lt(o)))}return s}var Ja=4294967296,fs=iu(0),Xa=iu(1),Xl=iu(16777216);N=ce.prototype;N.ea=function(){if(mt(this))return-Fe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);t+=(0<=s?s:Ja+s)*e,e*=Ja}return t};N.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Wt(this))return"0";if(mt(this))return"-"+Fe(this).toString(t);for(var e=Lt(Math.pow(t,6)),n=this,s="";;){var r=Ui(n,e).g;n=$i(n,r.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Wt(n))return i+s;for(;6>i.length;)i="0"+i;s=i+s}};N.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Wt(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function mt(t){return t.h==-1}N.X=function(t){return t=$i(this,t),mt(t)?-1:Wt(t)?0:1};function Fe(t){for(var e=t.g.length,n=[],s=0;s<e;s++)n[s]=~t.g[s];return new ce(n,~t.h).add(Xa)}N.abs=function(){return mt(this)?Fe(this):this};N.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0,r=0;r<=e;r++){var i=s+(this.D(r)&65535)+(t.D(r)&65535),o=(i>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);s=o>>>16,i&=65535,o&=65535,n[r]=o<<16|i}return new ce(n,n[n.length-1]&-2147483648?-1:0)};function $i(t,e){return t.add(Fe(e))}N.R=function(t){if(Wt(this)||Wt(t))return fs;if(mt(this))return mt(t)?Fe(this).R(Fe(t)):Fe(Fe(this).R(t));if(mt(t))return Fe(this.R(Fe(t)));if(0>this.X(Xl)&&0>t.X(Xl))return Lt(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var r=0;r<t.g.length;r++){var i=this.D(s)>>>16,o=this.D(s)&65535,a=t.D(r)>>>16,c=t.D(r)&65535;n[2*s+2*r]+=o*c,ii(n,2*s+2*r),n[2*s+2*r+1]+=i*c,ii(n,2*s+2*r+1),n[2*s+2*r+1]+=o*a,ii(n,2*s+2*r+1),n[2*s+2*r+2]+=i*a,ii(n,2*s+2*r+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new ce(n,0)};function ii(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ws(t,e){this.g=t,this.h=e}function Ui(t,e){if(Wt(e))throw Error("division by zero");if(Wt(t))return new Ws(fs,fs);if(mt(t))return e=Ui(Fe(t),e),new Ws(Fe(e.g),Fe(e.h));if(mt(e))return e=Ui(t,Fe(e)),new Ws(Fe(e.g),e.h);if(30<t.g.length){if(mt(t)||mt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Xa,s=e;0>=s.X(t);)n=Yl(n),s=Yl(s);var r=Zn(n,1),i=Zn(s,1);for(s=Zn(s,2),n=Zn(n,2);!Wt(s);){var o=i.add(s);0>=o.X(t)&&(r=r.add(n),i=o),s=Zn(s,1),n=Zn(n,1)}return e=$i(t,r.R(e)),new Ws(r,e)}for(r=fs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),s=Math.ceil(Math.log(n)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),i=Lt(n),o=i.R(e);mt(o)||0<o.X(t);)n-=s,i=Lt(n),o=i.R(e);Wt(i)&&(i=Xa),r=r.add(i),t=$i(t,o)}return new Ws(r,t)}N.gb=function(t){return Ui(this,t).h};N.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&t.D(s);return new ce(n,this.h&t.h)};N.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|t.D(s);return new ce(n,this.h|t.h)};N.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^t.D(s);return new ce(n,this.h^t.h)};function Yl(t){for(var e=t.g.length+1,n=[],s=0;s<e;s++)n[s]=t.D(s)<<1|t.D(s-1)>>>31;return new ce(n,t.h)}function Zn(t,e){var n=e>>5;e%=32;for(var s=t.g.length-n,r=[],i=0;i<s;i++)r[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new ce(r,t.h)}Fi.prototype.createWebChannel=Fi.prototype.g;ht.prototype.send=ht.prototype.u;ht.prototype.open=ht.prototype.m;ht.prototype.close=ht.prototype.close;go.NO_ERROR=0;go.TIMEOUT=8;go.HTTP_ERROR=6;Sd.COMPLETE="complete";Id.EventType=Pr;Pr.OPEN="a";Pr.CLOSE="b";Pr.ERROR="c";Pr.MESSAGE="d";Oe.prototype.listen=Oe.prototype.O;Se.prototype.listenOnce=Se.prototype.P;Se.prototype.getLastError=Se.prototype.Sa;Se.prototype.getLastErrorCode=Se.prototype.Ia;Se.prototype.getStatus=Se.prototype.da;Se.prototype.getResponseJson=Se.prototype.Wa;Se.prototype.getResponseText=Se.prototype.ja;Se.prototype.send=Se.prototype.ha;Se.prototype.setWithCredentials=Se.prototype.Oa;At.prototype.digest=At.prototype.l;At.prototype.reset=At.prototype.reset;At.prototype.update=At.prototype.j;ce.prototype.add=ce.prototype.add;ce.prototype.multiply=ce.prototype.R;ce.prototype.modulo=ce.prototype.gb;ce.prototype.compare=ce.prototype.X;ce.prototype.toNumber=ce.prototype.ea;ce.prototype.toString=ce.prototype.toString;ce.prototype.getBits=ce.prototype.D;ce.fromNumber=Lt;ce.fromString=op;var M1=function(){return new Fi},O1=function(){return mo()},aa=go,P1=Sd,L1=Hn,Zl={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},F1=$r,oi=Id,$1=Se,U1=At,ds=ce;const eh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qe.UNAUTHENTICATED=new qe(null),qe.GOOGLE_CREDENTIALS=new qe("google-credentials-uid"),qe.FIRST_PARTY=new qe("first-party-uid"),qe.MOCK_USER=new qe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Us="9.21.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new Xf("@firebase/firestore");function th(){return jn.logLevel}function L(t,...e){if(jn.logLevel<=oe.DEBUG){const n=e.map(ou);jn.debug(`Firestore (${Us}): ${t}`,...n)}}function Zt(t,...e){if(jn.logLevel<=oe.ERROR){const n=e.map(ou);jn.error(`Firestore (${Us}): ${t}`,...n)}}function bs(t,...e){if(jn.logLevel<=oe.WARN){const n=e.map(ou);jn.warn(`Firestore (${Us}): ${t}`,...n)}}function ou(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(t="Unexpected state"){const e=`FIRESTORE (${Us}) INTERNAL ASSERTION FAILED: `+t;throw Zt(e),new Error(e)}function ge(t,e){t||q()}function W(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Ls{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qe.UNAUTHENTICATED))}shutdown(){}}class B1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class j1{constructor(e){this.t=e,this.currentUser=qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new pn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new pn,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new pn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ge(typeof s.accessToken=="string"),new ap(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string"),new qe(e)}}class q1{constructor(e,n,s){this.h=e,this.l=n,this.m=s,this.type="FirstParty",this.user=qe.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class z1{constructor(e,n,s){this.h=e,this.l=n,this.m=s}getToken(){return Promise.resolve(new q1(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K1{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const s=i=>{i.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.T;return this.T=i.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.I.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.I.getImmediate({optional:!0});i?r(i):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string"),this.T=n.token,new H1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=G1(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function se(t,e){return t<e?-1:t>e?1:0}function Ss(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new Ne(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.timestamp=e}static fromTimestamp(e){return new K(e)}static min(){return new K(new Ne(0,0))}static max(){return new K(new Ne(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,s){n===void 0?n=0:n>e.length&&q(),s===void 0?s=e.length-n:s>e.length-n&&q(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Ar.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ar?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),o=n.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends Ar{construct(e,n,s){return new ve(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new B(T.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const W1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends Ar{construct(e,n,s){return new Ke(e,n,s)}static isValidIdentifier(e){return W1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ke(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new B(T.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new B(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new B(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.path=e}static fromPath(e){return new j(ve.fromString(e))}static fromName(e){return new j(ve.fromString(e).popFirst(5))}static empty(){return new j(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new j(new ve(e.slice()))}}function Q1(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=K.fromTimestamp(s===1e9?new Ne(n+1,0):new Ne(n,s));return new yn(r,j.empty(),e)}function J1(t){return new yn(t.readTime,t.key,-1)}class yn{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new yn(K.min(),j.empty(),-1)}static max(){return new yn(K.max(),j.empty(),-1)}}function X1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=j.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Br(t){if(t.code!==T.FAILED_PRECONDITION||t.message!==Y1)throw t;L("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new S((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof S?n:S.resolve(n)}catch(n){return S.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):S.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):S.reject(n)}static resolve(e){return new S((n,s)=>{n(e)})}static reject(e){return new S((n,s)=>{s(e)})}static waitFor(e){return new S((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=S.resolve(!1);for(const s of e)n=n.next(r=>r?S.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new S((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(l=>{o[u]=l,++a,a===i&&s(o)},l=>r(l))}})}static doWhile(e,n){return new S((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function jr(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>n.writeSequenceNumber(s))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}au.ct=-1;function So(t){return t==null}function Vi(t){return t===0&&1/t==-1/0}function eE(t){return typeof t=="number"&&Number.isInteger(t)&&!Vi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Kn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function up(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,n){this.comparator=e,this.root=n||Le.EMPTY}insert(e,n){return new _e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Le.BLACK,null,null))}remove(e){return new _e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Le.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ai(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ai(this.root,e,this.comparator,!1)}getReverseIterator(){return new ai(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ai(this.root,e,this.comparator,!0)}}class ai{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Le{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Le.RED,this.left=r??Le.EMPTY,this.right=i??Le.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Le(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Le.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Le.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Le.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Le.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();const e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}}Le.EMPTY=null,Le.RED=!0,Le.BLACK=!1;Le.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(t,e,n,s,r){return this}insert(t,e,n){return new Le(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sh(this.data.getIterator())}getIteratorFrom(e){return new sh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Je(this.comparator);return n.data=e,n}}class sh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new lt([])}unionWith(e){let n=new Je(Ke.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new lt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ss(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new lp("Invalid base64 string: "+r):r}}(e);return new Xe(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const tE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vn(t){if(ge(!!t),typeof t=="string"){let e=0;const n=tE.exec(t);if(ge(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qn(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function uu(t){const e=t.mapValue.fields.__previous_value__;return cu(e)?uu(e):e}function Rr(t){const e=vn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n,s,r,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c}}class xr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new xr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof xr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cu(t)?4:sE(t)?9007199254740991:10:q()}function jt(t,e){if(t===e)return!0;const n=zn(t);if(n!==zn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rr(t).isEqual(Rr(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=vn(s.timestampValue),o=vn(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return qn(s.bytesValue).isEqual(qn(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return Re(s.geoPointValue.latitude)===Re(r.geoPointValue.latitude)&&Re(s.geoPointValue.longitude)===Re(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Re(s.integerValue)===Re(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=Re(s.doubleValue),o=Re(r.doubleValue);return i===o?Vi(i)===Vi(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Ss(t.arrayValue.values||[],e.arrayValue.values||[],jt);case 10:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(nh(i)!==nh(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!jt(i[a],o[a])))return!1;return!0}(t,e);default:return q()}}function Dr(t,e){return(t.values||[]).find(n=>jt(n,e))!==void 0}function Is(t,e){if(t===e)return 0;const n=zn(t),s=zn(e);if(n!==s)return se(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=Re(r.integerValue||r.doubleValue),a=Re(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return rh(t.timestampValue,e.timestampValue);case 4:return rh(Rr(t),Rr(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(r,i){const o=qn(r),a=qn(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const u=se(o[c],a[c]);if(u!==0)return u}return se(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=se(Re(r.latitude),Re(i.latitude));return o!==0?o:se(Re(r.longitude),Re(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,i){const o=r.values||[],a=i.values||[];for(let c=0;c<o.length&&c<a.length;++c){const u=Is(o[c],a[c]);if(u)return u}return se(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,i){if(r===ci.mapValue&&i===ci.mapValue)return 0;if(r===ci.mapValue)return 1;if(i===ci.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),c=i.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let l=0;l<a.length&&l<u.length;++l){const h=se(a[l],u[l]);if(h!==0)return h;const d=Is(o[a[l]],c[u[l]]);if(d!==0)return d}return se(a.length,u.length)}(t.mapValue,e.mapValue);default:throw q()}}function rh(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=vn(t),s=vn(e),r=se(n.seconds,s.seconds);return r!==0?r:se(n.nanos,s.nanos)}function Cs(t){return Ya(t)}function Ya(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=vn(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?qn(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,j.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(s){let r="[",i=!0;for(const o of s.values||[])i?i=!1:r+=",",r+=Ya(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${Ya(s.fields[a])}`;return i+"}"}(t.mapValue):q();var e,n}function Za(t){return!!t&&"integerValue"in t}function lu(t){return!!t&&"arrayValue"in t}function ih(t){return!!t&&"nullValue"in t}function oh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yi(t){return!!t&&"mapValue"in t}function ar(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Kn(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=ar(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ar(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.value=e}static empty(){return new it({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!yi(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ar(n)}setAll(e){let n=Ke.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=ar(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());yi(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];yi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Kn(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new it(ar(this.value))}}function hp(t){const e=[];return Kn(t.fields,(n,s)=>{const r=new Ke([n]);if(yi(s)){const i=hp(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new lt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ze(e,0,K.min(),K.min(),K.min(),it.empty(),0)}static newFoundDocument(e,n,s,r){return new ze(e,1,n,K.min(),s,r,0)}static newNoDocument(e,n){return new ze(e,2,n,K.min(),K.min(),it.empty(),0)}static newUnknownDocument(e,n){return new ze(e,3,n,K.min(),K.min(),it.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=it.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=it.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ze&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.position=e,this.inclusive=n}}function ah(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=j.comparator(j.fromName(o.referenceValue),n.key):s=Is(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function ch(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n="asc"){this.field=e,this.dir=n}}function rE(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{}class De extends fp{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new oE(e,n,s):n==="array-contains"?new uE(e,s):n==="in"?new lE(e,s):n==="not-in"?new hE(e,s):n==="array-contains-any"?new fE(e,s):new De(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new aE(e,s):new cE(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Is(n,this.value)):n!==null&&zn(this.value)===zn(n)&&this.matchesComparison(Is(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class qt extends fp{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new qt(e,n)}matches(e){return dp(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function dp(t){return t.op==="and"}function pp(t){return iE(t)&&dp(t)}function iE(t){for(const e of t.filters)if(e instanceof qt)return!1;return!0}function ec(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+Cs(t.value);if(pp(t))return t.filters.map(e=>ec(e)).join(",");{const e=t.filters.map(n=>ec(n)).join(",");return`${t.op}(${e})`}}function mp(t,e){return t instanceof De?function(n,s){return s instanceof De&&n.op===s.op&&n.field.isEqual(s.field)&&jt(n.value,s.value)}(t,e):t instanceof qt?function(n,s){return s instanceof qt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((r,i,o)=>r&&mp(i,s.filters[o]),!0):!1}(t,e):void q()}function gp(t){return t instanceof De?function(e){return`${e.field.canonicalString()} ${e.op} ${Cs(e.value)}`}(t):t instanceof qt?function(e){return e.op.toString()+" {"+e.getFilters().map(gp).join(" ,")+"}"}(t):"Filter"}class oE extends De{constructor(e,n,s){super(e,n,s),this.key=j.fromName(s.referenceValue)}matches(e){const n=j.comparator(e.key,this.key);return this.matchesComparison(n)}}class aE extends De{constructor(e,n){super(e,"in",n),this.keys=yp("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cE extends De{constructor(e,n){super(e,"not-in",n),this.keys=yp("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yp(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>j.fromName(s.referenceValue))}class uE extends De{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lu(n)&&Dr(n.arrayValue,this.value)}}class lE extends De{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dr(this.value.arrayValue,n)}}class hE extends De{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Dr(this.value.arrayValue,n)}}class fE extends De{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Dr(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ft=null}}function uh(t,e=null,n=[],s=[],r=null,i=null,o=null){return new dE(t,e,n,s,r,i,o)}function hu(t){const e=W(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>ec(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),So(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Cs(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Cs(s)).join(",")),e.ft=n}return e.ft}function fu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rE(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mp(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ch(t.startAt,e.startAt)&&ch(t.endAt,e.endAt)}function tc(t){return j.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.dt=null,this._t=null,this.startAt,this.endAt}}function pE(t,e,n,s,r,i,o,a){return new Io(t,e,n,s,r,i,o,a)}function Co(t){return new Io(t)}function lh(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mE(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function gE(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function yE(t){return t.collectionGroup!==null}function ps(t){const e=W(t);if(e.dt===null){e.dt=[];const n=gE(e),s=mE(e);if(n!==null&&s===null)n.isKeyField()||e.dt.push(new cr(n)),e.dt.push(new cr(Ke.keyField(),"asc"));else{let r=!1;for(const i of e.explicitOrderBy)e.dt.push(i),i.field.isKeyField()&&(r=!0);if(!r){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new cr(Ke.keyField(),i))}}}return e.dt}function en(t){const e=W(t);if(!e._t)if(e.limitType==="F")e._t=uh(e.path,e.collectionGroup,ps(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of ps(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new cr(i.field,o))}const s=e.endAt?new Bi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Bi(e.startAt.position,e.startAt.inclusive):null;e._t=uh(e.path,e.collectionGroup,n,e.filters,e.limit,s,r)}return e._t}function nc(t,e,n){return new Io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ao(t,e){return fu(en(t),en(e))&&t.limitType===e.limitType}function vp(t){return`${hu(en(t))}|lt:${t.limitType}`}function sc(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>gp(s)).join(", ")}]`),So(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Cs(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Cs(s)).join(",")),`Target(${n})`}(en(t))}; limitType=${t.limitType})`}function Ro(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):j.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of ps(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=ah(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,ps(n),s)||n.endAt&&!function(r,i,o){const a=ah(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,ps(n),s))}(t,e)}function vE(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wp(t){return(e,n)=>{let s=!1;for(const r of ps(t)){const i=wE(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function wE(t,e,n){const s=t.field.isKeyField()?j.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),c=o.data.field(r);return a!==null&&c!==null?Is(a,c):q()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Kn(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return up(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new _e(j.comparator);function tn(){return EE}const Ep=new _e(j.comparator);function Zs(...t){let e=Ep;for(const n of t)e=e.insert(n.key,n);return e}function _p(t){let e=Ep;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function On(){return ur()}function Tp(){return ur()}function ur(){return new Vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const _E=new _e(j.comparator),TE=new Je(j.comparator);function Y(...t){let e=TE;for(const n of t)e=e.add(n);return e}const bE=new Je(se);function SE(){return bE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vi(e)?"-0":e}}function Sp(t){return{integerValue:""+t}}function IE(t,e){return eE(e)?Sp(e):bp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this._=void 0}}function CE(t,e,n){return t instanceof ji?function(s,r){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&cu(r)&&(r=uu(r)),r&&(i.fields.__previous_value__=r),{mapValue:i}}(n,e):t instanceof As?Cp(t,e):t instanceof Rs?Ap(t,e):function(s,r){const i=Ip(s,r),o=hh(i)+hh(s.wt);return Za(i)&&Za(s.wt)?Sp(o):bp(s.serializer,o)}(t,e)}function AE(t,e,n){return t instanceof As?Cp(t,e):t instanceof Rs?Ap(t,e):n}function Ip(t,e){return t instanceof qi?Za(n=e)||function(s){return!!s&&"doubleValue"in s}(n)?e:{integerValue:0}:null;var n}class ji extends xo{}class As extends xo{constructor(e){super(),this.elements=e}}function Cp(t,e){const n=Rp(e);for(const s of t.elements)n.some(r=>jt(r,s))||n.push(s);return{arrayValue:{values:n}}}class Rs extends xo{constructor(e){super(),this.elements=e}}function Ap(t,e){let n=Rp(e);for(const s of t.elements)n=n.filter(r=>!jt(r,s));return{arrayValue:{values:n}}}class qi extends xo{constructor(e,n){super(),this.serializer=e,this.wt=n}}function hh(t){return Re(t.integerValue||t.doubleValue)}function Rp(t){return lu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){this.field=e,this.transform=n}}function RE(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof As&&s instanceof As||n instanceof Rs&&s instanceof Rs?Ss(n.elements,s.elements,jt):n instanceof qi&&s instanceof qi?jt(n.wt,s.wt):n instanceof ji&&s instanceof ji}(t.transform,e.transform)}class xE{constructor(e,n){this.version=e,this.transformResults=n}}class Ft{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ft}static exists(e){return new Ft(void 0,e)}static updateTime(e){return new Ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vi(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Do{}function Dp(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kp(t.key,Ft.none()):new qr(t.key,t.data,Ft.none());{const n=t.data,s=it.empty();let r=new Je(Ke.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Tn(t.key,s,new lt(r.toArray()),Ft.none())}}function DE(t,e,n){t instanceof qr?function(s,r,i){const o=s.value.clone(),a=dh(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Tn?function(s,r,i){if(!vi(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=dh(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(Np(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function lr(t,e,n,s){return t instanceof qr?function(r,i,o,a){if(!vi(r.precondition,i))return o;const c=r.value.clone(),u=ph(r.fieldTransforms,a,i);return c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof Tn?function(r,i,o,a){if(!vi(r.precondition,i))return o;const c=ph(r.fieldTransforms,a,i),u=i.data;return u.setAll(Np(r)),u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(l=>l.field))}(t,e,n,s):function(r,i,o){return vi(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function NE(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Ip(s.transform,r||null);i!=null&&(n===null&&(n=it.empty()),n.set(s.field,i))}return n||null}function fh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ss(n,s,(r,i)=>RE(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qr extends Do{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Tn extends Do{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Np(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function dh(t,e,n){const s=new Map;ge(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,AE(o,a,n[r]))}return s}function ph(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,CE(i,o,e))}return s}class kp extends Do{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kE extends Do{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&DE(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=lr(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=lr(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Tp();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const c=Dp(o,a);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(K.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Y())}isEqual(e){return this.batchId===e.batchId&&Ss(this.mutations,e.mutations,(n,s)=>fh(n,s))&&Ss(this.baseMutations,e.baseMutations,(n,s)=>fh(n,s))}}class du{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){ge(e.mutations.length===s.length);let r=_E;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new du(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,ee;function LE(t){switch(t){default:return q();case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0}}function Mp(t){if(t===void 0)return Zt("GRPC error has no .code"),T.UNKNOWN;switch(t){case Ae.OK:return T.OK;case Ae.CANCELLED:return T.CANCELLED;case Ae.UNKNOWN:return T.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return T.INTERNAL;case Ae.UNAVAILABLE:return T.UNAVAILABLE;case Ae.UNAUTHENTICATED:return T.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case Ae.NOT_FOUND:return T.NOT_FOUND;case Ae.ALREADY_EXISTS:return T.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return T.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case Ae.ABORTED:return T.ABORTED;case Ae.OUT_OF_RANGE:return T.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return T.UNIMPLEMENTED;case Ae.DATA_LOSS:return T.DATA_LOSS;default:return q()}}(ee=Ae||(Ae={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ui}static getOrCreateInstance(){return ui===null&&(ui=new pu),ui}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let ui=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=new ds([4294967295,4294967295],0);function mh(t){const e=FE().encode(t),n=new U1;return n.update(e),new Uint8Array(n.digest())}function gh(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ds([n,s],0),new ds([r,i],0)]}class mu{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new er(`Invalid padding: ${n}`);if(s<0)throw new er(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new er(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new er(`Invalid padding when bitmap length is 0: ${n}`);this.yt=8*e.length-n,this.It=ds.fromNumber(this.yt)}Tt(e,n,s){let r=e.add(n.multiply(ds.fromNumber(s)));return r.compare($E)===1&&(r=new ds([r.getBits(0),r.getBits(1)],0)),r.modulo(this.It).toNumber()}Et(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}At(e){if(this.yt===0)return!1;const n=mh(e),[s,r]=gh(n);for(let i=0;i<this.hashCount;i++){const o=this.Tt(s,r,i);if(!this.Et(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new mu(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.yt===0)return;const n=mh(e),[s,r]=gh(n);for(let i=0;i<this.hashCount;i++){const o=this.Tt(s,r,i);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class er extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,zr.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new No(K.min(),r,new _e(se),tn(),Y())}}class zr{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new zr(s,n,Y(),Y(),Y())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,s,r){this.vt=e,this.removedTargetIds=n,this.key=s,this.Pt=r}}class Op{constructor(e,n){this.targetId=e,this.bt=n}}class Pp{constructor(e,n,s=Xe.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class yh{constructor(){this.Vt=0,this.St=wh(),this.Dt=Xe.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return this.Vt!==0}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=Y(),n=Y(),s=Y();return this.St.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:q()}}),new zr(this.Dt,this.Ct,e,n,s)}$t(){this.xt=!1,this.St=wh()}Ft(e,n){this.xt=!0,this.St=this.St.insert(e,n)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class UE{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=tn(),this.jt=vh(),this.zt=new _e(se)}Wt(e){for(const n of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(n,e.Pt):this.Jt(n,e.key,e.Pt);for(const n of e.removedTargetIds)this.Jt(n,e.key,e.Pt)}Yt(e){this.forEachTarget(e,n=>{const s=this.Xt(n);switch(e.state){case 0:this.Zt(n)&&s.Mt(e.resumeToken);break;case 1:s.qt(),s.Nt||s.$t(),s.Mt(e.resumeToken);break;case 2:s.qt(),s.Nt||this.removeTarget(n);break;case 3:this.Zt(n)&&(s.Ut(),s.Mt(e.resumeToken));break;case 4:this.Zt(n)&&(this.te(n),s.Mt(e.resumeToken));break;default:q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Gt.forEach((s,r)=>{this.Zt(r)&&n(r)})}ee(e){var n;const s=e.targetId,r=e.bt.count,i=this.ne(s);if(i){const o=i.target;if(tc(o))if(r===0){const a=new j(o.path);this.Jt(s,a,ze.newNoDocument(a,K.min()))}else ge(r===1);else{const a=this.se(s);if(a!==r){const c=this.ie(e,a);if(c!==0){this.te(s);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(s,u)}(n=pu.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(u,l,h){var d,m,v,w,C,R;const F={localCacheCount:l,existenceFilterCount:h.count},M=h.unchangedNames;return M&&(F.bloomFilter={applied:u===0,hashCount:(d=M==null?void 0:M.hashCount)!==null&&d!==void 0?d:0,bitmapLength:(w=(v=(m=M==null?void 0:M.bits)===null||m===void 0?void 0:m.bitmap)===null||v===void 0?void 0:v.length)!==null&&w!==void 0?w:0,padding:(R=(C=M==null?void 0:M.bits)===null||C===void 0?void 0:C.padding)!==null&&R!==void 0?R:0}),F}(c,a,e.bt))}}}}ie(e,n){const{unchangedNames:s,count:r}=e.bt;if(!s||!s.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=s;let c,u;try{c=qn(i).toUint8Array()}catch(l){if(l instanceof lp)return bs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw l}try{u=new mu(c,o,a)}catch(l){return bs(l instanceof er?"BloomFilter error: ":"Applying bloom filter failed: ",l),1}return u.yt===0?1:r!==n-this.re(e.targetId,u)?2:0}re(e,n){const s=this.Kt.getRemoteKeysForTarget(e);let r=0;return s.forEach(i=>{const o=this.Kt.oe(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;n.At(a)||(this.Jt(e,i,null),r++)}),r}ue(e){const n=new Map;this.Gt.forEach((i,o)=>{const a=this.ne(o);if(a){if(i.current&&tc(a.target)){const c=new j(a.target.path);this.Qt.get(c)!==null||this.ce(o,c)||this.Jt(o,c,ze.newNoDocument(c,e))}i.kt&&(n.set(o,i.Ot()),i.$t())}});let s=Y();this.jt.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.ne(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.Qt.forEach((i,o)=>o.setReadTime(e));const r=new No(e,n,this.zt,this.Qt,s);return this.Qt=tn(),this.jt=vh(),this.zt=new _e(se),r}Ht(e,n){if(!this.Zt(e))return;const s=this.ce(e,n.key)?2:0;this.Xt(e).Ft(n.key,s),this.Qt=this.Qt.insert(n.key,n),this.jt=this.jt.insert(n.key,this.ae(n.key).add(e))}Jt(e,n,s){if(!this.Zt(e))return;const r=this.Xt(e);this.ce(e,n)?r.Ft(n,1):r.Bt(n),this.jt=this.jt.insert(n,this.ae(n).delete(e)),s&&(this.Qt=this.Qt.insert(n,s))}removeTarget(e){this.Gt.delete(e)}se(e){const n=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let n=this.Gt.get(e);return n||(n=new yh,this.Gt.set(e,n)),n}ae(e){let n=this.jt.get(e);return n||(n=new Je(se),this.jt=this.jt.insert(e,n)),n}Zt(e){const n=this.ne(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}ne(e){const n=this.Gt.get(e);return n&&n.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new yh),this.Kt.getRemoteKeysForTarget(e).forEach(n=>{this.Jt(e,n,null)})}ce(e,n){return this.Kt.getRemoteKeysForTarget(e).has(n)}}function vh(){return new _e(j.comparator)}function wh(){return new _e(j.comparator)}const VE=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),BE=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),jE=(()=>({and:"AND",or:"OR"}))();class qE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rc(t,e){return t.useProto3Json||So(e)?e:{value:e}}function zi(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lp(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zE(t,e){return zi(t,e.toTimestamp())}function $t(t){return ge(!!t),K.fromTimestamp(function(e){const n=vn(e);return new Ne(n.seconds,n.nanos)}(t))}function gu(t,e){return function(n){return new ve(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Fp(t){const e=ve.fromString(t);return ge(Bp(e)),e}function ic(t,e){return gu(t.databaseId,e.path)}function ca(t,e){const n=Fp(e);if(n.get(1)!==t.databaseId.projectId)throw new B(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j($p(n))}function oc(t,e){return gu(t.databaseId,e)}function HE(t){const e=Fp(t);return e.length===4?ve.emptyPath():$p(e)}function ac(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $p(t){return ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Eh(t,e,n){return{name:ic(t,e),fields:n.value.mapValue.fields}}function KE(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(ge(u===void 0||typeof u=="string"),Xe.fromBase64String(u||"")):(ge(u===void 0||u instanceof Uint8Array),Xe.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?T.UNKNOWN:Mp(c.code);return new B(u,c.message||"")}(o);n=new Pp(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=ca(t,s.document.name),i=$t(s.document.updateTime),o=s.document.createTime?$t(s.document.createTime):K.min(),a=new it({mapValue:{fields:s.document.fields}}),c=ze.newFoundDocument(r,i,o,a),u=s.targetIds||[],l=s.removedTargetIds||[];n=new wi(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=ca(t,s.document),i=s.readTime?$t(s.readTime):K.min(),o=ze.newNoDocument(r,i),a=s.removedTargetIds||[];n=new wi([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=ca(t,s.document),i=s.removedTargetIds||[];n=new wi([],i,r,null)}else{if(!("filter"in e))return q();{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new PE(r,i),a=s.targetId;n=new Op(a,o)}}return n}function GE(t,e){let n;if(e instanceof qr)n={update:Eh(t,e.key,e.value)};else if(e instanceof kp)n={delete:ic(t,e.key)};else if(e instanceof Tn)n={update:Eh(t,e.key,e.data),updateMask:n_(e.fieldMask)};else{if(!(e instanceof kE))return q();n={verify:ic(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof ji)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof As)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Rs)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof qi)return{fieldPath:i.field.canonicalString(),increment:o.wt};throw q()}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:zE(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:q()}(t,e.precondition)),n}function WE(t,e){return t&&t.length>0?(ge(e!==void 0),t.map(n=>function(s,r){let i=s.updateTime?$t(s.updateTime):$t(r);return i.isEqual(K.min())&&(i=$t(r)),new xE(i,s.transformResults||[])}(n,e))):[]}function QE(t,e){return{documents:[oc(t,e.path)]}}function JE(t,e){const n={structuredQuery:{}},s=e.path;e.collectionGroup!==null?(n.parent=oc(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=oc(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(c){if(c.length!==0)return Vp(qt.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const i=function(c){if(c.length!==0)return c.map(u=>function(l){return{field:ns(l.field),direction:ZE(l.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=rc(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function XE(t){let e=HE(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){ge(s===1);const l=n.from[0];l.allDescendants?r=l.collectionId:e=e.child(l.collectionId)}let i=[];n.where&&(i=function(l){const h=Up(l);return h instanceof qt&&pp(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>function(h){return new cr(ss(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(l)));let a=null;n.limit&&(a=function(l){let h;return h=typeof l=="object"?l.value:l,So(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(l){const h=!!l.before,d=l.values||[];return new Bi(d,h)}(n.startAt));let u=null;return n.endAt&&(u=function(l){const h=!l.before,d=l.values||[];return new Bi(d,h)}(n.endAt)),pE(e,r,o,i,a,"F",c,u)}function YE(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Up(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=ss(e.unaryFilter.field);return De.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=ss(e.unaryFilter.field);return De.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ss(e.unaryFilter.field);return De.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ss(e.unaryFilter.field);return De.create(i,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(t):t.fieldFilter!==void 0?function(e){return De.create(ss(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return qt.create(e.compositeFilter.filters.map(n=>Up(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return q()}}(e.compositeFilter.op))}(t):q()}function ZE(t){return VE[t]}function e_(t){return BE[t]}function t_(t){return jE[t]}function ns(t){return{fieldPath:t.canonicalString()}}function ss(t){return Ke.fromServerFormat(t.fieldPath)}function Vp(t){return t instanceof De?function(e){if(e.op==="=="){if(oh(e.value))return{unaryFilter:{field:ns(e.field),op:"IS_NAN"}};if(ih(e.value))return{unaryFilter:{field:ns(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(oh(e.value))return{unaryFilter:{field:ns(e.field),op:"IS_NOT_NAN"}};if(ih(e.value))return{unaryFilter:{field:ns(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ns(e.field),op:e_(e.op),value:e.value}}}(t):t instanceof qt?function(e){const n=e.getFilters().map(s=>Vp(s));return n.length===1?n[0]:{compositeFilter:{op:t_(e.op),filters:n}}}(t):q()}function n_(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Bp(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,s,r,i=K.min(),o=K.min(),a=Xe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new un(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new un(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e){this.le=e}}function r_(t){const e=XE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(){this.sn=new o_}addToCollectionParentIndex(e,n){return this.sn.add(n),S.resolve()}getCollectionParents(e,n){return S.resolve(this.sn.getEntries(n))}addFieldIndex(e,n){return S.resolve()}deleteFieldIndex(e,n){return S.resolve()}getDocumentsMatchingTarget(e,n){return S.resolve(null)}getIndexType(e,n){return S.resolve(0)}getFieldIndexes(e,n){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,n){return S.resolve(yn.min())}getMinOffsetFromCollectionGroup(e,n){return S.resolve(yn.min())}updateCollectionGroup(e,n,s){return S.resolve()}updateIndexEntries(e,n){return S.resolve()}}class o_{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Je(ve.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Je(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new xs(0)}static kn(){return new xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this.changes=new Vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ze.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?S.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&lr(s.mutation,r,lt.empty(),Ne.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Y()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Y()){const r=On();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Zs();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=On();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Y()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=tn();const o=ur(),a=ur();return n.forEach((c,u)=>{const l=s.get(u.key);r.has(u.key)&&(l===void 0||l.mutation instanceof Tn)?i=i.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),lr(l.mutation,u,l.mutation.getFieldMask(),Ne.now())):o.set(u.key,lt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var h;return a.set(u,new c_(l,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=ur();let r=new _e((o,a)=>o-a),i=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let l=s.get(c)||lt.empty();l=a.applyToLocalView(u,l),s.set(c,l);const h=(r.get(a.batchId)||Y()).add(c);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,l=c.value,h=Tp();l.forEach(d=>{if(!i.has(d)){const m=Dp(n.get(d),s.get(d));m!==null&&h.set(d,m),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return S.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s){return function(r){return j.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s):this.getDocumentsMatchingCollectionQuery(e,n,s)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):S.resolve(On());let a=-1,c=i;return o.next(u=>S.forEach(u,(l,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(l)?S.resolve():this.remoteDocumentCache.getEntry(e,l).next(d=>{c=c.insert(l,d)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Y())).next(l=>({batchId:a,changes:_p(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(s=>{let r=Zs();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s){const r=n.collectionGroup;let i=Zs();return this.indexManager.getCollectionParents(e,r).next(o=>S.forEach(o,a=>{const c=function(u,l){return new Io(l,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,s).next(u=>{u.forEach((l,h)=>{i=i.insert(l,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,r))).next(i=>{r.forEach((a,c)=>{const u=c.getKey();i.get(u)===null&&(i=i.insert(u,ze.newInvalidDocument(u)))});let o=Zs();return i.forEach((a,c)=>{const u=r.get(a);u!==void 0&&lr(u.mutation,c,lt.empty(),Ne.now()),Ro(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,n){return S.resolve(this.us.get(n))}saveBundleMetadata(e,n){var s;return this.us.set(n.id,{id:(s=n).id,version:s.version,createTime:$t(s.createTime)}),S.resolve()}getNamedQuery(e,n){return S.resolve(this.cs.get(n))}saveNamedQuery(e,n){return this.cs.set(n.name,function(s){return{name:s.name,query:r_(s.bundledQuery),readTime:$t(s.readTime)}}(n)),S.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.overlays=new _e(j.comparator),this.hs=new Map}getOverlay(e,n){return S.resolve(this.overlays.get(n))}getOverlays(e,n){const s=On();return S.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.de(e,n,i)}),S.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.hs.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.hs.delete(s)),S.resolve()}getOverlaysForCollection(e,n,s){const r=On(),i=n.length+1,o=new j(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return S.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new _e((u,l)=>u-l);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let l=i.get(u.largestBatchId);l===null&&(l=On(),i=i.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const a=On(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=r)););return S.resolve(a)}de(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.hs.get(r.largestBatchId).delete(s.key);this.hs.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new OE(n,s));let i=this.hs.get(n);i===void 0&&(i=Y(),this.hs.set(n,i)),this.hs.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(){this.ls=new Je(Me.fs),this.ds=new Je(Me._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,n){const s=new Me(e,n);this.ls=this.ls.add(s),this.ds=this.ds.add(s)}ws(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gs(new Me(e,n))}ys(e,n){e.forEach(s=>this.removeReference(s,n))}ps(e){const n=new j(new ve([])),s=new Me(n,e),r=new Me(n,e+1),i=[];return this.ds.forEachInRange([s,r],o=>{this.gs(o),i.push(o.key)}),i}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const n=new j(new ve([])),s=new Me(n,e),r=new Me(n,e+1);let i=Y();return this.ds.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Me(e,0),s=this.ls.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Me{constructor(e,n){this.key=e,this.Es=n}static fs(e,n){return j.comparator(e.key,n.key)||se(e.Es,n.Es)}static _s(e,n){return se(e.Es,n.Es)||j.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.As=1,this.Rs=new Je(Me.fs)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ME(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Rs=this.Rs.add(new Me(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(o)}lookupMutationBatch(e,n){return S.resolve(this.vs(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.Ps(s),i=r<0?0:r;return S.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.As-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Me(n,0),r=new Me(n,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([s,r],o=>{const a=this.vs(o.Es);i.push(a)}),S.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Je(se);return n.forEach(r=>{const i=new Me(r,0),o=new Me(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([i,o],a=>{s=s.add(a.Es)})}),S.resolve(this.bs(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;j.isDocumentKey(i)||(i=i.child(""));const o=new Me(new j(i),0);let a=new Je(se);return this.Rs.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(c.Es)),!0)},o),S.resolve(this.bs(a))}bs(e){const n=[];return e.forEach(s=>{const r=this.vs(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ge(this.Vs(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Rs;return S.forEach(n.mutations,r=>{const i=new Me(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=s})}Dn(e){}containsKey(e,n){const s=new Me(n,0),r=this.Rs.firstAfterOrEqual(s);return S.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Vs(e,n){return this.Ps(e)}Ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}vs(e){const n=this.Ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this.Ss=e,this.docs=new _e(j.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.Ss(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return S.resolve(s?s.document.mutableCopy():ze.newInvalidDocument(n))}getEntries(e,n){let s=tn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():ze.newInvalidDocument(r))}),S.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=tn();const o=n.path,a=new j(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||X1(J1(l),s)<=0||(r.has(l.key)||Ro(n,l))&&(i=i.insert(l.key,l.mutableCopy()))}return S.resolve(i)}getAllFromCollectionGroup(e,n,s,r){q()}Ds(e,n){return S.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new p_(this)}getSize(e){return S.resolve(this.size)}}class p_ extends a_{constructor(e){super(),this.rs=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.rs.addEntry(e,r)):this.rs.removeEntry(s)}),S.waitFor(n)}getFromCache(e,n){return this.rs.getEntry(e,n)}getAllFromCache(e,n){return this.rs.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.persistence=e,this.Cs=new Vs(n=>hu(n),fu),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.xs=0,this.Ns=new yu,this.targetCount=0,this.ks=xs.Nn()}forEachTarget(e,n){return this.Cs.forEach((s,r)=>n(r)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.xs&&(this.xs=n),S.resolve()}$n(e){this.Cs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ks=new xs(n),this.highestTargetId=n),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,n){return this.$n(n),this.targetCount+=1,S.resolve()}updateTargetData(e,n){return this.$n(n),S.resolve()}removeTargetData(e,n){return this.Cs.delete(n.target),this.Ns.ps(n.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Cs.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Cs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),S.waitFor(i).next(()=>r)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,n){const s=this.Cs.get(n)||null;return S.resolve(s)}addMatchingKeys(e,n,s){return this.Ns.ws(n,s),S.resolve()}removeMatchingKeys(e,n,s){this.Ns.ys(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),S.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ns.ps(n),S.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ns.Ts(n);return S.resolve(s)}containsKey(e,n){return S.resolve(this.Ns.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n){this.Ms={},this.overlays={},this.Os=new au(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new m_(this),this.indexManager=new i_,this.remoteDocumentCache=function(s){return new d_(s)}(s=>this.referenceDelegate.Bs(s)),this.serializer=new s_(n),this.Ls=new l_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new h_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Ms[e.toKey()];return s||(s=new f_(n,this.referenceDelegate),this.Ms[e.toKey()]=s),s}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,n,s){L("MemoryPersistence","Starting transaction:",e);const r=new y_(this.Os.next());return this.referenceDelegate.qs(),s(r).next(i=>this.referenceDelegate.Us(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ks(e,n){return S.or(Object.values(this.Ms).map(s=>()=>s.containsKey(e,n)))}}class y_ extends Z1{constructor(e){super(),this.currentSequenceNumber=e}}class vu{constructor(e){this.persistence=e,this.Gs=new yu,this.Qs=null}static js(e){return new vu(e)}get zs(){if(this.Qs)return this.Qs;throw q()}addReference(e,n,s){return this.Gs.addReference(s,n),this.zs.delete(s.toString()),S.resolve()}removeReference(e,n,s){return this.Gs.removeReference(s,n),this.zs.add(s.toString()),S.resolve()}markPotentiallyOrphaned(e,n){return this.zs.add(n.toString()),S.resolve()}removeTarget(e,n){this.Gs.ps(n.targetId).forEach(r=>this.zs.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.zs.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}qs(){this.Qs=new Set}Us(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.zs,s=>{const r=j.fromPath(s);return this.Ws(e,r).next(i=>{i||n.removeEntry(r,K.min())})}).next(()=>(this.Qs=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ws(e,n).next(s=>{s?this.zs.delete(n.toString()):this.zs.add(n.toString())})}Bs(e){return 0}Ws(e,n){return S.or([()=>S.resolve(this.Gs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ks(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.$i=s,this.Fi=r}static Bi(e,n){let s=Y(),r=Y();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new wu(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(){this.Li=!1}initialize(e,n){this.qi=e,this.indexManager=n,this.Li=!0}getDocumentsMatchingQuery(e,n,s,r){return this.Ui(e,n).next(i=>i||this.Ki(e,n,r,s)).next(i=>i||this.Gi(e,n))}Ui(e,n){if(lh(n))return S.resolve(null);let s=en(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=nc(n,null,"F"),s=en(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Y(...i);return this.qi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const u=this.Qi(n,a);return this.ji(n,u,o,c.readTime)?this.Ui(e,nc(n,null,"F")):this.zi(e,u,n,c)}))})))}Ki(e,n,s,r){return lh(n)||r.isEqual(K.min())?this.Gi(e,n):this.qi.getDocuments(e,s).next(i=>{const o=this.Qi(n,i);return this.ji(n,o,s,r)?this.Gi(e,n):(th()<=oe.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sc(n)),this.zi(e,o,n,Q1(r,-1)))})}Qi(e,n){let s=new Je(wp(e));return n.forEach((r,i)=>{Ro(e,i)&&(s=s.add(i))}),s}ji(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Gi(e,n){return th()<=oe.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",sc(n)),this.qi.getDocumentsMatchingQuery(e,n,yn.min())}zi(e,n,s,r){return this.qi.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n,s,r){this.persistence=e,this.Wi=n,this.serializer=r,this.Hi=new _e(se),this.Ji=new Vs(i=>hu(i),fu),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(s)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u_(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Hi))}}function E_(t,e,n,s){return new w_(t,e,n,s)}async function jp(t,e){const n=W(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Zi(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let c=Y();for(const u of r){o.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of i){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(s,c).next(u=>({tr:u,removedBatchIds:o,addedBatchIds:a}))})})}function __(t,e){const n=W(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(o,a,c,u){const l=c.batch,h=l.keys();let d=S.resolve();return h.forEach(m=>{d=d.next(()=>u.getEntry(a,m)).next(v=>{const w=c.docVersions.get(m);ge(w!==null),v.version.compareTo(w)<0&&(l.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,l))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=Y();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function qp(t){const e=W(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Fs.getLastRemoteSnapshotVersion(n))}function T_(t,e){const n=W(t),s=e.snapshotVersion;let r=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Xi.newChangeBuffer({trackRemovals:!0});r=n.Hi;const a=[];e.targetChanges.forEach((l,h)=>{const d=r.get(h);if(!d)return;a.push(n.Fs.removeMatchingKeys(i,l.removedDocuments,h).next(()=>n.Fs.addMatchingKeys(i,l.addedDocuments,h)));let m=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Xe.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):l.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(l.resumeToken,s)),r=r.insert(h,m),function(v,w,C){return v.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(d,m,l)&&a.push(n.Fs.updateTargetData(i,m))});let c=tn(),u=Y();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,l))}),a.push(b_(i,o,e.documentUpdates).next(l=>{c=l.er,u=l.nr})),!s.isEqual(K.min())){const l=n.Fs.getLastRemoteSnapshotVersion(i).next(h=>n.Fs.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(l)}return S.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Hi=r,i))}function b_(t,e,n){let s=Y(),r=Y();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=tn();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(K.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{er:o,nr:r}})}function S_(t,e){const n=W(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function I_(t,e){const n=W(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Fs.getTargetData(s,e).next(i=>i?(r=i,S.resolve(r)):n.Fs.allocateTargetId(s).next(o=>(r=new un(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Fs.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Hi.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(s.targetId,s),n.Ji.set(e,s.targetId)),s})}async function cc(t,e,n){const s=W(t),r=s.Hi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!jr(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.Hi=s.Hi.remove(e),s.Ji.delete(r.target)}function _h(t,e,n){const s=W(t);let r=K.min(),i=Y();return s.persistence.runTransaction("Execute query","readonly",o=>function(a,c,u){const l=W(a),h=l.Ji.get(u);return h!==void 0?S.resolve(l.Hi.get(h)):l.Fs.getTargetData(c,u)}(s,o,en(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Fs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>s.Wi.getDocumentsMatchingQuery(o,e,n?r:K.min(),n?i:Y())).next(a=>(C_(s,vE(e),a),{documents:a,sr:i})))}function C_(t,e,n){let s=t.Yi.get(e)||K.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Yi.set(e,s)}class Th{constructor(){this.activeTargetIds=SE()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A_{constructor(){this.Wr=new Th,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,n,s){this.Hr[e]=n}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new Th,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{Jr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let li=null;function ua(){return li===null?li=268435456+Math.round(2147483648*Math.random()):li++,"0x"+li.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je="WebChannelConnection";class N_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.wo=n+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,n,s,r,i){const o=ua(),a=this.Io(e,n);L("RestConnection",`Sending RPC '${e}' ${o}:`,a,s);const c={};return this.To(c,r,i),this.Eo(e,a,c,s).then(u=>(L("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw bs("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",s),u})}Ao(e,n,s,r,i,o){return this.po(e,n,s,r,i)}To(e,n,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Us,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}Io(e,n){const s=x_[e];return`${this.wo}/v1/${n}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,n,s,r){const i=ua();return new Promise((o,a)=>{const c=new $1;c.setWithCredentials(!0),c.listenOnce(P1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case aa.NO_ERROR:const l=c.getResponseJson();L(je,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(l)),o(l);break;case aa.TIMEOUT:L(je,`RPC '${e}' ${i} timed out`),a(new B(T.DEADLINE_EXCEEDED,"Request time out"));break;case aa.HTTP_ERROR:const h=c.getStatus();if(L(je,`RPC '${e}' ${i} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);const m=d==null?void 0:d.error;if(m&&m.status&&m.message){const v=function(w){const C=w.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(C)>=0?C:T.UNKNOWN}(m.status);a(new B(v,m.message))}else a(new B(T.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new B(T.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{L(je,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(r);L(je,`RPC '${e}' ${i} sending request:`,r),c.send(n,"POST",u,s,15)})}Ro(e,n,s){const r=ua(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=M1(),a=O1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new F1({})),this.To(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const u=i.join("");L(je,`Creating RPC '${e}' stream ${r}: ${u}`,c);const l=o.createWebChannel(u,c);let h=!1,d=!1;const m=new D_({io:w=>{d?L(je,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(h||(L(je,`Opening RPC '${e}' stream ${r} transport.`),l.open(),h=!0),L(je,`RPC '${e}' stream ${r} sending:`,w),l.send(w))},ro:()=>l.close()}),v=(w,C,R)=>{w.listen(C,F=>{try{R(F)}catch(M){setTimeout(()=>{throw M},0)}})};return v(l,oi.EventType.OPEN,()=>{d||L(je,`RPC '${e}' stream ${r} transport opened.`)}),v(l,oi.EventType.CLOSE,()=>{d||(d=!0,L(je,`RPC '${e}' stream ${r} transport closed`),m.fo())}),v(l,oi.EventType.ERROR,w=>{d||(d=!0,bs(je,`RPC '${e}' stream ${r} transport errored:`,w),m.fo(new B(T.UNAVAILABLE,"The operation could not be completed")))}),v(l,oi.EventType.MESSAGE,w=>{var C;if(!d){const R=w.data[0];ge(!!R);const F=R,M=F.error||((C=F[0])===null||C===void 0?void 0:C.error);if(M){L(je,`RPC '${e}' stream ${r} received error:`,M);const Z=M.status;let Te=function(ft){const dt=Ae[ft];if(dt!==void 0)return Mp(dt)}(Z),Ve=M.message;Te===void 0&&(Te=T.INTERNAL,Ve="Unknown error status: "+Z+" with message "+M.message),d=!0,m.fo(new B(Te,Ve)),l.close()}else L(je,`RPC '${e}' stream ${r} received:`,R),m._o(R)}}),v(a,L1.STAT_EVENT,w=>{w.stat===Zl.PROXY?L(je,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===Zl.NOPROXY&&L(je,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.lo()},0),m}}function la(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t){return new qE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,s=1e3,r=1.5,i=6e4){this.si=e,this.timerId=n,this.vo=s,this.Po=r,this.bo=i,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const n=Math.floor(this.Vo+this.No()),s=Math.max(0,Date.now()-this.Do),r=Math.max(0,n-s);r>0&&L("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Vo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){this.So!==null&&(this.So.skipDelay(),this.So=null)}cancel(){this.So!==null&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n,s,r,i,o,a,c){this.si=e,this.Mo=s,this.Oo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new zp(e,n)}qo(){return this.state===1||this.state===5||this.Uo()}Uo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Ko()}async stop(){this.qo()&&await this.close(0)}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&this.Fo===null&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}async jo(){if(this.Uo())return this.close(0)}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}async close(e,n){this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,e!==4?this.Lo.reset():n&&n.code===T.RESOURCE_EXHAUSTED?(Zt(n.toString()),Zt("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):n&&n.code===T.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Jo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.co(n)}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),n=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.$o===n&&this.Xo(s,r)},s=>{e(()=>{const r=new B(T.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Zo(r)})})}Xo(e,n){const s=this.Yo(this.$o);this.stream=this.tu(e,n),this.stream.oo(()=>{s(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(r=>{s(()=>this.Zo(r))}),this.stream.onMessage(r=>{s(()=>this.onMessage(r))})}Ko(){this.state=5,this.Lo.xo(async()=>{this.state=0,this.start()})}Zo(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return n=>{this.si.enqueueAndForget(()=>this.$o===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class k_ extends Hp{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}tu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.Lo.reset();const n=KE(this.serializer,e),s=function(r){if(!("targetChange"in r))return K.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?K.min():i.readTime?$t(i.readTime):K.min()}(e);return this.listener.eu(n,s)}nu(e){const n={};n.database=ac(this.serializer),n.addTarget=function(r,i){let o;const a=i.target;if(o=tc(a)?{documents:QE(r,a)}:{query:JE(r,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=Lp(r,i.resumeToken);const c=rc(r,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(K.min())>0){o.readTime=zi(r,i.snapshotVersion.toTimestamp());const c=rc(r,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const s=YE(this.serializer,e);s&&(n.labels=s),this.zo(n)}su(e){const n={};n.database=ac(this.serializer),n.removeTarget=e,this.zo(n)}}class M_ extends Hp{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const n=WE(e.writeResults,e.commitTime),s=$t(e.commitTime);return this.listener.uu(s,n)}return ge(!e.writeResults||e.writeResults.length===0),this.iu=!0,this.listener.cu()}au(){const e={};e.database=ac(this.serializer),this.zo(e)}ou(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>GE(this.serializer,s))};this.zo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_ extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.hu=!1}lu(){if(this.hu)throw new B(T.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,n,s){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.po(e,n,s,r,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new B(T.UNKNOWN,r.toString())})}Ao(e,n,s,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ao(e,n,s,i,o,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(T.UNKNOWN,i.toString())})}terminate(){this.hu=!0}}class P_{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){this.du===0&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){this.state==="Online"?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,e==="Online"&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(Zt(n),this.wu=!1):L("OnlineStateTracker",n)}Iu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=i,this.vu.Jr(o=>{s.enqueueAndForget(async()=>{Gn(this)&&(L("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=W(a);c.Au.add(4),await Hr(c),c.Pu.set("Unknown"),c.Au.delete(4),await Mo(c)}(this))})}),this.Pu=new P_(s,r)}}async function Mo(t){if(Gn(t))for(const e of t.Ru)await e(!0)}async function Hr(t){for(const e of t.Ru)await e(!1)}function Kp(t,e){const n=W(t);n.Eu.has(e.targetId)||(n.Eu.set(e.targetId,e),Tu(n)?_u(n):Bs(n).Uo()&&Eu(n,e))}function Gp(t,e){const n=W(t),s=Bs(n);n.Eu.delete(e),s.Uo()&&Wp(n,e),n.Eu.size===0&&(s.Uo()?s.Qo():Gn(n)&&n.Pu.set("Unknown"))}function Eu(t,e){if(t.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bs(t).nu(e)}function Wp(t,e){t.bu.Lt(e),Bs(t).su(e)}function _u(t){t.bu=new UE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),he:e=>t.Eu.get(e)||null,oe:()=>t.datastore.serializer.databaseId}),Bs(t).start(),t.Pu.mu()}function Tu(t){return Gn(t)&&!Bs(t).qo()&&t.Eu.size>0}function Gn(t){return W(t).Au.size===0}function Qp(t){t.bu=void 0}async function F_(t){t.Eu.forEach((e,n)=>{Eu(t,e)})}async function $_(t,e){Qp(t),Tu(t)?(t.Pu.pu(e),_u(t)):t.Pu.set("Unknown")}async function U_(t,e,n){if(t.Pu.set("Online"),e instanceof Pp&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.Eu.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Eu.delete(o),s.bu.removeTarget(o))}(t,e)}catch(s){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hi(t,s)}else if(e instanceof wi?t.bu.Wt(e):e instanceof Op?t.bu.ee(e):t.bu.Yt(e),!n.isEqual(K.min()))try{const s=await qp(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.bu.ue(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=r.Eu.get(c);u&&r.Eu.set(c,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const u=r.Eu.get(a);if(!u)return;r.Eu.set(a,u.withResumeToken(Xe.EMPTY_BYTE_STRING,u.snapshotVersion)),Wp(r,a);const l=new un(u.target,a,c,u.sequenceNumber);Eu(r,l)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){L("RemoteStore","Failed to raise snapshot:",s),await Hi(t,s)}}async function Hi(t,e,n){if(!jr(e))throw e;t.Au.add(1),await Hr(t),t.Pu.set("Offline"),n||(n=()=>qp(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{L("RemoteStore","Retrying IndexedDB access"),await n(),t.Au.delete(1),await Mo(t)})}function Jp(t,e){return e().catch(n=>Hi(t,n,e))}async function Oo(t){const e=W(t),n=wn(e);let s=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;V_(e);)try{const r=await S_(e.localStore,s);if(r===null){e.Tu.length===0&&n.Qo();break}s=r.batchId,B_(e,r)}catch(r){await Hi(e,r)}Xp(e)&&Yp(e)}function V_(t){return Gn(t)&&t.Tu.length<10}function B_(t,e){t.Tu.push(e);const n=wn(t);n.Uo()&&n.ru&&n.ou(e.mutations)}function Xp(t){return Gn(t)&&!wn(t).qo()&&t.Tu.length>0}function Yp(t){wn(t).start()}async function j_(t){wn(t).au()}async function q_(t){const e=wn(t);for(const n of t.Tu)e.ou(n.mutations)}async function z_(t,e,n){const s=t.Tu.shift(),r=du.from(s,e,n);await Jp(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Oo(t)}async function H_(t,e){e&&wn(t).ru&&await async function(n,s){if(r=s.code,LE(r)&&r!==T.ABORTED){const i=n.Tu.shift();wn(n).Go(),await Jp(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Oo(n)}var r}(t,e),Xp(t)&&Yp(t)}async function Sh(t,e){const n=W(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");const s=Gn(n);n.Au.add(3),await Hr(n),s&&n.Pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Au.delete(3),await Mo(n)}async function K_(t,e){const n=W(t);e?(n.Au.delete(2),await Mo(n)):e||(n.Au.add(2),await Hr(n),n.Pu.set("Unknown"))}function Bs(t){return t.Vu||(t.Vu=function(e,n,s){const r=W(e);return r.lu(),new k_(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{oo:F_.bind(null,t),co:$_.bind(null,t),eu:U_.bind(null,t)}),t.Ru.push(async e=>{e?(t.Vu.Go(),Tu(t)?_u(t):t.Pu.set("Unknown")):(await t.Vu.stop(),Qp(t))})),t.Vu}function wn(t){return t.Su||(t.Su=function(e,n,s){const r=W(e);return r.lu(),new M_(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{oo:j_.bind(null,t),co:H_.bind(null,t),cu:q_.bind(null,t),uu:z_.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Go(),await Oo(t)):(await t.Su.stop(),t.Tu.length>0&&(L("RemoteStore",`Stopping write stream with ${t.Tu.length} pending writes`),t.Tu=[]))})),t.Su}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new bu(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Su(t,e){if(Zt("AsyncQueue",`${e}: ${t}`),jr(t))return new B(T.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.comparator=e?(n,s)=>e(n,s)||j.comparator(n.key,s.key):(n,s)=>j.comparator(n.key,s.key),this.keyedMap=Zs(),this.sortedSet=new _e(this.comparator)}static emptySet(e){return new ms(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ms)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new ms;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this.Du=new _e(j.comparator)}track(e){const n=e.doc.key,s=this.Du.get(n);s?e.type!==0&&s.type===3?this.Du=this.Du.insert(n,e):e.type===3&&s.type!==1?this.Du=this.Du.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Du=this.Du.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Du=this.Du.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Du=this.Du.remove(n):e.type===1&&s.type===2?this.Du=this.Du.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Du=this.Du.insert(n,{type:2,doc:e.doc}):q():this.Du=this.Du.insert(n,e)}Cu(){const e=[];return this.Du.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ds{constructor(e,n,s,r,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ds(e,n,ms.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ao(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.xu=void 0,this.listeners=[]}}class W_{constructor(){this.queries=new Vs(e=>vp(e),Ao),this.onlineState="Unknown",this.Nu=new Set}}async function Zp(t,e){const n=W(t),s=e.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new G_),r)try{i.xu=await n.onListen(s)}catch(o){const a=Su(o,`Initialization of query '${sc(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.listeners.push(e),e.ku(n.onlineState),i.xu&&e.Mu(i.xu)&&Iu(n)}async function em(t,e){const n=W(t),s=e.query;let r=!1;const i=n.queries.get(s);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),r=i.listeners.length===0)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function Q_(t,e){const n=W(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Mu(r)&&(s=!0);o.xu=r}}s&&Iu(n)}function J_(t,e,n){const s=W(t),r=s.queries.get(e);if(r)for(const i of r.listeners)i.onError(n);s.queries.delete(e)}function Iu(t){t.Nu.forEach(e=>{e.next()})}class tm{constructor(e,n,s){this.query=e,this.Ou=n,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=s||{}}Mu(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Ds(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),n=!0):this.Lu(e,this.onlineState)&&(this.qu(e),n=!0),this.Fu=e,n}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let n=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),n=!0),n}Lu(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.Uu||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Bu(e){if(e.docChanges.length>0)return!0;const n=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qu(e){e=Ds.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){this.key=e}}class sm{constructor(e){this.key=e}}class X_{constructor(e,n){this.query=e,this.Ju=n,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Y(),this.mutatedKeys=Y(),this.Zu=wp(e),this.tc=new ms(this.Zu)}get ec(){return this.Ju}nc(e,n){const s=n?n.sc:new Ih,r=n?n.tc:this.tc;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((l,h)=>{const d=r.get(l),m=Ro(this.query,h)?h:null,v=!!d&&this.mutatedKeys.has(d.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let C=!1;d&&m?d.data.isEqual(m.data)?v!==w&&(s.track({type:3,doc:m}),C=!0):this.ic(d,m)||(s.track({type:2,doc:m}),C=!0,(c&&this.Zu(m,c)>0||u&&this.Zu(m,u)<0)&&(a=!0)):!d&&m?(s.track({type:0,doc:m}),C=!0):d&&!m&&(s.track({type:1,doc:d}),C=!0,(c||u)&&(a=!0)),C&&(m?(o=o.add(m),i=w?i.add(l):i.delete(l)):(o=o.delete(l),i=i.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),i=i.delete(l.key),s.track({type:1,doc:l})}return{tc:o,sc:s,ji:a,mutatedKeys:i}}ic(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const r=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const i=e.sc.Cu();i.sort((u,l)=>function(h,d){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return m(h)-m(d)}(u.type,l.type)||this.Zu(u.doc,l.doc)),this.rc(s);const o=n?this.oc():[],a=this.Xu.size===0&&this.current?1:0,c=a!==this.Yu;return this.Yu=a,i.length!==0||c?{snapshot:new Ds(this.query,e.tc,r,i,e.mutatedKeys,a===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),uc:o}:{uc:o}}ku(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tc:this.tc,sc:new Ih,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(n=>this.Ju=this.Ju.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ju=this.Ju.delete(n)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=Y(),this.tc.forEach(s=>{this.cc(s.key)&&(this.Xu=this.Xu.add(s.key))});const n=[];return e.forEach(s=>{this.Xu.has(s)||n.push(new sm(s))}),this.Xu.forEach(s=>{e.has(s)||n.push(new nm(s))}),n}ac(e){this.Ju=e.sr,this.Xu=Y();const n=this.nc(e.documents);return this.applyChanges(n,!0)}hc(){return Ds.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,this.Yu===0,this.hasCachedResults)}}class Y_{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Z_{constructor(e){this.key=e,this.lc=!1}}class eT{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fc={},this.dc=new Vs(a=>vp(a),Ao),this._c=new Map,this.wc=new Set,this.mc=new _e(j.comparator),this.gc=new Map,this.yc=new yu,this.Ic={},this.Tc=new Map,this.Ec=xs.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return this.Ac===!0}}async function tT(t,e){const n=hT(t);let s,r;const i=n.dc.get(e);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.hc();else{const o=await I_(n.localStore,en(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,r=await nT(n,e,s,a==="current",o.resumeToken),n.isPrimaryClient&&Kp(n.remoteStore,o)}return r}async function nT(t,e,n,s,r){t.Rc=(h,d,m)=>async function(v,w,C,R){let F=w.view.nc(C);F.ji&&(F=await _h(v.localStore,w.query,!1).then(({documents:Te})=>w.view.nc(Te,F)));const M=R&&R.targetChanges.get(w.targetId),Z=w.view.applyChanges(F,v.isPrimaryClient,M);return Ah(v,w.targetId,Z.uc),Z.snapshot}(t,h,d,m);const i=await _h(t.localStore,e,!0),o=new X_(e,i.sr),a=o.nc(i.documents),c=zr.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,c);Ah(t,n,u.uc);const l=new Y_(e,n,o);return t.dc.set(e,l),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}async function sT(t,e){const n=W(t),s=n.dc.get(e),r=n._c.get(s.targetId);if(r.length>1)return n._c.set(s.targetId,r.filter(i=>!Ao(i,e))),void n.dc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await cc(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),Gp(n.remoteStore,s.targetId),uc(n,s.targetId)}).catch(Br)):(uc(n,s.targetId),await cc(n.localStore,s.targetId,!0))}async function rT(t,e,n){const s=fT(t);try{const r=await function(i,o){const a=W(i),c=Ne.now(),u=o.reduce((d,m)=>d.add(m.key),Y());let l,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let m=tn(),v=Y();return a.Xi.getEntries(d,u).next(w=>{m=w,m.forEach((C,R)=>{R.isValidDocument()||(v=v.add(C))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,m)).next(w=>{l=w;const C=[];for(const R of o){const F=NE(R,l.get(R.key).overlayedDocument);F!=null&&C.push(new Tn(R.key,F,hp(F.value.mapValue),Ft.exists(!0)))}return a.mutationQueue.addMutationBatch(d,c,C,o)}).next(w=>{h=w;const C=w.applyToLocalDocumentSet(l,v);return a.documentOverlayCache.saveOverlays(d,w.batchId,C)})}).then(()=>({batchId:h.batchId,changes:_p(l)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let c=i.Ic[i.currentUser.toKey()];c||(c=new _e(se)),c=c.insert(o,a),i.Ic[i.currentUser.toKey()]=c}(s,r.batchId,n),await Kr(s,r.changes),await Oo(s.remoteStore)}catch(r){const i=Su(r,"Failed to persist write");n.reject(i)}}async function rm(t,e){const n=W(t);try{const s=await T_(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.gc.get(i);o&&(ge(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.lc=!0:r.modifiedDocuments.size>0?ge(o.lc):r.removedDocuments.size>0&&(ge(o.lc),o.lc=!1))}),await Kr(n,s,e)}catch(s){await Br(s)}}function Ch(t,e,n){const s=W(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.dc.forEach((i,o)=>{const a=o.view.ku(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=W(i);a.onlineState=o;let c=!1;a.queries.forEach((u,l)=>{for(const h of l.listeners)h.ku(o)&&(c=!0)}),c&&Iu(a)}(s.eventManager,e),r.length&&s.fc.eu(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function iT(t,e,n){const s=W(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.gc.get(e),i=r&&r.key;if(i){let o=new _e(j.comparator);o=o.insert(i,ze.newNoDocument(i,K.min()));const a=Y().add(i),c=new No(K.min(),new Map,new _e(se),o,a);await rm(s,c),s.mc=s.mc.remove(i),s.gc.delete(e),Cu(s)}else await cc(s.localStore,e,!1).then(()=>uc(s,e,n)).catch(Br)}async function oT(t,e){const n=W(t),s=e.batch.batchId;try{const r=await __(n.localStore,e);om(n,s,null),im(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Kr(n,r)}catch(r){await Br(r)}}async function aT(t,e,n){const s=W(t);try{const r=await function(i,o){const a=W(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,o).next(l=>(ge(l!==null),u=l.keys(),a.mutationQueue.removeMutationBatch(c,l))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(s.localStore,e);om(s,e,n),im(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Kr(s,r)}catch(r){await Br(r)}}function im(t,e){(t.Tc.get(e)||[]).forEach(n=>{n.resolve()}),t.Tc.delete(e)}function om(t,e,n){const s=W(t);let r=s.Ic[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Ic[s.currentUser.toKey()]=r}}function uc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t._c.get(e))t.dc.delete(s),n&&t.fc.vc(s,n);t._c.delete(e),t.isPrimaryClient&&t.yc.ps(e).forEach(s=>{t.yc.containsKey(s)||am(t,s)})}function am(t,e){t.wc.delete(e.path.canonicalString());const n=t.mc.get(e);n!==null&&(Gp(t.remoteStore,n),t.mc=t.mc.remove(e),t.gc.delete(n),Cu(t))}function Ah(t,e,n){for(const s of n)s instanceof nm?(t.yc.addReference(s.key,e),cT(t,s)):s instanceof sm?(L("SyncEngine","Document no longer in limbo: "+s.key),t.yc.removeReference(s.key,e),t.yc.containsKey(s.key)||am(t,s.key)):q()}function cT(t,e){const n=e.key,s=n.path.canonicalString();t.mc.get(n)||t.wc.has(s)||(L("SyncEngine","New document in limbo: "+n),t.wc.add(s),Cu(t))}function Cu(t){for(;t.wc.size>0&&t.mc.size<t.maxConcurrentLimboResolutions;){const e=t.wc.values().next().value;t.wc.delete(e);const n=new j(ve.fromString(e)),s=t.Ec.next();t.gc.set(s,new Z_(n)),t.mc=t.mc.insert(n,s),Kp(t.remoteStore,new un(en(Co(n.path)),s,"TargetPurposeLimboResolution",au.ct))}}async function Kr(t,e,n){const s=W(t),r=[],i=[],o=[];s.dc.isEmpty()||(s.dc.forEach((a,c)=>{o.push(s.Rc(c,e,n).then(u=>{if((u||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(c.targetId,u!=null&&u.fromCache?"not-current":"current"),u){r.push(u);const l=wu.Bi(c.targetId,u);i.push(l)}}))}),await Promise.all(o),s.fc.eu(r),await async function(a,c){const u=W(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",l=>S.forEach(c,h=>S.forEach(h.$i,d=>u.persistence.referenceDelegate.addReference(l,h.targetId,d)).next(()=>S.forEach(h.Fi,d=>u.persistence.referenceDelegate.removeReference(l,h.targetId,d)))))}catch(l){if(!jr(l))throw l;L("LocalStore","Failed to update sequence numbers: "+l)}for(const l of c){const h=l.targetId;if(!l.fromCache){const d=u.Hi.get(h),m=d.snapshotVersion,v=d.withLastLimboFreeSnapshotVersion(m);u.Hi=u.Hi.insert(h,v)}}}(s.localStore,i))}async function uT(t,e){const n=W(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());const s=await jp(n.localStore,e);n.currentUser=e,function(r,i){r.Tc.forEach(o=>{o.forEach(a=>{a.reject(new B(T.CANCELLED,i))})}),r.Tc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Kr(n,s.tr)}}function lT(t,e){const n=W(t),s=n.gc.get(e);if(s&&s.lc)return Y().add(s.key);{let r=Y();const i=n._c.get(e);if(!i)return r;for(const o of i){const a=n.dc.get(o);r=r.unionWith(a.view.ec)}return r}}function hT(t){const e=W(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iT.bind(null,e),e.fc.eu=Q_.bind(null,e.eventManager),e.fc.vc=J_.bind(null,e.eventManager),e}function fT(t){const e=W(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aT.bind(null,e),e}class Rh{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ko(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return E_(this.persistence,new v_,e.initialUser,this.serializer)}createPersistence(e){return new g_(vu.js,this.serializer)}createSharedClientState(e){return new A_}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class dT{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ch(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=uT.bind(null,this.syncEngine),await K_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new W_}createDatastore(e){const n=ko(e.databaseInfo.databaseId),s=(r=e.databaseInfo,new N_(r));var r;return function(i,o,a,c){return new O_(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,r=e.asyncQueue,i=a=>Ch(this.syncEngine,a,0),o=bh.D()?new bh:new R_,new L_(n,s,r,i,o);var n,s,r,i,o}createSyncEngine(e,n){return function(s,r,i,o,a,c,u){const l=new eT(s,r,i,o,a,c);return u&&(l.Ac=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=W(e);L("RemoteStore","RemoteStore shutting down."),n.Au.add(5),await Hr(n),n.vu.shutdown(),n.Pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):Zt("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=qe.UNAUTHENTICATED,this.clientId=cp.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async i=>{L("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(s,i=>(L("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Su(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function ha(t,e){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await jp(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await gT(t);L("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener(r=>Sh(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Sh(e.remoteStore,i)),t._onlineComponents=e}function mT(t){return t.name==="FirebaseError"?t.code===T.FAILED_PRECONDITION||t.code===T.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function gT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{await ha(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!mT(n))throw n;bs("Error using user provided cache. Falling back to memory cache: "+n),await ha(t,new Rh)}}else L("FirestoreClient","Using default OfflineComponentProvider"),await ha(t,new Rh);return t._offlineComponents}async function um(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),await xh(t,t._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),await xh(t,new dT))),t._onlineComponents}function yT(t){return um(t).then(e=>e.syncEngine)}async function lc(t){const e=await um(t),n=e.eventManager;return n.onListen=tT.bind(null,e.syncEngine),n.onUnlisten=sT.bind(null,e.syncEngine),n}function vT(t,e,n={}){const s=new pn;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,c){const u=new cm({next:h=>{i.enqueueAndForget(()=>em(r,l));const d=h.docs.has(o);!d&&h.fromCache?c.reject(new B(T.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?c.reject(new B(T.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),l=new tm(Co(o.path),u,{includeMetadataChanges:!0,Uu:!0});return Zp(r,l)}(await lc(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e,n){if(!n)throw new B(T.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wT(t,e,n,s){if(e===!0&&s===!0)throw new B(T.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Nh(t){if(!j.isDocumentKey(t))throw new B(T.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kh(t){if(j.isDocumentKey(t))throw new B(T.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Au(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q()}function Ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Au(t);throw new B(T.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new B(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mh(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new V1;switch(n.type){case"firstParty":return new z1(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new B(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Dh.get(e);n&&(L("ComponentProvider","Removing Datastore"),Dh.delete(e),n.terminate())}(this),Promise.resolve()}}function ET(t,e,n,s={}){var r;const i=(t=Ut(t,Po))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&bs("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),s.mockUserToken){let o,a;if(typeof s.mockUserToken=="string")o=s.mockUserToken,a=qe.MOCK_USER;else{o=Tw(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=s.mockUserToken.sub||s.mockUserToken.user_id;if(!c)throw new B(T.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new qe(c)}t._authCredentials=new B1(new ap(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tt(this.firestore,e,this._key)}}class Lo{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Lo(this.firestore,e,this._query)}}class mn extends Lo{constructor(e,n,s){super(e,n,Co(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tt(this.firestore,null,new j(e))}withConverter(e){return new mn(this.firestore,e,this._path)}}function Ru(t,e,...n){if(t=Xt(t),lm("collection","path",e),t instanceof Po){const s=ve.fromString(e,...n);return kh(s),new mn(t,null,s)}{if(!(t instanceof tt||t instanceof mn))throw new B(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ve.fromString(e,...n));return kh(s),new mn(t.firestore,null,s)}}function hm(t,e,...n){if(t=Xt(t),arguments.length===1&&(e=cp.A()),lm("doc","path",e),t instanceof Po){const s=ve.fromString(e,...n);return Nh(s),new tt(t,null,new j(s))}{if(!(t instanceof tt||t instanceof mn))throw new B(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ve.fromString(e,...n));return Nh(s),new tt(t.firestore,t instanceof mn?t.converter:null,new j(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new zp(this,"async_queue_retry"),this.Yc=()=>{const n=la();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Lo.ko()};const e=la();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const n=la();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const n=new pn;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}async ta(){if(this.Gc.length!==0){try{await this.Gc[0](),this.Gc.shift(),this.Lo.reset()}catch(e){if(!jr(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.Gc.length>0&&this.Lo.xo(()=>this.ta())}}Zc(e){const n=this.Kc.then(()=>(this.Wc=!0,e().catch(s=>{this.zc=s,this.Wc=!1;const r=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(s);throw Zt("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.Wc=!1,s))));return this.Kc=n,n}enqueueAfterDelay(e,n,s){this.Xc(),this.Jc.indexOf(e)>-1&&(n=0);const r=bu.createAndSchedule(this,e,n,s,i=>this.ea(i));return this.jc.push(r),r}Xc(){this.zc&&q()}verifyOperationInProgress(){}async na(){let e;do e=this.Kc,await e;while(e!==this.Kc)}sa(e){for(const n of this.jc)if(n.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.jc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const n=this.jc.indexOf(e);this.jc.splice(n,1)}}function Oh(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Ns extends Po{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new _T,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||fm(this),this._firestoreClient.terminate()}}function TT(t,e){const n=typeof t=="object"?t:C0(),s=typeof t=="string"?t:e||"(default)",r=T0(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=ww("firestore");i&&ET(r,...i)}return r}function xu(t){return t._firestoreClient||fm(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function fm(t){var e,n,s;const r=t._freezeSettings(),i=function(o,a,c,u){return new nE(o,a,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new pT(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=r.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.cache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ks(Xe.fromBase64String(e))}catch(n){throw new B(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ks(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=/^__.*__$/;class ST{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Tn(e,this.data,this.fieldMask,n,this.fieldTransforms):new qr(e,this.data,n,this.fieldTransforms)}}class dm{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Tn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}class $o{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.oa(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new $o(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ca({path:s,ha:!1});return r.la(e),r}fa(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ca({path:s,ha:!1});return r.oa(),r}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return Ki(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(e.length===0)throw this._a("Document fields must not be empty");if(pm(this.ua)&&bT.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class IT{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ko(e)}ga(e,n,s,r=!1){return new $o({ua:e,methodName:n,ma:s,path:Ke.emptyPath(),ha:!1,wa:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mm(t){const e=t._freezeSettings(),n=ko(t._databaseId);return new IT(t._databaseId,!!e.ignoreUndefinedProperties,n)}function CT(t,e,n,s,r,i={}){const o=t.ga(i.merge||i.mergeFields?2:0,e,n,r);Nu("Data must be an object, but it was:",o,s);const a=ym(s,o);let c,u;if(i.merge)c=new lt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const l=[];for(const h of i.mergeFields){const d=hc(e,h,n);if(!o.contains(d))throw new B(T.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);wm(l,d)||l.push(d)}c=new lt(l),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new ST(new it(a),c,u)}class Uo extends Gr{_toFieldTransform(e){if(e.ua!==2)throw e.ua===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uo}}function gm(t,e,n){return new $o({ua:3,ma:e.settings.ma,methodName:t._methodName,ha:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class AT extends Gr{constructor(e,n){super(e),this.ya=n}_toFieldTransform(e){const n=gm(this,e,!0),s=this.ya.map(i=>js(i,n)),r=new As(s);return new xp(e.path,r)}isEqual(e){return this===e}}class RT extends Gr{constructor(e,n){super(e),this.ya=n}_toFieldTransform(e){const n=gm(this,e,!0),s=this.ya.map(i=>js(i,n)),r=new Rs(s);return new xp(e.path,r)}isEqual(e){return this===e}}function xT(t,e,n,s){const r=t.ga(1,e,n);Nu("Data must be an object, but it was:",r,s);const i=[],o=it.empty();Kn(s,(c,u)=>{const l=ku(e,c,n);u=Xt(u);const h=r.fa(l);if(u instanceof Uo)i.push(l);else{const d=js(u,h);d!=null&&(i.push(l),o.set(l,d))}});const a=new lt(i);return new dm(o,a,r.fieldTransforms)}function DT(t,e,n,s,r,i){const o=t.ga(1,e,n),a=[hc(e,s,n)],c=[r];if(i.length%2!=0)throw new B(T.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(hc(e,i[d])),c.push(i[d+1]);const u=[],l=it.empty();for(let d=a.length-1;d>=0;--d)if(!wm(u,a[d])){const m=a[d];let v=c[d];v=Xt(v);const w=o.fa(m);if(v instanceof Uo)u.push(m);else{const C=js(v,w);C!=null&&(u.push(m),l.set(m,C))}}const h=new lt(u);return new dm(l,h,o.fieldTransforms)}function js(t,e){if(vm(t=Xt(t)))return Nu("Unsupported field value:",e,t),ym(t,e);if(t instanceof Gr)return function(n,s){if(!pm(s.ua))throw s._a(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ha&&e.ua!==4)throw e._a("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=js(o,s.da(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Xt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return IE(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Ne.fromDate(n);return{timestampValue:zi(s.serializer,r)}}if(n instanceof Ne){const r=new Ne(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:zi(s.serializer,r)}}if(n instanceof Du)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ks)return{bytesValue:Lp(s.serializer,n._byteString)};if(n instanceof tt){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:gu(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s._a(`Unsupported field value: ${Au(n)}`)}(t,e)}function ym(t,e){const n={};return up(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kn(t,(s,r)=>{const i=js(r,e.aa(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function vm(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof Du||t instanceof ks||t instanceof tt||t instanceof Gr)}function Nu(t,e,n){if(!vm(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=Au(n);throw s==="an object"?e._a(t+" a custom object"):e._a(t+" "+s)}}function hc(t,e,n){if((e=Xt(e))instanceof Fo)return e._internalPath;if(typeof e=="string")return ku(t,e);throw Ki("Field path arguments must be of type string or ",t,!1,void 0,n)}const NT=new RegExp("[~\\*/\\[\\]]");function ku(t,e,n){if(e.search(NT)>=0)throw Ki(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fo(...e.split("."))._internalPath}catch{throw Ki(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ki(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new B(T.INVALID_ARGUMENT,a+t+c)}function wm(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_m("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kT extends Em{data(){return super.data()}}function _m(t,e){return typeof e=="string"?ku(t,e):e instanceof Fo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OT{convertValue(e,n="none"){switch(zn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Kn(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertGeoPoint(e){return new Du(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=uu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Rr(e));default:return null}}convertTimestamp(e){const n=vn(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ve.fromString(e);ge(Bp(s));const r=new xr(s.get(1),s.get(3)),i=new j(s.popFirst(5));return r.isEqual(n)||Zt(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tm extends Em{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ei(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(_m("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Ei extends Tm{data(e={}){return super.data(e)}}class LT{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new tr(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ei(this._firestore,this._userDataWriter,s.key,s,new tr(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new Ei(s._firestore,s._userDataWriter,o.doc.key,o.doc,new tr(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new Ei(s._firestore,s._userDataWriter,o.doc.key,o.doc,new tr(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:FT(o.type),doc:a,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function FT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t){t=Ut(t,tt);const e=Ut(t.firestore,Ns);return vT(xu(e),t._key).then(n=>Cm(e,t,n))}class Sm extends OT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tt(this.firestore,null,n)}}function $T(t,e,n){t=Ut(t,tt);const s=Ut(t.firestore,Ns),r=PT(t.converter,e,n);return Im(s,[CT(mm(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ft.none())])}function fc(t,e,n,...s){t=Ut(t,tt);const r=Ut(t.firestore,Ns),i=mm(r);let o;return o=typeof(e=Xt(e))=="string"||e instanceof Fo?DT(i,"updateDoc",t._key,e,n,s):xT(i,"updateDoc",t._key,e),Im(r,[o.toMutation(t._key,Ft.exists(!0))])}function UT(t,...e){var n,s,r;t=Xt(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Oh(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Oh(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let c,u,l;if(t instanceof tt)u=Ut(t.firestore,Ns),l=Co(t._key.path),c={next:h=>{e[o]&&e[o](Cm(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Ut(t,Lo);u=Ut(h.firestore,Ns),l=h._query;const d=new Sm(u);c={next:m=>{e[o]&&e[o](new LT(u,d,h,m))},error:e[o+1],complete:e[o+2]},MT(t._query)}return function(h,d,m,v){const w=new cm(v),C=new tm(d,w,m);return h.asyncQueue.enqueueAndForget(async()=>Zp(await lc(h),C)),()=>{w.Sc(),h.asyncQueue.enqueueAndForget(async()=>em(await lc(h),C))}}(xu(u),l,a,c)}function Im(t,e){return function(n,s){const r=new pn;return n.asyncQueue.enqueueAndForget(async()=>rT(await yT(n),s,r)),r.promise}(xu(t),e)}function Cm(t,e,n){const s=n.docs.get(e._key),r=new Sm(t);return new Tm(t,r,e._key,s,new tr(n.hasPendingWrites,n.fromCache),e.converter)}function VT(...t){return new AT("arrayUnion",t)}function BT(...t){return new RT("arrayRemove",t)}(function(t,e=!0){(function(n){Us=n})(I0),xi(new Er("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new Ns(new j1(n.getProvider("auth-internal")),new K1(n.getProvider("app-check-internal")),function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new B(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xr(a.options.projectId,c)}(i,s),i);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),hs(eh,"3.11.0",t),hs(eh,"3.11.0","esm2017")})();var jT="firebase",qT="9.21.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hs(jT,qT,"app");const zT={apiKey:"AIzaSyBdrW-op61lrviPqesC6ez5K5aSxHf_Y14",authDomain:"e-culture-71815.firebaseapp.com",projectId:"e-culture-71815",storageBucket:"e-culture-71815.appspot.com",messagingSenderId:"52761179686",appId:"1:52761179686:web:19db1bff3af727288658e7"};ed(zT);const Mu=TT(),HT=Ru(Mu,"game-rooms"),KT=Ru(Mu,"players");Ru(Mu,"quizzes");const _t=class{constructor(e,n){Be(this,"id");Be(this,"pseudo");this.id=e,this.pseudo=n}static generate(){const n=Math.floor(Math.random()*1e12),s=`user${n}`;return new _t(n.toString(),s)}saveLocal(){localStorage.setItem(_t.LOCAL_STORAGE_KEY,JSON.stringify(this))}static savedLocally(){return localStorage.getItem(_t.LOCAL_STORAGE_KEY)!=null}static loadLocal(){const e=localStorage.getItem(_t.LOCAL_STORAGE_KEY);if(e){const n=JSON.parse(e);return new _t(n.id,n.pseudo)}else throw Error("Loading player from local storage but not in local storage.")}get ref(){return _t.getRef(this.id)}static getRef(e){return hm(KT,e)}static async loadServerFromRef(e){const n=await bm(e);return _t.loadFromSnapshot(n)}saveServer(){$T(this.ref,Object.assign({},this)).then(()=>console.debug(`Player ${this} saved on firestore.`)).catch(e=>{console.error(`Player ${this} not saved on firestore: ${e}.`)})}static loadFromSnapshot(e){var s;const n=(s=e.data())==null?void 0:s.pseudo;if(n)return new _t(e.id,n);throw Error(`Impossible to create Player from ${e}: pseudo not in data.`)}equals(e){return e instanceof _t&&this.id===e.id}};let Vt=_t;Be(Vt,"LOCAL_STORAGE_KEY","player");const GT=at({data(){return{player:Vt.loadLocal()}}}),ct=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n};function WT(t,e,n,s,r,i){return re(),pe("p",null,gs(t.player.pseudo),1)}const QT=ct(GT,[["render",WT]]),JT=at({components:{UserInfoSmall:QT}}),XT="/e-culture/logo/application-without-text.png";const YT=t=>(to("data-v-312863de"),t=t(),no(),t),ZT=YT(()=>be("img",{src:XT,alt:"application logo"},null,-1));function eb(t,e,n,s,r,i){const o=$e("router-link"),a=$e("UserInfoSmall");return re(),pe("header",null,[he(o,{to:"/"},{default:Ln(()=>[ZT]),_:1}),he(a)])}const Wr=ct(JT,[["render",eb],["__scopeId","data-v-312863de"]]),tb=at({components:{HeaderDefault:Wr}}),nb="/e-culture/logo/application.png",sb="/e-culture/logo/company.png";const Am=t=>(to("data-v-6df2ebf1"),t=t(),no(),t),rb={id:"home"},ib=Am(()=>be("img",{src:nb,alt:"application logo"},null,-1)),ob={id:"actions"},ab=Am(()=>be("footer",null,[be("img",{src:sb,alt:"company logo"})],-1));function cb(t,e,n,s,r,i){const o=$e("HeaderDefault"),a=$e("router-link");return re(),pe("div",rb,[he(o),be("main",null,[ib,be("div",ob,[he(a,{class:"pseudo-button",to:"/create-game-room"},{default:Ln(()=>[Fn("Create a Game Room")]),_:1}),he(a,{class:"pseudo-button",to:"/join-game-room"},{default:Ln(()=>[Fn("Join a Game Room")]),_:1}),he(a,{class:"pseudo-button",to:"/about"},{default:Ln(()=>[Fn("About Us")]),_:1})])]),ab])}const ub=ct(tb,[["render",cb],["__scopeId","data-v-6df2ebf1"]]),lb=at({components:{HeaderDefault:Wr}}),hb=be("p",null,"Create Game Room here",-1);function fb(t,e,n,s,r,i){const o=$e("HeaderDefault");return re(),pe(Ze,null,[he(o),hb],64)}const db=ct(lb,[["render",fb]]),pb=at({data:()=>({gameRoomId:""})});const Rm=t=>(to("data-v-f6202bff"),t=t(),no(),t),mb={id:"join-game-room-from-id"},gb=Rm(()=>be("h2",null,"Join a Game Room from an ID",-1)),yb={key:0},vb={key:1},wb=Rm(()=>be("p",null,"Please enter a Game Room ID",-1)),Eb=[wb];function _b(t,e,n,s,r,i){const o=$e("router-link");return re(),pe("div",mb,[gb,sy(be("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>t.gameRoomId=a),placeholder:"Game Room ID"},null,512),[[nv,t.gameRoomId]]),t.gameRoomId?(re(),pe("div",yb,[he(o,{to:"/game-room/"+t.gameRoomId,class:"pseudo-button"},{default:Ln(()=>[Fn("Join Game Room '"+gs(t.gameRoomId)+"'",1)]),_:1},8,["to"])])):(re(),pe("div",vb,Eb))])}const Tb=ct(pb,[["render",_b],["__scopeId","data-v-f6202bff"]]);const bb={},Sb=t=>(to("data-v-c2eb437b"),t=t(),no(),t),Ib={id:"join-random-game-room"},Cb=Sb(()=>be("h2",null,"Join a Random Game Room",-1));function Ab(t,e){const n=$e("router-link");return re(),pe("div",Ib,[Cb,he(n,{to:"/game-room/random",class:"pseudo-button"},{default:Ln(()=>[Fn("Join a random Game Room")]),_:1})])}const Rb=ct(bb,[["render",Ab],["__scopeId","data-v-c2eb437b"]]),xb=at({components:{JoinGameRoomFromId:Tb,JoinGameRoomRandom:Rb,HeaderDefault:Wr}});const Db={id:"join-game-room"},Nb={id:"different-join"};function kb(t,e,n,s,r,i){const o=$e("HeaderDefault"),a=$e("JoinGameRoomRandom"),c=$e("JoinGameRoomFromId");return re(),pe("div",Db,[he(o),be("div",Nb,[he(a),he(c)])])}const Mb=ct(xb,[["render",kb],["__scopeId","data-v-bae75fb0"]]),Ob=at({components:{HeaderDefault:Wr}}),Pb=be("p",null,"About here",-1);function Lb(t,e,n,s,r,i){const o=$e("HeaderDefault");return re(),pe(Ze,null,[he(o),Pb],64)}const Fb=ct(Ob,[["render",Lb]]);function xm(t,e){for(var n=[],s=0;s!=e;++s)n.push(t.unsafeNext());return n}function $b(t,e){var n=t.clone(),s=xm(n,e);return[s,n]}function Dm(t,e){for(var n=0;n!=e;++n)t.unsafeNext()}function Ub(t,e){var n=t.clone();return Dm(n,e),n}var Vb=214013,Bb=2531011,jb=4294967295,qb=(1<<31)-1,fa=function(t){return t*Vb+Bb&jb},da=function(t){return(t&qb)>>16},zb=function(){function t(e){this.seed=e}return t.prototype.clone=function(){return new t(this.seed)},t.prototype.next=function(){var e=new t(this.seed),n=e.unsafeNext();return[n,e]},t.prototype.unsafeNext=function(){var e=fa(this.seed),n=da(e),s=fa(e),r=da(s);this.seed=fa(s);var i=da(this.seed),o=i+(r+(n<<15)<<15);return o|0},t}(),Hb=function(t){return new zb(t)},Kb=function(){function t(e,n){this.states=e,this.index=n}return t.twist=function(e){for(var n=e.slice(),s=0;s!==t.N-t.M;++s){var r=(n[s]&t.MASK_UPPER)+(n[s+1]&t.MASK_LOWER);n[s]=n[s+t.M]^r>>>1^-(r&1)&t.A}for(var s=t.N-t.M;s!==t.N-1;++s){var i=(n[s]&t.MASK_UPPER)+(n[s+1]&t.MASK_LOWER);n[s]=n[s+t.M-t.N]^i>>>1^-(i&1)&t.A}var o=(n[t.N-1]&t.MASK_UPPER)+(n[0]&t.MASK_LOWER);return n[t.N-1]=n[t.M-1]^o>>>1^-(o&1)&t.A,n},t.seeded=function(e){var n=Array(t.N);n[0]=e;for(var s=1;s!==t.N;++s){var r=n[s-1]^n[s-1]>>>30;n[s]=Math.imul(t.F,r)+s|0}return n},t.from=function(e){return new t(t.twist(t.seeded(e)),0)},t.prototype.clone=function(){return new t(this.states,this.index)},t.prototype.next=function(){var e=new t(this.states,this.index),n=e.unsafeNext();return[n,e]},t.prototype.unsafeNext=function(){var e=this.states[this.index];return e^=this.states[this.index]>>>t.U,e^=e<<t.S&t.B,e^=e<<t.T&t.C,e^=e>>>t.L,++this.index>=t.N&&(this.states=t.twist(this.states),this.index=0),e},t.N=624,t.M=397,t.R=31,t.A=2567483615,t.F=1812433253,t.U=11,t.S=7,t.B=2636928640,t.T=15,t.C=4022730752,t.L=18,t.MASK_LOWER=Math.pow(2,t.R)-1,t.MASK_UPPER=Math.pow(2,t.R),t}();function Gb(t){return Kb.from(t)}var Wb=function(){function t(e,n,s,r){this.s01=e,this.s00=n,this.s11=s,this.s10=r}return t.prototype.clone=function(){return new t(this.s01,this.s00,this.s11,this.s10)},t.prototype.next=function(){var e=new t(this.s01,this.s00,this.s11,this.s10),n=e.unsafeNext();return[n,e]},t.prototype.unsafeNext=function(){var e=this.s00^this.s00<<23,n=this.s01^(this.s01<<23|this.s00>>>9),s=e^this.s10^(e>>>18|n<<14)^(this.s10>>>5|this.s11<<27),r=n^this.s11^n>>>18^this.s11>>>5,i=this.s00+this.s10|0;return this.s01=this.s11,this.s00=this.s10,this.s11=r,this.s10=s,i},t.prototype.jump=function(){var e=new t(this.s01,this.s00,this.s11,this.s10);return e.unsafeJump(),e},t.prototype.unsafeJump=function(){for(var e=0,n=0,s=0,r=0,i=[1667051007,2321340297,1548169110,304075285],o=0;o!==4;++o)for(var a=1;a;a<<=1)i[o]&a&&(e^=this.s01,n^=this.s00,s^=this.s11,r^=this.s10),this.unsafeNext();this.s01=e,this.s00=n,this.s11=s,this.s10=r},t}(),Qb=function(t){return new Wb(-1,~t,t|0,0)},Jb=function(){function t(e,n,s,r){this.s01=e,this.s00=n,this.s11=s,this.s10=r}return t.prototype.clone=function(){return new t(this.s01,this.s00,this.s11,this.s10)},t.prototype.next=function(){var e=new t(this.s01,this.s00,this.s11,this.s10),n=e.unsafeNext();return[n,e]},t.prototype.unsafeNext=function(){var e=this.s00+this.s10|0,n=this.s10^this.s00,s=this.s11^this.s01,r=this.s00,i=this.s01;return this.s00=r<<24^i>>>8^n^n<<16,this.s01=i<<24^r>>>8^s^(s<<16|n>>>16),this.s10=s<<5^n>>>27,this.s11=n<<5^s>>>27,e},t.prototype.jump=function(){var e=new t(this.s01,this.s00,this.s11,this.s10);return e.unsafeJump(),e},t.prototype.unsafeJump=function(){for(var e=0,n=0,s=0,r=0,i=[3639956645,3750757012,1261568508,386426335],o=0;o!==4;++o)for(var a=1;a;a<<=1)i[o]&a&&(e^=this.s01,n^=this.s00,s^=this.s11,r^=this.s10),this.unsafeNext();this.s01=e,this.s00=n,this.s11=s,this.s10=r},t}(),Xb=function(t){return new Jb(-1,~t,t|0,0)};function Nm(t,e){if(t.sign!==e.sign)return Ou(t,{sign:-e.sign,data:e.data});for(var n=[],s=0,r=t.data,i=e.data,o=r.length-1,a=i.length-1;o>=0||a>=0;--o,--a){var c=o>=0?r[o]:0,u=a>=0?i[a]:0,l=c+u+s;n.push(l>>>0),s=~~(l/4294967296)}return s!==0&&n.push(s),{sign:t.sign,data:n.reverse()}}function Yb(t){t.sign=1;for(var e=t.data,n=e.length-1;n>=0;--n)if(e[n]===4294967295)e[n]=0;else return e[n]+=1,t;return e.unshift(1),t}function Zb(t,e){for(var n=Math.max(t.length,e.length),s=0;s<n;++s){var r=s+t.length-n,i=s+e.length-n,o=r>=0?t[r]:0,a=i>=0?e[i]:0;if(o<a)return!0;if(o>a)return!1}return!1}function Ou(t,e){if(t.sign!==e.sign)return Nm(t,{sign:-e.sign,data:e.data});var n=t.data,s=e.data;if(Zb(n,s)){var r=Ou(e,t);return r.sign=-r.sign,r}for(var i=[],o=0,a=n.length-1,c=s.length-1;a>=0||c>=0;--a,--c){var u=a>=0?n[a]:0,l=c>=0?s[c]:0,h=u-l-o;i.push(h>>>0),o=h<0?1:0}return{sign:t.sign,data:i.reverse()}}function Ph(t){for(var e=t.data,n=0;n!==e.length&&e[n]===0;++n);return n===e.length?(t.sign=1,t.data=[0],t):(e.splice(0,n),t)}function pa(t,e){if(e<0){var n=-e;t.sign=-1,t.data[0]=~~(n/4294967296),t.data[1]=n>>>0}else t.sign=1,t.data[0]=~~(e/4294967296),t.data[1]=e>>>0;return t}function eS(t,e,n){var s=e.data[1],r=e.data[0],i=e.sign,o=n.data[1],a=n.data[0],c=n.sign;if(t.sign=1,i===1&&c===-1){var u=s+o,l=r+a+(u>4294967295?1:0);return t.data[0]=l>>>0,t.data[1]=u>>>0,t}var h=s,d=r,m=o,v=a;i===-1&&(h=o,d=a,m=s,v=r);var w=0,C=h-m;return C<0&&(w=1,C=C>>>0),t.data[0]=d-v-w,t.data[1]=C,t}function km(t,e){for(var n=t>2?~~(4294967296/t)*t:4294967296,s=e.unsafeNext()+2147483648;s>=n;)s=e.unsafeNext()+2147483648;return s%t}function Mm(t,e,n){for(var s=e.length;;){for(var r=0;r!==s;++r){var i=r===0?e[0]+1:4294967296,o=km(i,n);t[r]=o}for(var r=0;r!==s;++r){var a=t[r],c=e[r];if(a<c)return t;if(a>c)break}}}function dc(t,e,n){var s=Ph(Yb(Ou(e,t))),r=s.data.slice(0),i=Mm(r,s.data,n);return Ph(Nm({sign:1,data:i},t))}function tS(t,e,n){if(n!=null){var s=n.clone();return[dc(t,e,s),s]}return function(r){var i=r.clone();return[dc(t,e,i),i]}}var Qs=typeof BigInt<"u"?BigInt:void 0;function pc(t,e,n){for(var s=e-t+Qs(1),r=Qs(-2147483648),i=Qs(4294967296),o=i,a=1;o<s;)o*=i,++a;for(var c=o-o%s;;){for(var u=Qs(0),l=0;l!==a;++l){var h=n.unsafeNext();u=i*u+(Qs(h)-r)}if(u<c){var d=u%s;return d+t}}}function nS(t,e,n){if(n!=null){var s=n.clone();return[pc(t,e,s),s]}return function(r){var i=r.clone();return[pc(t,e,i),i]}}var sS=Number.MAX_SAFE_INTEGER,rS={sign:1,data:[0,0]},iS={sign:1,data:[0,0]},Lh={sign:1,data:[0,0]},ma=[0,0];function oS(t,e,n,s){var r=n<=sS?pa(Lh,n):eS(Lh,pa(rS,e),pa(iS,t));return r.data[1]===4294967295?(r.data[0]+=1,r.data[1]=0):r.data[1]+=1,Mm(ma,r.data,s),ma[0]*4294967296+ma[1]+t}function mc(t,e,n){var s=e-t;if(s<=4294967295){var r=km(s+1,n);return r+t}return oS(t,e,s,n)}function aS(t,e,n){if(n!=null){var s=n.clone();return[mc(t,e,s),s]}return function(r){var i=r.clone();return[mc(t,e,i),i]}}var cS="module",uS="6.0.2",lS="ad3183ba9b712bc6c1c5a9abbb1d1e641db139d4";const Fh=Object.freeze(Object.defineProperty({__proto__:null,__commitHash:lS,__type:cS,__version:uS,congruential32:Hb,generateN:$b,mersenne:Gb,skipN:Ub,uniformArrayIntDistribution:tS,uniformBigIntDistribution:nS,uniformIntDistribution:aS,unsafeGenerateN:xm,unsafeSkipN:Dm,unsafeUniformArrayIntDistribution:dc,unsafeUniformBigIntDistribution:pc,unsafeUniformIntDistribution:mc,xoroshiro128plus:Xb,xorshift128plus:Qb},Symbol.toStringTag,{value:"Module"}));class Pu{constructor(e,n){Be(this,"answer");Be(this,"correct");this.answer=e,this.correct=n}static fromJson(e){const n=e.answer,s=e.correct;if(typeof n=="string"&&typeof s=="boolean")return new Pu(n,s);throw Error(`Impossible to create QuizAnswer from a JSON: incorrect field 'answer' or 'correct' in ${e}`)}}const hS=[{question:"Which king was responsible for the Norman Conquest of England?",answers:[{answer:"William the Conqueror",correct:!0},{answer:"Richard the Lionheart",correct:!1},{answer:"Henry II",correct:!1},{answer:"Edward the Confessor",correct:!1}],tags:["history"]},{question:"Which battle marked the end of the Anglo-Saxon era and the beginning of Norman rule in England?",answers:[{answer:"The Battle of Hastings",correct:!0},{answer:"The Battle of Stamford Bridge",correct:!1},{answer:"The Battle of Bosworth Field",correct:!1},{answer:"The Battle of Agincourt",correct:!1}],tags:["history"]},{question:"Who was the first Tudor monarch of England?",answers:[{answer:"Henry VII",correct:!0},{answer:"Edward VI",correct:!1},{answer:"Mary I",correct:!1},{answer:"Elizabeth I",correct:!1}],tags:["history"]},{question:"What was the cause of the English Civil War?",answers:[{answer:"A struggle for power between the King and Parliament",correct:!0},{answer:"A rebellion against foreign rule",correct:!1},{answer:"A dispute over religious freedom",correct:!1},{answer:"A conflict over trade agreements",correct:!1}],tags:["history"]},{question:"Who was the last monarch of the House of Stuart?",answers:[{answer:"Queen Anne",correct:!0},{answer:"King James II",correct:!1},{answer:"King Charles I",correct:!1},{answer:"King William III",correct:!1}],tags:["history"]},{question:"What event led to the Glorious Revolution in England?",answers:[{answer:"The deposition of King James II and the accession of William and Mary",correct:!0},{answer:"The English Civil War",correct:!1},{answer:"The signing of the Magna Carta",correct:!1},{answer:"The Battle of Trafalgar",correct:!1}],tags:["history"]},{question:"Who was the first English monarch to be beheaded?",answers:[{answer:"King Charles I",correct:!0},{answer:"King Edward I",correct:!1},{answer:"King Henry VIII",correct:!1},{answer:"King Richard III",correct:!1}],tags:["history"]},{question:"What was the name of the ship that carried the Pilgrims to the New World?",answers:[{answer:"The Mayflower",correct:!0},{answer:"The Santa Maria",correct:!1},{answer:"The Nina",correct:!1},{answer:"The Pinta",correct:!1}],tags:["history"]},{question:"What is the highest mountain in the UK?",answers:[{answer:"Ben Nevis",correct:!0},{answer:"Snowdon",correct:!1},{answer:"Scafell Pike",correct:!1},{answer:"Slieve Donard",correct:!1}],tags:["geography"]},{question:"What is the longest river in the UK?",answers:[{answer:"River Severn",correct:!0},{answer:"River Thames",correct:!1},{answer:"River Tay",correct:!1},{answer:"River Spey",correct:!1}],tags:["geography"]},{question:"What is the largest lake in the UK?",answers:[{answer:"Loch Lomond",correct:!0},{answer:"Lake Windermere",correct:!1},{answer:"Loch Ness",correct:!1},{answer:"Lough Neagh",correct:!1}]},{question:"What is the name of the famous prehistoric monument located in Wiltshire, England?",answers:[{answer:"Stonehenge",correct:!0},{answer:"Avebury",correct:!1},{answer:"The Cerne Abbas Giant",correct:!1},{answer:"The Rollright Stones",correct:!1}],tags:["geography"]},{question:"What is the highest waterfall in the UK?",answers:[{answer:"Eas a' Chual Aluinn",correct:!0},{answer:"Sgwd Ddu",correct:!1},{answer:"Hardraw Force",correct:!1},{answer:"High Force",correct:!1}],tags:["geography"]},{question:"What is the name of the highest village in Scotland?",answers:[{answer:"Wanlockhead",correct:!0},{answer:"Tomintoul",correct:!1},{answer:"Braemar",correct:!1},{answer:"Aviemore",correct:!1}],tags:["geography"]},{question:"What is the name of the peninsula in southwestern England that is famous for its beaches and surf culture?",answers:[{answer:"Cornwall",correct:!0},{answer:"Devon",correct:!1},{answer:"Dorset",correct:!1},{answer:"Isle of Wight",correct:!1}],tags:["geography"]},{question:"What is the name of the highest mountain in Wales?",answers:[{answer:"Snowdon",correct:!0},{answer:"Cader Idris",correct:!1},{answer:"Pen y Fan",correct:!1},{answer:"Tryfan",correct:!1}],tags:["geography"]},{question:"What is the capital of the United Kingdom?",answers:[{answer:"London",correct:!0},{answer:"Paris",correct:!1},{answer:"Birmingham",correct:!1},{answer:"Manchester",correct:!1}],tags:["geography"]},{question:"How many inhabited islands belong to the United Kingdom?",answers:[{answer:"129",correct:!0},{answer:"17",correct:!1},{answer:"73",correct:!1},{answer:"214",correct:!1}],tags:["geography"]},{question:"Which of those city names is NOT in the United Kingdom?",answers:[{answer:"Bergen",correct:!0},{answer:"Belfast",correct:!1},{answer:"Glasgow",correct:!1},{answer:"Swansea",correct:!1}],tags:["geography"]},{question:"Who wrote the novel '1984', which is considered one of the most important works of dystopian fiction?",answers:[{answer:"George Orwell",correct:!0},{answer:"Aldous Huxley",correct:!1},{answer:"Ray Bradbury",correct:!1},{answer:"Margaret Atwood",correct:!1}],tags:["art","literature"]},{question:"What is the name of the famous novel by Jane Austen that follows the story of Elizabeth Bennet and Mr. Darcy?",answers:[{answer:"Pride and Prejudice",correct:!0},{answer:"Sense and Sensibility",correct:!1},{answer:"Emma",correct:!1},{answer:"Mansfield Park",correct:!1}],tags:["art","literature"]},{question:"What is the name of the Nobel Prize-winning British author who wrote the novels 'Lord of the Flies' and 'Rites of Passage'?",answers:[{answer:"William Golding",correct:!0},{answer:"J.K. Rowling",correct:!1},{answer:"Roald Dahl",correct:!1},{answer:"Kazuo Ishiguro",correct:!1}],tags:["art","literature"]},{question:"What is the name of the famous British children's author who created the character of Peter Rabbit?",answers:[{answer:"Beatrix Potter",correct:!0},{answer:"Lewis Carroll",correct:!1},{answer:"Enid Blyton",correct:!1},{answer:"Roald Dahl",correct:!1}],tags:["art","literature"]},{question:"What is the name of the famous English poet who wrote the poem 'The Waste Land'?",answers:[{answer:"T.S. Eliot",correct:!0},{answer:"William Wordsworth",correct:!1},{answer:"Samuel Taylor Coleridge",correct:!1},{answer:"John Keats",correct:!1}],tags:["art","literature"]},{question:"What is the name of the famous English playwright who wrote the plays 'Hamlet', 'Macbeth', and 'Romeo and Juliet'?",answers:[{answer:"William Shakespeare",correct:!0},{answer:"Christopher Marlowe",correct:!1},{answer:"Ben Jonson",correct:!1},{answer:"Tom Stoppard",correct:!1}],tags:["art","literature"]},{question:"What is the name of the famous Scottish novelist who wrote the novel 'Rob Roy'?",answers:[{answer:"Sir Walter Scott",correct:!0},{answer:"Robert Louis Stevenson",correct:!1},{answer:"James Hogg",correct:!1},{answer:"Irvine Welsh",correct:!1}],tags:["art","literature"]},{question:"What is the name of the famous British artist known for his vivid, colorful paintings of landscapes and portraits?",answers:[{answer:"David Hockney",correct:!0},{answer:"Banksy",correct:!1},{answer:"Tracey Emin",correct:!1},{answer:"Damien Hirst",correct:!1}],tags:["art","painting"]},{question:"What is the name of the famous British sculptor known for his abstract, modernist sculptures?",answers:[{answer:"Henry Moore",correct:!0},{answer:"Barbara Hepworth",correct:!1},{answer:"Anish Kapoor",correct:!1},{answer:"Rachel Whiteread",correct:!1}],tags:["art","painting"]},{question:"What is the name of the famous British fashion designer who created the iconic punk fashion style?",answers:[{answer:"Vivienne Westwood",correct:!0},{answer:"Alexander McQueen",correct:!1},{answer:"Stella McCartney",correct:!1},{answer:"Mary Quant",correct:!1}],tags:["art","fashion"]},{question:"What is the name of the famous British architect who designed the iconic 'Gherkin' building in London?",answers:[{answer:"Norman Foster",correct:!0},{answer:"Richard Rogers",correct:!1},{answer:"Zaha Hadid",correct:!1},{answer:"David Chipperfield",correct:!1}],tags:["art","architecture"]},{question:"What is the name of the famous British composer who wrote the music for 'The Planets' and 'Jupiter'?",answers:[{answer:"Gustav Holst",correct:!0},{answer:"Benjamin Britten",correct:!1},{answer:"Edward Elgar",correct:!1},{answer:"Ralph Vaughan Williams",correct:!1}],tags:["art","music"]},{question:"What is the name of the famous British theater director who founded the Royal Shakespeare Company?",answers:[{answer:"Peter Hall",correct:!0},{answer:"Trevor Nunn",correct:!1},{answer:"Sam Mendes",correct:!1},{answer:"Michael Grandage",correct:!1}],tags:["art","theater"]},{question:"What is the name of the famous British film director who directed 'Trainspotting' and 'Slumdog Millionaire'?",answers:[{answer:"Danny Boyle",correct:!0},{answer:"Mike Leigh",correct:!1},{answer:"Ken Loach",correct:!1},{answer:"Stephen Frears",correct:!1}],tags:["art","movie"]},{question:"What is the name of the famous annual rowing race that takes place on the River Thames in London?",answers:[{answer:"The Boat Race",correct:!0},{answer:"The Oxford and Cambridge Regatta",correct:!1},{answer:"The Henley Regatta",correct:!1},{answer:"The Head of the River Race",correct:!1}],tags:["sport"]},{question:"What is the name of the famous English rugby team that plays their home games at Twickenham stadium?",answers:[{answer:"England national rugby team",correct:!0},{answer:"Leicester Tigers",correct:!1},{answer:"Bath Rugby",correct:!1},{answer:"Harlequins",correct:!1}],tags:["sport"]},{question:"What is the name of the famous horse racing event that takes place at Aintree racecourse in Liverpool?",answers:[{answer:"The Grand National",correct:!0},{answer:"The Derby",correct:!1},{answer:"Royal Ascot",correct:!1},{answer:"Cheltenham Festival",correct:!1}],tags:["sport"]},{question:"What is the name of the famous English football stadium that is also known as the 'Theatre of Dreams'?",answers:[{answer:"Old Trafford",correct:!0},{answer:"Anfield",correct:!1},{answer:"Emirates Stadium",correct:!1},{answer:"Wembley Stadium",correct:!1}],tags:["sport"]},{question:"What is the name of the famous English tennis tournament that takes place at the All England Lawn Tennis and Croquet Club in Wimbledon?",answers:[{answer:"Wimbledon",correct:!0},{answer:"US Open",correct:!1},{answer:"French Open",correct:!1},{answer:"Australian Open",correct:!1}],tags:["sport"]},{question:"What is the name of the famous English footballer who is widely regarded as one of the greatest players of all time and played for Manchester United and the England national team?",answers:[{answer:"David Beckham",correct:!1},{answer:"Wayne Rooney",correct:!0},{answer:"Alan Shearer",correct:!1},{answer:"Gary Lineker",correct:!1}],tags:["sport"]},{question:"What is the name of the famous English boxer who is widely regarded as one of the greatest heavyweight boxers of all time?",answers:[{answer:"Tyson Fury",correct:!1},{answer:"Anthony Joshua",correct:!1},{answer:"Lennox Lewis",correct:!0},{answer:"Frank Bruno",correct:!1}],tags:["sport"]}],Kt=class{constructor(e,n,s){Be(this,"question");Be(this,"answers");Be(this,"id");this.question=e,this.answers=n,this.id=s}static get ALL(){if(Kt._ALL.length===0&&(Kt.loadAll(),Kt._ALL.length===0))throw Error("Wrong loading of quizzes: no matter what, at least one quiz should exist.");return Kt._ALL}static loadAll(){hS.map((e,n)=>{Kt._ALL.push(Kt.fromJsonAndId(e,n.toString()))})}static fromJsonAndId(e,n){const s=e.question,r=e.answers;if(typeof s=="string"&&typeof r<"u"){const i=[];return r.map(o=>{i.push(Pu.fromJson(o))}),new Kt(s,i,n)}else throw Error(`Impossible to create Quiz from a JSON: field 'question' or 'answers' is incorrect in ${e}`)}};let hr=Kt;Be(hr,"_ALL",[]);const is=class{constructor(e,n){Be(this,"quizzes");Be(this,"startTime");this.quizzes=e,this.startTime=n}static get MAX_NUMBER_OF_QUIZZES(){return hr.ALL.length}static get NUMBER_OF_QUIZZES(){return 10}static fromStringSeed(e,n){return this.fromNumberSeed(this.stringSeedToNumberSeed(e),n)}static stringSeedToNumberSeed(e){return e.split("").reduce((n,s)=>n+s.charCodeAt(0),0)}static fromNumberSeed(e,n){const s=Fh.xoroshiro128plus(e),r=[],i=hr.ALL;for(let o=0;o<is.NUMBER_OF_QUIZZES;o++){const a=Fh.unsafeUniformIntDistribution(0,i.length-1,s),c=i[a];r.push(c),i.splice(a,1)}return new is(r,n)}get currentQuiz(){if(this.started&&!this.ended)return this.quizzes[this.indexCurrentQuiz];throw Error("Impossible to get the current quiz: the game haven't started or has already ended.")}get indexCurrentQuiz(){if(this.started){const n=(Date.now().valueOf()-this.startTime.valueOf())/1e3;return Math.floor(n/is.SECONDS_BY_QUESTION)}else throw Error("Impossible to calculate the index of the current quiz: the game haven't started")}get started(){return this.startTime!==null}get ended(){return this.started&&this.indexCurrentQuiz+1>is.NUMBER_OF_QUIZZES}};let _i=is;Be(_i,"SECONDS_BY_QUESTION",1);class Pt{constructor(e,n,s){Be(this,"id");Be(this,"players");Be(this,"game");this.id=e,this.players=n,this.game=_i.fromStringSeed(this.id,s)}get owner(){return this.players[0]||null}isOwner(e){return e.equals(this.owner)}static async loadServerFromId(e){const n=await bm(Pt.getRef(e));if(n.exists())return await Pt.loadServerFromSnapshot(n);throw Error(`Impossible to create GameRoom from ${n}: does not exists.`)}static async loadServerFromSnapshot(e){var i,o;const n=[],s=(i=e.data())==null?void 0:i.players,r=((o=e.data())==null?void 0:o.startTime)||null;if(s instanceof Array){for(const c of s)n.push(Vt.loadServerFromRef(c));const a=await Promise.all(n);return new Pt(e.id,a,r)}else throw Error(`Impossible to get GameRoom from snapshot ${e}: no data.`)}get ref(){return Pt.getRef(this.id)}static getRef(e){return hm(HT,e)}}const fS=at({data(){return{player:Vt.loadLocal()}},props:{gameRoom:{type:Object,required:!0}},methods:{async startGame(){await fc(this.gameRoom.ref,{startTime:Date.now()})}}}),dS={key:1};function pS(t,e,n,s,r,i){return t.gameRoom.isOwner(t.player)?(re(),pe("button",{key:0,class:"pseudo-button",onClick:e[0]||(e[0]=(...o)=>t.startGame&&t.startGame(...o))}," Start game ")):(re(),pe("p",dS,"Waiting for the owner to start the game..."))}const mS=ct(fS,[["render",pS]]),gS=at({data(){return{player:Vt.loadLocal()}},props:{players:{type:Object,required:!0},owner:{type:Object,required:!0}}}),yS={id:"player-list"},vS={key:0},wS={key:1},ES={key:2};function _S(t,e,n,s,r,i){return re(),pe("div",yS,[be("ul",null,[(re(!0),pe(Ze,null,_f(t.players,o=>(re(),pe("li",{key:o.id},[t.player.equals(o)?(re(),pe("span",vS,"You")):(re(),pe("span",wS,gs(o.pseudo),1)),o.equals(t.owner)?(re(),pe("span",ES," 👑")):kf("",!0)]))),128))])])}const TS=ct(gS,[["render",_S]]),bS=at({data(){return{currentQuiz:this.gameRoom.game.currentQuiz}},props:{gameRoom:{type:Object,required:!0}},methods:{updateLoopCurrentQuiz(){this.gameRoom.game.ended||(this.currentQuiz=this.gameRoom.game.currentQuiz,setTimeout(this.updateLoopCurrentQuiz,100))}},mounted(){this.updateLoopCurrentQuiz()}}),SS=be("p",null,"questions:",-1),IS={key:0};function CS(t,e,n,s,r,i){return re(),pe(Ze,null,[SS,be("p",null,"current quiz : "+gs(),1),be("ul",null,[(re(!0),pe(Ze,null,_f(t.gameRoom.game.quizzes,o=>(re(),pe("li",{key:o.id},[Fn(gs(o.question)+" ",1),t.currentQuiz.id===o.id?(re(),pe("span",IS,"CURRENT")):kf("",!0)]))),128))])],64)}const AS=ct(bS,[["render",CS]]),RS=at({data(){return{gameEnded:!0}},props:{gameRoom:{type:Object,required:!0}},watch:{gameRoom:{handler(){this.gameEnded=this.gameRoom.game.ended},immediate:!0}},methods:{updateLoopGameEnded(){this.gameEnded=this.gameRoom.game.ended,this.gameEnded||setTimeout(()=>this.updateLoopGameEnded(),100)}},mounted(){this.updateLoopGameEnded()},components:{GameRoomQuiz:AS,PlayersList:TS,GameRoomWaiting:mS}}),xS=be("p",null,"Players in this Game Room:",-1),DS={key:0};function NS(t,e,n,s,r,i){const o=$e("PlayersList"),a=$e("GameRoomQuiz"),c=$e("GameRoomWaiting");return re(),pe(Ze,null,[xS,he(o,{players:t.gameRoom.players,owner:t.gameRoom.owner},null,8,["players","owner"]),t.gameEnded?(re(),pe("p",DS,"game ended")):t.gameRoom.game.started?(re(),yr(a,{key:1,"game-room":t.gameRoom},null,8,["game-room"])):(re(),yr(c,{key:2,"game-room":t.gameRoom},null,8,["game-room"]))],64)}const kS=ct(RS,[["render",NS]]),MS=at({data(){return{gameRoomId:this.$route.params.id,gameRoom:null,player:Vt.loadLocal(),unSubscribeGameRoom:null}},components:{GameRoomContent:kS,HeaderDefault:Wr},methods:{async setGameRoom(){this.gameRoom=await Pt.loadServerFromId(this.gameRoomId)},async subscribeGameRoom(){this.unSubscribeGameRoom=UT(Pt.getRef(this.gameRoomId),async t=>{this.gameRoom=await Pt.loadServerFromSnapshot(t)})},unsubscribeGameRoomIfSubscribed(){this.unSubscribeGameRoom&&this.unSubscribeGameRoom()},async joinGameRoom(){await fc(Pt.getRef(this.gameRoomId),{players:VT(this.player.ref)})},async quitGameRoom(){await fc(Pt.getRef(this.gameRoomId),{players:BT(this.player.ref)})}},mounted(){this.setGameRoom(),this.subscribeGameRoom(),this.joinGameRoom()},unmounted(){this.quitGameRoom(),this.unsubscribeGameRoomIfSubscribed()}});const OS={id:"game-room"},PS={id:"game-room-information"},LS={key:1};function FS(t,e,n,s,r,i){const o=$e("HeaderDefault"),a=$e("GameRoomContent");return re(),pe("div",OS,[he(o),be("div",PS,[be("h2",null,"Game Room "+gs(t.gameRoomId),1),t.gameRoom?(re(),yr(a,{key:0,"game-room":t.gameRoom},null,8,["game-room"])):(re(),pe("p",LS,"Acquiring game room data..."))])])}const $S=ct(MS,[["render",FS],["__scopeId","data-v-b236c5cc"]]),US=[{path:"/",name:"Home",component:ub},{path:"/create-game-room",name:"Create a Game Room",component:db},{path:"/join-game-room",name:"Join a Game Room",component:Mb},{path:"/about",name:"About",component:Fb},{path:"/game-room/:id",name:"Game Room",component:$S}],Lu=cw({history:Sv("/e-culture/"),routes:US}),VS={};function BS(t,e){const n=$e("router-view");return re(),yr(n)}const jS=ct(VS,[["render",BS]]);const Om=iv(jS);Om.use(Lu);Om.mount("#app");if(!Vt.savedLocally()){const t=Vt.generate();t.saveLocal(),t.saveServer()}window.addEventListener("beforeunload",()=>{sessionStorage.setItem("lastRoute",Lu.currentRoute.value.path)});const ga=sessionStorage.getItem("lastRoute")||"/";Lu.push(ga).then(()=>{console.debug(`location set to ${ga}.`)}).catch(t=>{console.error(`impossible to set location to ${ga} because ${t}`)});
