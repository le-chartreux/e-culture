var zm=Object.defineProperty;var Hm=(t,e,n)=>e in t?zm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Oe=(t,e,n)=>(Hm(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function wc(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}function vc(t){if(W(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Me(r)?Xm(r):vc(r);if(s)for(const i in s)e[i]=s[i]}return e}else{if(Me(t))return t;if(_e(t))return t}}const Wm=/;(?![^(]*\))/g,Qm=/:([^]+)/,Jm=/\/\*.*?\*\//gs;function Xm(t){const e={};return t.replace(Jm,"").split(Wm).forEach(n=>{if(n){const r=n.split(Qm);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function _c(t){let e="";if(Me(t))e=t;else if(W(t))for(let n=0;n<t.length;n++){const r=_c(t[n]);r&&(e+=r+" ")}else if(_e(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Ym="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zm=wc(Ym);function Kh(t){return!!t||t===""}const at=t=>Me(t)?t:t==null?"":W(t)||_e(t)&&(t.toString===Qh||!J(t.toString))?JSON.stringify(t,zh,2):String(t),zh=(t,e)=>e&&e.__v_isRef?zh(t,e.value):ur(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:Hh(e)?{[`Set(${e.size})`]:[...e.values()]}:_e(e)&&!W(e)&&!Jh(e)?String(e):e,ge={},lr=[],At=()=>{},eg=()=>!1,tg=/^on[^a-z]/,Xi=t=>tg.test(t),Ec=t=>t.startsWith("onUpdate:"),rt=Object.assign,bc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ng=Object.prototype.hasOwnProperty,ie=(t,e)=>ng.call(t,e),W=Array.isArray,ur=t=>Yi(t)==="[object Map]",Hh=t=>Yi(t)==="[object Set]",J=t=>typeof t=="function",Me=t=>typeof t=="string",Sc=t=>typeof t=="symbol",_e=t=>t!==null&&typeof t=="object",Wh=t=>_e(t)&&J(t.then)&&J(t.catch),Qh=Object.prototype.toString,Yi=t=>Qh.call(t),rg=t=>Yi(t).slice(8,-1),Jh=t=>Yi(t)==="[object Object]",Tc=t=>Me(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,pi=wc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zi=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},sg=/-(\w)/g,qt=Zi(t=>t.replace(sg,(e,n)=>n?n.toUpperCase():"")),ig=/\B([A-Z])/g,Lr=Zi(t=>t.replace(ig,"-$1").toLowerCase()),eo=Zi(t=>t.charAt(0).toUpperCase()+t.slice(1)),qo=Zi(t=>t?`on${eo(t)}`:""),gs=(t,e)=>!Object.is(t,e),mi=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Ci=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},va=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let jl;const og=()=>jl||(jl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let St;class ag{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=St,!e&&St&&(this.index=(St.scopes||(St.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=St;try{return St=this,e()}finally{St=n}}}on(){St=this}off(){St=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function cg(t,e=St){e&&e.active&&e.effects.push(t)}function lg(){return St}const Ic=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Xh=t=>(t.w&bn)>0,Yh=t=>(t.n&bn)>0,ug=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=bn},hg=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];Xh(s)&&!Yh(s)?s.delete(t):e[n++]=s,s.w&=~bn,s.n&=~bn}e.length=n}},_a=new WeakMap;let es=0,bn=1;const Ea=30;let It;const Vn=Symbol(""),ba=Symbol("");class Cc{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,cg(this,r)}run(){if(!this.active)return this.fn();let e=It,n=mn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=It,It=this,mn=!0,bn=1<<++es,es<=Ea?ug(this):Gl(this),this.fn()}finally{es<=Ea&&hg(this),bn=1<<--es,It=this.parent,mn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){It===this?this.deferStop=!0:this.active&&(Gl(this),this.onStop&&this.onStop(),this.active=!1)}}function Gl(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let mn=!0;const Zh=[];function $r(){Zh.push(mn),mn=!1}function Fr(){const t=Zh.pop();mn=t===void 0?!0:t}function ut(t,e,n){if(mn&&It){let r=_a.get(t);r||_a.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=Ic()),ef(s)}}function ef(t,e){let n=!1;es<=Ea?Yh(t)||(t.n|=bn,n=!Xh(t)):n=!t.has(It),n&&(t.add(It),It.deps.push(t))}function en(t,e,n,r,s,i){const o=_a.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&W(t)){const c=Number(r);o.forEach((l,u)=>{(u==="length"||u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":W(t)?Tc(n)&&a.push(o.get("length")):(a.push(o.get(Vn)),ur(t)&&a.push(o.get(ba)));break;case"delete":W(t)||(a.push(o.get(Vn)),ur(t)&&a.push(o.get(ba)));break;case"set":ur(t)&&a.push(o.get(Vn));break}if(a.length===1)a[0]&&Sa(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);Sa(Ic(c))}}function Sa(t,e){const n=W(t)?t:[...t];for(const r of n)r.computed&&Kl(r);for(const r of n)r.computed||Kl(r)}function Kl(t,e){(t!==It||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const fg=wc("__proto__,__v_isRef,__isVue"),tf=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Sc)),dg=Ac(),pg=Ac(!1,!0),mg=Ac(!0),zl=gg();function gg(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=ce(this);for(let i=0,o=this.length;i<o;i++)ut(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(ce)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){$r();const r=ce(this)[e].apply(this,n);return Fr(),r}}),t}function yg(t){const e=ce(this);return ut(e,"has",t),e.hasOwnProperty(t)}function Ac(t=!1,e=!1){return function(r,s,i){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&i===(t?e?Mg:af:e?of:sf).get(r))return r;const o=W(r);if(!t){if(o&&ie(zl,s))return Reflect.get(zl,s,i);if(s==="hasOwnProperty")return yg}const a=Reflect.get(r,s,i);return(Sc(s)?tf.has(s):fg(s))||(t||ut(r,"get",s),e)?a:Qe(a)?o&&Tc(s)?a:a.value:_e(a)?t?cf(a):Os(a):a}}const wg=nf(),vg=nf(!0);function nf(t=!1){return function(n,r,s,i){let o=n[r];if(_r(o)&&Qe(o)&&!Qe(s))return!1;if(!t&&(!Ai(s)&&!_r(s)&&(o=ce(o),s=ce(s)),!W(n)&&Qe(o)&&!Qe(s)))return o.value=s,!0;const a=W(n)&&Tc(r)?Number(r)<n.length:ie(n,r),c=Reflect.set(n,r,s,i);return n===ce(i)&&(a?gs(s,o)&&en(n,"set",r,s):en(n,"add",r,s)),c}}function _g(t,e){const n=ie(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&en(t,"delete",e,void 0),r}function Eg(t,e){const n=Reflect.has(t,e);return(!Sc(e)||!tf.has(e))&&ut(t,"has",e),n}function bg(t){return ut(t,"iterate",W(t)?"length":Vn),Reflect.ownKeys(t)}const rf={get:dg,set:wg,deleteProperty:_g,has:Eg,ownKeys:bg},Sg={get:mg,set(t,e){return!0},deleteProperty(t,e){return!0}},Tg=rt({},rf,{get:pg,set:vg}),Rc=t=>t,to=t=>Reflect.getPrototypeOf(t);function Zs(t,e,n=!1,r=!1){t=t.__v_raw;const s=ce(t),i=ce(e);n||(e!==i&&ut(s,"get",e),ut(s,"get",i));const{has:o}=to(s),a=r?Rc:n?Nc:ys;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function ei(t,e=!1){const n=this.__v_raw,r=ce(n),s=ce(t);return e||(t!==s&&ut(r,"has",t),ut(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function ti(t,e=!1){return t=t.__v_raw,!e&&ut(ce(t),"iterate",Vn),Reflect.get(t,"size",t)}function Hl(t){t=ce(t);const e=ce(this);return to(e).has.call(e,t)||(e.add(t),en(e,"add",t,t)),this}function Wl(t,e){e=ce(e);const n=ce(this),{has:r,get:s}=to(n);let i=r.call(n,t);i||(t=ce(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?gs(e,o)&&en(n,"set",t,e):en(n,"add",t,e),this}function Ql(t){const e=ce(this),{has:n,get:r}=to(e);let s=n.call(e,t);s||(t=ce(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&en(e,"delete",t,void 0),i}function Jl(){const t=ce(this),e=t.size!==0,n=t.clear();return e&&en(t,"clear",void 0,void 0),n}function ni(t,e){return function(r,s){const i=this,o=i.__v_raw,a=ce(o),c=e?Rc:t?Nc:ys;return!t&&ut(a,"iterate",Vn),o.forEach((l,u)=>r.call(s,c(l),c(u),i))}}function ri(t,e,n){return function(...r){const s=this.__v_raw,i=ce(s),o=ur(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=s[t](...r),u=n?Rc:e?Nc:ys;return!e&&ut(i,"iterate",c?ba:Vn),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function ln(t){return function(...e){return t==="delete"?!1:this}}function Ig(){const t={get(i){return Zs(this,i)},get size(){return ti(this)},has:ei,add:Hl,set:Wl,delete:Ql,clear:Jl,forEach:ni(!1,!1)},e={get(i){return Zs(this,i,!1,!0)},get size(){return ti(this)},has:ei,add:Hl,set:Wl,delete:Ql,clear:Jl,forEach:ni(!1,!0)},n={get(i){return Zs(this,i,!0)},get size(){return ti(this,!0)},has(i){return ei.call(this,i,!0)},add:ln("add"),set:ln("set"),delete:ln("delete"),clear:ln("clear"),forEach:ni(!0,!1)},r={get(i){return Zs(this,i,!0,!0)},get size(){return ti(this,!0)},has(i){return ei.call(this,i,!0)},add:ln("add"),set:ln("set"),delete:ln("delete"),clear:ln("clear"),forEach:ni(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=ri(i,!1,!1),n[i]=ri(i,!0,!1),e[i]=ri(i,!1,!0),r[i]=ri(i,!0,!0)}),[t,n,e,r]}const[Cg,Ag,Rg,Dg]=Ig();function Dc(t,e){const n=e?t?Dg:Rg:t?Ag:Cg;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ie(n,s)&&s in r?n:r,s,i)}const xg={get:Dc(!1,!1)},Ng={get:Dc(!1,!0)},kg={get:Dc(!0,!1)},sf=new WeakMap,of=new WeakMap,af=new WeakMap,Mg=new WeakMap;function Og(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pg(t){return t.__v_skip||!Object.isExtensible(t)?0:Og(rg(t))}function Os(t){return _r(t)?t:xc(t,!1,rf,xg,sf)}function Lg(t){return xc(t,!1,Tg,Ng,of)}function cf(t){return xc(t,!0,Sg,kg,af)}function xc(t,e,n,r,s){if(!_e(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=Pg(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function hr(t){return _r(t)?hr(t.__v_raw):!!(t&&t.__v_isReactive)}function _r(t){return!!(t&&t.__v_isReadonly)}function Ai(t){return!!(t&&t.__v_isShallow)}function lf(t){return hr(t)||_r(t)}function ce(t){const e=t&&t.__v_raw;return e?ce(e):t}function uf(t){return Ci(t,"__v_skip",!0),t}const ys=t=>_e(t)?Os(t):t,Nc=t=>_e(t)?cf(t):t;function hf(t){mn&&It&&(t=ce(t),ef(t.dep||(t.dep=Ic())))}function ff(t,e){t=ce(t);const n=t.dep;n&&Sa(n)}function Qe(t){return!!(t&&t.__v_isRef===!0)}function $g(t){return df(t,!1)}function Fg(t){return df(t,!0)}function df(t,e){return Qe(t)?t:new Ug(t,e)}class Ug{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:ce(e),this._value=n?e:ys(e)}get value(){return hf(this),this._value}set value(e){const n=this.__v_isShallow||Ai(e)||_r(e);e=n?e:ce(e),gs(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:ys(e),ff(this))}}function fr(t){return Qe(t)?t.value:t}const Bg={get:(t,e,n)=>fr(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Qe(s)&&!Qe(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function pf(t){return hr(t)?t:new Proxy(t,Bg)}var mf;class Vg{constructor(e,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[mf]=!1,this._dirty=!0,this.effect=new Cc(e,()=>{this._dirty||(this._dirty=!0,ff(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=ce(this);return hf(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}mf="__v_isReadonly";function qg(t,e,n=!1){let r,s;const i=J(t);return i?(r=t,s=At):(r=t.get,s=t.set),new Vg(r,s,i||!s,n)}function gn(t,e,n,r){let s;try{s=r?t(...r):t()}catch(i){no(i,e,n)}return s}function Rt(t,e,n,r){if(J(t)){const i=gn(t,e,n,r);return i&&Wh(i)&&i.catch(o=>{no(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(Rt(t[i],e,n,r));return s}function no(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){gn(c,null,10,[t,o,a]);return}}jg(t,n,s,r)}function jg(t,e,n,r=!0){console.error(t)}let ws=!1,Ta=!1;const He=[];let Lt=0;const dr=[];let Wt=null,Pn=0;const gf=Promise.resolve();let kc=null;function yf(t){const e=kc||gf;return t?e.then(this?t.bind(this):t):e}function Gg(t){let e=Lt+1,n=He.length;for(;e<n;){const r=e+n>>>1;vs(He[r])<t?e=r+1:n=r}return e}function Mc(t){(!He.length||!He.includes(t,ws&&t.allowRecurse?Lt+1:Lt))&&(t.id==null?He.push(t):He.splice(Gg(t.id),0,t),wf())}function wf(){!ws&&!Ta&&(Ta=!0,kc=gf.then(_f))}function Kg(t){const e=He.indexOf(t);e>Lt&&He.splice(e,1)}function zg(t){W(t)?dr.push(...t):(!Wt||!Wt.includes(t,t.allowRecurse?Pn+1:Pn))&&dr.push(t),wf()}function Xl(t,e=ws?Lt+1:0){for(;e<He.length;e++){const n=He[e];n&&n.pre&&(He.splice(e,1),e--,n())}}function vf(t){if(dr.length){const e=[...new Set(dr)];if(dr.length=0,Wt){Wt.push(...e);return}for(Wt=e,Wt.sort((n,r)=>vs(n)-vs(r)),Pn=0;Pn<Wt.length;Pn++)Wt[Pn]();Wt=null,Pn=0}}const vs=t=>t.id==null?1/0:t.id,Hg=(t,e)=>{const n=vs(t)-vs(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function _f(t){Ta=!1,ws=!0,He.sort(Hg);const e=At;try{for(Lt=0;Lt<He.length;Lt++){const n=He[Lt];n&&n.active!==!1&&gn(n,null,14)}}finally{Lt=0,He.length=0,vf(),ws=!1,kc=null,(He.length||dr.length)&&_f()}}function Wg(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ge;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||ge;d&&(s=n.map(m=>Me(m)?m.trim():m)),h&&(s=n.map(va))}let a,c=r[a=qo(e)]||r[a=qo(qt(e))];!c&&i&&(c=r[a=qo(Lr(e))]),c&&Rt(c,t,6,s);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Rt(l,t,6,s)}}function Ef(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!J(t)){const c=l=>{const u=Ef(l,e,!0);u&&(a=!0,rt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(_e(t)&&r.set(t,null),null):(W(i)?i.forEach(c=>o[c]=null):rt(o,i),_e(t)&&r.set(t,o),o)}function ro(t,e){return!t||!Xi(e)?!1:(e=e.slice(2).replace(/Once$/,""),ie(t,e[0].toLowerCase()+e.slice(1))||ie(t,Lr(e))||ie(t,e))}let vt=null,so=null;function Ri(t){const e=vt;return vt=t,so=t&&t.type.__scopeId||null,e}function Kt(t){so=t}function zt(){so=null}function yn(t,e=vt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&ou(-1);const i=Ri(e);let o;try{o=t(...s)}finally{Ri(i),r._d&&ou(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function jo(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:d,setupState:m,ctx:w,inheritAttrs:v}=t;let C,R;const $=Ri(t);try{if(n.shapeFlag&4){const ne=s||r;C=Pt(u.call(ne,ne,h,i,m,d,w)),R=c}else{const ne=e;C=Pt(ne.length>1?ne(i,{attrs:c,slots:a,emit:l}):ne(i,null)),R=e.props?c:Qg(c)}}catch(ne){as.length=0,no(ne,t,1),C=oe(Gn)}let M=C;if(R&&v!==!1){const ne=Object.keys(R),{shapeFlag:Se}=M;ne.length&&Se&7&&(o&&ne.some(Ec)&&(R=Jg(R,o)),M=Er(M,R))}return n.dirs&&(M=Er(M),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&(M.transition=n.transition),C=M,Ri($),C}const Qg=t=>{let e;for(const n in t)(n==="class"||n==="style"||Xi(n))&&((e||(e={}))[n]=t[n]);return e},Jg=(t,e)=>{const n={};for(const r in t)(!Ec(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Xg(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Yl(r,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!ro(l,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Yl(r,o,l):!0:!!o;return!1}function Yl(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ro(n,i))return!0}return!1}function Yg({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Zg=t=>t.__isSuspense;function ey(t,e){e&&e.pendingBranch?W(t)?e.effects.push(...t):e.effects.push(t):zg(t)}function gi(t,e){if(xe){let n=xe.provides;const r=xe.parent&&xe.parent.provides;r===n&&(n=xe.provides=Object.create(r)),n[t]=e}}function Zt(t,e,n=!1){const r=xe||vt;if(r){const s=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&J(e)?e.call(r.proxy):e}}const si={};function yi(t,e,n){return bf(t,e,n)}function bf(t,e,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=ge){const a=lg()===(xe==null?void 0:xe.scope)?xe:null;let c,l=!1,u=!1;if(Qe(t)?(c=()=>t.value,l=Ai(t)):hr(t)?(c=()=>t,r=!0):W(t)?(u=!0,l=t.some(M=>hr(M)||Ai(M)),c=()=>t.map(M=>{if(Qe(M))return M.value;if(hr(M))return $n(M);if(J(M))return gn(M,a,2)})):J(t)?e?c=()=>gn(t,a,2):c=()=>{if(!(a&&a.isUnmounted))return h&&h(),Rt(t,a,3,[d])}:c=At,e&&r){const M=c;c=()=>$n(M())}let h,d=M=>{h=R.onStop=()=>{gn(M,a,4)}},m;if(Es)if(d=At,e?n&&Rt(e,a,3,[c(),u?[]:void 0,d]):c(),s==="sync"){const M=Hy();m=M.__watcherHandles||(M.__watcherHandles=[])}else return At;let w=u?new Array(t.length).fill(si):si;const v=()=>{if(R.active)if(e){const M=R.run();(r||l||(u?M.some((ne,Se)=>gs(ne,w[Se])):gs(M,w)))&&(h&&h(),Rt(e,a,3,[M,w===si?void 0:u&&w[0]===si?[]:w,d]),w=M)}else R.run()};v.allowRecurse=!!e;let C;s==="sync"?C=v:s==="post"?C=()=>it(v,a&&a.suspense):(v.pre=!0,a&&(v.id=a.uid),C=()=>Mc(v));const R=new Cc(c,C);e?n?v():w=R.run():s==="post"?it(R.run.bind(R),a&&a.suspense):R.run();const $=()=>{R.stop(),a&&a.scope&&bc(a.scope.effects,R)};return m&&m.push($),$}function ty(t,e,n){const r=this.proxy,s=Me(t)?t.includes(".")?Sf(r,t):()=>r[t]:t.bind(r,r);let i;J(e)?i=e:(i=e.handler,n=e);const o=xe;br(this);const a=bf(s,i.bind(r),n);return o?br(o):qn(),a}function Sf(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function $n(t,e){if(!_e(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Qe(t))$n(t.value,e);else if(W(t))for(let n=0;n<t.length;n++)$n(t[n],e);else if(Hh(t)||ur(t))t.forEach(n=>{$n(n,e)});else if(Jh(t))for(const n in t)$n(t[n],e);return t}function $e(t){return J(t)?{setup:t,name:t.name}:t}const wi=t=>!!t.type.__asyncLoader,Tf=t=>t.type.__isKeepAlive;function ny(t,e){If(t,"a",e)}function ry(t,e){If(t,"da",e)}function If(t,e,n=xe){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(io(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Tf(s.parent.vnode)&&sy(r,e,n,s),s=s.parent}}function sy(t,e,n,r){const s=io(e,t,r,!0);Cf(()=>{bc(r[e],s)},n)}function io(t,e,n=xe,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;$r(),br(n);const a=Rt(e,n,t,o);return qn(),Fr(),a});return r?s.unshift(i):s.push(i),i}}const an=t=>(e,n=xe)=>(!Es||t==="sp")&&io(t,(...r)=>e(...r),n),iy=an("bm"),oy=an("m"),ay=an("bu"),cy=an("u"),ly=an("bum"),Cf=an("um"),uy=an("sp"),hy=an("rtg"),fy=an("rtc");function dy(t,e=xe){io("ec",t,e)}function Af(t,e){const n=vt;if(n===null)return t;const r=co(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,c,l=ge]=e[i];o&&(J(o)&&(o={mounted:o,updated:o}),o.deep&&$n(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:c,modifiers:l}))}return t}function Nn(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&($r(),Rt(c,n,8,[t.el,a,t,e]),Fr())}}const Rf="components";function Te(t,e){return my(Rf,t,!0,e)||t}const py=Symbol();function my(t,e,n=!0,r=!1){const s=vt||xe;if(s){const i=s.type;if(t===Rf){const a=Gy(i,!1);if(a&&(a===e||a===qt(e)||a===eo(qt(e))))return i}const o=Zl(s[t]||i[t],e)||Zl(s.appContext[t],e);return!o&&r?i:o}}function Zl(t,e){return t&&(t[e]||t[qt(e)]||t[eo(qt(e))])}function Oc(t,e,n,r){let s;const i=n&&n[r];if(W(t)||Me(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(_e(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];s[a]=e(t[l],l,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const Ia=t=>t?Bf(t)?co(t)||t.proxy:Ia(t.parent):null,os=rt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ia(t.parent),$root:t=>Ia(t.root),$emit:t=>t.emit,$options:t=>Pc(t),$forceUpdate:t=>t.f||(t.f=()=>Mc(t.update)),$nextTick:t=>t.n||(t.n=yf.bind(t.proxy)),$watch:t=>ty.bind(t)}),Go=(t,e)=>t!==ge&&!t.__isScriptSetup&&ie(t,e),gy={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Go(r,e))return o[e]=1,r[e];if(s!==ge&&ie(s,e))return o[e]=2,s[e];if((l=t.propsOptions[0])&&ie(l,e))return o[e]=3,i[e];if(n!==ge&&ie(n,e))return o[e]=4,n[e];Ca&&(o[e]=0)}}const u=os[e];let h,d;if(u)return e==="$attrs"&&ut(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==ge&&ie(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,ie(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Go(s,e)?(s[e]=n,!0):r!==ge&&ie(r,e)?(r[e]=n,!0):ie(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==ge&&ie(t,o)||Go(e,o)||(a=i[0])&&ie(a,o)||ie(r,o)||ie(os,o)||ie(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ie(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let Ca=!0;function yy(t){const e=Pc(t),n=t.proxy,r=t.ctx;Ca=!1,e.beforeCreate&&eu(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:m,updated:w,activated:v,deactivated:C,beforeDestroy:R,beforeUnmount:$,destroyed:M,unmounted:ne,render:Se,renderTracked:je,renderTriggered:pt,errorCaptured:mt,serverPrefetch:Yn,expose:Nt,inheritAttrs:cn,components:kt,directives:Zn,filters:Dn}=e;if(l&&wy(l,r,null,t.appContext.config.unwrapInjectedRef),o)for(const pe in o){const fe=o[pe];J(fe)&&(r[pe]=fe.bind(n))}if(s){const pe=s.call(n,n);_e(pe)&&(t.data=Os(pe))}if(Ca=!0,i)for(const pe in i){const fe=i[pe],_t=J(fe)?fe.bind(n,n):J(fe.get)?fe.get.bind(n,n):At,xn=!J(fe)&&J(fe.set)?fe.set.bind(n):At,Et=yt({get:_t,set:xn});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>Et.value,set:st=>Et.value=st})}if(a)for(const pe in a)Df(a[pe],r,n,pe);if(c){const pe=J(c)?c.call(n):c;Reflect.ownKeys(pe).forEach(fe=>{gi(fe,pe[fe])})}u&&eu(u,t,"c");function Ce(pe,fe){W(fe)?fe.forEach(_t=>pe(_t.bind(n))):fe&&pe(fe.bind(n))}if(Ce(iy,h),Ce(oy,d),Ce(ay,m),Ce(cy,w),Ce(ny,v),Ce(ry,C),Ce(dy,mt),Ce(fy,je),Ce(hy,pt),Ce(ly,$),Ce(Cf,ne),Ce(uy,Yn),W(Nt))if(Nt.length){const pe=t.exposed||(t.exposed={});Nt.forEach(fe=>{Object.defineProperty(pe,fe,{get:()=>n[fe],set:_t=>n[fe]=_t})})}else t.exposed||(t.exposed={});Se&&t.render===At&&(t.render=Se),cn!=null&&(t.inheritAttrs=cn),kt&&(t.components=kt),Zn&&(t.directives=Zn)}function wy(t,e,n=At,r=!1){W(t)&&(t=Aa(t));for(const s in t){const i=t[s];let o;_e(i)?"default"in i?o=Zt(i.from||s,i.default,!0):o=Zt(i.from||s):o=Zt(i),Qe(o)&&r?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[s]=o}}function eu(t,e,n){Rt(W(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Df(t,e,n,r){const s=r.includes(".")?Sf(n,r):()=>n[r];if(Me(t)){const i=e[t];J(i)&&yi(s,i)}else if(J(t))yi(s,t.bind(n));else if(_e(t))if(W(t))t.forEach(i=>Df(i,e,n,r));else{const i=J(t.handler)?t.handler.bind(n):e[t.handler];J(i)&&yi(s,i,t)}}function Pc(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(l=>Di(c,l,o,!0)),Di(c,e,o)),_e(e)&&i.set(e,c),c}function Di(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Di(t,i,n,!0),s&&s.forEach(o=>Di(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=vy[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const vy={data:tu,props:Mn,emits:Mn,methods:Mn,computed:Mn,beforeCreate:tt,created:tt,beforeMount:tt,mounted:tt,beforeUpdate:tt,updated:tt,beforeDestroy:tt,beforeUnmount:tt,destroyed:tt,unmounted:tt,activated:tt,deactivated:tt,errorCaptured:tt,serverPrefetch:tt,components:Mn,directives:Mn,watch:Ey,provide:tu,inject:_y};function tu(t,e){return e?t?function(){return rt(J(t)?t.call(this,this):t,J(e)?e.call(this,this):e)}:e:t}function _y(t,e){return Mn(Aa(t),Aa(e))}function Aa(t){if(W(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function tt(t,e){return t?[...new Set([].concat(t,e))]:e}function Mn(t,e){return t?rt(rt(Object.create(null),t),e):e}function Ey(t,e){if(!t)return e;if(!e)return t;const n=rt(Object.create(null),t);for(const r in e)n[r]=tt(t[r],e[r]);return n}function by(t,e,n,r=!1){const s={},i={};Ci(i,ao,1),t.propsDefaults=Object.create(null),xf(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Lg(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function Sy(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=ce(s),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(ro(t.emitsOptions,d))continue;const m=e[d];if(c)if(ie(i,d))m!==i[d]&&(i[d]=m,l=!0);else{const w=qt(d);s[w]=Ra(c,a,w,m,t,!1)}else m!==i[d]&&(i[d]=m,l=!0)}}}else{xf(t,e,s,i)&&(l=!0);let u;for(const h in a)(!e||!ie(e,h)&&((u=Lr(h))===h||!ie(e,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Ra(c,a,h,void 0,t,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!ie(e,h))&&(delete i[h],l=!0)}l&&en(t,"set","$attrs")}function xf(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(pi(c))continue;const l=e[c];let u;s&&ie(s,u=qt(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:ro(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=ce(n),l=a||ge;for(let u=0;u<i.length;u++){const h=i[u];n[h]=Ra(s,c,h,l[h],t,!ie(l,h))}}return o}function Ra(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=ie(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&J(c)){const{propsDefaults:l}=s;n in l?r=l[n]:(br(s),r=l[n]=c.call(null,e),qn())}else r=c}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Lr(n))&&(r=!0))}return r}function Nf(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!J(t)){const u=h=>{c=!0;const[d,m]=Nf(h,e,!0);rt(o,d),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return _e(t)&&r.set(t,lr),lr;if(W(i))for(let u=0;u<i.length;u++){const h=qt(i[u]);nu(h)&&(o[h]=ge)}else if(i)for(const u in i){const h=qt(u);if(nu(h)){const d=i[u],m=o[h]=W(d)||J(d)?{type:d}:Object.assign({},d);if(m){const w=iu(Boolean,m.type),v=iu(String,m.type);m[0]=w>-1,m[1]=v<0||w<v,(w>-1||ie(m,"default"))&&a.push(h)}}}const l=[o,a];return _e(t)&&r.set(t,l),l}function nu(t){return t[0]!=="$"}function ru(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function su(t,e){return ru(t)===ru(e)}function iu(t,e){return W(e)?e.findIndex(n=>su(n,t)):J(e)&&su(e,t)?0:-1}const kf=t=>t[0]==="_"||t==="$stable",Lc=t=>W(t)?t.map(Pt):[Pt(t)],Ty=(t,e,n)=>{if(e._n)return e;const r=yn((...s)=>Lc(e(...s)),n);return r._c=!1,r},Mf=(t,e,n)=>{const r=t._ctx;for(const s in t){if(kf(s))continue;const i=t[s];if(J(i))e[s]=Ty(s,i,r);else if(i!=null){const o=Lc(i);e[s]=()=>o}}},Of=(t,e)=>{const n=Lc(e);t.slots.default=()=>n},Iy=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=ce(e),Ci(e,"_",n)):Mf(e,t.slots={})}else t.slots={},e&&Of(t,e);Ci(t.slots,ao,1)},Cy=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=ge;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(rt(s,e),!n&&a===1&&delete s._):(i=!e.$stable,Mf(e,s)),o=e}else e&&(Of(t,e),o={default:1});if(i)for(const a in s)!kf(a)&&!(a in o)&&delete s[a]};function Pf(){return{app:null,config:{isNativeTag:eg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ay=0;function Ry(t,e){return function(r,s=null){J(r)||(r=Object.assign({},r)),s!=null&&!_e(s)&&(s=null);const i=Pf(),o=new Set;let a=!1;const c=i.app={_uid:Ay++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Wy,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&J(l.install)?(o.add(l),l.install(c,...u)):J(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const d=oe(r,s);return d.appContext=i,u&&e?e(d,l):t(d,l,h),a=!0,c._container=l,l.__vue_app__=c,co(d.component)||d.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c}};return c}}function Da(t,e,n,r,s=!1){if(W(t)){t.forEach((d,m)=>Da(d,e&&(W(e)?e[m]:e),n,r,s));return}if(wi(r)&&!s)return;const i=r.shapeFlag&4?co(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===ge?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(Me(l)?(u[l]=null,ie(h,l)&&(h[l]=null)):Qe(l)&&(l.value=null)),J(c))gn(c,a,12,[o,u]);else{const d=Me(c),m=Qe(c);if(d||m){const w=()=>{if(t.f){const v=d?ie(h,c)?h[c]:u[c]:c.value;s?W(v)&&bc(v,i):W(v)?v.includes(i)||v.push(i):d?(u[c]=[i],ie(h,c)&&(h[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else d?(u[c]=o,ie(h,c)&&(h[c]=o)):m&&(c.value=o,t.k&&(u[t.k]=o))};o?(w.id=-1,it(w,n)):w()}}}const it=ey;function Dy(t){return xy(t)}function xy(t,e){const n=og();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:m=At,insertStaticContent:w}=t,v=(f,p,g,y=null,E=null,A=null,k=!1,I=null,D=!!p.dynamicChildren)=>{if(f===p)return;f&&!Wr(f,p)&&(y=x(f),st(f,E,A,!0),f=null),p.patchFlag===-2&&(D=!1,p.dynamicChildren=null);const{type:S,ref:U,shapeFlag:P}=p;switch(S){case oo:C(f,p,g,y);break;case Gn:R(f,p,g,y);break;case Ko:f==null&&$(p,g,y,k);break;case gt:kt(f,p,g,y,E,A,k,I,D);break;default:P&1?Se(f,p,g,y,E,A,k,I,D):P&6?Zn(f,p,g,y,E,A,k,I,D):(P&64||P&128)&&S.process(f,p,g,y,E,A,k,I,D,se)}U!=null&&E&&Da(U,f&&f.ref,A,p||f,!p)},C=(f,p,g,y)=>{if(f==null)r(p.el=a(p.children),g,y);else{const E=p.el=f.el;p.children!==f.children&&l(E,p.children)}},R=(f,p,g,y)=>{f==null?r(p.el=c(p.children||""),g,y):p.el=f.el},$=(f,p,g,y)=>{[f.el,f.anchor]=w(f.children,p,g,y,f.el,f.anchor)},M=({el:f,anchor:p},g,y)=>{let E;for(;f&&f!==p;)E=d(f),r(f,g,y),f=E;r(p,g,y)},ne=({el:f,anchor:p})=>{let g;for(;f&&f!==p;)g=d(f),s(f),f=g;s(p)},Se=(f,p,g,y,E,A,k,I,D)=>{k=k||p.type==="svg",f==null?je(p,g,y,E,A,k,I,D):Yn(f,p,E,A,k,I,D)},je=(f,p,g,y,E,A,k,I)=>{let D,S;const{type:U,props:P,shapeFlag:B,transition:z,dirs:ee}=f;if(D=f.el=o(f.type,A,P&&P.is,P),B&8?u(D,f.children):B&16&&mt(f.children,D,null,y,E,A&&U!=="foreignObject",k,I),ee&&Nn(f,null,y,"created"),pt(D,f,f.scopeId,k,y),P){for(const de in P)de!=="value"&&!pi(de)&&i(D,de,null,P[de],A,f.children,y,E,O);"value"in P&&i(D,"value",null,P.value),(S=P.onVnodeBeforeMount)&&Ot(S,y,f)}ee&&Nn(f,null,y,"beforeMount");const me=(!E||E&&!E.pendingBranch)&&z&&!z.persisted;me&&z.beforeEnter(D),r(D,p,g),((S=P&&P.onVnodeMounted)||me||ee)&&it(()=>{S&&Ot(S,y,f),me&&z.enter(D),ee&&Nn(f,null,y,"mounted")},E)},pt=(f,p,g,y,E)=>{if(g&&m(f,g),y)for(let A=0;A<y.length;A++)m(f,y[A]);if(E){let A=E.subTree;if(p===A){const k=E.vnode;pt(f,k,k.scopeId,k.slotScopeIds,E.parent)}}},mt=(f,p,g,y,E,A,k,I,D=0)=>{for(let S=D;S<f.length;S++){const U=f[S]=I?hn(f[S]):Pt(f[S]);v(null,U,p,g,y,E,A,k,I)}},Yn=(f,p,g,y,E,A,k)=>{const I=p.el=f.el;let{patchFlag:D,dynamicChildren:S,dirs:U}=p;D|=f.patchFlag&16;const P=f.props||ge,B=p.props||ge;let z;g&&kn(g,!1),(z=B.onVnodeBeforeUpdate)&&Ot(z,g,p,f),U&&Nn(p,f,g,"beforeUpdate"),g&&kn(g,!0);const ee=E&&p.type!=="foreignObject";if(S?Nt(f.dynamicChildren,S,I,g,y,ee,A):k||fe(f,p,I,null,g,y,ee,A,!1),D>0){if(D&16)cn(I,p,P,B,g,y,E);else if(D&2&&P.class!==B.class&&i(I,"class",null,B.class,E),D&4&&i(I,"style",P.style,B.style,E),D&8){const me=p.dynamicProps;for(let de=0;de<me.length;de++){const Ae=me[de],bt=P[Ae],tr=B[Ae];(tr!==bt||Ae==="value")&&i(I,Ae,bt,tr,E,f.children,g,y,O)}}D&1&&f.children!==p.children&&u(I,p.children)}else!k&&S==null&&cn(I,p,P,B,g,y,E);((z=B.onVnodeUpdated)||U)&&it(()=>{z&&Ot(z,g,p,f),U&&Nn(p,f,g,"updated")},y)},Nt=(f,p,g,y,E,A,k)=>{for(let I=0;I<p.length;I++){const D=f[I],S=p[I],U=D.el&&(D.type===gt||!Wr(D,S)||D.shapeFlag&70)?h(D.el):g;v(D,S,U,null,y,E,A,k,!0)}},cn=(f,p,g,y,E,A,k)=>{if(g!==y){if(g!==ge)for(const I in g)!pi(I)&&!(I in y)&&i(f,I,g[I],null,k,p.children,E,A,O);for(const I in y){if(pi(I))continue;const D=y[I],S=g[I];D!==S&&I!=="value"&&i(f,I,S,D,k,p.children,E,A,O)}"value"in y&&i(f,"value",g.value,y.value)}},kt=(f,p,g,y,E,A,k,I,D)=>{const S=p.el=f?f.el:a(""),U=p.anchor=f?f.anchor:a("");let{patchFlag:P,dynamicChildren:B,slotScopeIds:z}=p;z&&(I=I?I.concat(z):z),f==null?(r(S,g,y),r(U,g,y),mt(p.children,g,U,E,A,k,I,D)):P>0&&P&64&&B&&f.dynamicChildren?(Nt(f.dynamicChildren,B,g,E,A,k,I),(p.key!=null||E&&p===E.subTree)&&Lf(f,p,!0)):fe(f,p,g,U,E,A,k,I,D)},Zn=(f,p,g,y,E,A,k,I,D)=>{p.slotScopeIds=I,f==null?p.shapeFlag&512?E.ctx.activate(p,g,y,k,D):Dn(p,g,y,E,A,k,D):zr(f,p,D)},Dn=(f,p,g,y,E,A,k)=>{const I=f.component=Uy(f,y,E);if(Tf(f)&&(I.ctx.renderer=se),By(I),I.asyncDep){if(E&&E.registerDep(I,Ce),!f.el){const D=I.subTree=oe(Gn);R(null,D,p,g)}return}Ce(I,f,p,g,E,A,k)},zr=(f,p,g)=>{const y=p.component=f.component;if(Xg(f,p,g))if(y.asyncDep&&!y.asyncResolved){pe(y,p,g);return}else y.next=p,Kg(y.update),y.update();else p.el=f.el,y.vnode=p},Ce=(f,p,g,y,E,A,k)=>{const I=()=>{if(f.isMounted){let{next:U,bu:P,u:B,parent:z,vnode:ee}=f,me=U,de;kn(f,!1),U?(U.el=ee.el,pe(f,U,k)):U=ee,P&&mi(P),(de=U.props&&U.props.onVnodeBeforeUpdate)&&Ot(de,z,U,ee),kn(f,!0);const Ae=jo(f),bt=f.subTree;f.subTree=Ae,v(bt,Ae,h(bt.el),x(bt),f,E,A),U.el=Ae.el,me===null&&Yg(f,Ae.el),B&&it(B,E),(de=U.props&&U.props.onVnodeUpdated)&&it(()=>Ot(de,z,U,ee),E)}else{let U;const{el:P,props:B}=p,{bm:z,m:ee,parent:me}=f,de=wi(p);if(kn(f,!1),z&&mi(z),!de&&(U=B&&B.onVnodeBeforeMount)&&Ot(U,me,p),kn(f,!0),P&&Z){const Ae=()=>{f.subTree=jo(f),Z(P,f.subTree,f,E,null)};de?p.type.__asyncLoader().then(()=>!f.isUnmounted&&Ae()):Ae()}else{const Ae=f.subTree=jo(f);v(null,Ae,g,y,f,E,A),p.el=Ae.el}if(ee&&it(ee,E),!de&&(U=B&&B.onVnodeMounted)){const Ae=p;it(()=>Ot(U,me,Ae),E)}(p.shapeFlag&256||me&&wi(me.vnode)&&me.vnode.shapeFlag&256)&&f.a&&it(f.a,E),f.isMounted=!0,p=g=y=null}},D=f.effect=new Cc(I,()=>Mc(S),f.scope),S=f.update=()=>D.run();S.id=f.uid,kn(f,!0),S()},pe=(f,p,g)=>{p.component=f;const y=f.vnode.props;f.vnode=p,f.next=null,Sy(f,p.props,y,g),Cy(f,p.children,g),$r(),Xl(),Fr()},fe=(f,p,g,y,E,A,k,I,D=!1)=>{const S=f&&f.children,U=f?f.shapeFlag:0,P=p.children,{patchFlag:B,shapeFlag:z}=p;if(B>0){if(B&128){xn(S,P,g,y,E,A,k,I,D);return}else if(B&256){_t(S,P,g,y,E,A,k,I,D);return}}z&8?(U&16&&O(S,E,A),P!==S&&u(g,P)):U&16?z&16?xn(S,P,g,y,E,A,k,I,D):O(S,E,A,!0):(U&8&&u(g,""),z&16&&mt(P,g,y,E,A,k,I,D))},_t=(f,p,g,y,E,A,k,I,D)=>{f=f||lr,p=p||lr;const S=f.length,U=p.length,P=Math.min(S,U);let B;for(B=0;B<P;B++){const z=p[B]=D?hn(p[B]):Pt(p[B]);v(f[B],z,g,null,E,A,k,I,D)}S>U?O(f,E,A,!0,!1,P):mt(p,g,y,E,A,k,I,D,P)},xn=(f,p,g,y,E,A,k,I,D)=>{let S=0;const U=p.length;let P=f.length-1,B=U-1;for(;S<=P&&S<=B;){const z=f[S],ee=p[S]=D?hn(p[S]):Pt(p[S]);if(Wr(z,ee))v(z,ee,g,null,E,A,k,I,D);else break;S++}for(;S<=P&&S<=B;){const z=f[P],ee=p[B]=D?hn(p[B]):Pt(p[B]);if(Wr(z,ee))v(z,ee,g,null,E,A,k,I,D);else break;P--,B--}if(S>P){if(S<=B){const z=B+1,ee=z<U?p[z].el:y;for(;S<=B;)v(null,p[S]=D?hn(p[S]):Pt(p[S]),g,ee,E,A,k,I,D),S++}}else if(S>B)for(;S<=P;)st(f[S],E,A,!0),S++;else{const z=S,ee=S,me=new Map;for(S=ee;S<=B;S++){const ht=p[S]=D?hn(p[S]):Pt(p[S]);ht.key!=null&&me.set(ht.key,S)}let de,Ae=0;const bt=B-ee+1;let tr=!1,Bl=0;const Hr=new Array(bt);for(S=0;S<bt;S++)Hr[S]=0;for(S=z;S<=P;S++){const ht=f[S];if(Ae>=bt){st(ht,E,A,!0);continue}let Mt;if(ht.key!=null)Mt=me.get(ht.key);else for(de=ee;de<=B;de++)if(Hr[de-ee]===0&&Wr(ht,p[de])){Mt=de;break}Mt===void 0?st(ht,E,A,!0):(Hr[Mt-ee]=S+1,Mt>=Bl?Bl=Mt:tr=!0,v(ht,p[Mt],g,null,E,A,k,I,D),Ae++)}const Vl=tr?Ny(Hr):lr;for(de=Vl.length-1,S=bt-1;S>=0;S--){const ht=ee+S,Mt=p[ht],ql=ht+1<U?p[ht+1].el:y;Hr[S]===0?v(null,Mt,g,ql,E,A,k,I,D):tr&&(de<0||S!==Vl[de]?Et(Mt,g,ql,2):de--)}}},Et=(f,p,g,y,E=null)=>{const{el:A,type:k,transition:I,children:D,shapeFlag:S}=f;if(S&6){Et(f.component.subTree,p,g,y);return}if(S&128){f.suspense.move(p,g,y);return}if(S&64){k.move(f,p,g,se);return}if(k===gt){r(A,p,g);for(let P=0;P<D.length;P++)Et(D[P],p,g,y);r(f.anchor,p,g);return}if(k===Ko){M(f,p,g);return}if(y!==2&&S&1&&I)if(y===0)I.beforeEnter(A),r(A,p,g),it(()=>I.enter(A),E);else{const{leave:P,delayLeave:B,afterLeave:z}=I,ee=()=>r(A,p,g),me=()=>{P(A,()=>{ee(),z&&z()})};B?B(A,ee,me):me()}else r(A,p,g)},st=(f,p,g,y=!1,E=!1)=>{const{type:A,props:k,ref:I,children:D,dynamicChildren:S,shapeFlag:U,patchFlag:P,dirs:B}=f;if(I!=null&&Da(I,null,g,f,!0),U&256){p.ctx.deactivate(f);return}const z=U&1&&B,ee=!wi(f);let me;if(ee&&(me=k&&k.onVnodeBeforeUnmount)&&Ot(me,p,f),U&6)_(f.component,g,y);else{if(U&128){f.suspense.unmount(g,y);return}z&&Nn(f,null,p,"beforeUnmount"),U&64?f.type.remove(f,p,g,E,se,y):S&&(A!==gt||P>0&&P&64)?O(S,p,g,!1,!0):(A===gt&&P&384||!E&&U&16)&&O(D,p,g),y&&er(f)}(ee&&(me=k&&k.onVnodeUnmounted)||z)&&it(()=>{me&&Ot(me,p,f),z&&Nn(f,null,p,"unmounted")},g)},er=f=>{const{type:p,el:g,anchor:y,transition:E}=f;if(p===gt){Ys(g,y);return}if(p===Ko){ne(f);return}const A=()=>{s(g),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(f.shapeFlag&1&&E&&!E.persisted){const{leave:k,delayLeave:I}=E,D=()=>k(g,A);I?I(f.el,A,D):D()}else A()},Ys=(f,p)=>{let g;for(;f!==p;)g=d(f),s(f),f=g;s(p)},_=(f,p,g)=>{const{bum:y,scope:E,update:A,subTree:k,um:I}=f;y&&mi(y),E.stop(),A&&(A.active=!1,st(k,f,p,g)),I&&it(I,p),it(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},O=(f,p,g,y=!1,E=!1,A=0)=>{for(let k=A;k<f.length;k++)st(f[k],p,g,y,E)},x=f=>f.shapeFlag&6?x(f.component.subTree):f.shapeFlag&128?f.suspense.next():d(f.anchor||f.el),F=(f,p,g)=>{f==null?p._vnode&&st(p._vnode,null,null,!0):v(p._vnode||null,f,p,null,null,null,g),Xl(),vf(),p._vnode=f},se={p:v,um:st,m:Et,r:er,mt:Dn,mc:mt,pc:fe,pbc:Nt,n:x,o:t};let Ee,Z;return e&&([Ee,Z]=e(se)),{render:F,hydrate:Ee,createApp:Ry(F,Ee)}}function kn({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Lf(t,e,n=!1){const r=t.children,s=e.children;if(W(r)&&W(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=hn(s[i]),a.el=o.el),n||Lf(o,a)),a.type===oo&&(a.el=o.el)}}function Ny(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(s=n[n.length-1],t[s]<l){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const ky=t=>t.__isTeleport,gt=Symbol(void 0),oo=Symbol(void 0),Gn=Symbol(void 0),Ko=Symbol(void 0),as=[];let Ct=null;function G(t=!1){as.push(Ct=t?null:[])}function My(){as.pop(),Ct=as[as.length-1]||null}let _s=1;function ou(t){_s+=t}function $f(t){return t.dynamicChildren=_s>0?Ct||lr:null,My(),_s>0&&Ct&&Ct.push(t),t}function X(t,e,n,r,s,i){return $f(Y(t,e,n,r,s,i,!0))}function pr(t,e,n,r,s){return $f(oe(t,e,n,r,s,!0))}function xa(t){return t?t.__v_isVNode===!0:!1}function Wr(t,e){return t.type===e.type&&t.key===e.key}const ao="__vInternal",Ff=({key:t})=>t??null,vi=({ref:t,ref_key:e,ref_for:n})=>t!=null?Me(t)||Qe(t)||J(t)?{i:vt,r:t,k:e,f:!!n}:t:null;function Y(t,e=null,n=null,r=0,s=null,i=t===gt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ff(e),ref:e&&vi(e),scopeId:so,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:vt};return a?($c(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Me(n)?8:16),_s>0&&!o&&Ct&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ct.push(c),c}const oe=Oy;function Oy(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===py)&&(t=Gn),xa(t)){const a=Er(t,e,!0);return n&&$c(a,n),_s>0&&!i&&Ct&&(a.shapeFlag&6?Ct[Ct.indexOf(t)]=a:Ct.push(a)),a.patchFlag|=-2,a}if(Ky(t)&&(t=t.__vccOpts),e){e=Py(e);let{class:a,style:c}=e;a&&!Me(a)&&(e.class=_c(a)),_e(c)&&(lf(c)&&!W(c)&&(c=rt({},c)),e.style=vc(c))}const o=Me(t)?1:Zg(t)?128:ky(t)?64:_e(t)?4:J(t)?2:0;return Y(t,e,n,r,s,o,i,!0)}function Py(t){return t?lf(t)||ao in t?rt({},t):t:null}function Er(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?Ly(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Ff(a),ref:e&&e.ref?n&&s?W(s)?s.concat(vi(e)):[s,vi(e)]:vi(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==gt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Er(t.ssContent),ssFallback:t.ssFallback&&Er(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function ct(t=" ",e=0){return oe(oo,null,t,e)}function Uf(t="",e=!1){return e?(G(),pr(Gn,null,t)):oe(Gn,null,t)}function Pt(t){return t==null||typeof t=="boolean"?oe(Gn):W(t)?oe(gt,null,t.slice()):typeof t=="object"?hn(t):oe(oo,null,String(t))}function hn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Er(t)}function $c(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(W(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),$c(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(ao in e)?e._ctx=vt:s===3&&vt&&(vt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else J(e)?(e={default:e,_ctx:vt},n=32):(e=String(e),r&64?(n=16,e=[ct(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ly(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=_c([e.class,r.class]));else if(s==="style")e.style=vc([e.style,r.style]);else if(Xi(s)){const i=e[s],o=r[s];o&&i!==o&&!(W(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Ot(t,e,n,r=null){Rt(t,e,7,[n,r])}const $y=Pf();let Fy=0;function Uy(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||$y,i={uid:Fy++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new ag(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nf(r,s),emitsOptions:Ef(r,s),emit:null,emitted:null,propsDefaults:ge,inheritAttrs:r.inheritAttrs,ctx:ge,data:ge,props:ge,attrs:ge,slots:ge,refs:ge,setupState:ge,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Wg.bind(null,i),t.ce&&t.ce(i),i}let xe=null;const br=t=>{xe=t,t.scope.on()},qn=()=>{xe&&xe.scope.off(),xe=null};function Bf(t){return t.vnode.shapeFlag&4}let Es=!1;function By(t,e=!1){Es=e;const{props:n,children:r}=t.vnode,s=Bf(t);by(t,n,s,e),Iy(t,r);const i=s?Vy(t,e):void 0;return Es=!1,i}function Vy(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=uf(new Proxy(t.ctx,gy));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?jy(t):null;br(t),$r();const i=gn(r,t,0,[t.props,s]);if(Fr(),qn(),Wh(i)){if(i.then(qn,qn),e)return i.then(o=>{au(t,o,e)}).catch(o=>{no(o,t,0)});t.asyncDep=i}else au(t,i,e)}else Vf(t,e)}function au(t,e,n){J(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:_e(e)&&(t.setupState=pf(e)),Vf(t,n)}let cu;function Vf(t,e,n){const r=t.type;if(!t.render){if(!e&&cu&&!r.render){const s=r.template||Pc(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=r,l=rt(rt({isCustomElement:i,delimiters:a},o),c);r.render=cu(s,l)}}t.render=r.render||At}br(t),$r(),yy(t),Fr(),qn()}function qy(t){return new Proxy(t.attrs,{get(e,n){return ut(t,"get","$attrs"),e[n]}})}function jy(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=qy(t))},slots:t.slots,emit:t.emit,expose:e}}function co(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(pf(uf(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in os)return os[n](t)},has(e,n){return n in e||n in os}}))}function Gy(t,e=!0){return J(t)?t.displayName||t.name:t.name||e&&t.__name}function Ky(t){return J(t)&&"__vccOpts"in t}const yt=(t,e)=>qg(t,e,Es);function qf(t,e,n){const r=arguments.length;return r===2?_e(e)&&!W(e)?xa(e)?oe(t,null,[e]):oe(t,e):oe(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&xa(n)&&(n=[n]),oe(t,e,n))}const zy=Symbol(""),Hy=()=>Zt(zy),Wy="3.2.47",Qy="http://www.w3.org/2000/svg",Ln=typeof document<"u"?document:null,lu=Ln&&Ln.createElement("template"),Jy={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e?Ln.createElementNS(Qy,t):Ln.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Ln.createTextNode(t),createComment:t=>Ln.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ln.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{lu.innerHTML=r?`<svg>${t}</svg>`:t;const a=lu.content;if(r){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function Xy(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function Yy(t,e,n){const r=t.style,s=Me(n);if(n&&!s){if(e&&!Me(e))for(const i in e)n[i]==null&&Na(r,i,"");for(const i in n)Na(r,i,n[i])}else{const i=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=i)}}const uu=/\s*!important$/;function Na(t,e,n){if(W(n))n.forEach(r=>Na(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Zy(t,e);uu.test(n)?t.setProperty(Lr(r),n.replace(uu,""),"important"):t[r]=n}}const hu=["Webkit","Moz","ms"],zo={};function Zy(t,e){const n=zo[e];if(n)return n;let r=qt(e);if(r!=="filter"&&r in t)return zo[e]=r;r=eo(r);for(let s=0;s<hu.length;s++){const i=hu[s]+r;if(i in t)return zo[e]=i}return e}const fu="http://www.w3.org/1999/xlink";function ew(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(fu,e.slice(6,e.length)):t.setAttributeNS(fu,e,n);else{const i=Zm(e);n==null||i&&!Kh(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function tw(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const c=n??"";(t.value!==c||t.tagName==="OPTION")&&(t.value=c),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Kh(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function sr(t,e,n,r){t.addEventListener(e,n,r)}function nw(t,e,n,r){t.removeEventListener(e,n,r)}function rw(t,e,n,r,s=null){const i=t._vei||(t._vei={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=sw(e);if(r){const l=i[e]=aw(r,s);sr(t,a,l,c)}else o&&(nw(t,a,o,c),i[e]=void 0)}}const du=/(?:Once|Passive|Capture)$/;function sw(t){let e;if(du.test(t)){e={};let r;for(;r=t.match(du);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Lr(t.slice(2)),e]}let Ho=0;const iw=Promise.resolve(),ow=()=>Ho||(iw.then(()=>Ho=0),Ho=Date.now());function aw(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Rt(cw(r,n.value),e,5,[r])};return n.value=t,n.attached=ow(),n}function cw(t,e){if(W(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const pu=/^on[a-z]/,lw=(t,e,n,r,s=!1,i,o,a,c)=>{e==="class"?Xy(t,r,s):e==="style"?Yy(t,n,r):Xi(e)?Ec(e)||rw(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):uw(t,e,r,s))?tw(t,e,r,i,o,a,c):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),ew(t,e,r,s))};function uw(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&pu.test(e)&&J(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||pu.test(e)&&Me(n)?!1:e in t}const mu=t=>{const e=t.props["onUpdate:modelValue"]||!1;return W(e)?n=>mi(e,n):e};function hw(t){t.target.composing=!0}function gu(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const jf={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t._assign=mu(s);const i=r||s.props&&s.props.type==="number";sr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=va(a)),t._assign(a)}),n&&sr(t,"change",()=>{t.value=t.value.trim()}),e||(sr(t,"compositionstart",hw),sr(t,"compositionend",gu),sr(t,"change",gu))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:s}},i){if(t._assign=mu(i),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(s||t.type==="number")&&va(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},fw=rt({patchProp:lw},Jy);let yu;function dw(){return yu||(yu=Dy(fw))}const pw=(...t)=>{const e=dw().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=mw(r);if(!s)return;const i=e._component;!J(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function mw(t){return Me(t)?document.querySelector(t):t}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const ir=typeof window<"u";function gw(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ue=Object.assign;function Wo(t,e){const n={};for(const r in e){const s=e[r];n[r]=Dt(s)?s.map(t):t(s)}return n}const cs=()=>{},Dt=Array.isArray,yw=/\/$/,ww=t=>t.replace(yw,"");function Qo(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=bw(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function vw(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function wu(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function _w(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Sr(e.matched[r],n.matched[s])&&Gf(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Sr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Gf(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Ew(t[n],e[n]))return!1;return!0}function Ew(t,e){return Dt(t)?vu(t,e):Dt(e)?vu(e,t):t===e}function vu(t,e){return Dt(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function bw(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let s=n.length-1,i,o;for(i=0;i<r.length;i++)if(o=r[i],o!==".")if(o==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var bs;(function(t){t.pop="pop",t.push="push"})(bs||(bs={}));var ls;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ls||(ls={}));function Sw(t){if(!t)if(ir){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),ww(t)}const Tw=/^[^#]+#/;function Iw(t,e){return t.replace(Tw,"#")+e}function Cw(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const lo=()=>({left:window.pageXOffset,top:window.pageYOffset});function Aw(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=Cw(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function _u(t,e){return(history.state?history.state.position-e:-1)+t}const ka=new Map;function Rw(t,e){ka.set(t,e)}function Dw(t){const e=ka.get(t);return ka.delete(t),e}let xw=()=>location.protocol+"//"+location.host;function Kf(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),wu(c,"")}return wu(n,t)+r+s}function Nw(t,e,n,r){let s=[],i=[],o=null;const a=({state:d})=>{const m=Kf(t,location),w=n.value,v=e.value;let C=0;if(d){if(n.value=m,e.value=d,o&&o===w){o=null;return}C=v?d.position-v.position:0}else r(m);s.forEach(R=>{R(n.value,w,{delta:C,type:bs.pop,direction:C?C>0?ls.forward:ls.back:ls.unknown})})};function c(){o=n.value}function l(d){s.push(d);const m=()=>{const w=s.indexOf(d);w>-1&&s.splice(w,1)};return i.push(m),m}function u(){const{history:d}=window;d.state&&d.replaceState(ue({},d.state,{scroll:lo()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:c,listen:l,destroy:h}}function Eu(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?lo():null}}function kw(t){const{history:e,location:n}=window,r={value:Kf(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:xw()+t+c;try{e[u?"replaceState":"pushState"](l,"",d),s.value=l}catch(m){console.error(m),n[u?"replace":"assign"](d)}}function o(c,l){const u=ue({},e.state,Eu(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,u,!0),r.value=c}function a(c,l){const u=ue({},s.value,e.state,{forward:c,scroll:lo()});i(u.current,u,!0);const h=ue({},Eu(r.value,c,null),{position:u.position+1},l);i(c,h,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function Mw(t){t=Sw(t);const e=kw(t),n=Nw(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=ue({location:"",base:t,go:r,createHref:Iw.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function Ow(t){return typeof t=="string"||t&&typeof t=="object"}function zf(t){return typeof t=="string"||typeof t=="symbol"}const un={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Hf=Symbol("");var bu;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(bu||(bu={}));function Tr(t,e){return ue(new Error,{type:t,[Hf]:!0},e)}function Ht(t,e){return t instanceof Error&&Hf in t&&(e==null||!!(t.type&e))}const Su="[^/]+?",Pw={sensitive:!1,strict:!1,start:!0,end:!0},Lw=/[.+*?^${}()[\]/\\]/g;function $w(t,e){const n=ue({},Pw,e),r=[];let s=n.start?"^":"";const i=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let h=0;h<l.length;h++){const d=l[h];let m=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(Lw,"\\$&"),m+=40;else if(d.type===1){const{value:w,repeatable:v,optional:C,regexp:R}=d;i.push({name:w,repeatable:v,optional:C});const $=R||Su;if($!==Su){m+=10;try{new RegExp(`(${$})`)}catch(ne){throw new Error(`Invalid custom RegExp for param "${w}" (${$}): `+ne.message)}}let M=v?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;h||(M=C&&l.length<2?`(?:/${M})`:"/"+M),C&&(M+="?"),s+=M,m+=20,C&&(m+=-8),v&&(m+=-20),$===".*"&&(m+=-50)}u.push(m)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const m=u[d]||"",w=i[d-1];h[w.name]=m&&w.repeatable?m.split("/"):m}return h}function c(l){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const m of d)if(m.type===0)u+=m.value;else if(m.type===1){const{value:w,repeatable:v,optional:C}=m,R=w in l?l[w]:"";if(Dt(R)&&!v)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const $=Dt(R)?R.join("/"):R;if(!$)if(C)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${w}"`);u+=$}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function Fw(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Uw(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=Fw(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Tu(r))return 1;if(Tu(s))return-1}return s.length-r.length}function Tu(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Bw={type:0,value:""},Vw=/[a-zA-Z0-9_]/;function qw(t){if(!t)return[[]];if(t==="/")return[[Bw]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${l}": ${m}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",u="";function h(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:c==="("?n=2:Vw.test(c)?d():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),s}function jw(t,e,n){const r=$w(qw(t.path),n),s=ue(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Gw(t,e){const n=[],r=new Map;e=Au({strict:!1,end:!0,sensitive:!1},e);function s(u){return r.get(u)}function i(u,h,d){const m=!d,w=Kw(u);w.aliasOf=d&&d.record;const v=Au(e,u),C=[w];if("alias"in u){const M=typeof u.alias=="string"?[u.alias]:u.alias;for(const ne of M)C.push(ue({},w,{components:d?d.record.components:w.components,path:ne,aliasOf:d?d.record:w}))}let R,$;for(const M of C){const{path:ne}=M;if(h&&ne[0]!=="/"){const Se=h.record.path,je=Se[Se.length-1]==="/"?"":"/";M.path=h.record.path+(ne&&je+ne)}if(R=jw(M,h,v),d?d.alias.push(R):($=$||R,$!==R&&$.alias.push(R),m&&u.name&&!Cu(R)&&o(u.name)),w.children){const Se=w.children;for(let je=0;je<Se.length;je++)i(Se[je],R,d&&d.children[je])}d=d||R,(R.record.components&&Object.keys(R.record.components).length||R.record.name||R.record.redirect)&&c(R)}return $?()=>{o($)}:cs}function o(u){if(zf(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&Uw(u,n[h])>=0&&(u.record.path!==n[h].record.path||!Wf(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Cu(u)&&r.set(u.record.name,u)}function l(u,h){let d,m={},w,v;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw Tr(1,{location:u});v=d.record.name,m=ue(Iu(h.params,d.keys.filter($=>!$.optional).map($=>$.name)),u.params&&Iu(u.params,d.keys.map($=>$.name))),w=d.stringify(m)}else if("path"in u)w=u.path,d=n.find($=>$.re.test(w)),d&&(m=d.parse(w),v=d.record.name);else{if(d=h.name?r.get(h.name):n.find($=>$.re.test(h.path)),!d)throw Tr(1,{location:u,currentLocation:h});v=d.record.name,m=ue({},h.params,u.params),w=d.stringify(m)}const C=[];let R=d;for(;R;)C.unshift(R.record),R=R.parent;return{name:v,path:w,params:m,matched:C,meta:Hw(C)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Iu(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Kw(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:zw(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function zw(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function Cu(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Hw(t){return t.reduce((e,n)=>ue(e,n.meta),{})}function Au(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Wf(t,e){return e.children.some(n=>n===t||Wf(t,n))}const Qf=/#/g,Ww=/&/g,Qw=/\//g,Jw=/=/g,Xw=/\?/g,Jf=/\+/g,Yw=/%5B/g,Zw=/%5D/g,Xf=/%5E/g,ev=/%60/g,Yf=/%7B/g,tv=/%7C/g,Zf=/%7D/g,nv=/%20/g;function Fc(t){return encodeURI(""+t).replace(tv,"|").replace(Yw,"[").replace(Zw,"]")}function rv(t){return Fc(t).replace(Yf,"{").replace(Zf,"}").replace(Xf,"^")}function Ma(t){return Fc(t).replace(Jf,"%2B").replace(nv,"+").replace(Qf,"%23").replace(Ww,"%26").replace(ev,"`").replace(Yf,"{").replace(Zf,"}").replace(Xf,"^")}function sv(t){return Ma(t).replace(Jw,"%3D")}function iv(t){return Fc(t).replace(Qf,"%23").replace(Xw,"%3F")}function ov(t){return t==null?"":iv(t).replace(Qw,"%2F")}function xi(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function av(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Jf," "),o=i.indexOf("="),a=xi(o<0?i:i.slice(0,o)),c=o<0?null:xi(i.slice(o+1));if(a in e){let l=e[a];Dt(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function Ru(t){let e="";for(let n in t){const r=t[n];if(n=sv(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Dt(r)?r.map(i=>i&&Ma(i)):[r&&Ma(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function cv(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Dt(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const lv=Symbol(""),Du=Symbol(""),Uc=Symbol(""),ed=Symbol(""),Oa=Symbol("");function Qr(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function fn(t,e,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(Tr(4,{from:n,to:e})):h instanceof Error?a(h):Ow(h)?a(Tr(2,{from:e,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},l=t.call(r&&r.instances[s],e,n,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch(h=>a(h))})}function Jo(t,e,n,r){const s=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(uv(a)){const l=(a.__vccOpts||a)[e];l&&s.push(fn(l,n,r,i,o))}else{let c=a();s.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=gw(l)?l.default:l;i.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&fn(d,n,r,i,o)()}))}}return s}function uv(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function xu(t){const e=Zt(Uc),n=Zt(ed),r=yt(()=>e.resolve(fr(t.to))),s=yt(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Sr.bind(null,u));if(d>-1)return d;const m=Nu(c[l-2]);return l>1&&Nu(u)===m&&h[h.length-1].path!==m?h.findIndex(Sr.bind(null,c[l-2])):d}),i=yt(()=>s.value>-1&&pv(n.params,r.value.params)),o=yt(()=>s.value>-1&&s.value===n.matched.length-1&&Gf(n.params,r.value.params));function a(c={}){return dv(c)?e[fr(t.replace)?"replace":"push"](fr(t.to)).catch(cs):Promise.resolve()}return{route:r,href:yt(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const hv=$e({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:xu,setup(t,{slots:e}){const n=Os(xu(t)),{options:r}=Zt(Uc),s=yt(()=>({[ku(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[ku(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:qf("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),fv=hv;function dv(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function pv(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Dt(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Nu(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ku=(t,e,n)=>t??e??n,mv=$e({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Zt(Oa),s=yt(()=>t.route||r.value),i=Zt(Du,0),o=yt(()=>{let l=fr(i);const{matched:u}=s.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=yt(()=>s.value.matched[o.value]);gi(Du,yt(()=>o.value+1)),gi(lv,a),gi(Oa,s);const c=$g();return yi(()=>[c.value,a.value,t.name],([l,u,h],[d,m,w])=>{u&&(u.instances[h]=l,m&&m!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),l&&u&&(!m||!Sr(u,m)||!d)&&(u.enterCallbacks[h]||[]).forEach(v=>v(l))},{flush:"post"}),()=>{const l=s.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return Mu(n.default,{Component:d,route:l});const m=h.props[u],w=m?m===!0?l.params:typeof m=="function"?m(l):m:null,C=qf(d,ue({},w,e,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return Mu(n.default,{Component:C,route:l})||C}}});function Mu(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const gv=mv;function yv(t){const e=Gw(t.routes,t),n=t.parseQuery||av,r=t.stringifyQuery||Ru,s=t.history,i=Qr(),o=Qr(),a=Qr(),c=Fg(un);let l=un;ir&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Wo.bind(null,_=>""+_),h=Wo.bind(null,ov),d=Wo.bind(null,xi);function m(_,O){let x,F;return zf(_)?(x=e.getRecordMatcher(_),F=O):F=_,e.addRoute(F,x)}function w(_){const O=e.getRecordMatcher(_);O&&e.removeRoute(O)}function v(){return e.getRoutes().map(_=>_.record)}function C(_){return!!e.getRecordMatcher(_)}function R(_,O){if(O=ue({},O||c.value),typeof _=="string"){const f=Qo(n,_,O.path),p=e.resolve({path:f.path},O),g=s.createHref(f.fullPath);return ue(f,p,{params:d(p.params),hash:xi(f.hash),redirectedFrom:void 0,href:g})}let x;if("path"in _)x=ue({},_,{path:Qo(n,_.path,O.path).path});else{const f=ue({},_.params);for(const p in f)f[p]==null&&delete f[p];x=ue({},_,{params:h(_.params)}),O.params=h(O.params)}const F=e.resolve(x,O),se=_.hash||"";F.params=u(d(F.params));const Ee=vw(r,ue({},_,{hash:rv(se),path:F.path})),Z=s.createHref(Ee);return ue({fullPath:Ee,hash:se,query:r===Ru?cv(_.query):_.query||{}},F,{redirectedFrom:void 0,href:Z})}function $(_){return typeof _=="string"?Qo(n,_,c.value.path):ue({},_)}function M(_,O){if(l!==_)return Tr(8,{from:O,to:_})}function ne(_){return pt(_)}function Se(_){return ne(ue($(_),{replace:!0}))}function je(_){const O=_.matched[_.matched.length-1];if(O&&O.redirect){const{redirect:x}=O;let F=typeof x=="function"?x(_):x;return typeof F=="string"&&(F=F.includes("?")||F.includes("#")?F=$(F):{path:F},F.params={}),ue({query:_.query,hash:_.hash,params:"path"in F?{}:_.params},F)}}function pt(_,O){const x=l=R(_),F=c.value,se=_.state,Ee=_.force,Z=_.replace===!0,f=je(x);if(f)return pt(ue($(f),{state:typeof f=="object"?ue({},se,f.state):se,force:Ee,replace:Z}),O||x);const p=x;p.redirectedFrom=O;let g;return!Ee&&_w(r,F,x)&&(g=Tr(16,{to:p,from:F}),xn(F,F,!0,!1)),(g?Promise.resolve(g):Yn(p,F)).catch(y=>Ht(y)?Ht(y,2)?y:_t(y):pe(y,p,F)).then(y=>{if(y){if(Ht(y,2))return pt(ue({replace:Z},$(y.to),{state:typeof y.to=="object"?ue({},se,y.to.state):se,force:Ee}),O||p)}else y=cn(p,F,!0,Z,se);return Nt(p,F,y),y})}function mt(_,O){const x=M(_,O);return x?Promise.reject(x):Promise.resolve()}function Yn(_,O){let x;const[F,se,Ee]=wv(_,O);x=Jo(F.reverse(),"beforeRouteLeave",_,O);for(const f of F)f.leaveGuards.forEach(p=>{x.push(fn(p,_,O))});const Z=mt.bind(null,_,O);return x.push(Z),nr(x).then(()=>{x=[];for(const f of i.list())x.push(fn(f,_,O));return x.push(Z),nr(x)}).then(()=>{x=Jo(se,"beforeRouteUpdate",_,O);for(const f of se)f.updateGuards.forEach(p=>{x.push(fn(p,_,O))});return x.push(Z),nr(x)}).then(()=>{x=[];for(const f of _.matched)if(f.beforeEnter&&!O.matched.includes(f))if(Dt(f.beforeEnter))for(const p of f.beforeEnter)x.push(fn(p,_,O));else x.push(fn(f.beforeEnter,_,O));return x.push(Z),nr(x)}).then(()=>(_.matched.forEach(f=>f.enterCallbacks={}),x=Jo(Ee,"beforeRouteEnter",_,O),x.push(Z),nr(x))).then(()=>{x=[];for(const f of o.list())x.push(fn(f,_,O));return x.push(Z),nr(x)}).catch(f=>Ht(f,8)?f:Promise.reject(f))}function Nt(_,O,x){for(const F of a.list())F(_,O,x)}function cn(_,O,x,F,se){const Ee=M(_,O);if(Ee)return Ee;const Z=O===un,f=ir?history.state:{};x&&(F||Z?s.replace(_.fullPath,ue({scroll:Z&&f&&f.scroll},se)):s.push(_.fullPath,se)),c.value=_,xn(_,O,x,Z),_t()}let kt;function Zn(){kt||(kt=s.listen((_,O,x)=>{if(!Ys.listening)return;const F=R(_),se=je(F);if(se){pt(ue(se,{replace:!0}),F).catch(cs);return}l=F;const Ee=c.value;ir&&Rw(_u(Ee.fullPath,x.delta),lo()),Yn(F,Ee).catch(Z=>Ht(Z,12)?Z:Ht(Z,2)?(pt(Z.to,F).then(f=>{Ht(f,20)&&!x.delta&&x.type===bs.pop&&s.go(-1,!1)}).catch(cs),Promise.reject()):(x.delta&&s.go(-x.delta,!1),pe(Z,F,Ee))).then(Z=>{Z=Z||cn(F,Ee,!1),Z&&(x.delta&&!Ht(Z,8)?s.go(-x.delta,!1):x.type===bs.pop&&Ht(Z,20)&&s.go(-1,!1)),Nt(F,Ee,Z)}).catch(cs)}))}let Dn=Qr(),zr=Qr(),Ce;function pe(_,O,x){_t(_);const F=zr.list();return F.length?F.forEach(se=>se(_,O,x)):console.error(_),Promise.reject(_)}function fe(){return Ce&&c.value!==un?Promise.resolve():new Promise((_,O)=>{Dn.add([_,O])})}function _t(_){return Ce||(Ce=!_,Zn(),Dn.list().forEach(([O,x])=>_?x(_):O()),Dn.reset()),_}function xn(_,O,x,F){const{scrollBehavior:se}=t;if(!ir||!se)return Promise.resolve();const Ee=!x&&Dw(_u(_.fullPath,0))||(F||!x)&&history.state&&history.state.scroll||null;return yf().then(()=>se(_,O,Ee)).then(Z=>Z&&Aw(Z)).catch(Z=>pe(Z,_,O))}const Et=_=>s.go(_);let st;const er=new Set,Ys={currentRoute:c,listening:!0,addRoute:m,removeRoute:w,hasRoute:C,getRoutes:v,resolve:R,options:t,push:ne,replace:Se,go:Et,back:()=>Et(-1),forward:()=>Et(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:zr.add,isReady:fe,install(_){const O=this;_.component("RouterLink",fv),_.component("RouterView",gv),_.config.globalProperties.$router=O,Object.defineProperty(_.config.globalProperties,"$route",{enumerable:!0,get:()=>fr(c)}),ir&&!st&&c.value===un&&(st=!0,ne(s.location).catch(se=>{}));const x={};for(const se in un)x[se]=yt(()=>c.value[se]);_.provide(Uc,O),_.provide(ed,Os(x)),_.provide(Oa,c);const F=_.unmount;er.add(_),_.unmount=function(){er.delete(_),er.size<1&&(l=un,kt&&kt(),kt=null,c.value=un,st=!1,Ce=!1),F()}}};return Ys}function nr(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function wv(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>Sr(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Sr(l,c))||s.push(c))}return[n,r,s]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vv=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},nd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(d=64)),r.push(n[u],n[h],n[d],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(td(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vv(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||h==null)throw new _v;const d=i<<2|a>>4;if(r.push(d),l!==64){const m=a<<4&240|l>>2;if(r.push(m),h!==64){const w=l<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _v extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ev=function(t){const e=td(t);return nd.encodeByteArray(e,!0)},Ni=function(t){return Ev(t).replace(/\./g,"")},bv=function(t){try{return nd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=()=>Sv().__FIREBASE_DEFAULTS__,Iv=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Cv=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bv(t[1]);return e&&JSON.parse(e)},rd=()=>{try{return Tv()||Iv()||Cv()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Av=t=>{var e,n;return(n=(e=rd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Rv=t=>{const e=Av(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Dv=()=>{var t;return(t=rd())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ni(JSON.stringify(n)),Ni(JSON.stringify(o)),a].join(".")}function kv(){try{return typeof indexedDB=="object"}catch{return!1}}function Mv(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="FirebaseError";class Ur extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ov,Object.setPrototypeOf(this,Ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sd.prototype.create)}}class sd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Pv(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ur(s,a,r)}}function Pv(t,e){return t.replace(Lv,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Lv=/\{\$([^}]+)}/g;function Pa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ou(i)&&Ou(o)){if(!Pa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ou(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t){return t&&t._delegate?t._delegate:t}class Ss{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Uv(e))try{this.getOrInitializeService({instanceIdentifier:On})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=On){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=On){return this.instances.has(e)}getOptions(e=On){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Fv(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=On){return this.component?this.component.multipleInstances?e:On:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fv(t){return t===On?void 0:t}function Uv(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $v(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const Vv={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},qv=le.INFO,jv={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},Gv=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=jv[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class id{constructor(e){this.name=e,this._logLevel=qv,this._logHandler=Gv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const Kv=(t,e)=>e.some(n=>t instanceof n);let Pu,Lu;function zv(){return Pu||(Pu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hv(){return Lu||(Lu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const od=new WeakMap,La=new WeakMap,ad=new WeakMap,Xo=new WeakMap,Bc=new WeakMap;function Wv(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&od.set(n,t)}).catch(()=>{}),Bc.set(e,t),e}function Qv(t){if(La.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});La.set(t,e)}let $a={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return La.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ad.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Jv(t){$a=t($a)}function Xv(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yo(this),e,...n);return ad.set(r,e.sort?e.sort():[e]),wn(r)}:Hv().includes(t)?function(...e){return t.apply(Yo(this),e),wn(od.get(this))}:function(...e){return wn(t.apply(Yo(this),e))}}function Yv(t){return typeof t=="function"?Xv(t):(t instanceof IDBTransaction&&Qv(t),Kv(t,zv())?new Proxy(t,$a):t)}function wn(t){if(t instanceof IDBRequest)return Wv(t);if(Xo.has(t))return Xo.get(t);const e=Yv(t);return e!==t&&(Xo.set(t,e),Bc.set(e,t)),e}const Yo=t=>Bc.get(t);function Zv(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=wn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(wn(o.result),c.oldVersion,c.newVersion,wn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const e0=["get","getKey","getAll","getAllKeys","count"],t0=["put","add","delete","clear"],Zo=new Map;function $u(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zo.get(e))return Zo.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=t0.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||e0.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return Zo.set(e,i),i}Jv(t=>({...t,get:(e,n,r)=>$u(e,n)||t.get(e,n,r),has:(e,n)=>!!$u(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r0(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function r0(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fa="@firebase/app",Fu="0.9.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new id("@firebase/app"),s0="@firebase/app-compat",i0="@firebase/analytics-compat",o0="@firebase/analytics",a0="@firebase/app-check-compat",c0="@firebase/app-check",l0="@firebase/auth",u0="@firebase/auth-compat",h0="@firebase/database",f0="@firebase/database-compat",d0="@firebase/functions",p0="@firebase/functions-compat",m0="@firebase/installations",g0="@firebase/installations-compat",y0="@firebase/messaging",w0="@firebase/messaging-compat",v0="@firebase/performance",_0="@firebase/performance-compat",E0="@firebase/remote-config",b0="@firebase/remote-config-compat",S0="@firebase/storage",T0="@firebase/storage-compat",I0="@firebase/firestore",C0="@firebase/firestore-compat",A0="firebase",R0="9.21.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="[DEFAULT]",D0={[Fa]:"fire-core",[s0]:"fire-core-compat",[o0]:"fire-analytics",[i0]:"fire-analytics-compat",[c0]:"fire-app-check",[a0]:"fire-app-check-compat",[l0]:"fire-auth",[u0]:"fire-auth-compat",[h0]:"fire-rtdb",[f0]:"fire-rtdb-compat",[d0]:"fire-fn",[p0]:"fire-fn-compat",[m0]:"fire-iid",[g0]:"fire-iid-compat",[y0]:"fire-fcm",[w0]:"fire-fcm-compat",[v0]:"fire-perf",[_0]:"fire-perf-compat",[E0]:"fire-rc",[b0]:"fire-rc-compat",[S0]:"fire-gcs",[T0]:"fire-gcs-compat",[I0]:"fire-fst",[C0]:"fire-fst-compat","fire-js":"fire-js",[A0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new Map,Ba=new Map;function x0(t,e){try{t.container.addComponent(e)}catch(n){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mi(t){const e=t.name;if(Ba.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;Ba.set(e,t);for(const n of ki.values())x0(n,t);return!0}function N0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},vn=new sd("app","Firebase",k0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=R0;function cd(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ua,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw vn.create("bad-app-name",{appName:String(s)});if(n||(n=Dv()),!n)throw vn.create("no-options");const i=ki.get(s);if(i){if(Pa(n,i.options)&&Pa(r,i.config))return i;throw vn.create("duplicate-app",{appName:s})}const o=new Bv(s);for(const c of Ba.values())o.addComponent(c);const a=new M0(n,r,o);return ki.set(s,a),a}function P0(t=Ua){const e=ki.get(t);if(!e&&t===Ua)return cd();if(!e)throw vn.create("no-app",{appName:t});return e}function mr(t,e,n){var r;let s=(r=D0[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(a.join(" "));return}Mi(new Ss(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="firebase-heartbeat-database",$0=1,Ts="firebase-heartbeat-store";let ea=null;function ld(){return ea||(ea=Zv(L0,$0,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ts)}}}).catch(t=>{throw vn.create("idb-open",{originalErrorMessage:t.message})})),ea}async function F0(t){try{return(await ld()).transaction(Ts).objectStore(Ts).get(ud(t))}catch(e){if(e instanceof Ur)Kn.warn(e.message);else{const n=vn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kn.warn(n.message)}}}async function Uu(t,e){try{const r=(await ld()).transaction(Ts,"readwrite");return await r.objectStore(Ts).put(e,ud(t)),r.done}catch(n){if(n instanceof Ur)Kn.warn(n.message);else{const r=vn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kn.warn(r.message)}}}function ud(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=1024,B0=30*24*60*60*1e3;class V0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new j0(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Bu();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=B0}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Bu(),{heartbeatsToSend:n,unsentEntries:r}=q0(this._heartbeatsCache.heartbeats),s=Ni(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Bu(){return new Date().toISOString().substring(0,10)}function q0(t,e=U0){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Vu(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Vu(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class j0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kv()?Mv().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await F0(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Uu(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Uu(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vu(t){return Ni(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t){Mi(new Ss("platform-logger",e=>new n0(e),"PRIVATE")),Mi(new Ss("heartbeat",e=>new V0(e),"PRIVATE")),mr(Fa,Fu,t),mr(Fa,Fu,"esm2017"),mr("fire-js","")}G0("");var K0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N,Vc=Vc||{},K=K0||self;function Oi(){}function uo(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ps(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function z0(t){return Object.prototype.hasOwnProperty.call(t,ta)&&t[ta]||(t[ta]=++H0)}var ta="closure_uid_"+(1e9*Math.random()>>>0),H0=0;function W0(t,e,n){return t.call.apply(t.bind,arguments)}function Q0(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Je(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Je=W0:Je=Q0,Je.apply(null,arguments)}function ii(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Fe(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Cn(){this.s=this.s,this.o=this.o}var J0=0;Cn.prototype.s=!1;Cn.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),J0!=0)&&z0(this)};Cn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hd=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function qc(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function qu(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(uo(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Xe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Xe.prototype.h=function(){this.defaultPrevented=!0};var X0=function(){if(!K.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{K.addEventListener("test",Oi,e),K.removeEventListener("test",Oi,e)}catch{}return t}();function Pi(t){return/^[\s\xa0]*$/.test(t)}var ju=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function na(t,e){return t<e?-1:t>e?1:0}function ho(){var t=K.navigator;return t&&(t=t.userAgent)?t:""}function $t(t){return ho().indexOf(t)!=-1}function jc(t){return jc[" "](t),t}jc[" "]=Oi;function fd(t,e,n){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=n(e)}var Y0=$t("Opera"),Ir=$t("Trident")||$t("MSIE"),dd=$t("Edge"),Va=dd||Ir,pd=$t("Gecko")&&!(ho().toLowerCase().indexOf("webkit")!=-1&&!$t("Edge"))&&!($t("Trident")||$t("MSIE"))&&!$t("Edge"),Z0=ho().toLowerCase().indexOf("webkit")!=-1&&!$t("Edge");function md(){var t=K.document;return t?t.documentMode:void 0}var Li;e:{var ra="",sa=function(){var t=ho();if(pd)return/rv:([^\);]+)(\)|;)/.exec(t);if(dd)return/Edge\/([\d\.]+)/.exec(t);if(Ir)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Z0)return/WebKit\/(\S+)/.exec(t);if(Y0)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(sa&&(ra=sa?sa[1]:""),Ir){var ia=md();if(ia!=null&&ia>parseFloat(ra)){Li=String(ia);break e}}Li=ra}var e1={};function t1(){return fd(e1,9,function(){let t=0;const e=ju(String(Li)).split("."),n=ju("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var s=e[o]||"",i=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s[0].length==0&&i[0].length==0)break;t=na(s[1].length==0?0:parseInt(s[1],10),i[1].length==0?0:parseInt(i[1],10))||na(s[2].length==0,i[2].length==0)||na(s[2],i[2]),s=s[3],i=i[3]}while(t==0)}return 0<=t})}var qa;if(K.document&&Ir){var Gu=md();qa=Gu||parseInt(Li,10)||void 0}else qa=void 0;var n1=qa;function Is(t,e){if(Xe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(pd){e:{try{jc(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:r1[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Is.$.h.call(this)}}Fe(Is,Xe);var r1={2:"touch",3:"pen",4:"mouse"};Is.prototype.h=function(){Is.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ls="closure_listenable_"+(1e6*Math.random()|0),s1=0;function i1(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++s1,this.fa=this.ia=!1}function fo(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Gc(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function gd(t){const e={};for(const n in t)e[n]=t[n];return e}const Ku="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yd(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Ku.length;i++)n=Ku[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function po(t){this.src=t,this.g={},this.h=0}po.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Ga(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new i1(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function ja(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=hd(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(fo(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Ga(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Kc="closure_lm_"+(1e6*Math.random()|0),oa={};function wd(t,e,n,r,s){if(r&&r.once)return _d(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)wd(t,e[i],n,r,s);return null}return n=Wc(n),t&&t[Ls]?t.O(e,n,Ps(r)?!!r.capture:!!r,s):vd(t,e,n,!1,r,s)}function vd(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Ps(s)?!!s.capture:!!s,a=Hc(t);if(a||(t[Kc]=a=new po(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=o1(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)X0||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(bd(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function o1(){function t(n){return e.call(t.src,t.listener,n)}const e=a1;return t}function _d(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)_d(t,e[i],n,r,s);return null}return n=Wc(n),t&&t[Ls]?t.P(e,n,Ps(r)?!!r.capture:!!r,s):vd(t,e,n,!0,r,s)}function Ed(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)Ed(t,e[i],n,r,s);else r=Ps(r)?!!r.capture:!!r,n=Wc(n),t&&t[Ls]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Ga(i,n,r,s),-1<n&&(fo(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Hc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ga(e,n,r,s)),(n=-1<t?e[t]:null)&&zc(n))}function zc(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Ls])ja(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(bd(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Hc(e))?(ja(n,t),n.h==0&&(n.src=null,e[Kc]=null)):fo(t)}}}function bd(t){return t in oa?oa[t]:oa[t]="on"+t}function a1(t,e){if(t.fa)t=!0;else{e=new Is(e,this);var n=t.listener,r=t.la||t.src;t.ia&&zc(t),t=n.call(r,e)}return t}function Hc(t){return t=t[Kc],t instanceof po?t:null}var aa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wc(t){return typeof t=="function"?t:(t[aa]||(t[aa]=function(e){return t.handleEvent(e)}),t[aa])}function Le(){Cn.call(this),this.i=new po(this),this.S=this,this.J=null}Fe(Le,Cn);Le.prototype[Ls]=!0;Le.prototype.removeEventListener=function(t,e,n,r){Ed(this,t,e,n,r)};function qe(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Xe(e,t);else if(e instanceof Xe)e.target=e.target||t;else{var s=e;e=new Xe(r,t),yd(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=oi(o,r,!0,e)&&s}if(o=e.g=t,s=oi(o,r,!0,e)&&s,s=oi(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=oi(o,r,!1,e)&&s}Le.prototype.N=function(){if(Le.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)fo(n[r]);delete t.g[e],t.h--}}this.J=null};Le.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Le.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function oi(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ja(t.i,o),s=a.call(c,r)!==!1&&s}}return s&&!r.defaultPrevented}var Qc=K.JSON.stringify;function c1(){var t=Id;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class l1{constructor(){this.h=this.g=null}add(e,n){const r=Sd.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Sd=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new u1,t=>t.reset());class u1{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function h1(t){K.setTimeout(()=>{throw t},0)}function Td(t,e){Ka||f1(),za||(Ka(),za=!0),Id.add(t,e)}var Ka;function f1(){var t=K.Promise.resolve(void 0);Ka=function(){t.then(d1)}}var za=!1,Id=new l1;function d1(){for(var t;t=c1();){try{t.h.call(t.g)}catch(n){h1(n)}var e=Sd;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}za=!1}function mo(t,e){Le.call(this),this.h=t||1,this.g=e||K,this.j=Je(this.qb,this),this.l=Date.now()}Fe(mo,Le);N=mo.prototype;N.ga=!1;N.T=null;N.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),qe(this,"tick"),this.ga&&(Jc(this),this.start()))}};N.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Jc(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}N.N=function(){mo.$.N.call(this),Jc(this),delete this.g};function Xc(t,e,n){if(typeof t=="function")n&&(t=Je(t,n));else if(t&&typeof t.handleEvent=="function")t=Je(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:K.setTimeout(t,e||0)}function Cd(t){t.g=Xc(()=>{t.g=null,t.i&&(t.i=!1,Cd(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class p1 extends Cn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Cd(this)}N(){super.N(),this.g&&(K.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(t){Cn.call(this),this.h=t,this.g={}}Fe(Cs,Cn);var zu=[];function Ad(t,e,n,r){Array.isArray(n)||(n&&(zu[0]=n.toString()),n=zu);for(var s=0;s<n.length;s++){var i=wd(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Rd(t){Gc(t.g,function(e,n){this.g.hasOwnProperty(n)&&zc(e)},t),t.g={}}Cs.prototype.N=function(){Cs.$.N.call(this),Rd(this)};Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function go(){this.g=!0}go.prototype.Ea=function(){this.g=!1};function m1(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function g1(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function cr(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+w1(t,n)+(r?" "+r:"")})}function y1(t,e){t.info(function(){return"TIMEOUT: "+e})}go.prototype.info=function(){};function w1(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Qc(n)}catch{return e}}var Qn={},Hu=null;function yo(){return Hu=Hu||new Le}Qn.Ta="serverreachability";function Dd(t){Xe.call(this,Qn.Ta,t)}Fe(Dd,Xe);function As(t){const e=yo();qe(e,new Dd(e))}Qn.STAT_EVENT="statevent";function xd(t,e){Xe.call(this,Qn.STAT_EVENT,t),this.stat=e}Fe(xd,Xe);function nt(t){const e=yo();qe(e,new xd(e,t))}Qn.Ua="timingevent";function Nd(t,e){Xe.call(this,Qn.Ua,t),this.size=e}Fe(Nd,Xe);function $s(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return K.setTimeout(function(){t()},e)}var wo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},kd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yc(){}Yc.prototype.h=null;function Wu(t){return t.h||(t.h=t.i())}function Md(){}var Fs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Zc(){Xe.call(this,"d")}Fe(Zc,Xe);function el(){Xe.call(this,"c")}Fe(el,Xe);var Ha;function vo(){}Fe(vo,Yc);vo.prototype.g=function(){return new XMLHttpRequest};vo.prototype.i=function(){return{}};Ha=new vo;function Us(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Cs(this),this.P=v1,t=Va?125:void 0,this.V=new mo(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Od}function Od(){this.i=null,this.g="",this.h=!1}var v1=45e3,Wa={},$i={};N=Us.prototype;N.setTimeout=function(t){this.P=t};function Qa(t,e,n){t.L=1,t.v=Eo(nn(e)),t.s=n,t.S=!0,Pd(t,null)}function Pd(t,e){t.G=Date.now(),Bs(t),t.A=nn(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),jd(n.i,"t",r),t.C=0,n=t.l.I,t.h=new Od,t.g=up(t.l,n?e:null,!t.s),0<t.O&&(t.M=new p1(Je(t.Pa,t,t.g),t.O)),Ad(t.U,t.g,"readystatechange",t.nb),e=t.I?gd(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),As(),m1(t.j,t.u,t.A,t.m,t.W,t.s)}N.nb=function(t){t=t.target;const e=this.M;e&&Xt(t)==3?e.l():this.Pa(t)};N.Pa=function(t){try{if(t==this.g)e:{const u=Xt(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||Va||this.g&&(this.h.h||this.g.ja()||Yu(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?As(3):As(2)),_o(this);var n=this.g.da();this.aa=n;t:if(Ld(this)){var r=Yu(this.g);t="";var s=r.length,i=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),us(this);var o="";break t}this.h.i=new K.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,g1(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.ba&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pi(a)){var l=a;break t}}l=null}if(n=l)cr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ja(this,n);else{this.i=!1,this.o=3,nt(12),Fn(this),us(this);break e}}this.S?($d(this,u,o),Va&&this.i&&u==3&&(Ad(this.U,this.V,"tick",this.mb),this.V.start())):(cr(this.j,this.m,o,null),Ja(this,o)),u==4&&Fn(this),this.i&&!this.J&&(u==4?op(this.l,this):(this.i=!1,Bs(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,nt(12)):(this.o=0,nt(13)),Fn(this),us(this)}}}catch{}finally{}};function Ld(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function $d(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=_1(t,n),s==$i){e==4&&(t.o=4,nt(14),r=!1),cr(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Wa){t.o=4,nt(15),cr(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else cr(t.j,t.m,s,null),Ja(t,s);Ld(t)&&s!=$i&&s!=Wa&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,nt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ca&&(t.ca=!0,e=t.l,e.g==t&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),al(e),e.L=!0,nt(11))):(cr(t.j,t.m,n,"[Invalid Chunked Response]"),Fn(t),us(t))}N.mb=function(){if(this.g){var t=Xt(this.g),e=this.g.ja();this.C<e.length&&(_o(this),$d(this,t,e),this.i&&t!=4&&Bs(this))}};function _1(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?$i:(n=Number(e.substring(n,r)),isNaN(n)?Wa:(r+=1,r+n>e.length?$i:(e=e.substr(r,n),t.C=r+n,e)))}N.cancel=function(){this.J=!0,Fn(this)};function Bs(t){t.Y=Date.now()+t.P,Fd(t,t.P)}function Fd(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=$s(Je(t.lb,t),e)}function _o(t){t.B&&(K.clearTimeout(t.B),t.B=null)}N.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(y1(this.j,this.A),this.L!=2&&(As(),nt(17)),Fn(this),this.o=2,us(this)):Fd(this,this.Y-t)};function us(t){t.l.H==0||t.J||op(t.l,t)}function Fn(t){_o(t);var e=t.M;e&&typeof e.ra=="function"&&e.ra(),t.M=null,Jc(t.V),Rd(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ra())}function Ja(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Xa(n.h,t))){if(!t.K&&Xa(n.h,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Bi(n),To(n);else break e;ol(n),nt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.M&&n.A==0&&!n.v&&(n.v=$s(Je(n.ib,n),6e3));if(1>=zd(n.h)&&n.na){try{n.na()}catch{}n.na=void 0}}else Un(n,11)}else if((t.K||n.g==t)&&Bi(n),!Pi(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let l=s[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.J=l[1],n.oa=l[2];const u=l[3];u!=null&&(n.qa=u,n.j.info("VER="+n.qa));const h=l[4];h!=null&&(n.Ga=h,n.j.info("SVER="+n.Ga));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.K=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const w=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var i=r.h;i.g||w.indexOf("spdy")==-1&&w.indexOf("quic")==-1&&w.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(tl(i,i.h),i.h=null))}if(r.F){const v=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,we(r.G,r.F,v))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-t.G,n.j.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=lp(r,r.I?r.oa:null,r.Y),o.K){Hd(r.h,o);var a=o,c=r.K;c&&a.setTimeout(c),a.B&&(_o(a),Bs(a)),r.g=o}else sp(r);0<n.i.length&&Io(n)}else l[0]!="stop"&&l[0]!="close"||Un(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Un(n,7):il(n):l[0]!="noop"&&n.l&&n.l.Aa(l),n.A=0)}}As(4)}catch{}}function E1(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(uo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function b1(t){if(t.sa&&typeof t.sa=="function")return t.sa();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(uo(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Ud(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(uo(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=b1(t),r=E1(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var Bd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function S1(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function jn(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof jn){this.h=e!==void 0?e:t.h,Fi(this,t.j),this.s=t.s,this.g=t.g,Ui(this,t.m),this.l=t.l,e=t.i;var n=new Rs;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Qu(this,n),this.o=t.o}else t&&(n=String(t).match(Bd))?(this.h=!!e,Fi(this,n[1]||"",!0),this.s=ts(n[2]||""),this.g=ts(n[3]||"",!0),Ui(this,n[4]),this.l=ts(n[5]||"",!0),Qu(this,n[6]||"",!0),this.o=ts(n[7]||"")):(this.h=!!e,this.i=new Rs(null,this.h))}jn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ns(e,Ju,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ns(e,Ju,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ns(n,n.charAt(0)=="/"?C1:I1,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ns(n,R1)),t.join("")};function nn(t){return new jn(t)}function Fi(t,e,n){t.j=n?ts(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ui(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Qu(t,e,n){e instanceof Rs?(t.i=e,D1(t.i,t.h)):(n||(e=ns(e,A1)),t.i=new Rs(e,t.h))}function we(t,e,n){t.i.set(e,n)}function Eo(t){return we(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ts(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ns(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,T1),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function T1(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Ju=/[#\/\?@]/g,I1=/[#\?:]/g,C1=/[#\?]/g,A1=/[#\?@]/g,R1=/#/g;function Rs(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function An(t){t.g||(t.g=new Map,t.h=0,t.i&&S1(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}N=Rs.prototype;N.add=function(t,e){An(this),this.i=null,t=Br(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Vd(t,e){An(t),e=Br(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function qd(t,e){return An(t),e=Br(t,e),t.g.has(e)}N.forEach=function(t,e){An(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};N.sa=function(){An(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};N.Z=function(t){An(this);let e=[];if(typeof t=="string")qd(this,t)&&(e=e.concat(this.g.get(Br(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};N.set=function(t,e){return An(this),this.i=null,t=Br(this,t),qd(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};N.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function jd(t,e,n){Vd(t,e),0<n.length&&(t.i=null,t.g.set(Br(t,e),qc(n)),t.h+=n.length)}N.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Br(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function D1(t,e){e&&!t.j&&(An(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Vd(this,r),jd(this,s,n))},t)),t.j=e}var x1=class{constructor(t,e){this.h=t,this.g=e}};function Gd(t){this.l=t||N1,K.PerformanceNavigationTiming?(t=K.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(K.g&&K.g.Ka&&K.g.Ka()&&K.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var N1=10;function Kd(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function zd(t){return t.h?1:t.g?t.g.size:0}function Xa(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function tl(t,e){t.g?t.g.add(e):t.h=e}function Hd(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Gd.prototype.cancel=function(){if(this.i=Wd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Wd(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return qc(t.i)}function nl(){}nl.prototype.stringify=function(t){return K.JSON.stringify(t,void 0)};nl.prototype.parse=function(t){return K.JSON.parse(t,void 0)};function k1(){this.g=new nl}function M1(t,e,n){const r=n||"";try{Ud(t,function(s,i){let o=s;Ps(s)&&(o=Qc(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function O1(t,e){const n=new go;if(K.Image){const r=new Image;r.onload=ii(ai,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ii(ai,n,r,"TestLoadImage: error",!1,e),r.onabort=ii(ai,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ii(ai,n,r,"TestLoadImage: timeout",!1,e),K.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ai(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Vs(t){this.l=t.fc||null,this.j=t.ob||!1}Fe(Vs,Yc);Vs.prototype.g=function(){return new bo(this.l,this.j)};Vs.prototype.i=function(t){return function(){return t}}({});function bo(t,e){Le.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=rl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fe(bo,Le);var rl=0;N=bo.prototype;N.open=function(t,e){if(this.readyState!=rl)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ds(this)};N.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||K).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=rl};N.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ds(this)),this.g&&(this.readyState=3,Ds(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof K.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qd(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Qd(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}N.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?qs(this):Ds(this),this.readyState==3&&Qd(this)}};N.Za=function(t){this.g&&(this.response=this.responseText=t,qs(this))};N.Ya=function(t){this.g&&(this.response=t,qs(this))};N.ka=function(){this.g&&qs(this)};function qs(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ds(t)}N.setRequestHeader=function(t,e){this.v.append(t,e)};N.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};N.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ds(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var P1=K.JSON.parse;function Ie(t){Le.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Jd,this.L=this.M=!1}Fe(Ie,Le);var Jd="",L1=/^https?$/i,$1=["POST","PUT"];N=Ie.prototype;N.Oa=function(t){this.M=t};N.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ha.g(),this.C=this.u?Wu(this.u):Wu(Ha),this.g.onreadystatechange=Je(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){Xu(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=K.FormData&&t instanceof K.FormData,!(0<=hd($1,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Zd(this),0<this.B&&((this.L=F1(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Je(this.ua,this)):this.A=Xc(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Xu(this,i)}};function F1(t){return Ir&&t1()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}N.ua=function(){typeof Vc<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qe(this,"timeout"),this.abort(8))};function Xu(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Xd(t),So(t)}function Xd(t){t.F||(t.F=!0,qe(t,"complete"),qe(t,"error"))}N.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,qe(this,"complete"),qe(this,"abort"),So(this))};N.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),So(this,!0)),Ie.$.N.call(this)};N.La=function(){this.s||(this.G||this.v||this.l?Yd(this):this.kb())};N.kb=function(){Yd(this)};function Yd(t){if(t.h&&typeof Vc<"u"&&(!t.C[1]||Xt(t)!=4||t.da()!=2)){if(t.v&&Xt(t)==4)Xc(t.La,0,t);else if(qe(t,"readystatechange"),Xt(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var s=String(t.I).match(Bd)[1]||null;if(!s&&K.self&&K.self.location){var i=K.self.location.protocol;s=i.substr(0,i.length-1)}r=!L1.test(s?s.toLowerCase():"")}n=r}if(n)qe(t,"complete"),qe(t,"success");else{t.m=6;try{var o=2<Xt(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",Xd(t)}}finally{So(t)}}}}function So(t,e){if(t.g){Zd(t);const n=t.g,r=t.C[0]?Oi:null;t.g=null,t.C=null,e||qe(t,"ready");try{n.onreadystatechange=r}catch{}}}function Zd(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(K.clearTimeout(t.A),t.A=null)}function Xt(t){return t.g?t.g.readyState:0}N.da=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}};N.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};N.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),P1(e)}};function Yu(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Jd:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}N.Ia=function(){return this.m};N.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ep(t){let e="";return Gc(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function sl(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ep(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):we(t,e,n))}function Jr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function tp(t){this.Ga=0,this.i=[],this.j=new go,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Jr("failFast",!1,t),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Jr("baseRetryDelayMs",5e3,t),this.hb=Jr("retryDelaySeedMs",1e4,t),this.eb=Jr("forwardChannelMaxRetries",2,t),this.xa=Jr("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.K=void 0,this.I=t&&t.supportsCrossDomainXhr||!1,this.J="",this.h=new Gd(t&&t.concurrentRequestLimit),this.Ja=new k1,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.j.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}N=tp.prototype;N.qa=8;N.H=1;function il(t){if(np(t),t.H==3){var e=t.W++,n=nn(t.G);we(n,"SID",t.J),we(n,"RID",e),we(n,"TYPE","terminate"),js(t,n),e=new Us(t,t.j,e,void 0),e.L=2,e.v=Eo(nn(n)),n=!1,K.navigator&&K.navigator.sendBeacon&&(n=K.navigator.sendBeacon(e.v.toString(),"")),!n&&K.Image&&(new Image().src=e.v,n=!0),n||(e.g=up(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Bs(e)}cp(t)}function To(t){t.g&&(al(t),t.g.cancel(),t.g=null)}function np(t){To(t),t.u&&(K.clearTimeout(t.u),t.u=null),Bi(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&K.clearTimeout(t.m),t.m=null)}function Io(t){Kd(t.h)||t.m||(t.m=!0,Td(t.Na,t),t.C=0)}function U1(t,e){return zd(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.F.concat(t.i),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=$s(Je(t.Na,t,e),ap(t,t.C)),t.C++,!0)}N.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Us(this,this.j,t,void 0);let i=this.s;if(this.U&&(i?(i=gd(i),yd(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=rp(this,s,e),n=nn(this.G),we(n,"RID",t),we(n,"CVER",22),this.F&&we(n,"X-HTTP-Session-Id",this.F),js(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(ep(i)))+"&"+e:this.o&&sl(n,this.o,i)),tl(this.h,s),this.bb&&we(n,"TYPE","init"),this.P?(we(n,"$req",e),we(n,"SID","null"),s.ba=!0,Qa(s,n,null)):Qa(s,n,e),this.H=2}}else this.H==3&&(t?Zu(this,t):this.i.length==0||Kd(this.h)||Zu(this))};function Zu(t,e){var n;e?n=e.m:n=t.W++;const r=nn(t.G);we(r,"SID",t.J),we(r,"RID",n),we(r,"AID",t.V),js(t,r),t.o&&t.s&&sl(r,t.o,t.s),n=new Us(t,t.j,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.i=e.F.concat(t.i)),e=rp(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),tl(t.h,n),Qa(n,r,e)}function js(t,e){t.ma&&Gc(t.ma,function(n,r){we(e,r,n)}),t.l&&Ud({},function(n,r){we(e,r,n)})}function rp(t,e,n){n=Math.min(t.i.length,n);var r=t.l?Je(t.l.Va,t.l,t):null;e:{var s=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<n;c++){let l=s[c].h;const u=s[c].g;if(l-=i,0>l)i=Math.max(0,s[c].h-100),a=!1;else try{M1(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.F=t,r}function sp(t){t.g||t.u||(t.ba=1,Td(t.Ma,t),t.A=0)}function ol(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=$s(Je(t.Ma,t),ap(t,t.A)),t.A++,!0)}N.Ma=function(){if(this.u=null,ip(this),this.ca&&!(this.L||this.g==null||0>=this.S)){var t=2*this.S;this.j.info("BP detection timer enabled: "+t),this.B=$s(Je(this.jb,this),t)}};N.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,nt(10),To(this),ip(this))};function al(t){t.B!=null&&(K.clearTimeout(t.B),t.B=null)}function ip(t){t.g=new Us(t,t.j,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=nn(t.wa);we(e,"RID","rpc"),we(e,"SID",t.J),we(e,"CI",t.M?"0":"1"),we(e,"AID",t.V),we(e,"TYPE","xmlhttp"),js(t,e),t.o&&t.s&&sl(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.oa,n.L=1,n.v=Eo(nn(e)),n.s=null,n.S=!0,Pd(n,t)}N.ib=function(){this.v!=null&&(this.v=null,To(this),ol(this),nt(19))};function Bi(t){t.v!=null&&(K.clearTimeout(t.v),t.v=null)}function op(t,e){var n=null;if(t.g==e){Bi(t),al(t),t.g=null;var r=2}else if(Xa(t.h,e))n=e.F,Hd(t.h,e),r=1;else return;if(t.H!=0){if(t.ta=e.aa,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=yo(),qe(r,new Nd(r,n)),Io(t)}else sp(t);else if(s=e.o,s==3||s==0&&0<t.ta||!(r==1&&U1(t,e)||r==2&&ol(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:Un(t,5);break;case 4:Un(t,10);break;case 3:Un(t,6);break;default:Un(t,2)}}}function ap(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.l||(n*=2),n*e}function Un(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=Je(t.pb,t);n||(n=new jn("//www.google.com/images/cleardot.gif"),K.location&&K.location.protocol=="http"||Fi(n,"https"),Eo(n)),O1(n.toString(),r)}else nt(2);t.H=0,t.l&&t.l.za(e),cp(t),np(t)}N.pb=function(t){t?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function cp(t){if(t.H=0,t.pa=[],t.l){const e=Wd(t.h);(e.length!=0||t.i.length!=0)&&(qu(t.pa,e),qu(t.pa,t.i),t.h.i.length=0,qc(t.i),t.i.length=0),t.l.ya()}}function lp(t,e,n){var r=n instanceof jn?nn(n):new jn(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),Ui(r,r.m);else{var s=K.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new jn(null,void 0);r&&Fi(i,r),e&&(i.g=e),s&&Ui(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&we(r,n,e),we(r,"VER",t.qa),js(t,r),r}function up(t,e,n){if(e&&!t.I)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ie(new Vs({ob:!0})):new Ie(t.va),e.Oa(t.I),e}function hp(){}N=hp.prototype;N.Ba=function(){};N.Aa=function(){};N.za=function(){};N.ya=function(){};N.Va=function(){};function Vi(){if(Ir&&!(10<=Number(n1)))throw Error("Environmental error: no available transport.")}Vi.prototype.g=function(t,e){return new dt(t,e)};function dt(t,e){Le.call(this),this.g=new tp(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Pi(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pi(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Vr(this)}Fe(dt,Le);dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var t=this.g,e=this.l,n=this.h||void 0;nt(0),t.Y=e,t.ma=n||{},t.M=t.aa,t.G=lp(t,null,t.Y),Io(t)};dt.prototype.close=function(){il(this.g)};dt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Qc(t),t=n);e.i.push(new x1(e.fb++,t)),e.H==3&&Io(e)};dt.prototype.N=function(){this.g.l=null,delete this.j,il(this.g),delete this.g,dt.$.N.call(this)};function fp(t){Zc.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Fe(fp,Zc);function dp(){el.call(this),this.status=1}Fe(dp,el);function Vr(t){this.g=t}Fe(Vr,hp);Vr.prototype.Ba=function(){qe(this.g,"a")};Vr.prototype.Aa=function(t){qe(this.g,new fp(t))};Vr.prototype.za=function(t){qe(this.g,new dp)};Vr.prototype.ya=function(){qe(this.g,"b")};function B1(){this.blockSize=-1}function xt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Fe(xt,B1);xt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ca(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}xt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)ca(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){ca(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){ca(this,r),s=0;break}}this.h=s,this.i+=e};xt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function he(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var V1={};function cl(t){return-128<=t&&128>t?fd(V1,t,function(e){return new he([e|0],0>e?-1:0)}):new he([t|0],0>t?-1:0)}function Ft(t){if(isNaN(t)||!isFinite(t))return gr;if(0>t)return Ve(Ft(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Ya;return new he(e,0)}function pp(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ve(pp(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ft(Math.pow(e,8)),r=gr,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Ft(Math.pow(e,i)),r=r.R(i).add(Ft(o))):(r=r.R(n),r=r.add(Ft(o)))}return r}var Ya=4294967296,gr=cl(0),Za=cl(1),eh=cl(16777216);N=he.prototype;N.ea=function(){if(wt(this))return-Ve(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Ya+r)*e,e*=Ya}return t};N.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Yt(this))return"0";if(wt(this))return"-"+Ve(this).toString(t);for(var e=Ft(Math.pow(t,6)),n=this,r="";;){var s=ji(n,e).g;n=qi(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Yt(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};N.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Yt(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function wt(t){return t.h==-1}N.X=function(t){return t=qi(this,t),wt(t)?-1:Yt(t)?0:1};function Ve(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new he(n,~t.h).add(Za)}N.abs=function(){return wt(this)?Ve(this):this};N.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new he(n,n[n.length-1]&-2147483648?-1:0)};function qi(t,e){return t.add(Ve(e))}N.R=function(t){if(Yt(this)||Yt(t))return gr;if(wt(this))return wt(t)?Ve(this).R(Ve(t)):Ve(Ve(this).R(t));if(wt(t))return Ve(this.R(Ve(t)));if(0>this.X(eh)&&0>t.X(eh))return Ft(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,c=t.D(s)&65535;n[2*r+2*s]+=o*c,ci(n,2*r+2*s),n[2*r+2*s+1]+=i*c,ci(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,ci(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,ci(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new he(n,0)};function ci(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Xr(t,e){this.g=t,this.h=e}function ji(t,e){if(Yt(e))throw Error("division by zero");if(Yt(t))return new Xr(gr,gr);if(wt(t))return e=ji(Ve(t),e),new Xr(Ve(e.g),Ve(e.h));if(wt(e))return e=ji(t,Ve(e)),new Xr(Ve(e.g),e.h);if(30<t.g.length){if(wt(t)||wt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Za,r=e;0>=r.X(t);)n=th(n),r=th(r);var s=rr(n,1),i=rr(r,1);for(r=rr(r,2),n=rr(n,2);!Yt(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=rr(r,1),n=rr(n,1)}return e=qi(t,s.R(e)),new Xr(s,e)}for(s=gr;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Ft(n),o=i.R(e);wt(o)||0<o.X(t);)n-=r,i=Ft(n),o=i.R(e);Yt(i)&&(i=Za),s=s.add(i),t=qi(t,o)}return new Xr(s,t)}N.gb=function(t){return ji(this,t).h};N.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new he(n,this.h&t.h)};N.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new he(n,this.h|t.h)};N.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new he(n,this.h^t.h)};function th(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new he(n,t.h)}function rr(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new he(s,t.h)}Vi.prototype.createWebChannel=Vi.prototype.g;dt.prototype.send=dt.prototype.u;dt.prototype.open=dt.prototype.m;dt.prototype.close=dt.prototype.close;wo.NO_ERROR=0;wo.TIMEOUT=8;wo.HTTP_ERROR=6;kd.COMPLETE="complete";Md.EventType=Fs;Fs.OPEN="a";Fs.CLOSE="b";Fs.ERROR="c";Fs.MESSAGE="d";Le.prototype.listen=Le.prototype.O;Ie.prototype.listenOnce=Ie.prototype.P;Ie.prototype.getLastError=Ie.prototype.Sa;Ie.prototype.getLastErrorCode=Ie.prototype.Ia;Ie.prototype.getStatus=Ie.prototype.da;Ie.prototype.getResponseJson=Ie.prototype.Wa;Ie.prototype.getResponseText=Ie.prototype.ja;Ie.prototype.send=Ie.prototype.ha;Ie.prototype.setWithCredentials=Ie.prototype.Oa;xt.prototype.digest=xt.prototype.l;xt.prototype.reset=xt.prototype.reset;xt.prototype.update=xt.prototype.j;he.prototype.add=he.prototype.add;he.prototype.multiply=he.prototype.R;he.prototype.modulo=he.prototype.gb;he.prototype.compare=he.prototype.X;he.prototype.toNumber=he.prototype.ea;he.prototype.toString=he.prototype.toString;he.prototype.getBits=he.prototype.D;he.fromNumber=Ft;he.fromString=pp;var q1=function(){return new Vi},j1=function(){return yo()},la=wo,G1=kd,K1=Qn,nh={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},z1=Vs,li=Md,H1=Ie,W1=xt,yr=he;const rh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qr="9.21.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new id("@firebase/firestore");function sh(){return zn.logLevel}function L(t,...e){if(zn.logLevel<=le.DEBUG){const n=e.map(ll);zn.debug(`Firestore (${qr}): ${t}`,...n)}}function rn(t,...e){if(zn.logLevel<=le.ERROR){const n=e.map(ll);zn.error(`Firestore (${qr}): ${t}`,...n)}}function Cr(t,...e){if(zn.logLevel<=le.WARN){const n=e.map(ll);zn.warn(`Firestore (${qr}): ${t}`,...n)}}function ll(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(t="Unexpected state"){const e=`FIRESTORE (${qr}) INTERNAL ASSERTION FAILED: `+t;throw rn(e),new Error(e)}function ye(t,e){t||j()}function Q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class V extends Ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Q1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ke.UNAUTHENTICATED))}shutdown(){}}class J1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class X1{constructor(e){this.t=e,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new _n;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _n,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _n)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new mp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new Ke(e)}}class Y1{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Z1{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new Y1(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class e_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t_{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=i=>{i.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.T;return this.T=i.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.I.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.I.getImmediate({optional:!0});i?s(i):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.T=n.token,new e_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=n_(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function Ar(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.timestamp=e}static fromTimestamp(e){return new H(e)}static min(){return new H(new ke(0,0))}static max(){return new H(new ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,r){n===void 0?n=0:n>e.length&&j(),r===void 0?r=e.length-n:r>e.length-n&&j(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends xs{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new V(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const r_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends xs{construct(e,n,r){return new We(e,n,r)}static isValidIdentifier(e){return r_.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new We(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new V(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new V(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new V(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new V(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new We(n)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(ve.fromString(e))}static fromName(e){return new q(ve.fromString(e).popFirst(5))}static empty(){return new q(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new ve(e.slice()))}}function s_(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=H.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new Sn(s,q.empty(),e)}function i_(t){return new Sn(t.readTime,t.key,-1)}class Sn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Sn(H.min(),q.empty(),-1)}static max(){return new Sn(H.max(),q.empty(),-1)}}function o_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==a_)throw t;L("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new T((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof T?n:T.resolve(n)}catch(n){return T.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):T.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):T.reject(n)}static resolve(e){return new T((n,r)=>{n(e)})}static reject(e){return new T((n,r)=>{r(e)})}static waitFor(e){return new T((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=T.resolve(!1);for(const r of e)n=n.next(s=>s?T.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new T((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new T((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Ks(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}ul.ct=-1;function Co(t){return t==null}function Gi(t){return t===0&&1/t==-1/0}function l_(t){return typeof t=="number"&&Number.isInteger(t)&&!Gi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||Be.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Be.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ui(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ui(this.root,e,this.comparator,!1)}getReverseIterator(){return new ui(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ui(this.root,e,this.comparator,!0)}}class ui{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Be{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Be.RED,this.left=s??Be.EMPTY,this.right=i??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Be(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Be.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw j();const e=this.left.check();if(e!==this.right.check())throw j();return e+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw j()}get value(){throw j()}get color(){throw j()}get left(){throw j()}get right(){throw j()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Be(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new oh(this.data.getIterator())}getIteratorFrom(e){return new oh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class oh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new ft([])}unionWith(e){let n=new Ye(We.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ar(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wp("Invalid base64 string: "+s):s}}(e);return new et(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const u_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tn(t){if(ye(!!t),typeof t=="string"){let e=0;const n=u_.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hn(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function fl(t){const e=t.mapValue.fields.__previous_value__;return hl(e)?fl(e):e}function Ns(t){const e=Tn(t.mapValue.fields.__local_write_time__.timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n,r,s,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c}}class ks{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ks("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ks&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Wn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hl(t)?4:f_(t)?9007199254740991:10:j()}function jt(t,e){if(t===e)return!0;const n=Wn(t);if(n!==Wn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ns(t).isEqual(Ns(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=Tn(r.timestampValue),o=Tn(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Hn(r.bytesValue).isEqual(Hn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return De(r.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(r.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return De(r.integerValue)===De(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=De(r.doubleValue),o=De(s.doubleValue);return i===o?Gi(i)===Gi(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Ar(t.arrayValue.values||[],e.arrayValue.values||[],jt);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(ih(i)!==ih(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!jt(i[a],o[a])))return!1;return!0}(t,e);default:return j()}}function Ms(t,e){return(t.values||[]).find(n=>jt(n,e))!==void 0}function Rr(t,e){if(t===e)return 0;const n=Wn(t),r=Wn(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=De(s.integerValue||s.doubleValue),a=De(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return ah(t.timestampValue,e.timestampValue);case 4:return ah(Ns(t),Ns(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Hn(s),a=Hn(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const l=ae(o[c],a[c]);if(l!==0)return l}return ae(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=ae(De(s.latitude),De(i.latitude));return o!==0?o:ae(De(s.longitude),De(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let c=0;c<o.length&&c<a.length;++c){const l=Rr(o[c],a[c]);if(l)return l}return ae(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===hi.mapValue&&i===hi.mapValue)return 0;if(s===hi.mapValue)return 1;if(i===hi.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),c=i.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){const h=ae(a[u],l[u]);if(h!==0)return h;const d=Rr(o[a[u]],c[l[u]]);if(d!==0)return d}return ae(a.length,l.length)}(t.mapValue,e.mapValue);default:throw j()}}function ah(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Tn(t),r=Tn(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function Dr(t){return ec(t)}function ec(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=Tn(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Hn(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,q.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=ec(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${ec(r.fields[a])}`;return i+"}"}(t.mapValue):j();var e,n}function tc(t){return!!t&&"integerValue"in t}function dl(t){return!!t&&"arrayValue"in t}function ch(t){return!!t&&"nullValue"in t}function lh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _i(t){return!!t&&"mapValue"in t}function hs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jn(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=hs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function f_(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.value=e}static empty(){return new ot({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_i(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hs(n)}setAll(e){let n=We.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=hs(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());_i(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_i(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Jn(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ot(hs(this.value))}}function vp(t){const e=[];return Jn(t.fields,(n,r)=>{const s=new We([n]);if(_i(r)){const i=vp(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ze(e,0,H.min(),H.min(),H.min(),ot.empty(),0)}static newFoundDocument(e,n,r,s){return new ze(e,1,n,H.min(),r,s,0)}static newNoDocument(e,n){return new ze(e,2,n,H.min(),H.min(),ot.empty(),0)}static newUnknownDocument(e,n){return new ze(e,3,n,H.min(),H.min(),ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ze&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){this.position=e,this.inclusive=n}}function uh(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=Rr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function hh(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n="asc"){this.field=e,this.dir=n}}function d_(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{}class Ne extends _p{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new m_(e,n,r):n==="array-contains"?new w_(e,r):n==="in"?new v_(e,r):n==="not-in"?new __(e,r):n==="array-contains-any"?new E_(e,r):new Ne(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new g_(e,r):new y_(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Rr(n,this.value)):n!==null&&Wn(this.value)===Wn(n)&&this.matchesComparison(Rr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Gt extends _p{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new Gt(e,n)}matches(e){return Ep(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Ep(t){return t.op==="and"}function bp(t){return p_(t)&&Ep(t)}function p_(t){for(const e of t.filters)if(e instanceof Gt)return!1;return!0}function nc(t){if(t instanceof Ne)return t.field.canonicalString()+t.op.toString()+Dr(t.value);if(bp(t))return t.filters.map(e=>nc(e)).join(",");{const e=t.filters.map(n=>nc(n)).join(",");return`${t.op}(${e})`}}function Sp(t,e){return t instanceof Ne?function(n,r){return r instanceof Ne&&n.op===r.op&&n.field.isEqual(r.field)&&jt(n.value,r.value)}(t,e):t instanceof Gt?function(n,r){return r instanceof Gt&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,i,o)=>s&&Sp(i,r.filters[o]),!0):!1}(t,e):void j()}function Tp(t){return t instanceof Ne?function(e){return`${e.field.canonicalString()} ${e.op} ${Dr(e.value)}`}(t):t instanceof Gt?function(e){return e.op.toString()+" {"+e.getFilters().map(Tp).join(" ,")+"}"}(t):"Filter"}class m_ extends Ne{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class g_ extends Ne{constructor(e,n){super(e,"in",n),this.keys=Ip("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class y_ extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=Ip("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ip(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class w_ extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dl(n)&&Ms(n.arrayValue,this.value)}}class v_ extends Ne{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ms(this.value.arrayValue,n)}}class __ extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ms(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ms(this.value.arrayValue,n)}}class E_ extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ms(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ft=null}}function fh(t,e=null,n=[],r=[],s=null,i=null,o=null){return new b_(t,e,n,r,s,i,o)}function pl(t){const e=Q(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Co(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Dr(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Dr(r)).join(",")),e.ft=n}return e.ft}function ml(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!d_(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Sp(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hh(t.startAt,e.startAt)&&hh(t.endAt,e.endAt)}function rc(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.dt=null,this._t=null,this.startAt,this.endAt}}function S_(t,e,n,r,s,i,o,a){return new Ao(t,e,n,r,s,i,o,a)}function Ro(t){return new Ao(t)}function dh(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function T_(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function I_(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function C_(t){return t.collectionGroup!==null}function wr(t){const e=Q(t);if(e.dt===null){e.dt=[];const n=I_(e),r=T_(e);if(n!==null&&r===null)n.isKeyField()||e.dt.push(new fs(n)),e.dt.push(new fs(We.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.dt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new fs(We.keyField(),i))}}}return e.dt}function sn(t){const e=Q(t);if(!e._t)if(e.limitType==="F")e._t=fh(e.path,e.collectionGroup,wr(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of wr(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new fs(i.field,o))}const r=e.endAt?new Ki(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Ki(e.startAt.position,e.startAt.inclusive):null;e._t=fh(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e._t}function sc(t,e,n){return new Ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Do(t,e){return ml(sn(t),sn(e))&&t.limitType===e.limitType}function Cp(t){return`${pl(sn(t))}|lt:${t.limitType}`}function ic(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Tp(r)).join(", ")}]`),Co(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Dr(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Dr(r)).join(",")),`Target(${n})`}(sn(t))}; limitType=${t.limitType})`}function xo(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):q.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of wr(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=uh(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,wr(n),r)||n.endAt&&!function(s,i,o){const a=uh(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,wr(n),r))}(t,e)}function A_(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ap(t){return(e,n)=>{let r=!1;for(const s of wr(t)){const i=R_(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function R_(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),c=o.data.field(s);return a!==null&&c!==null?Rr(a,c):j()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return j()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Jn(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return yp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=new be(q.comparator);function on(){return D_}const Rp=new be(q.comparator);function rs(...t){let e=Rp;for(const n of t)e=e.insert(n.key,n);return e}function Dp(t){let e=Rp;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Bn(){return ds()}function xp(){return ds()}function ds(){return new jr(t=>t.toString(),(t,e)=>t.isEqual(e))}const x_=new be(q.comparator),N_=new Ye(q.comparator);function te(...t){let e=N_;for(const n of t)e=e.add(n);return e}const k_=new Ye(ae);function M_(){return k_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gi(e)?"-0":e}}function kp(t){return{integerValue:""+t}}function O_(t,e){return l_(e)?kp(e):Np(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this._=void 0}}function P_(t,e,n){return t instanceof zi?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&hl(s)&&(s=fl(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof xr?Op(t,e):t instanceof Nr?Pp(t,e):function(r,s){const i=Mp(r,s),o=ph(i)+ph(r.wt);return tc(i)&&tc(r.wt)?kp(o):Np(r.serializer,o)}(t,e)}function L_(t,e,n){return t instanceof xr?Op(t,e):t instanceof Nr?Pp(t,e):n}function Mp(t,e){return t instanceof Hi?tc(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class zi extends No{}class xr extends No{constructor(e){super(),this.elements=e}}function Op(t,e){const n=Lp(e);for(const r of t.elements)n.some(s=>jt(s,r))||n.push(r);return{arrayValue:{values:n}}}class Nr extends No{constructor(e){super(),this.elements=e}}function Pp(t,e){let n=Lp(e);for(const r of t.elements)n=n.filter(s=>!jt(s,r));return{arrayValue:{values:n}}}class Hi extends No{constructor(e,n){super(),this.serializer=e,this.wt=n}}function ph(t){return De(t.integerValue||t.doubleValue)}function Lp(t){return dl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n){this.field=e,this.transform=n}}function $_(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof xr&&r instanceof xr||n instanceof Nr&&r instanceof Nr?Ar(n.elements,r.elements,jt):n instanceof Hi&&r instanceof Hi?jt(n.wt,r.wt):n instanceof zi&&r instanceof zi}(t.transform,e.transform)}class F_{constructor(e,n){this.version=e,this.transformResults=n}}class Ut{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ut}static exists(e){return new Ut(void 0,e)}static updateTime(e){return new Ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ei(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ko{}function Fp(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Bp(t.key,Ut.none()):new zs(t.key,t.data,Ut.none());{const n=t.data,r=ot.empty();let s=new Ye(We.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Rn(t.key,r,new ft(s.toArray()),Ut.none())}}function U_(t,e,n){t instanceof zs?function(r,s,i){const o=r.value.clone(),a=gh(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Rn?function(r,s,i){if(!Ei(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=gh(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(Up(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function ps(t,e,n,r){return t instanceof zs?function(s,i,o,a){if(!Ei(s.precondition,i))return o;const c=s.value.clone(),l=yh(s.fieldTransforms,a,i);return c.setAll(l),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rn?function(s,i,o,a){if(!Ei(s.precondition,i))return o;const c=yh(s.fieldTransforms,a,i),l=i.data;return l.setAll(Up(s)),l.setAll(c),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(u=>u.field))}(t,e,n,r):function(s,i,o){return Ei(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function B_(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Mp(r.transform,s||null);i!=null&&(n===null&&(n=ot.empty()),n.set(r.field,i))}return n||null}function mh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Ar(n,r,(s,i)=>$_(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zs extends ko{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rn extends ko{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Up(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gh(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,L_(o,a,n[s]))}return r}function yh(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,P_(i,o,e))}return r}class Bp extends ko{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V_ extends ko{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&U_(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ps(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ps(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xp();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=Fp(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(H.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&Ar(this.mutations,e.mutations,(n,r)=>mh(n,r))&&Ar(this.baseMutations,e.baseMutations,(n,r)=>mh(n,r))}}class gl{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=x_;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new gl(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,re;function K_(t){switch(t){default:return j();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function Vp(t){if(t===void 0)return rn("GRPC error has no .code"),b.UNKNOWN;switch(t){case Re.OK:return b.OK;case Re.CANCELLED:return b.CANCELLED;case Re.UNKNOWN:return b.UNKNOWN;case Re.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case Re.INTERNAL:return b.INTERNAL;case Re.UNAVAILABLE:return b.UNAVAILABLE;case Re.UNAUTHENTICATED:return b.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case Re.NOT_FOUND:return b.NOT_FOUND;case Re.ALREADY_EXISTS:return b.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return b.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case Re.ABORTED:return b.ABORTED;case Re.OUT_OF_RANGE:return b.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return b.UNIMPLEMENTED;case Re.DATA_LOSS:return b.DATA_LOSS;default:return j()}}(re=Re||(Re={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return fi}static getOrCreateInstance(){return fi===null&&(fi=new yl),fi}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let fi=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=new yr([4294967295,4294967295],0);function wh(t){const e=z_().encode(t),n=new W1;return n.update(e),new Uint8Array(n.digest())}function vh(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new yr([n,r],0),new yr([s,i],0)]}class wl{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ss(`Invalid padding: ${n}`);if(r<0)throw new ss(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ss(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ss(`Invalid padding when bitmap length is 0: ${n}`);this.yt=8*e.length-n,this.It=yr.fromNumber(this.yt)}Tt(e,n,r){let s=e.add(n.multiply(yr.fromNumber(r)));return s.compare(H_)===1&&(s=new yr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.It).toNumber()}Et(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}At(e){if(this.yt===0)return!1;const n=wh(e),[r,s]=vh(n);for(let i=0;i<this.hashCount;i++){const o=this.Tt(r,s,i);if(!this.Et(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new wl(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.yt===0)return;const n=wh(e),[r,s]=vh(n);for(let i=0;i<this.hashCount;i++){const o=this.Tt(r,s,i);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ss extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Hs.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mo(H.min(),s,new be(ae),on(),te())}}class Hs{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hs(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,r,s){this.vt=e,this.removedTargetIds=n,this.key=r,this.Pt=s}}class qp{constructor(e,n){this.targetId=e,this.bt=n}}class jp{constructor(e,n,r=et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class _h{constructor(){this.Vt=0,this.St=bh(),this.Dt=et.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return this.Vt!==0}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=te(),n=te(),r=te();return this.St.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:j()}}),new Hs(this.Dt,this.Ct,e,n,r)}$t(){this.xt=!1,this.St=bh()}Ft(e,n){this.xt=!0,this.St=this.St.insert(e,n)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class W_{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=on(),this.jt=Eh(),this.zt=new be(ae)}Wt(e){for(const n of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(n,e.Pt):this.Jt(n,e.key,e.Pt);for(const n of e.removedTargetIds)this.Jt(n,e.key,e.Pt)}Yt(e){this.forEachTarget(e,n=>{const r=this.Xt(n);switch(e.state){case 0:this.Zt(n)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||this.removeTarget(n);break;case 3:this.Zt(n)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:this.Zt(n)&&(this.te(n),r.Mt(e.resumeToken));break;default:j()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Gt.forEach((r,s)=>{this.Zt(s)&&n(s)})}ee(e){var n;const r=e.targetId,s=e.bt.count,i=this.ne(r);if(i){const o=i.target;if(rc(o))if(s===0){const a=new q(o.path);this.Jt(r,a,ze.newNoDocument(a,H.min()))}else ye(s===1);else{const a=this.se(r);if(a!==s){const c=this.ie(e,a);if(c!==0){this.te(r);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(r,l)}(n=yl.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(l,u,h){var d,m,w,v,C,R;const $={localCacheCount:u,existenceFilterCount:h.count},M=h.unchangedNames;return M&&($.bloomFilter={applied:l===0,hashCount:(d=M==null?void 0:M.hashCount)!==null&&d!==void 0?d:0,bitmapLength:(v=(w=(m=M==null?void 0:M.bits)===null||m===void 0?void 0:m.bitmap)===null||w===void 0?void 0:w.length)!==null&&v!==void 0?v:0,padding:(R=(C=M==null?void 0:M.bits)===null||C===void 0?void 0:C.padding)!==null&&R!==void 0?R:0}),$}(c,a,e.bt))}}}}ie(e,n){const{unchangedNames:r,count:s}=e.bt;if(!r||!r.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=r;let c,l;try{c=Hn(i).toUint8Array()}catch(u){if(u instanceof wp)return Cr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{l=new wl(c,o,a)}catch(u){return Cr(u instanceof ss?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return l.yt===0?1:s!==n-this.re(e.targetId,l)?2:0}re(e,n){const r=this.Kt.getRemoteKeysForTarget(e);let s=0;return r.forEach(i=>{const o=this.Kt.oe(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;n.At(a)||(this.Jt(e,i,null),s++)}),s}ue(e){const n=new Map;this.Gt.forEach((i,o)=>{const a=this.ne(o);if(a){if(i.current&&rc(a.target)){const c=new q(a.target.path);this.Qt.get(c)!==null||this.ce(o,c)||this.Jt(o,c,ze.newNoDocument(c,e))}i.kt&&(n.set(o,i.Ot()),i.$t())}});let r=te();this.jt.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.ne(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.Qt.forEach((i,o)=>o.setReadTime(e));const s=new Mo(e,n,this.zt,this.Qt,r);return this.Qt=on(),this.jt=Eh(),this.zt=new be(ae),s}Ht(e,n){if(!this.Zt(e))return;const r=this.ce(e,n.key)?2:0;this.Xt(e).Ft(n.key,r),this.Qt=this.Qt.insert(n.key,n),this.jt=this.jt.insert(n.key,this.ae(n.key).add(e))}Jt(e,n,r){if(!this.Zt(e))return;const s=this.Xt(e);this.ce(e,n)?s.Ft(n,1):s.Bt(n),this.jt=this.jt.insert(n,this.ae(n).delete(e)),r&&(this.Qt=this.Qt.insert(n,r))}removeTarget(e){this.Gt.delete(e)}se(e){const n=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let n=this.Gt.get(e);return n||(n=new _h,this.Gt.set(e,n)),n}ae(e){let n=this.jt.get(e);return n||(n=new Ye(ae),this.jt=this.jt.insert(e,n)),n}Zt(e){const n=this.ne(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}ne(e){const n=this.Gt.get(e);return n&&n.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new _h),this.Kt.getRemoteKeysForTarget(e).forEach(n=>{this.Jt(e,n,null)})}ce(e,n){return this.Kt.getRemoteKeysForTarget(e).has(n)}}function Eh(){return new be(q.comparator)}function bh(){return new be(q.comparator)}const Q_=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),J_=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),X_=(()=>({and:"AND",or:"OR"}))();class Y_{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function oc(t,e){return t.useProto3Json||Co(e)?e:{value:e}}function Wi(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gp(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Z_(t,e){return Wi(t,e.toTimestamp())}function Bt(t){return ye(!!t),H.fromTimestamp(function(e){const n=Tn(e);return new ke(n.seconds,n.nanos)}(t))}function vl(t,e){return function(n){return new ve(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Kp(t){const e=ve.fromString(t);return ye(Qp(e)),e}function ac(t,e){return vl(t.databaseId,e.path)}function ua(t,e){const n=Kp(e);if(n.get(1)!==t.databaseId.projectId)throw new V(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(zp(n))}function cc(t,e){return vl(t.databaseId,e)}function eE(t){const e=Kp(t);return e.length===4?ve.emptyPath():zp(e)}function lc(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zp(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Sh(t,e,n){return{name:ac(t,e),fields:n.value.mapValue.fields}}function tE(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:j()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,l){return c.useProto3Json?(ye(l===void 0||typeof l=="string"),et.fromBase64String(l||"")):(ye(l===void 0||l instanceof Uint8Array),et.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const l=c.code===void 0?b.UNKNOWN:Vp(c.code);return new V(l,c.message||"")}(o);n=new jp(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ua(t,r.document.name),i=Bt(r.document.updateTime),o=r.document.createTime?Bt(r.document.createTime):H.min(),a=new ot({mapValue:{fields:r.document.fields}}),c=ze.newFoundDocument(s,i,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new bi(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ua(t,r.document),i=r.readTime?Bt(r.readTime):H.min(),o=ze.newNoDocument(s,i),a=r.removedTargetIds||[];n=new bi([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ua(t,r.document),i=r.removedTargetIds||[];n=new bi([],i,s,null)}else{if(!("filter"in e))return j();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new G_(s,i),a=r.targetId;n=new qp(a,o)}}return n}function nE(t,e){let n;if(e instanceof zs)n={update:Sh(t,e.key,e.value)};else if(e instanceof Bp)n={delete:ac(t,e.key)};else if(e instanceof Rn)n={update:Sh(t,e.key,e.data),updateMask:hE(e.fieldMask)};else{if(!(e instanceof V_))return j();n={verify:ac(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof zi)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof xr)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Nr)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Hi)return{fieldPath:i.field.canonicalString(),increment:o.wt};throw j()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Z_(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:j()}(t,e.precondition)),n}function rE(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?Bt(r.updateTime):Bt(s);return i.isEqual(H.min())&&(i=Bt(s)),new F_(i,r.transformResults||[])}(n,e))):[]}function sE(t,e){return{documents:[cc(t,e.path)]}}function iE(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=cc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=cc(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(c){if(c.length!==0)return Wp(Gt.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(l=>function(u){return{field:or(u.field),direction:cE(u.dir)}}(l))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=oc(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function oE(t){let e=eE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(u){const h=Hp(u);return h instanceof Gt&&bp(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new fs(ar(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,Co(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(u){const h=!!u.before,d=u.values||[];return new Ki(d,h)}(n.startAt));let l=null;return n.endAt&&(l=function(u){const h=!u.before,d=u.values||[];return new Ki(d,h)}(n.endAt)),S_(e,s,o,i,a,"F",c,l)}function aE(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Hp(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=ar(e.unaryFilter.field);return Ne.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=ar(e.unaryFilter.field);return Ne.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ar(e.unaryFilter.field);return Ne.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ar(e.unaryFilter.field);return Ne.create(i,"!=",{nullValue:"NULL_VALUE"});default:return j()}}(t):t.fieldFilter!==void 0?function(e){return Ne.create(ar(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Gt.create(e.compositeFilter.filters.map(n=>Hp(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return j()}}(e.compositeFilter.op))}(t):j()}function cE(t){return Q_[t]}function lE(t){return J_[t]}function uE(t){return X_[t]}function or(t){return{fieldPath:t.canonicalString()}}function ar(t){return We.fromServerFormat(t.fieldPath)}function Wp(t){return t instanceof Ne?function(e){if(e.op==="=="){if(lh(e.value))return{unaryFilter:{field:or(e.field),op:"IS_NAN"}};if(ch(e.value))return{unaryFilter:{field:or(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(lh(e.value))return{unaryFilter:{field:or(e.field),op:"IS_NOT_NAN"}};if(ch(e.value))return{unaryFilter:{field:or(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:or(e.field),op:lE(e.op),value:e.value}}}(t):t instanceof Gt?function(e){const n=e.getFilters().map(r=>Wp(r));return n.length===1?n[0]:{compositeFilter:{op:uE(e.op),filters:n}}}(t):j()}function hE(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qp(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n,r,s,i=H.min(),o=H.min(),a=et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new pn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){this.le=e}}function dE(t){const e=oE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this.sn=new mE}addToCollectionParentIndex(e,n){return this.sn.add(n),T.resolve()}getCollectionParents(e,n){return T.resolve(this.sn.getEntries(n))}addFieldIndex(e,n){return T.resolve()}deleteFieldIndex(e,n){return T.resolve()}getDocumentsMatchingTarget(e,n){return T.resolve(null)}getIndexType(e,n){return T.resolve(0)}getFieldIndexes(e,n){return T.resolve([])}getNextCollectionGroupToUpdate(e){return T.resolve(null)}getMinOffset(e,n){return T.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,n){return T.resolve(Sn.min())}updateCollectionGroup(e,n,r){return T.resolve()}updateIndexEntries(e,n){return T.resolve()}}class mE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ye(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ye(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new kr(0)}static kn(){return new kr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.changes=new jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ze.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?T.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ps(r.mutation,s,ft.empty(),ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const s=Bn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=rs();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Bn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=on();const o=ds(),a=ds();return n.forEach((c,l)=>{const u=r.get(l.key);s.has(l.key)&&(u===void 0||u.mutation instanceof Rn)?i=i.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),ps(u.mutation,l,u.mutation.getFieldMask(),ke.now())):o.set(l.key,ft.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new yE(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ds();let s=new be((o,a)=>o-a),i=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||ft.empty();u=a.applyToLocalView(l,u),r.set(c,u);const h=(s.get(a.batchId)||te()).add(c);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=xp();u.forEach(d=>{if(!i.has(d)){const m=Fp(n.get(d),r.get(d));m!==null&&h.set(d,m),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return T.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):C_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):T.resolve(Bn());let a=-1,c=i;return o.next(l=>T.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?T.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{c=c.insert(u,d)}))).next(()=>this.populateOverlays(e,l,i)).next(()=>this.computeViews(e,c,l,te())).next(u=>({batchId:a,changes:Dp(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let s=rs();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=rs();return this.indexManager.getCollectionParents(e,s).next(o=>T.forEach(o,a=>{const c=function(l,u){return new Ao(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r).next(l=>{l.forEach((u,h)=>{i=i.insert(u,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,c)=>{const l=c.getKey();i.get(l)===null&&(i=i.insert(l,ze.newInvalidDocument(l)))});let o=rs();return i.forEach((a,c)=>{const l=s.get(a);l!==void 0&&ps(l.mutation,c,ft.empty(),ke.now()),xo(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,n){return T.resolve(this.us.get(n))}saveBundleMetadata(e,n){var r;return this.us.set(n.id,{id:(r=n).id,version:r.version,createTime:Bt(r.createTime)}),T.resolve()}getNamedQuery(e,n){return T.resolve(this.cs.get(n))}saveNamedQuery(e,n){return this.cs.set(n.name,function(r){return{name:r.name,query:dE(r.bundledQuery),readTime:Bt(r.readTime)}}(n)),T.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.overlays=new be(q.comparator),this.hs=new Map}getOverlay(e,n){return T.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Bn();return T.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.de(e,n,i)}),T.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hs.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hs.delete(r)),T.resolve()}getOverlaysForCollection(e,n,r){const s=Bn(),i=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return T.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new be((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=i.get(l.largestBatchId);u===null&&(u=Bn(),i=i.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=Bn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=s)););return T.resolve(a)}de(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hs.get(s.largestBatchId).delete(r.key);this.hs.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new j_(n,r));let i=this.hs.get(n);i===void 0&&(i=te(),this.hs.set(n,i)),this.hs.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.ls=new Ye(Pe.fs),this.ds=new Ye(Pe._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,n){const r=new Pe(e,n);this.ls=this.ls.add(r),this.ds=this.ds.add(r)}ws(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gs(new Pe(e,n))}ys(e,n){e.forEach(r=>this.removeReference(r,n))}ps(e){const n=new q(new ve([])),r=new Pe(n,e),s=new Pe(n,e+1),i=[];return this.ds.forEachInRange([r,s],o=>{this.gs(o),i.push(o.key)}),i}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const n=new q(new ve([])),r=new Pe(n,e),s=new Pe(n,e+1);let i=te();return this.ds.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Pe(e,0),r=this.ls.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pe{constructor(e,n){this.key=e,this.Es=n}static fs(e,n){return q.comparator(e.key,n.key)||ae(e.Es,n.Es)}static _s(e,n){return ae(e.Es,n.Es)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.As=1,this.Rs=new Ye(Pe.fs)}checkEmpty(e){return T.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new q_(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Rs=this.Rs.add(new Pe(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return T.resolve(o)}lookupMutationBatch(e,n){return T.resolve(this.vs(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Ps(r),i=s<0?0:s;return T.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return T.resolve(this.mutationQueue.length===0?-1:this.As-1)}getAllMutationBatches(e){return T.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pe(n,0),s=new Pe(n,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([r,s],o=>{const a=this.vs(o.Es);i.push(a)}),T.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ae);return n.forEach(s=>{const i=new Pe(s,0),o=new Pe(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([i,o],a=>{r=r.add(a.Es)})}),T.resolve(this.bs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;q.isDocumentKey(i)||(i=i.child(""));const o=new Pe(new q(i),0);let a=new Ye(ae);return this.Rs.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(c.Es)),!0)},o),T.resolve(this.bs(a))}bs(e){const n=[];return e.forEach(r=>{const s=this.vs(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Vs(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return T.forEach(n.mutations,s=>{const i=new Pe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Dn(e){}containsKey(e,n){const r=new Pe(n,0),s=this.Rs.firstAfterOrEqual(r);return T.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,T.resolve()}Vs(e,n){return this.Ps(e)}Ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}vs(e){const n=this.Ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.Ss=e,this.docs=new be(q.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Ss(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return T.resolve(r?r.document.mutableCopy():ze.newInvalidDocument(n))}getEntries(e,n){let r=on();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ze.newInvalidDocument(s))}),T.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=on();const o=n.path,a=new q(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||o_(i_(u),r)<=0||(s.has(u.key)||xo(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return T.resolve(i)}getAllFromCollectionGroup(e,n,r,s){j()}Ds(e,n){return T.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new SE(this)}getSize(e){return T.resolve(this.size)}}class SE extends gE{constructor(e){super(),this.rs=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.rs.addEntry(e,s)):this.rs.removeEntry(r)}),T.waitFor(n)}getFromCache(e,n){return this.rs.getEntry(e,n)}getAllFromCache(e,n){return this.rs.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.persistence=e,this.Cs=new jr(n=>pl(n),ml),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.xs=0,this.Ns=new _l,this.targetCount=0,this.ks=kr.Nn()}forEachTarget(e,n){return this.Cs.forEach((r,s)=>n(s)),T.resolve()}getLastRemoteSnapshotVersion(e){return T.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return T.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),T.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.xs&&(this.xs=n),T.resolve()}$n(e){this.Cs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ks=new kr(n),this.highestTargetId=n),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,n){return this.$n(n),this.targetCount+=1,T.resolve()}updateTargetData(e,n){return this.$n(n),T.resolve()}removeTargetData(e,n){return this.Cs.delete(n.target),this.Ns.ps(n.targetId),this.targetCount-=1,T.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Cs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Cs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),T.waitFor(i).next(()=>s)}getTargetCount(e){return T.resolve(this.targetCount)}getTargetData(e,n){const r=this.Cs.get(n)||null;return T.resolve(r)}addMatchingKeys(e,n,r){return this.Ns.ws(n,r),T.resolve()}removeMatchingKeys(e,n,r){this.Ns.ys(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),T.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ns.ps(n),T.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ns.Ts(n);return T.resolve(r)}containsKey(e,n){return T.resolve(this.Ns.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n){this.Ms={},this.overlays={},this.Os=new ul(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new TE(this),this.indexManager=new pE,this.remoteDocumentCache=function(r){return new bE(r)}(r=>this.referenceDelegate.Bs(r)),this.serializer=new fE(n),this.Ls=new vE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _E,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Ms[e.toKey()];return r||(r=new EE(n,this.referenceDelegate),this.Ms[e.toKey()]=r),r}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,n,r){L("MemoryPersistence","Starting transaction:",e);const s=new CE(this.Os.next());return this.referenceDelegate.qs(),r(s).next(i=>this.referenceDelegate.Us(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ks(e,n){return T.or(Object.values(this.Ms).map(r=>()=>r.containsKey(e,n)))}}class CE extends c_{constructor(e){super(),this.currentSequenceNumber=e}}class El{constructor(e){this.persistence=e,this.Gs=new _l,this.Qs=null}static js(e){return new El(e)}get zs(){if(this.Qs)return this.Qs;throw j()}addReference(e,n,r){return this.Gs.addReference(r,n),this.zs.delete(r.toString()),T.resolve()}removeReference(e,n,r){return this.Gs.removeReference(r,n),this.zs.add(r.toString()),T.resolve()}markPotentiallyOrphaned(e,n){return this.zs.add(n.toString()),T.resolve()}removeTarget(e,n){this.Gs.ps(n.targetId).forEach(s=>this.zs.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.zs.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}qs(){this.Qs=new Set}Us(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return T.forEach(this.zs,r=>{const s=q.fromPath(r);return this.Ws(e,s).next(i=>{i||n.removeEntry(s,H.min())})}).next(()=>(this.Qs=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ws(e,n).next(r=>{r?this.zs.delete(n.toString()):this.zs.add(n.toString())})}Bs(e){return 0}Ws(e,n){return T.or([()=>T.resolve(this.Gs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ks(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Fi=s}static Bi(e,n){let r=te(),s=te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new bl(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.Li=!1}initialize(e,n){this.qi=e,this.indexManager=n,this.Li=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Ui(e,n).next(i=>i||this.Ki(e,n,s,r)).next(i=>i||this.Gi(e,n))}Ui(e,n){if(dh(n))return T.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=sc(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=te(...i);return this.qi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.Qi(n,a);return this.ji(n,l,o,c.readTime)?this.Ui(e,sc(n,null,"F")):this.zi(e,l,n,c)}))})))}Ki(e,n,r,s){return dh(n)||s.isEqual(H.min())?this.Gi(e,n):this.qi.getDocuments(e,r).next(i=>{const o=this.Qi(n,i);return this.ji(n,o,r,s)?this.Gi(e,n):(sh()<=le.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ic(n)),this.zi(e,o,n,s_(s,-1)))})}Qi(e,n){let r=new Ye(Ap(e));return n.forEach((s,i)=>{xo(e,i)&&(r=r.add(i))}),r}ji(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Gi(e,n){return sh()<=le.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",ic(n)),this.qi.getDocumentsMatchingQuery(e,n,Sn.min())}zi(e,n,r,s){return this.qi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n,r,s){this.persistence=e,this.Wi=n,this.serializer=s,this.Hi=new be(ae),this.Ji=new jr(i=>pl(i),ml),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(r)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wE(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Hi))}}function DE(t,e,n,r){return new RE(t,e,n,r)}async function Jp(t,e){const n=Q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Zi(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=te();for(const l of s){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of i){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({tr:l,removedBatchIds:o,addedBatchIds:a}))})})}function xE(t,e){const n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(o,a,c,l){const u=c.batch,h=u.keys();let d=T.resolve();return h.forEach(m=>{d=d.next(()=>l.getEntry(a,m)).next(w=>{const v=c.docVersions.get(m);ye(v!==null),w.version.compareTo(v)<0&&(u.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),l.addEntry(w)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=te();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Xp(t){const e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Fs.getLastRemoteSnapshotVersion(n))}function NE(t,e){const n=Q(t),r=e.snapshotVersion;let s=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Xi.newChangeBuffer({trackRemovals:!0});s=n.Hi;const a=[];e.targetChanges.forEach((u,h)=>{const d=s.get(h);if(!d)return;a.push(n.Fs.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Fs.addMatchingKeys(i,u.addedDocuments,h)));let m=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(et.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(h,m),function(w,v,C){return w.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(d,m,u)&&a.push(n.Fs.updateTargetData(i,m))});let c=on(),l=te();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(kE(i,o,e.documentUpdates).next(u=>{c=u.er,l=u.nr})),!r.isEqual(H.min())){const u=n.Fs.getLastRemoteSnapshotVersion(i).next(h=>n.Fs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return T.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,l)).next(()=>c)}).then(i=>(n.Hi=s,i))}function kE(t,e,n){let r=te(),s=te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=on();return n.forEach((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(H.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{er:o,nr:s}})}function ME(t,e){const n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OE(t,e){const n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Fs.getTargetData(r,e).next(i=>i?(s=i,T.resolve(s)):n.Fs.allocateTargetId(r).next(o=>(s=new pn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Fs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Hi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(r.targetId,r),n.Ji.set(e,r.targetId)),r})}async function uc(t,e,n){const r=Q(t),s=r.Hi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ks(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Hi=r.Hi.remove(e),r.Ji.delete(s.target)}function Th(t,e,n){const r=Q(t);let s=H.min(),i=te();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){const u=Q(a),h=u.Ji.get(l);return h!==void 0?T.resolve(u.Hi.get(h)):u.Fs.getTargetData(c,l)}(r,o,sn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.Wi.getDocumentsMatchingQuery(o,e,n?s:H.min(),n?i:te())).next(a=>(PE(r,A_(e),a),{documents:a,sr:i})))}function PE(t,e,n){let r=t.Yi.get(e)||H.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Yi.set(e,r)}class Ih{constructor(){this.activeTargetIds=M_()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LE{constructor(){this.Wr=new Ih,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,n,r){this.Hr[e]=n}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new Ih,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{Jr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let di=null;function ha(){return di===null?di=268435456+Math.round(2147483648*Math.random()):di++,"0x"+di.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge="WebChannelConnection";class BE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.wo=n+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,n,r,s,i){const o=ha(),a=this.Io(e,n);L("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const c={};return this.To(c,s,i),this.Eo(e,a,c,r).then(l=>(L("RestConnection",`Received RPC '${e}' ${o}: `,l),l),l=>{throw Cr("RestConnection",`RPC '${e}' ${o} failed with error: `,l,"url: ",a,"request:",r),l})}Ao(e,n,r,s,i,o){return this.po(e,n,r,s,i)}To(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+qr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Io(e,n){const r=FE[e];return`${this.wo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,n,r,s){const i=ha();return new Promise((o,a)=>{const c=new H1;c.setWithCredentials(!0),c.listenOnce(G1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case la.NO_ERROR:const u=c.getResponseJson();L(Ge,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case la.TIMEOUT:L(Ge,`RPC '${e}' ${i} timed out`),a(new V(b.DEADLINE_EXCEEDED,"Request time out"));break;case la.HTTP_ERROR:const h=c.getStatus();if(L(Ge,`RPC '${e}' ${i} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);const m=d==null?void 0:d.error;if(m&&m.status&&m.message){const w=function(v){const C=v.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(C)>=0?C:b.UNKNOWN}(m.status);a(new V(w,m.message))}else a(new V(b.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new V(b.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{L(Ge,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(s);L(Ge,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",l,r,15)})}Ro(e,n,r){const s=ha(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=q1(),a=j1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new z1({})),this.To(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const l=i.join("");L(Ge,`Creating RPC '${e}' stream ${s}: ${l}`,c);const u=o.createWebChannel(l,c);let h=!1,d=!1;const m=new UE({io:v=>{d?L(Ge,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(h||(L(Ge,`Opening RPC '${e}' stream ${s} transport.`),u.open(),h=!0),L(Ge,`RPC '${e}' stream ${s} sending:`,v),u.send(v))},ro:()=>u.close()}),w=(v,C,R)=>{v.listen(C,$=>{try{R($)}catch(M){setTimeout(()=>{throw M},0)}})};return w(u,li.EventType.OPEN,()=>{d||L(Ge,`RPC '${e}' stream ${s} transport opened.`)}),w(u,li.EventType.CLOSE,()=>{d||(d=!0,L(Ge,`RPC '${e}' stream ${s} transport closed`),m.fo())}),w(u,li.EventType.ERROR,v=>{d||(d=!0,Cr(Ge,`RPC '${e}' stream ${s} transport errored:`,v),m.fo(new V(b.UNAVAILABLE,"The operation could not be completed")))}),w(u,li.EventType.MESSAGE,v=>{var C;if(!d){const R=v.data[0];ye(!!R);const $=R,M=$.error||((C=$[0])===null||C===void 0?void 0:C.error);if(M){L(Ge,`RPC '${e}' stream ${s} received error:`,M);const ne=M.status;let Se=function(pt){const mt=Re[pt];if(mt!==void 0)return Vp(mt)}(ne),je=M.message;Se===void 0&&(Se=b.INTERNAL,je="Unknown error status: "+ne+" with message "+M.message),d=!0,m.fo(new V(Se,je)),u.close()}else L(Ge,`RPC '${e}' stream ${s} received:`,R),m._o(R)}}),w(a,K1.STAT_EVENT,v=>{v.stat===nh.PROXY?L(Ge,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===nh.NOPROXY&&L(Ge,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{m.lo()},0),m}}function fa(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(t){return new Y_(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n,r=1e3,s=1.5,i=6e4){this.si=e,this.timerId=n,this.vo=r,this.Po=s,this.bo=i,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const n=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),s=Math.max(0,n-r);s>0&&L("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Vo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,s,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){this.So!==null&&(this.So.skipDelay(),this.So=null)}cancel(){this.So!==null&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n,r,s,i,o,a,c){this.si=e,this.Mo=r,this.Oo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new Yp(e,n)}qo(){return this.state===1||this.state===5||this.Uo()}Uo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Ko()}async stop(){this.qo()&&await this.close(0)}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&this.Fo===null&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}async jo(){if(this.Uo())return this.close(0)}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}async close(e,n){this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,e!==4?this.Lo.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(rn(n.toString()),rn("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Jo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.co(n)}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),n=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.$o===n&&this.Xo(r,s)},r=>{e(()=>{const s=new V(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Zo(s)})})}Xo(e,n){const r=this.Yo(this.$o);this.stream=this.tu(e,n),this.stream.oo(()=>{r(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(s=>{r(()=>this.Zo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Ko(){this.state=5,this.Lo.xo(async()=>{this.state=0,this.start()})}Zo(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return n=>{this.si.enqueueAndForget(()=>this.$o===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VE extends Zp{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}tu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.Lo.reset();const n=tE(this.serializer,e),r=function(s){if(!("targetChange"in s))return H.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?H.min():i.readTime?Bt(i.readTime):H.min()}(e);return this.listener.eu(n,r)}nu(e){const n={};n.database=lc(this.serializer),n.addTarget=function(s,i){let o;const a=i.target;if(o=rc(a)?{documents:sE(s,a)}:{query:iE(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=Gp(s,i.resumeToken);const c=oc(s,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(H.min())>0){o.readTime=Wi(s,i.snapshotVersion.toTimestamp());const c=oc(s,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=aE(this.serializer,e);r&&(n.labels=r),this.zo(n)}su(e){const n={};n.database=lc(this.serializer),n.removeTarget=e,this.zo(n)}}class qE extends Zp{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const n=rE(e.writeResults,e.commitTime),r=Bt(e.commitTime);return this.listener.uu(r,n)}return ye(!e.writeResults||e.writeResults.length===0),this.iu=!0,this.listener.cu()}au(){const e={};e.database=lc(this.serializer),this.zo(e)}ou(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>nE(this.serializer,r))};this.zo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.hu=!1}lu(){if(this.hu)throw new V(b.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,n,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.po(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(b.UNKNOWN,s.toString())})}Ao(e,n,r,s){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ao(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new V(b.UNKNOWN,i.toString())})}terminate(){this.hu=!0}}class GE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){this.du===0&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){this.state==="Online"?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,e==="Online"&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(rn(n),this.wu=!1):L("OnlineStateTracker",n)}Iu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=i,this.vu.Jr(o=>{r.enqueueAndForget(async()=>{Xn(this)&&(L("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=Q(a);c.Au.add(4),await Ws(c),c.Pu.set("Unknown"),c.Au.delete(4),await Po(c)}(this))})}),this.Pu=new GE(r,s)}}async function Po(t){if(Xn(t))for(const e of t.Ru)await e(!0)}async function Ws(t){for(const e of t.Ru)await e(!1)}function em(t,e){const n=Q(t);n.Eu.has(e.targetId)||(n.Eu.set(e.targetId,e),Il(n)?Tl(n):Gr(n).Uo()&&Sl(n,e))}function tm(t,e){const n=Q(t),r=Gr(n);n.Eu.delete(e),r.Uo()&&nm(n,e),n.Eu.size===0&&(r.Uo()?r.Qo():Xn(n)&&n.Pu.set("Unknown"))}function Sl(t,e){if(t.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gr(t).nu(e)}function nm(t,e){t.bu.Lt(e),Gr(t).su(e)}function Tl(t){t.bu=new W_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),he:e=>t.Eu.get(e)||null,oe:()=>t.datastore.serializer.databaseId}),Gr(t).start(),t.Pu.mu()}function Il(t){return Xn(t)&&!Gr(t).qo()&&t.Eu.size>0}function Xn(t){return Q(t).Au.size===0}function rm(t){t.bu=void 0}async function zE(t){t.Eu.forEach((e,n)=>{Sl(t,e)})}async function HE(t,e){rm(t),Il(t)?(t.Pu.pu(e),Tl(t)):t.Pu.set("Unknown")}async function WE(t,e,n){if(t.Pu.set("Online"),e instanceof jp&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.Eu.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.Eu.delete(o),r.bu.removeTarget(o))}(t,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qi(t,r)}else if(e instanceof bi?t.bu.Wt(e):e instanceof qp?t.bu.ee(e):t.bu.Yt(e),!n.isEqual(H.min()))try{const r=await Xp(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.bu.ue(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const l=s.Eu.get(c);l&&s.Eu.set(c,l.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const l=s.Eu.get(a);if(!l)return;s.Eu.set(a,l.withResumeToken(et.EMPTY_BYTE_STRING,l.snapshotVersion)),nm(s,a);const u=new pn(l.target,a,c,l.sequenceNumber);Sl(s,u)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){L("RemoteStore","Failed to raise snapshot:",r),await Qi(t,r)}}async function Qi(t,e,n){if(!Ks(e))throw e;t.Au.add(1),await Ws(t),t.Pu.set("Offline"),n||(n=()=>Xp(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{L("RemoteStore","Retrying IndexedDB access"),await n(),t.Au.delete(1),await Po(t)})}function sm(t,e){return e().catch(n=>Qi(t,n,e))}async function Lo(t){const e=Q(t),n=In(e);let r=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;QE(e);)try{const s=await ME(e.localStore,r);if(s===null){e.Tu.length===0&&n.Qo();break}r=s.batchId,JE(e,s)}catch(s){await Qi(e,s)}im(e)&&om(e)}function QE(t){return Xn(t)&&t.Tu.length<10}function JE(t,e){t.Tu.push(e);const n=In(t);n.Uo()&&n.ru&&n.ou(e.mutations)}function im(t){return Xn(t)&&!In(t).qo()&&t.Tu.length>0}function om(t){In(t).start()}async function XE(t){In(t).au()}async function YE(t){const e=In(t);for(const n of t.Tu)e.ou(n.mutations)}async function ZE(t,e,n){const r=t.Tu.shift(),s=gl.from(r,e,n);await sm(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lo(t)}async function eb(t,e){e&&In(t).ru&&await async function(n,r){if(s=r.code,K_(s)&&s!==b.ABORTED){const i=n.Tu.shift();In(n).Go(),await sm(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Lo(n)}var s}(t,e),im(t)&&om(t)}async function Ah(t,e){const n=Q(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");const r=Xn(n);n.Au.add(3),await Ws(n),r&&n.Pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Au.delete(3),await Po(n)}async function tb(t,e){const n=Q(t);e?(n.Au.delete(2),await Po(n)):e||(n.Au.add(2),await Ws(n),n.Pu.set("Unknown"))}function Gr(t){return t.Vu||(t.Vu=function(e,n,r){const s=Q(e);return s.lu(),new VE(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{oo:zE.bind(null,t),co:HE.bind(null,t),eu:WE.bind(null,t)}),t.Ru.push(async e=>{e?(t.Vu.Go(),Il(t)?Tl(t):t.Pu.set("Unknown")):(await t.Vu.stop(),rm(t))})),t.Vu}function In(t){return t.Su||(t.Su=function(e,n,r){const s=Q(e);return s.lu(),new qE(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{oo:XE.bind(null,t),co:eb.bind(null,t),cu:YE.bind(null,t),uu:ZE.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Go(),await Lo(t)):(await t.Su.stop(),t.Tu.length>0&&(L("RemoteStore",`Stopping write stream with ${t.Tu.length} pending writes`),t.Tu=[]))})),t.Su}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Cl(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Al(t,e){if(rn("AsyncQueue",`${e}: ${t}`),Ks(t))return new V(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=rs(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new vr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(){this.Du=new be(q.comparator)}track(e){const n=e.doc.key,r=this.Du.get(n);r?e.type!==0&&r.type===3?this.Du=this.Du.insert(n,e):e.type===3&&r.type!==1?this.Du=this.Du.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Du=this.Du.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Du=this.Du.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Du=this.Du.remove(n):e.type===1&&r.type===2?this.Du=this.Du.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Du=this.Du.insert(n,{type:2,doc:e.doc}):j():this.Du=this.Du.insert(n,e)}Cu(){const e=[];return this.Du.inorderTraversal((n,r)=>{e.push(r)}),e}}class Mr{constructor(e,n,r,s,i,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Mr(e,n,vr.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Do(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.xu=void 0,this.listeners=[]}}class rb{constructor(){this.queries=new jr(e=>Cp(e),Do),this.onlineState="Unknown",this.Nu=new Set}}async function am(t,e){const n=Q(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new nb),s)try{i.xu=await n.onListen(r)}catch(o){const a=Al(o,`Initialization of query '${ic(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.ku(n.onlineState),i.xu&&e.Mu(i.xu)&&Rl(n)}async function cm(t,e){const n=Q(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function sb(t,e){const n=Q(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Mu(s)&&(r=!0);o.xu=s}}r&&Rl(n)}function ib(t,e,n){const r=Q(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Rl(t){t.Nu.forEach(e=>{e.next()})}class lm{constructor(e,n,r){this.query=e,this.Ou=n,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}Mu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Mr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),n=!0):this.Lu(e,this.onlineState)&&(this.qu(e),n=!0),this.Fu=e,n}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let n=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),n=!0),n}Lu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Uu||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Bu(e){if(e.docChanges.length>0)return!0;const n=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qu(e){e=Mr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this.key=e}}class hm{constructor(e){this.key=e}}class ob{constructor(e,n){this.query=e,this.Ju=n,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=te(),this.mutatedKeys=te(),this.Zu=Ap(e),this.tc=new vr(this.Zu)}get ec(){return this.Ju}nc(e,n){const r=n?n.sc:new Rh,s=n?n.tc:this.tc;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const d=s.get(u),m=xo(this.query,h)?h:null,w=!!d&&this.mutatedKeys.has(d.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let C=!1;d&&m?d.data.isEqual(m.data)?w!==v&&(r.track({type:3,doc:m}),C=!0):this.ic(d,m)||(r.track({type:2,doc:m}),C=!0,(c&&this.Zu(m,c)>0||l&&this.Zu(m,l)<0)&&(a=!0)):!d&&m?(r.track({type:0,doc:m}),C=!0):d&&!m&&(r.track({type:1,doc:d}),C=!0,(c||l)&&(a=!0)),C&&(m?(o=o.add(m),i=v?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{tc:o,sc:r,ji:a,mutatedKeys:i}}ic(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const i=e.sc.Cu();i.sort((l,u)=>function(h,d){const m=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j()}};return m(h)-m(d)}(l.type,u.type)||this.Zu(l.doc,u.doc)),this.rc(r);const o=n?this.oc():[],a=this.Xu.size===0&&this.current?1:0,c=a!==this.Yu;return this.Yu=a,i.length!==0||c?{snapshot:new Mr(this.query,e.tc,s,i,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),uc:o}:{uc:o}}ku(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tc:this.tc,sc:new Rh,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(n=>this.Ju=this.Ju.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ju=this.Ju.delete(n)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=te(),this.tc.forEach(r=>{this.cc(r.key)&&(this.Xu=this.Xu.add(r.key))});const n=[];return e.forEach(r=>{this.Xu.has(r)||n.push(new hm(r))}),this.Xu.forEach(r=>{e.has(r)||n.push(new um(r))}),n}ac(e){this.Ju=e.sr,this.Xu=te();const n=this.nc(e.documents);return this.applyChanges(n,!0)}hc(){return Mr.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,this.Yu===0,this.hasCachedResults)}}class ab{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cb{constructor(e){this.key=e,this.lc=!1}}class lb{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fc={},this.dc=new jr(a=>Cp(a),Do),this._c=new Map,this.wc=new Set,this.mc=new be(q.comparator),this.gc=new Map,this.yc=new _l,this.Ic={},this.Tc=new Map,this.Ec=kr.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return this.Ac===!0}}async function ub(t,e){const n=_b(t);let r,s;const i=n.dc.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.hc();else{const o=await OE(n.localStore,sn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await hb(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&em(n.remoteStore,o)}return s}async function hb(t,e,n,r,s){t.Rc=(h,d,m)=>async function(w,v,C,R){let $=v.view.nc(C);$.ji&&($=await Th(w.localStore,v.query,!1).then(({documents:Se})=>v.view.nc(Se,$)));const M=R&&R.targetChanges.get(v.targetId),ne=v.view.applyChanges($,w.isPrimaryClient,M);return xh(w,v.targetId,ne.uc),ne.snapshot}(t,h,d,m);const i=await Th(t.localStore,e,!0),o=new ob(e,i.sr),a=o.nc(i.documents),c=Hs.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),l=o.applyChanges(a,t.isPrimaryClient,c);xh(t,n,l.uc);const u=new ab(e,n,o);return t.dc.set(e,u),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),l.snapshot}async function fb(t,e){const n=Q(t),r=n.dc.get(e),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter(i=>!Do(i,e))),void n.dc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await uc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),tm(n.remoteStore,r.targetId),hc(n,r.targetId)}).catch(Gs)):(hc(n,r.targetId),await uc(n.localStore,r.targetId,!0))}async function db(t,e,n){const r=Eb(t);try{const s=await function(i,o){const a=Q(i),c=ke.now(),l=o.reduce((d,m)=>d.add(m.key),te());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let m=on(),w=te();return a.Xi.getEntries(d,l).next(v=>{m=v,m.forEach((C,R)=>{R.isValidDocument()||(w=w.add(C))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,m)).next(v=>{u=v;const C=[];for(const R of o){const $=B_(R,u.get(R.key).overlayedDocument);$!=null&&C.push(new Rn(R.key,$,vp($.value.mapValue),Ut.exists(!0)))}return a.mutationQueue.addMutationBatch(d,c,C,o)}).next(v=>{h=v;const C=v.applyToLocalDocumentSet(u,w);return a.documentOverlayCache.saveOverlays(d,v.batchId,C)})}).then(()=>({batchId:h.batchId,changes:Dp(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let c=i.Ic[i.currentUser.toKey()];c||(c=new be(ae)),c=c.insert(o,a),i.Ic[i.currentUser.toKey()]=c}(r,s.batchId,n),await Qs(r,s.changes),await Lo(r.remoteStore)}catch(s){const i=Al(s,"Failed to persist write");n.reject(i)}}async function fm(t,e){const n=Q(t);try{const r=await NE(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.gc.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.lc=!0:s.modifiedDocuments.size>0?ye(o.lc):s.removedDocuments.size>0&&(ye(o.lc),o.lc=!1))}),await Qs(n,r,e)}catch(r){await Gs(r)}}function Dh(t,e,n){const r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.dc.forEach((i,o)=>{const a=o.view.ku(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=Q(i);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(const h of u.listeners)h.ku(o)&&(c=!0)}),c&&Rl(a)}(r.eventManager,e),s.length&&r.fc.eu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pb(t,e,n){const r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.gc.get(e),i=s&&s.key;if(i){let o=new be(q.comparator);o=o.insert(i,ze.newNoDocument(i,H.min()));const a=te().add(i),c=new Mo(H.min(),new Map,new be(ae),o,a);await fm(r,c),r.mc=r.mc.remove(i),r.gc.delete(e),Dl(r)}else await uc(r.localStore,e,!1).then(()=>hc(r,e,n)).catch(Gs)}async function mb(t,e){const n=Q(t),r=e.batch.batchId;try{const s=await xE(n.localStore,e);pm(n,r,null),dm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qs(n,s)}catch(s){await Gs(s)}}async function gb(t,e,n){const r=Q(t);try{const s=await function(i,o){const a=Q(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return a.mutationQueue.lookupMutationBatch(c,o).next(u=>(ye(u!==null),l=u.keys(),a.mutationQueue.removeMutationBatch(c,u))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>a.localDocuments.getDocuments(c,l))})}(r.localStore,e);pm(r,e,n),dm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qs(r,s)}catch(s){await Gs(s)}}function dm(t,e){(t.Tc.get(e)||[]).forEach(n=>{n.resolve()}),t.Tc.delete(e)}function pm(t,e,n){const r=Q(t);let s=r.Ic[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ic[r.currentUser.toKey()]=s}}function hc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.dc.delete(r),n&&t.fc.vc(r,n);t._c.delete(e),t.isPrimaryClient&&t.yc.ps(e).forEach(r=>{t.yc.containsKey(r)||mm(t,r)})}function mm(t,e){t.wc.delete(e.path.canonicalString());const n=t.mc.get(e);n!==null&&(tm(t.remoteStore,n),t.mc=t.mc.remove(e),t.gc.delete(n),Dl(t))}function xh(t,e,n){for(const r of n)r instanceof um?(t.yc.addReference(r.key,e),yb(t,r)):r instanceof hm?(L("SyncEngine","Document no longer in limbo: "+r.key),t.yc.removeReference(r.key,e),t.yc.containsKey(r.key)||mm(t,r.key)):j()}function yb(t,e){const n=e.key,r=n.path.canonicalString();t.mc.get(n)||t.wc.has(r)||(L("SyncEngine","New document in limbo: "+n),t.wc.add(r),Dl(t))}function Dl(t){for(;t.wc.size>0&&t.mc.size<t.maxConcurrentLimboResolutions;){const e=t.wc.values().next().value;t.wc.delete(e);const n=new q(ve.fromString(e)),r=t.Ec.next();t.gc.set(r,new cb(n)),t.mc=t.mc.insert(n,r),em(t.remoteStore,new pn(sn(Ro(n.path)),r,"TargetPurposeLimboResolution",ul.ct))}}async function Qs(t,e,n){const r=Q(t),s=[],i=[],o=[];r.dc.isEmpty()||(r.dc.forEach((a,c)=>{o.push(r.Rc(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l!=null&&l.fromCache?"not-current":"current"),l){s.push(l);const u=bl.Bi(c.targetId,l);i.push(u)}}))}),await Promise.all(o),r.fc.eu(s),await async function(a,c){const l=Q(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>T.forEach(c,h=>T.forEach(h.$i,d=>l.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>T.forEach(h.Fi,d=>l.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!Ks(u))throw u;L("LocalStore","Failed to update sequence numbers: "+u)}for(const u of c){const h=u.targetId;if(!u.fromCache){const d=l.Hi.get(h),m=d.snapshotVersion,w=d.withLastLimboFreeSnapshotVersion(m);l.Hi=l.Hi.insert(h,w)}}}(r.localStore,i))}async function wb(t,e){const n=Q(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());const r=await Jp(n.localStore,e);n.currentUser=e,function(s,i){s.Tc.forEach(o=>{o.forEach(a=>{a.reject(new V(b.CANCELLED,i))})}),s.Tc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qs(n,r.tr)}}function vb(t,e){const n=Q(t),r=n.gc.get(e);if(r&&r.lc)return te().add(r.key);{let s=te();const i=n._c.get(e);if(!i)return s;for(const o of i){const a=n.dc.get(o);s=s.unionWith(a.view.ec)}return s}}function _b(t){const e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pb.bind(null,e),e.fc.eu=sb.bind(null,e.eventManager),e.fc.vc=ib.bind(null,e.eventManager),e}function Eb(t){const e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gb.bind(null,e),e}class Nh{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Oo(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return DE(this.persistence,new AE,e.initialUser,this.serializer)}createPersistence(e){return new IE(El.js,this.serializer)}createSharedClientState(e){return new LE}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class bb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wb.bind(null,this.syncEngine),await tb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new rb}createDatastore(e){const n=Oo(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new BE(s));var s;return function(i,o,a,c){return new jE(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>Dh(this.syncEngine,a,0),o=Ch.D()?new Ch:new $E,new KE(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,c,l){const u=new lb(r,s,i,o,a,c);return l&&(u.Ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=Q(e);L("RemoteStore","RemoteStore shutting down."),n.Au.add(5),await Ws(n),n.vu.shutdown(),n.Pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):rn("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ke.UNAUTHENTICATED,this.clientId=gp.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{L("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(L("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Al(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function da(t,e){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Jp(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function kh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ib(t);L("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Ah(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Ah(e.remoteStore,i)),t._onlineComponents=e}function Tb(t){return t.name==="FirebaseError"?t.code===b.FAILED_PRECONDITION||t.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Ib(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{await da(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Tb(n))throw n;Cr("Error using user provided cache. Falling back to memory cache: "+n),await da(t,new Nh)}}else L("FirestoreClient","Using default OfflineComponentProvider"),await da(t,new Nh);return t._offlineComponents}async function ym(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),await kh(t,t._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),await kh(t,new bb))),t._onlineComponents}function Cb(t){return ym(t).then(e=>e.syncEngine)}async function fc(t){const e=await ym(t),n=e.eventManager;return n.onListen=ub.bind(null,e.syncEngine),n.onUnlisten=fb.bind(null,e.syncEngine),n}function Ab(t,e,n={}){const r=new _n;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const l=new gm({next:h=>{i.enqueueAndForget(()=>cm(s,u));const d=h.docs.has(o);!d&&h.fromCache?c.reject(new V(b.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?c.reject(new V(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new lm(Ro(o.path),l,{includeMetadataChanges:!0,Uu:!0});return am(s,u)}(await fc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t,e,n){if(!n)throw new V(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Rb(t,e,n,r){if(e===!0&&r===!0)throw new V(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Oh(t){if(!q.isDocumentKey(t))throw new V(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ph(t){if(q.isDocumentKey(t))throw new V(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":j()}function Vt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xl(t);throw new V(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new V(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lh(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Q1;switch(n.type){case"firstParty":return new Z1(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new V(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Mh.get(e);n&&(L("ComponentProvider","Removing Datastore"),Mh.delete(e),n.terminate())}(this),Promise.resolve()}}function Db(t,e,n,r={}){var s;const i=(t=Vt(t,$o))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&Cr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=Ke.MOCK_USER;else{o=Nv(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new V(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Ke(c)}t._authCredentials=new J1(new mp(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new En(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ze(this.firestore,e,this._key)}}class Fo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fo(this.firestore,e,this._query)}}class En extends Fo{constructor(e,n,r){super(e,n,Ro(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new q(e))}withConverter(e){return new En(this.firestore,e,this._path)}}function Nl(t,e,...n){if(t=tn(t),wm("collection","path",e),t instanceof $o){const r=ve.fromString(e,...n);return Ph(r),new En(t,null,r)}{if(!(t instanceof Ze||t instanceof En))throw new V(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Ph(r),new En(t.firestore,null,r)}}function dc(t,e,...n){if(t=tn(t),arguments.length===1&&(e=gp.A()),wm("doc","path",e),t instanceof $o){const r=ve.fromString(e,...n);return Oh(r),new Ze(t,null,new q(r))}{if(!(t instanceof Ze||t instanceof En))throw new V(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Oh(r),new Ze(t.firestore,t instanceof En?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new Yp(this,"async_queue_retry"),this.Yc=()=>{const n=fa();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Lo.ko()};const e=fa();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const n=fa();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const n=new _n;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}async ta(){if(this.Gc.length!==0){try{await this.Gc[0](),this.Gc.shift(),this.Lo.reset()}catch(e){if(!Ks(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.Gc.length>0&&this.Lo.xo(()=>this.ta())}}Zc(e){const n=this.Kc.then(()=>(this.Wc=!0,e().catch(r=>{this.zc=r,this.Wc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw rn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Wc=!1,r))));return this.Kc=n,n}enqueueAfterDelay(e,n,r){this.Xc(),this.Jc.indexOf(e)>-1&&(n=0);const s=Cl.createAndSchedule(this,e,n,r,i=>this.ea(i));return this.jc.push(s),s}Xc(){this.zc&&j()}verifyOperationInProgress(){}async na(){let e;do e=this.Kc,await e;while(e!==this.Kc)}sa(e){for(const n of this.jc)if(n.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.jc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const n=this.jc.indexOf(e);this.jc.splice(n,1)}}function $h(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Or extends $o{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new xb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vm(this),this._firestoreClient.terminate()}}function Nb(t,e){const n=typeof t=="object"?t:P0(),r=typeof t=="string"?t:e||"(default)",s=N0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Rv("firestore");i&&Db(s,...i)}return s}function kl(t){return t._firestoreClient||vm(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function vm(t){var e,n,r;const s=t._freezeSettings(),i=function(o,a,c,l){return new h_(o,a,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new Sb(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pr(et.fromBase64String(e))}catch(n){throw new V(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pr(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=/^__.*__$/;class Mb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rn(e,this.data,this.fieldMask,n,this.fieldTransforms):new zs(e,this.data,n,this.fieldTransforms)}}class _m{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Em(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}class Bo{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.oa(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new Bo(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ca({path:r,ha:!1});return s.la(e),s}fa(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ca({path:r,ha:!1});return s.oa(),s}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return Ji(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(e.length===0)throw this._a("Document fields must not be empty");if(Em(this.ua)&&kb.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Ob{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Oo(e)}ga(e,n,r,s=!1){return new Bo({ua:e,methodName:n,ma:r,path:We.emptyPath(),ha:!1,wa:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bm(t){const e=t._freezeSettings(),n=Oo(t._databaseId);return new Ob(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Pb(t,e,n,r,s,i={}){const o=t.ga(i.merge||i.mergeFields?2:0,e,n,s);Ol("Data must be an object, but it was:",o,r);const a=Tm(r,o);let c,l;if(i.merge)c=new ft(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const d=pc(e,h,n);if(!o.contains(d))throw new V(b.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Cm(u,d)||u.push(d)}c=new ft(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new Mb(new ot(a),c,l)}class Vo extends Js{_toFieldTransform(e){if(e.ua!==2)throw e.ua===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vo}}function Sm(t,e,n){return new Bo({ua:3,ma:e.settings.ma,methodName:t._methodName,ha:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Lb extends Js{constructor(e,n){super(e),this.ya=n}_toFieldTransform(e){const n=Sm(this,e,!0),r=this.ya.map(i=>Kr(i,n)),s=new xr(r);return new $p(e.path,s)}isEqual(e){return this===e}}class $b extends Js{constructor(e,n){super(e),this.ya=n}_toFieldTransform(e){const n=Sm(this,e,!0),r=this.ya.map(i=>Kr(i,n)),s=new Nr(r);return new $p(e.path,s)}isEqual(e){return this===e}}function Fb(t,e,n,r){const s=t.ga(1,e,n);Ol("Data must be an object, but it was:",s,r);const i=[],o=ot.empty();Jn(r,(c,l)=>{const u=Pl(e,c,n);l=tn(l);const h=s.fa(u);if(l instanceof Vo)i.push(u);else{const d=Kr(l,h);d!=null&&(i.push(u),o.set(u,d))}});const a=new ft(i);return new _m(o,a,s.fieldTransforms)}function Ub(t,e,n,r,s,i){const o=t.ga(1,e,n),a=[pc(e,r,n)],c=[s];if(i.length%2!=0)throw new V(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(pc(e,i[d])),c.push(i[d+1]);const l=[],u=ot.empty();for(let d=a.length-1;d>=0;--d)if(!Cm(l,a[d])){const m=a[d];let w=c[d];w=tn(w);const v=o.fa(m);if(w instanceof Vo)l.push(m);else{const C=Kr(w,v);C!=null&&(l.push(m),u.set(m,C))}}const h=new ft(l);return new _m(u,h,o.fieldTransforms)}function Kr(t,e){if(Im(t=tn(t)))return Ol("Unsupported field value:",e,t),Tm(t,e);if(t instanceof Js)return function(n,r){if(!Em(r.ua))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ha&&e.ua!==4)throw e._a("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=Kr(o,r.da(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=tn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return O_(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ke.fromDate(n);return{timestampValue:Wi(r.serializer,s)}}if(n instanceof ke){const s=new ke(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Wi(r.serializer,s)}}if(n instanceof Ml)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Pr)return{bytesValue:Gp(r.serializer,n._byteString)};if(n instanceof Ze){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vl(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${xl(n)}`)}(t,e)}function Tm(t,e){const n={};return yp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jn(t,(r,s)=>{const i=Kr(s,e.aa(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Im(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof Ml||t instanceof Pr||t instanceof Ze||t instanceof Js)}function Ol(t,e,n){if(!Im(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=xl(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function pc(t,e,n){if((e=tn(e))instanceof Uo)return e._internalPath;if(typeof e=="string")return Pl(t,e);throw Ji("Field path arguments must be of type string or ",t,!1,void 0,n)}const Bb=new RegExp("[~\\*/\\[\\]]");function Pl(t,e,n){if(e.search(Bb)>=0)throw Ji(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uo(...e.split("."))._internalPath}catch{throw Ji(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ji(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new V(b.INVALID_ARGUMENT,a+t+c)}function Cm(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Vb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Vb extends Am{data(){return super.data()}}function Rm(t,e){return typeof e=="string"?Pl(t,e):e instanceof Uo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jb{convertValue(e,n="none"){switch(Wn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw j()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Jn(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Ml(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=fl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ns(e));default:return null}}convertTimestamp(e){const n=Tn(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);ye(Qp(r));const s=new ks(r.get(1),r.get(3)),i=new q(r.popFirst(5));return s.isEqual(n)||rn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dm extends Am{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Si(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Si extends Dm{data(e={}){return super.data(e)}}class Kb{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new is(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Si(this._firestore,this._userDataWriter,r.key,r,new is(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>{const a=new Si(r._firestore,r._userDataWriter,o.doc.key,o.doc,new is(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new Si(r._firestore,r._userDataWriter,o.doc.key,o.doc,new is(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,l=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),l=i.indexOf(o.doc.key)),{type:zb(o.type),doc:a,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t){t=Vt(t,Ze);const e=Vt(t.firestore,Or);return Ab(kl(e),t._key).then(n=>Om(e,t,n))}class Nm extends jb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}}function km(t,e,n){t=Vt(t,Ze);const r=Vt(t.firestore,Or),s=Gb(t.converter,e,n);return Mm(r,[Pb(bm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ut.none())])}function Yr(t,e,n,...r){t=Vt(t,Ze);const s=Vt(t.firestore,Or),i=bm(s);let o;return o=typeof(e=tn(e))=="string"||e instanceof Uo?Ub(i,"updateDoc",t._key,e,n,r):Fb(i,"updateDoc",t._key,e),Mm(s,[o.toMutation(t._key,Ut.exists(!0))])}function Hb(t,...e){var n,r,s;t=tn(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||$h(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if($h(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let c,l,u;if(t instanceof Ze)l=Vt(t.firestore,Or),u=Ro(t._key.path),c={next:h=>{e[o]&&e[o](Om(l,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Vt(t,Fo);l=Vt(h.firestore,Or),u=h._query;const d=new Nm(l);c={next:m=>{e[o]&&e[o](new Kb(l,d,h,m))},error:e[o+1],complete:e[o+2]},qb(t._query)}return function(h,d,m,w){const v=new gm(w),C=new lm(d,v,m);return h.asyncQueue.enqueueAndForget(async()=>am(await fc(h),C)),()=>{v.Sc(),h.asyncQueue.enqueueAndForget(async()=>cm(await fc(h),C))}}(kl(l),u,a,c)}function Mm(t,e){return function(n,r){const s=new _n;return n.asyncQueue.enqueueAndForget(async()=>db(await Cb(n),r,s)),s.promise}(kl(t),e)}function Om(t,e,n){const r=n.docs.get(e._key),s=new Nm(t);return new Dm(t,s,e._key,r,new is(n.hasPendingWrites,n.fromCache),e.converter)}function Fh(...t){return new Lb("arrayUnion",t)}function Uh(...t){return new $b("arrayRemove",t)}(function(t,e=!0){(function(n){qr=n})(O0),Mi(new Ss("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Or(new X1(n.getProvider("auth-internal")),new t_(n.getProvider("app-check-internal")),function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new V(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ks(a.options.projectId,c)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),mr(rh,"3.11.0",t),mr(rh,"3.11.0","esm2017")})();var Wb="firebase",Qb="9.21.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(Wb,Qb,"app");const Jb={apiKey:"AIzaSyBdrW-op61lrviPqesC6ez5K5aSxHf_Y14",authDomain:"e-culture-71815.firebaseapp.com",projectId:"e-culture-71815",storageBucket:"e-culture-71815.appspot.com",messagingSenderId:"52761179686",appId:"1:52761179686:web:19db1bff3af727288658e7"};cd(Jb);const Ll=Nb(),Bh=Nl(Ll,"game-rooms"),Xb=Nl(Ll,"players");Nl(Ll,"quizzes");const Tt=class{constructor(e,n){Oe(this,"id");Oe(this,"pseudo");this.id=e,this.pseudo=n}static generate(){const n=Math.floor(Math.random()*1e12),r=`user${n}`;return new Tt(n.toString(),r)}saveLocal(){localStorage.setItem(Tt.LOCAL_STORAGE_KEY,JSON.stringify(this))}static savedLocally(){return localStorage.getItem(Tt.LOCAL_STORAGE_KEY)!=null}static loadLocal(){const e=localStorage.getItem(Tt.LOCAL_STORAGE_KEY);if(e){const n=JSON.parse(e);return new Tt(n.id,n.pseudo)}else throw Error("Loading player from local storage but not in local storage.")}get ref(){return Tt.getRef(this.id)}static getRef(e){return dc(Xb,e)}static async loadServerFromRef(e){const n=await xm(e);return Tt.loadFromSnapshot(n)}saveServer(){km(this.ref,this.doc).then(()=>console.debug(`Player ${this} saved on firestore.`)).catch(e=>console.error(`Player ${this} not saved on firestore: ${e}.`))}static loadFromSnapshot(e){var r;const n=(r=e.data())==null?void 0:r.pseudo;if(n)return new Tt(e.id,n);throw Error(`Impossible to create Player from ${e}: pseudo not in data.`)}get doc(){return{id:this.id,pseudo:this.pseudo}}equals(e){return e instanceof Tt&&this.id===e.id}};let lt=Tt;Oe(lt,"LOCAL_STORAGE_KEY","player");const Yb=$e({data(){return{player:lt.loadLocal()}}}),Ue=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};function Zb(t,e,n,r,s,i){return G(),X("p",null,at(t.player.pseudo),1)}const eS=Ue(Yb,[["render",Zb]]),tS=$e({components:{UserInfoSmall:eS}}),nS="/e-culture/logo/application-without-text.png";const rS=t=>(Kt("data-v-affc13aa"),t=t(),zt(),t),sS=rS(()=>Y("img",{src:nS,alt:"application logo"},null,-1));function iS(t,e,n,r,s,i){const o=Te("router-link"),a=Te("UserInfoSmall");return G(),X("header",null,[oe(o,{to:"/"},{default:yn(()=>[sS]),_:1}),oe(a)])}const Xs=Ue(tS,[["render",iS],["__scopeId","data-v-affc13aa"]]),oS=$e({components:{HeaderDefault:Xs}}),aS="/e-culture/logo/application.png",Pm="/e-culture/logo/company.png";const Lm=t=>(Kt("data-v-a17909aa"),t=t(),zt(),t),cS={id:"home"},lS=Lm(()=>Y("img",{src:aS,alt:"application logo"},null,-1)),uS={id:"actions"},hS=Lm(()=>Y("footer",null,[Y("img",{src:Pm,alt:"company logo"})],-1));function fS(t,e,n,r,s,i){const o=Te("HeaderDefault"),a=Te("router-link");return G(),X("div",cS,[oe(o),Y("main",null,[lS,Y("div",uS,[oe(a,{class:"pseudo-button doodle-border",to:"/create-game-room"},{default:yn(()=>[ct("Create a Game Room")]),_:1}),oe(a,{class:"pseudo-button doodle-border",to:"/join-game-room"},{default:yn(()=>[ct("Join a Game Room")]),_:1}),oe(a,{class:"pseudo-button doodle-border",to:"/about"},{default:yn(()=>[ct("About Us")]),_:1})])]),hS])}const dS=Ue(oS,[["render",fS],["__scopeId","data-v-a17909aa"]]);class Vh{constructor(e,n){Oe(this,"points");Oe(this,"player");this.points=e,this.player=n}get doc(){return{points:this.points,player:this.player.ref}}addGoodAnswer(){this.points++}valueOf(){return this.points}}function $m(t,e){for(var n=[],r=0;r!=e;++r)n.push(t.unsafeNext());return n}function pS(t,e){var n=t.clone(),r=$m(n,e);return[r,n]}function Fm(t,e){for(var n=0;n!=e;++n)t.unsafeNext()}function mS(t,e){var n=t.clone();return Fm(n,e),n}var gS=214013,yS=2531011,wS=4294967295,vS=(1<<31)-1,pa=function(t){return t*gS+yS&wS},ma=function(t){return(t&vS)>>16},_S=function(){function t(e){this.seed=e}return t.prototype.clone=function(){return new t(this.seed)},t.prototype.next=function(){var e=new t(this.seed),n=e.unsafeNext();return[n,e]},t.prototype.unsafeNext=function(){var e=pa(this.seed),n=ma(e),r=pa(e),s=ma(r);this.seed=pa(r);var i=ma(this.seed),o=i+(s+(n<<15)<<15);return o|0},t}(),ES=function(t){return new _S(t)},bS=function(){function t(e,n){this.states=e,this.index=n}return t.twist=function(e){for(var n=e.slice(),r=0;r!==t.N-t.M;++r){var s=(n[r]&t.MASK_UPPER)+(n[r+1]&t.MASK_LOWER);n[r]=n[r+t.M]^s>>>1^-(s&1)&t.A}for(var r=t.N-t.M;r!==t.N-1;++r){var i=(n[r]&t.MASK_UPPER)+(n[r+1]&t.MASK_LOWER);n[r]=n[r+t.M-t.N]^i>>>1^-(i&1)&t.A}var o=(n[t.N-1]&t.MASK_UPPER)+(n[0]&t.MASK_LOWER);return n[t.N-1]=n[t.M-1]^o>>>1^-(o&1)&t.A,n},t.seeded=function(e){var n=Array(t.N);n[0]=e;for(var r=1;r!==t.N;++r){var s=n[r-1]^n[r-1]>>>30;n[r]=Math.imul(t.F,s)+r|0}return n},t.from=function(e){return new t(t.twist(t.seeded(e)),0)},t.prototype.clone=function(){return new t(this.states,this.index)},t.prototype.next=function(){var e=new t(this.states,this.index),n=e.unsafeNext();return[n,e]},t.prototype.unsafeNext=function(){var e=this.states[this.index];return e^=this.states[this.index]>>>t.U,e^=e<<t.S&t.B,e^=e<<t.T&t.C,e^=e>>>t.L,++this.index>=t.N&&(this.states=t.twist(this.states),this.index=0),e},t.N=624,t.M=397,t.R=31,t.A=2567483615,t.F=1812433253,t.U=11,t.S=7,t.B=2636928640,t.T=15,t.C=4022730752,t.L=18,t.MASK_LOWER=Math.pow(2,t.R)-1,t.MASK_UPPER=Math.pow(2,t.R),t}();function SS(t){return bS.from(t)}var TS=function(){function t(e,n,r,s){this.s01=e,this.s00=n,this.s11=r,this.s10=s}return t.prototype.clone=function(){return new t(this.s01,this.s00,this.s11,this.s10)},t.prototype.next=function(){var e=new t(this.s01,this.s00,this.s11,this.s10),n=e.unsafeNext();return[n,e]},t.prototype.unsafeNext=function(){var e=this.s00^this.s00<<23,n=this.s01^(this.s01<<23|this.s00>>>9),r=e^this.s10^(e>>>18|n<<14)^(this.s10>>>5|this.s11<<27),s=n^this.s11^n>>>18^this.s11>>>5,i=this.s00+this.s10|0;return this.s01=this.s11,this.s00=this.s10,this.s11=s,this.s10=r,i},t.prototype.jump=function(){var e=new t(this.s01,this.s00,this.s11,this.s10);return e.unsafeJump(),e},t.prototype.unsafeJump=function(){for(var e=0,n=0,r=0,s=0,i=[1667051007,2321340297,1548169110,304075285],o=0;o!==4;++o)for(var a=1;a;a<<=1)i[o]&a&&(e^=this.s01,n^=this.s00,r^=this.s11,s^=this.s10),this.unsafeNext();this.s01=e,this.s00=n,this.s11=r,this.s10=s},t}(),IS=function(t){return new TS(-1,~t,t|0,0)},CS=function(){function t(e,n,r,s){this.s01=e,this.s00=n,this.s11=r,this.s10=s}return t.prototype.clone=function(){return new t(this.s01,this.s00,this.s11,this.s10)},t.prototype.next=function(){var e=new t(this.s01,this.s00,this.s11,this.s10),n=e.unsafeNext();return[n,e]},t.prototype.unsafeNext=function(){var e=this.s00+this.s10|0,n=this.s10^this.s00,r=this.s11^this.s01,s=this.s00,i=this.s01;return this.s00=s<<24^i>>>8^n^n<<16,this.s01=i<<24^s>>>8^r^(r<<16|n>>>16),this.s10=r<<5^n>>>27,this.s11=n<<5^r>>>27,e},t.prototype.jump=function(){var e=new t(this.s01,this.s00,this.s11,this.s10);return e.unsafeJump(),e},t.prototype.unsafeJump=function(){for(var e=0,n=0,r=0,s=0,i=[3639956645,3750757012,1261568508,386426335],o=0;o!==4;++o)for(var a=1;a;a<<=1)i[o]&a&&(e^=this.s01,n^=this.s00,r^=this.s11,s^=this.s10),this.unsafeNext();this.s01=e,this.s00=n,this.s11=r,this.s10=s},t}(),AS=function(t){return new CS(-1,~t,t|0,0)};function Um(t,e){if(t.sign!==e.sign)return $l(t,{sign:-e.sign,data:e.data});for(var n=[],r=0,s=t.data,i=e.data,o=s.length-1,a=i.length-1;o>=0||a>=0;--o,--a){var c=o>=0?s[o]:0,l=a>=0?i[a]:0,u=c+l+r;n.push(u>>>0),r=~~(u/4294967296)}return r!==0&&n.push(r),{sign:t.sign,data:n.reverse()}}function RS(t){t.sign=1;for(var e=t.data,n=e.length-1;n>=0;--n)if(e[n]===4294967295)e[n]=0;else return e[n]+=1,t;return e.unshift(1),t}function DS(t,e){for(var n=Math.max(t.length,e.length),r=0;r<n;++r){var s=r+t.length-n,i=r+e.length-n,o=s>=0?t[s]:0,a=i>=0?e[i]:0;if(o<a)return!0;if(o>a)return!1}return!1}function $l(t,e){if(t.sign!==e.sign)return Um(t,{sign:-e.sign,data:e.data});var n=t.data,r=e.data;if(DS(n,r)){var s=$l(e,t);return s.sign=-s.sign,s}for(var i=[],o=0,a=n.length-1,c=r.length-1;a>=0||c>=0;--a,--c){var l=a>=0?n[a]:0,u=c>=0?r[c]:0,h=l-u-o;i.push(h>>>0),o=h<0?1:0}return{sign:t.sign,data:i.reverse()}}function qh(t){for(var e=t.data,n=0;n!==e.length&&e[n]===0;++n);return n===e.length?(t.sign=1,t.data=[0],t):(e.splice(0,n),t)}function ga(t,e){if(e<0){var n=-e;t.sign=-1,t.data[0]=~~(n/4294967296),t.data[1]=n>>>0}else t.sign=1,t.data[0]=~~(e/4294967296),t.data[1]=e>>>0;return t}function xS(t,e,n){var r=e.data[1],s=e.data[0],i=e.sign,o=n.data[1],a=n.data[0],c=n.sign;if(t.sign=1,i===1&&c===-1){var l=r+o,u=s+a+(l>4294967295?1:0);return t.data[0]=u>>>0,t.data[1]=l>>>0,t}var h=r,d=s,m=o,w=a;i===-1&&(h=o,d=a,m=r,w=s);var v=0,C=h-m;return C<0&&(v=1,C=C>>>0),t.data[0]=d-w-v,t.data[1]=C,t}function Bm(t,e){for(var n=t>2?~~(4294967296/t)*t:4294967296,r=e.unsafeNext()+2147483648;r>=n;)r=e.unsafeNext()+2147483648;return r%t}function Vm(t,e,n){for(var r=e.length;;){for(var s=0;s!==r;++s){var i=s===0?e[0]+1:4294967296,o=Bm(i,n);t[s]=o}for(var s=0;s!==r;++s){var a=t[s],c=e[s];if(a<c)return t;if(a>c)break}}}function mc(t,e,n){var r=qh(RS($l(e,t))),s=r.data.slice(0),i=Vm(s,r.data,n);return qh(Um({sign:1,data:i},t))}function NS(t,e,n){if(n!=null){var r=n.clone();return[mc(t,e,r),r]}return function(s){var i=s.clone();return[mc(t,e,i),i]}}var Zr=typeof BigInt<"u"?BigInt:void 0;function gc(t,e,n){for(var r=e-t+Zr(1),s=Zr(-2147483648),i=Zr(4294967296),o=i,a=1;o<r;)o*=i,++a;for(var c=o-o%r;;){for(var l=Zr(0),u=0;u!==a;++u){var h=n.unsafeNext();l=i*l+(Zr(h)-s)}if(l<c){var d=l%r;return d+t}}}function kS(t,e,n){if(n!=null){var r=n.clone();return[gc(t,e,r),r]}return function(s){var i=s.clone();return[gc(t,e,i),i]}}var MS=Number.MAX_SAFE_INTEGER,OS={sign:1,data:[0,0]},PS={sign:1,data:[0,0]},jh={sign:1,data:[0,0]},ya=[0,0];function LS(t,e,n,r){var s=n<=MS?ga(jh,n):xS(jh,ga(OS,e),ga(PS,t));return s.data[1]===4294967295?(s.data[0]+=1,s.data[1]=0):s.data[1]+=1,Vm(ya,s.data,r),ya[0]*4294967296+ya[1]+t}function yc(t,e,n){var r=e-t;if(r<=4294967295){var s=Bm(r+1,n);return s+t}return LS(t,e,r,n)}function $S(t,e,n){if(n!=null){var r=n.clone();return[yc(t,e,r),r]}return function(s){var i=s.clone();return[yc(t,e,i),i]}}var FS="module",US="6.0.2",BS="ad3183ba9b712bc6c1c5a9abbb1d1e641db139d4";const Gh=Object.freeze(Object.defineProperty({__proto__:null,__commitHash:BS,__type:FS,__version:US,congruential32:ES,generateN:pS,mersenne:SS,skipN:mS,uniformArrayIntDistribution:NS,uniformBigIntDistribution:kS,uniformIntDistribution:$S,unsafeGenerateN:$m,unsafeSkipN:Fm,unsafeUniformArrayIntDistribution:mc,unsafeUniformBigIntDistribution:gc,unsafeUniformIntDistribution:yc,xoroshiro128plus:AS,xorshift128plus:IS},Symbol.toStringTag,{value:"Module"}));class Fl{constructor(e,n){Oe(this,"answer");Oe(this,"correct");this.answer=e,this.correct=n}static fromJson(e){const n=e.answer,r=e.correct;if(typeof n=="string"&&typeof r=="boolean")return new Fl(n,r);throw Error(`Impossible to create QuizAnswer from a JSON: incorrect field 'answer' or 'correct' in ${e}`)}}const VS=[{question:"General Knowledge : Which king was responsible for the Norman Conquest of England?",answers:[{answer:"William the Conqueror",correct:!0},{answer:"Richard the Lionheart",correct:!1},{answer:"Henry II",correct:!1},{answer:"Edward the Confessor",correct:!1}],tags:["history"]},{question:"General Knowledge : Which battle marked the end of the Anglo-Saxon era and the beginning of Norman rule in England?",answers:[{answer:"The Battle of Hastings",correct:!0},{answer:"The Battle of Stamford Bridge",correct:!1},{answer:"The Battle of Bosworth Field",correct:!1},{answer:"The Battle of Agincourt",correct:!1}],tags:["history"]},{question:"General Knowledge : Who was the first Tudor monarch of England?",answers:[{answer:"Henry VII",correct:!0},{answer:"Edward VI",correct:!1},{answer:"Mary I",correct:!1},{answer:"Elizabeth I",correct:!1}],tags:["history"]},{question:"General Knowledge : What was the cause of the English Civil War?",answers:[{answer:"A struggle for power between the King and Parliament",correct:!0},{answer:"A rebellion against foreign rule",correct:!1},{answer:"A dispute over religious freedom",correct:!1},{answer:"A conflict over trade agreements",correct:!1}],tags:["history"]},{question:"General Knowledge : Who was the last monarch of the House of Stuart?",answers:[{answer:"Queen Anne",correct:!0},{answer:"King James II",correct:!1},{answer:"King Charles I",correct:!1},{answer:"King William III",correct:!1}],tags:["history"]},{question:"General Knowledge : What event led to the Glorious Revolution in England?",answers:[{answer:"The deposition of King James II and the accession of William and Mary",correct:!0},{answer:"The English Civil War",correct:!1},{answer:"The signing of the Magna Carta",correct:!1},{answer:"The Battle of Trafalgar",correct:!1}],tags:["history"]},{question:"General Knowledge : Who was the first English monarch to be beheaded?",answers:[{answer:"King Charles I",correct:!0},{answer:"King Edward I",correct:!1},{answer:"King Henry VIII",correct:!1},{answer:"King Richard III",correct:!1}],tags:["history"]},{question:"General Knowledge : What was the name of the ship that carried the Pilgrims to the New World?",answers:[{answer:"The Mayflower",correct:!0},{answer:"The Santa Maria",correct:!1},{answer:"The Nina",correct:!1},{answer:"The Pinta",correct:!1}],tags:["history"]},{question:"General Knowledge : What is the highest mountain in the UK?",answers:[{answer:"Ben Nevis",correct:!0},{answer:"Snowdon",correct:!1},{answer:"Scafell Pike",correct:!1},{answer:"Slieve Donard",correct:!1}],tags:["geography"]},{question:"General Knowledge : What is the longest river in the UK?",answers:[{answer:"River Severn",correct:!0},{answer:"River Thames",correct:!1},{answer:"River Tay",correct:!1},{answer:"River Spey",correct:!1}],tags:["geography"]},{question:"General Knowledge : What is the largest lake in the UK?",answers:[{answer:"Loch Lomond",correct:!0},{answer:"Lake Windermere",correct:!1},{answer:"Loch Ness",correct:!1},{answer:"Lough Neagh",correct:!1}]},{question:"General Knowledge : What is the name of the famous prehistoric monument located in Wiltshire, England?",answers:[{answer:"Stonehenge",correct:!0},{answer:"Avebury",correct:!1},{answer:"The Cerne Abbas Giant",correct:!1},{answer:"The Rollright Stones",correct:!1}],tags:["geography"]},{question:"General Knowledge : What is the highest waterfall in the UK?",answers:[{answer:"Eas a' Chual Aluinn",correct:!0},{answer:"Sgwd Ddu",correct:!1},{answer:"Hardraw Force",correct:!1},{answer:"High Force",correct:!1}],tags:["geography"]},{question:"General Knowledge : What is the name of the highest village in Scotland?",answers:[{answer:"Wanlockhead",correct:!0},{answer:"Tomintoul",correct:!1},{answer:"Braemar",correct:!1},{answer:"Aviemore",correct:!1}],tags:["geography"]},{question:"General Knowledge : What is the name of the peninsula in southwestern England that is famous for its beaches and surf culture?",answers:[{answer:"Cornwall",correct:!0},{answer:"Devon",correct:!1},{answer:"Dorset",correct:!1},{answer:"Isle of Wight",correct:!1}],tags:["geography"]},{question:"General Knowledge : What is the name of the highest mountain in Wales?",answers:[{answer:"Snowdon",correct:!0},{answer:"Cader Idris",correct:!1},{answer:"Pen y Fan",correct:!1},{answer:"Tryfan",correct:!1}],tags:["geography"]},{question:"General Knowledge : What is the capital of the United Kingdom?",answers:[{answer:"London",correct:!0},{answer:"Paris",correct:!1},{answer:"Birmingham",correct:!1},{answer:"Manchester",correct:!1}],tags:["geography"]},{question:"General Knowledge : How many inhabited islands belong to the United Kingdom?",answers:[{answer:"129",correct:!0},{answer:"17",correct:!1},{answer:"73",correct:!1},{answer:"214",correct:!1}],tags:["geography"]},{question:"General Knowledge : Which of those city names is NOT in the United Kingdom?",answers:[{answer:"Bergen",correct:!0},{answer:"Belfast",correct:!1},{answer:"Glasgow",correct:!1},{answer:"Swansea",correct:!1}],tags:["geography"]},{question:"General Knowledge : Who wrote the novel '1984', which is considered one of the most important works of dystopian fiction?",answers:[{answer:"George Orwell",correct:!0},{answer:"Aldous Huxley",correct:!1},{answer:"Ray Bradbury",correct:!1},{answer:"Margaret Atwood",correct:!1}],tags:["art","literature"]},{question:"General Knowledge : What is the name of the famous novel by Jane Austen that follows the story of Elizabeth Bennet and Mr. Darcy?",answers:[{answer:"Pride and Prejudice",correct:!0},{answer:"Sense and Sensibility",correct:!1},{answer:"Emma",correct:!1},{answer:"Mansfield Park",correct:!1}],tags:["art","literature"]},{question:"General Knowledge : What is the name of the Nobel Prize-winning British author who wrote the novels 'Lord of the Flies' and 'Rites of Passage'?",answers:[{answer:"William Golding",correct:!0},{answer:"J.K. Rowling",correct:!1},{answer:"Roald Dahl",correct:!1},{answer:"Kazuo Ishiguro",correct:!1}],tags:["art","literature"]},{question:"General Knowledge : What is the name of the famous British children's author who created the character of Peter Rabbit?",answers:[{answer:"Beatrix Potter",correct:!0},{answer:"Lewis Carroll",correct:!1},{answer:"Enid Blyton",correct:!1},{answer:"Roald Dahl",correct:!1}],tags:["art","literature"]},{question:"General Knowledge : What is the name of the famous English poet who wrote the poem 'The Waste Land'?",answers:[{answer:"T.S. Eliot",correct:!0},{answer:"William Wordsworth",correct:!1},{answer:"Samuel Taylor Coleridge",correct:!1},{answer:"John Keats",correct:!1}],tags:["art","literature"]},{question:"General Knowledge : What is the name of the famous English playwright who wrote the plays 'Hamlet', 'Macbeth', and 'Romeo and Juliet'?",answers:[{answer:"William Shakespeare",correct:!0},{answer:"Christopher Marlowe",correct:!1},{answer:"Ben Jonson",correct:!1},{answer:"Tom Stoppard",correct:!1}],tags:["art","literature"]},{question:"General Knowledge : What is the name of the famous Scottish novelist who wrote the novel 'Rob Roy'?",answers:[{answer:"Sir Walter Scott",correct:!0},{answer:"Robert Louis Stevenson",correct:!1},{answer:"James Hogg",correct:!1},{answer:"Irvine Welsh",correct:!1}],tags:["art","literature"]},{question:"General Knowledge : What is the name of the famous British artist known for his vivid, colorful paintings of landscapes and portraits?",answers:[{answer:"David Hockney",correct:!0},{answer:"Banksy",correct:!1},{answer:"Tracey Emin",correct:!1},{answer:"Damien Hirst",correct:!1}],tags:["art","painting"]},{question:"General Knowledge : What is the name of the famous British sculptor known for his abstract, modernist sculptures?",answers:[{answer:"Henry Moore",correct:!0},{answer:"Barbara Hepworth",correct:!1},{answer:"Anish Kapoor",correct:!1},{answer:"Rachel Whiteread",correct:!1}],tags:["art","painting"]},{question:"General Knowledge : What is the name of the famous British fashion designer who created the iconic punk fashion style?",answers:[{answer:"Vivienne Westwood",correct:!0},{answer:"Alexander McQueen",correct:!1},{answer:"Stella McCartney",correct:!1},{answer:"Mary Quant",correct:!1}],tags:["art","fashion"]},{question:"General Knowledge : What is the name of the famous British architect who designed the iconic 'Gherkin' building in London?",answers:[{answer:"Norman Foster",correct:!0},{answer:"Richard Rogers",correct:!1},{answer:"Zaha Hadid",correct:!1},{answer:"David Chipperfield",correct:!1}],tags:["art","architecture"]},{question:"General Knowledge : What is the name of the famous British composer who wrote the music for 'The Planets' and 'Jupiter'?",answers:[{answer:"Gustav Holst",correct:!0},{answer:"Benjamin Britten",correct:!1},{answer:"Edward Elgar",correct:!1},{answer:"Ralph Vaughan Williams",correct:!1}],tags:["art","music"]},{question:"General Knowledge : What is the name of the famous British theater director who founded the Royal Shakespeare Company?",answers:[{answer:"Peter Hall",correct:!0},{answer:"Trevor Nunn",correct:!1},{answer:"Sam Mendes",correct:!1},{answer:"Michael Grandage",correct:!1}],tags:["art","theater"]},{question:"General Knowledge : What is the name of the famous British film director who directed 'Trainspotting' and 'Slumdog Millionaire'?",answers:[{answer:"Danny Boyle",correct:!0},{answer:"Mike Leigh",correct:!1},{answer:"Ken Loach",correct:!1},{answer:"Stephen Frears",correct:!1}],tags:["art","movie"]},{question:"General Knowledge : What is the name of the famous annual rowing race that takes place on the River Thames in London?",answers:[{answer:"The Boat Race",correct:!0},{answer:"The Oxford and Cambridge Regatta",correct:!1},{answer:"The Henley Regatta",correct:!1},{answer:"The Head of the River Race",correct:!1}],tags:["sport"]},{question:"General Knowledge : What is the name of the famous English rugby team that plays their home games at Twickenham stadium?",answers:[{answer:"England national rugby team",correct:!0},{answer:"Leicester Tigers",correct:!1},{answer:"Bath Rugby",correct:!1},{answer:"Harlequins",correct:!1}],tags:["sport"]},{question:"General Knowledge : What is the name of the famous horse racing event that takes place at Aintree racecourse in Liverpool?",answers:[{answer:"The Grand National",correct:!0},{answer:"The Derby",correct:!1},{answer:"Royal Ascot",correct:!1},{answer:"Cheltenham Festival",correct:!1}],tags:["sport"]},{question:"General Knowledge : What is the name of the famous English football stadium that is also known as the 'Theatre of Dreams'?",answers:[{answer:"Old Trafford",correct:!0},{answer:"Anfield",correct:!1},{answer:"Emirates Stadium",correct:!1},{answer:"Wembley Stadium",correct:!1}],tags:["sport"]},{question:"General Knowledge : What is the name of the famous English tennis tournament that takes place at the All England Lawn Tennis and Croquet Club in Wimbledon?",answers:[{answer:"Wimbledon",correct:!0},{answer:"US Open",correct:!1},{answer:"French Open",correct:!1},{answer:"Australian Open",correct:!1}],tags:["sport"]},{question:"General Knowledge : What is the name of the famous English footballer who is widely regarded as one of the greatest players of all time and played for Manchester United and the England national team?",answers:[{answer:"David Beckham",correct:!1},{answer:"Wayne Rooney",correct:!0},{answer:"Alan Shearer",correct:!1},{answer:"Gary Lineker",correct:!1}],tags:["sport"]},{question:"General Knowledge : What is the name of the famous English boxer who is widely regarded as one of the greatest heavyweight boxers of all time?",answers:[{answer:"Tyson Fury",correct:!1},{answer:"Anthony Joshua",correct:!1},{answer:"Lennox Lewis",correct:!0},{answer:"Frank Bruno",correct:!1}],tags:["sport"]},{question:"Guess the Intruder : Which celebrity is not from England ?",answers:[{answer:"Benedict Cumberbatch",correct:!1},{answer:"Shawn Mendes",correct:!0},{answer:"Tom Holland",correct:!1},{answer:"Kate Winslet ",correct:!1}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from England ?",answers:[{answer:"Hugh Grant",correct:!1},{answer:"Keira Knightley",correct:!1},{answer:"Colin Firth",correct:!1},{answer:"James Corden",correct:!0}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from England ?",answers:[{answer:"Oscar Wilde",correct:!0},{answer:"Helen Mirren",correct:!1},{answer:"Judi Dench",correct:!1},{answer:"Tom Hardy",correct:!1}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from England ?",answers:[{answer:"Rowan Atkinson",correct:!1},{answer:"Naomi Campbell",correct:!1},{answer:"Cara Delevingne",correct:!1},{answer:"Nicole Kidman",correct:!0}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from England ?",answers:[{answer:"Keanu Reeves",correct:!0},{answer:"Ed Sheeran",correct:!1},{answer:"Ellie Goulding",correct:!1},{answer:"Sam Smith",correct:!1}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from England ?",answers:[{answer:"Ryan Reynolds",correct:!0},{answer:"Simon Cowell",correct:!1},{answer:"Gordon Ramsay",correct:!1},{answer:"Jamie Oliver",correct:!1}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from England ?",answers:[{answer:"Lily Allen",correct:!1},{answer:"David Attenborough",correct:!1},{answer:"Charlie Hunnam",correct:!1},{answer:"Margot Robbie",correct:!0}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from the United States ?",answers:[{answer:"Beyoncé",correct:!1},{answer:"Tom Hanks",correct:!1},{answer:"Emma Watson",correct:!0},{answer:"Jennifer Lawrence",correct:!1}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from the United States ?",answers:[{answer:"Will Smith",correct:!1},{answer:"Chris Hemsworth",correct:!0},{answer:"Meryl Streep",correct:!1},{answer:"Leonardo DiCaprio",correct:!1}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from the United States ?",answers:[{answer:"Adele",correct:!0},{answer:"Angelina Jolie",correct:!1},{answer:"Denzel Washington",correct:!1},{answer:"George Clooney",correct:!1}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from the United States ?",answers:[{answer:"Sandra Bullock",correct:!1},{answer:"Brad Pitt",correct:!1},{answer:"Tessa Thompson",correct:!0},{answer:"Julia Roberts",correct:!1}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from the United States ?",answers:[{answer:"Robert De Niro",correct:!1},{answer:"Idris Elba",correct:!0},{answer:"Jennifer Aniston",correct:!1},{answer:"Johnny Depp",correct:!1}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from the United States ?",answers:[{answer:"Tom Cruise",correct:!1},{answer:"Margot Robbie",correct:!0},{answer:"Dwayne Johnson",correct:!1},{answer:"Scarlett Johansson",correct:!1}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from the United States ?",answers:[{answer:"Justin Bieber",correct:!0},{answer:"Chris Evans",correct:!1},{answer:"Mark Wahlberg",correct:!1},{answer:"Taylor Swift",correct:!1}],tags:["intruder"]},{question:"Guess the Intruder : Which celebrity is not from the United States ?",answers:[{answer:"Kanye West",correct:!1},{answer:"Nicole Kidman",correct:!0},{answer:"Justin Timberlake",correct:!1},{answer:"Lady Gaga",correct:!1}],tags:["intruder"]},{question:"British or American : Which word is British ?",answers:[{answer:"Center",correct:!1},{answer:"Centre",correct:!0}],tags:["vocabulary"]},{question:"British or American : Which word is British ?",answers:[{answer:"Dialog",correct:!1},{answer:"Dialogue",correct:!0}],tags:["vocabulary"]},{question:"British or American : Which word is British ?",answers:[{answer:"Cookie",correct:!1},{answer:"Biscuit",correct:!0}],tags:["vocabulary"]},{question:"British or American : Which word is British ?",answers:[{answer:"Gasoline",correct:!1},{answer:"Petrol",correct:!0}],tags:["vocabulary"]},{question:"British or American : Which word is British ?",answers:[{answer:"Travelled",correct:!0},{answer:"Traveled",correct:!1}],tags:["vocabulary"]},{question:"British or American : Which word is British ?",answers:[{answer:"Jumper",correct:!0},{answer:"Sweater",correct:!1}],tags:["vocabulary"]},{question:"British or American : Which word is British ?",answers:[{answer:"Grey",correct:!0},{answer:"Gray",correct:!1}],tags:["vocabulary"]},{question:"British or American : Which word is British ?",answers:[{answer:"Pavement",correct:!0},{answer:"Sidewalk",correct:!1}],tags:["vocabulary"]},{question:"British or American : Which word is British ?",answers:[{answer:"Football",correct:!0},{answer:"Soccer",correct:!1}],tags:["vocabulary"]},{question:"British or American : Which word is British ?",answers:[{answer:"Queue",correct:!0},{answer:"Line",correct:!1}],tags:["vocabulary"]},{question:"British or American : Which word is American ?",answers:[{answer:"Color",correct:!0},{answer:"Colour ",correct:!1}],tags:["vocabulary"]},{question:"British or American : Which word is American ?",answers:[{answer:"Truck",correct:!0},{answer:"Lorry",correct:!1}],tags:["vocabulary"]},{question:"British or American : Which word is American ?",answers:[{answer:"Apartment",correct:!0},{answer:"Flat",correct:!1}],tags:["vocabulary"]},{question:"British or American : Which word is American ?",answers:[{answer:"Lift",correct:!1},{answer:"Elevator",correct:!0}],tags:["vocabulary"]},{question:"British or American : Which word is American ?",answers:[{answer:"Programme",correct:!1},{answer:"Program",correct:!0}],tags:["vocabulary"]},{question:"British or American : Which word is American ?",answers:[{answer:"Organization",correct:!0},{answer:"Organisation",correct:!1}],tags:["vocabulary"]},{question:"British or American : Which word is American ?",answers:[{answer:"Defence",correct:!1},{answer:"Defense",correct:!0}],tags:["vocabulary"]},{question:"British or American : Which word is American ?",answers:[{answer:"Aluminium",correct:!1},{answer:"Aluminum",correct:!0}],tags:["vocabulary"]},{question:"British or American : Which word is American ?",answers:[{answer:"Counseling",correct:!0},{answer:"Counselling",correct:!1}],tags:["vocabulary"]},{question:"British or American : Which word is American ?",answers:[{answer:"Schedule",correct:!0},{answer:"Diarise",correct:!1}],tags:["vocabulary"]}],Qt=class{constructor(e,n,r){Oe(this,"question");Oe(this,"answers");Oe(this,"id");this.question=e,this.answers=n,this.id=r}static get ALL(){if(Qt._ALL.length===0&&(Qt.loadAll(),Qt._ALL.length===0))throw Error("Wrong loading of quizzes: no matter what, at least one quiz should exist.");return Qt._ALL}get correctAnswer(){const e=this.answers.find(n=>n.correct);if(e)return e;throw Error(`Impossible to find the correct answer for the quiz ${this}.`)}static loadAll(){VS.map((e,n)=>{Qt._ALL.push(Qt.fromJsonAndId(e,n.toString()))})}static fromJsonAndId(e,n){const r=e.question,s=e.answers;if(typeof r=="string"&&typeof s<"u"){const i=[];return s.map(o=>{i.push(Fl.fromJson(o))}),new Qt(r,i,n)}else throw Error(`Impossible to create Quiz from a JSON: field 'question' or 'answers' is incorrect in ${e}`)}};let ms=Qt;Oe(ms,"_ALL",[]);const dn=class{constructor(e,n){Oe(this,"quizzes");Oe(this,"startTime");this.quizzes=e,this.startTime=n}static get MAX_NUMBER_OF_QUIZZES(){return ms.ALL.length}static get NUMBER_OF_QUIZZES(){return 10}static fromStringSeed(e,n){return n?this.fromNumberSeed(this.stringSeedToNumberSeed(e)+n.valueOf(),n):this.fromNumberSeed(this.stringSeedToNumberSeed(e),n)}static stringSeedToNumberSeed(e){return e.split("").reduce((n,r)=>n+r.charCodeAt(0),0)}static fromNumberSeed(e,n){return new dn(this.getChosenQuizzesFromNumberSeed(e),n)}static getChosenQuizzesFromNumberSeed(e){const n=Gh.xoroshiro128plus(e),r=[],s=[...ms.ALL];for(let i=0;i<dn.NUMBER_OF_QUIZZES;i++){const o=Gh.unsafeUniformIntDistribution(0,s.length-1,n),a=s[o];r.push(a),s.splice(o,1)}return r}get currentQuiz(){if(this.started&&!this.ended)return this.quizzes[this.indexCurrentQuiz];throw Error("Impossible to get the current quiz: the game haven't started or has already ended.")}get secondsSinceStart(){return(Date.now().valueOf()-this.startTime.valueOf())/1e3}get indexCurrentQuiz(){if(this.started)return Math.floor(this.secondsSinceStart/dn.SECONDS_BY_QUESTION);throw Error("Impossible to calculate the index of the current quiz: the game haven't started")}get started(){return this.startTime!==null}get ended(){return this.started&&this.indexCurrentQuiz+1>dn.NUMBER_OF_QUIZZES}get secondsSinceQuizStarted(){return this.secondsSinceStart-this.indexCurrentQuiz*dn.SECONDS_BY_QUESTION}get timeUntilNextQuiz(){return Math.ceil(dn.SECONDS_BY_QUESTION-this.secondsSinceQuizStarted)}};let Ti=dn;Oe(Ti,"SECONDS_BY_QUESTION",10);class Jt{constructor(e,n,r){Oe(this,"id");Oe(this,"scores");Oe(this,"game");this.id=e,this.scores=n,this.game=Ti.fromStringSeed(this.id,r)}get owner(){var e;return((e=this.scores[0])==null?void 0:e.player)||null}isOwner(e){return e.equals(this.owner)}getScore(e){return this.scores.find(n=>n.player.equals(e))||null}static async loadServerFromId(e){const n=await xm(Jt.getRef(e));if(n.exists())return await Jt.loadServerFromSnapshot(n);throw Error(`Impossible to create GameRoom from ${n}: does not exists.`)}static async loadServerFromSnapshot(e){var i,o;const n=[],r=((i=e.data())==null?void 0:i.startTime)||null,s=(o=e.data())==null?void 0:o.scores;if(s instanceof Array){for(const l of s){const u=l.player;if(u instanceof Ze)n.push(lt.loadServerFromRef(u));else throw Error(`Impossible to load a Game Room from snapshot ${e}: 
            one of the instances of scores does not have a field 'player' instance of DocumentReference.`)}const a=await Promise.all(n),c=s.map((l,u)=>new Vh(l.points,a[u]));return new Jt(e.id,c,r)}else throw Error(`Impossible to get GameRoom from snapshot ${e}: no data.`)}get ref(){return Jt.getRef(this.id)}static getRef(e){return dc(Bh,e)}get players(){return this.scores.map(e=>e.player)}async addPlayerServer(e){const n=new Vh(0,e);await Yr(this.ref,{scores:Fh(n.doc)})}async removePlayerServer(e){const n=this.getScore(e);if(n)await Yr(this.ref,{scores:Uh(n.doc)});else throw Error(`Impossible to remove player ${e} on game room ${this}: player not in game room.`)}async startGameServer(){await Yr(this.ref,{startTime:Date.now()})}async sendAnswerServer(e,n){if(e.correct){const r=this.getScore(n);r&&(await Yr(this.ref,{scores:Uh(r.doc)}),r.addGoodAnswer(),await Yr(this.ref,{scores:Fh(r.doc)}))}}async restart(){await this.startGameServer()}static async createGameRoom(e){const n=dc(Bh,e);return await km(n,{scores:[]}),await Jt.loadServerFromId(e)}}const qS=$e({data(){return{gameRoomId:null}},methods:{createGameRoom(){if(this.gameRoomId)Jt.createGameRoom(this.gameRoomId);else throw Error(`Impossible to create a Game Room with gameRoomId ${this.gameRoomId}.`)}}});const jS=t=>(Kt("data-v-813b4a70"),t=t(),zt(),t),GS={id:"create-game-route-input"},KS={key:0},zS={key:1},HS=jS(()=>Y("p",null,"Please enter a Game Room ID",-1)),WS=[HS];function QS(t,e,n,r,s,i){const o=Te("router-link");return G(),X("div",GS,[Af(Y("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>t.gameRoomId=a),placeholder:"Game Room ID"},null,512),[[jf,t.gameRoomId]]),t.gameRoomId?(G(),X("div",KS,[oe(o,{to:"/game-room/"+t.gameRoomId,class:"pseudo-button doodle-border",onClick:t.createGameRoom},{default:yn(()=>[ct("Create Game Room '"+at(t.gameRoomId)+"'",1)]),_:1},8,["to","onClick"])])):(G(),X("div",zS,WS))])}const JS=Ue(qS,[["render",QS],["__scopeId","data-v-813b4a70"]]),XS=$e({components:{HeaderDefault:Xs,CreateGameRoomInput:JS}});const YS=t=>(Kt("data-v-e113ae50"),t=t(),zt(),t),ZS={id:"create-game-room"},eT=YS(()=>Y("h2",null,"Create a Game Room",-1));function tT(t,e,n,r,s,i){const o=Te("HeaderDefault"),a=Te("CreateGameRoomInput");return G(),X("div",ZS,[oe(o),Y("main",null,[eT,oe(a)])])}const nT=Ue(XS,[["render",tT],["__scopeId","data-v-e113ae50"]]),rT=$e({data:()=>({gameRoomId:""})});const qm=t=>(Kt("data-v-db2cde7d"),t=t(),zt(),t),sT={id:"join-game-room-from-id"},iT=qm(()=>Y("h2",null,"Join a Game Room from an ID",-1)),oT={key:0},aT={key:1},cT=qm(()=>Y("p",null,"Please enter a Game Room ID",-1)),lT=[cT];function uT(t,e,n,r,s,i){const o=Te("router-link");return G(),X("div",sT,[iT,Af(Y("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>t.gameRoomId=a),placeholder:"Game Room ID"},null,512),[[jf,t.gameRoomId]]),t.gameRoomId?(G(),X("div",oT,[oe(o,{to:"/game-room/"+t.gameRoomId,class:"pseudo-button doodle-border"},{default:yn(()=>[ct("Join Game Room '"+at(t.gameRoomId)+"'",1)]),_:1},8,["to"])])):(G(),X("div",aT,lT))])}const hT=Ue(rT,[["render",uT],["__scopeId","data-v-db2cde7d"]]);const fT={},dT=t=>(Kt("data-v-01d43327"),t=t(),zt(),t),pT={id:"join-random-game-room"},mT=dT(()=>Y("h2",null,"Join a Random Game Room",-1));function gT(t,e){const n=Te("router-link");return G(),X("div",pT,[mT,oe(n,{to:"/game-room/random",class:"pseudo-button doodle-border"},{default:yn(()=>[ct("Join a random Game Room")]),_:1})])}const yT=Ue(fT,[["render",gT],["__scopeId","data-v-01d43327"]]),wT=$e({components:{JoinGameRoomFromId:hT,JoinGameRoomRandom:yT,HeaderDefault:Xs}});const vT={id:"join-game-room"},_T={id:"different-join"};function ET(t,e,n,r,s,i){const o=Te("HeaderDefault"),a=Te("JoinGameRoomRandom"),c=Te("JoinGameRoomFromId");return G(),X("div",vT,[oe(o),Y("div",_T,[oe(a),oe(c)])])}const bT=Ue(wT,[["render",ET],["__scopeId","data-v-cf6a199c"]]),ST=$e({components:{HeaderDefault:Xs}});const jm=t=>(Kt("data-v-2da57995"),t=t(),zt(),t),TT={id:"about"},IT=jm(()=>Y("main",null,[Y("h1",null,"About e-culture"),Y("p",null,[ct(" E-culture is an educational multiplayer website hosting games meant to help people to learn English in a fun and dynamic way. "),Y("br"),ct(" It is designed for anyone who is eager to learn more about the English language and culture. While it does not require an excellent proficiency in English, players do need to understand the questions in order to play correctly. "),Y("br"),ct(" The current version of e-culture allows players to create or join a Game Room, as well as test each other’s knowledge with questions. ")])],-1)),CT=jm(()=>Y("footer",null,[Y("img",{src:Pm,alt:"company logo"})],-1));function AT(t,e,n,r,s,i){const o=Te("HeaderDefault");return G(),X("div",TT,[oe(o),IT,CT])}const RT=Ue(ST,[["render",AT],["__scopeId","data-v-2da57995"]]),DT=$e({data(){return{player:lt.loadLocal()}},props:{players:{type:Object,required:!0},owner:{type:Object}}}),xT={id:"player-list"},NT={key:0},kT={key:1},MT={key:2};function OT(t,e,n,r,s,i){return G(),X("div",xT,[Y("ul",null,[(G(!0),X(gt,null,Oc(t.players,o=>(G(),X("li",{key:o.id},[t.player.equals(o)?(G(),X("span",NT,"You")):(G(),X("span",kT,at(o.pseudo),1)),o.equals(t.owner)?(G(),X("span",MT," 👑")):Uf("",!0)]))),128))])])}const PT=Ue(DT,[["render",OT]]),LT=$e({data(){return{player:lt.loadLocal()}},props:{gameRoom:{type:Object,required:!0}},components:{PlayersList:PT}});const $T={id:"game-room-waiting"},FT={key:1};function UT(t,e,n,r,s,i){const o=Te("PlayersList");return G(),X("div",$T,[oe(o,{players:t.gameRoom.players,owner:t.gameRoom.owner},null,8,["players","owner"]),t.gameRoom.isOwner(t.player)?(G(),X("button",{key:0,class:"pseudo-button",onClick:e[0]||(e[0]=(...a)=>t.gameRoom.startGameServer&&t.gameRoom.startGameServer(...a))}," Start game ")):(G(),X("p",FT,"Waiting for the owner to start the game..."))])}const BT=Ue(LT,[["render",UT],["__scopeId","data-v-7d71025f"]]),VT=$e({data(){return{selectedAnswer:null}},props:{quiz:{type:Object,required:!0}},emits:["answerSelected"],watch:{quiz(){this.selectedAnswer=null}},computed:{shuffledAnswers(){const t=[...this.quiz.answers];for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}},methods:{selectAnswer(t){this.selectedAnswer=t,this.$emit("answerSelected",t)}}});const Gm=t=>(Kt("data-v-25b1cd5b"),t=t(),zt(),t),qT={id:"quiz"},jT={id:"question"},GT={key:0,id:"result"},KT=Gm(()=>Y("br",null,null,-1)),zT=["id"],HT=Gm(()=>Y("br",null,null,-1)),WT={key:1,id:"answers"},QT=["onClick"];function JT(t,e,n,r,s,i){return G(),X("div",qT,[Y("h3",jT,at(t.quiz.question),1),t.selectedAnswer?(G(),X("p",GT,[ct(" The answer is "+at(t.quiz.correctAnswer.answer)+" ",1),KT,ct(" You answered "),Y("span",{id:t.selectedAnswer.correct?"correct-indicator":"incorrect-indicator"},at(t.selectedAnswer.answer),9,zT),HT,ct(" Waiting for the next question... ")])):(G(),X("ul",WT,[(G(!0),X(gt,null,Oc(t.shuffledAnswers,(o,a)=>(G(),X("li",{key:a},[Y("button",{class:"pseudo-button",onClick:c=>t.selectAnswer(o)},at(o.answer),9,QT)]))),128))]))])}const XT=Ue(VT,[["render",JT],["__scopeId","data-v-25b1cd5b"]]),YT=$e({data(){return{player:lt.loadLocal()}},props:{gameRoom:{type:Object,required:!0}},methods:{runUpdateLoop(){this.gameRoom.game.ended||(this.$forceUpdate(),setTimeout(this.runUpdateLoop,300))},sendAnswer(t){this.gameRoom.sendAnswerServer(t,this.player)}},mounted(){this.runUpdateLoop()},components:{GameRoomPlayingQuiz:XT}});const ZT={id:"game-room-playing"};function eI(t,e,n,r,s,i){const o=Te("GameRoomPlayingQuiz");return G(),X("div",ZT,[Y("p",null,"Quiz "+at(t.gameRoom.game.indexCurrentQuiz+1)+" of "+at(t.gameRoom.game.quizzes.length),1),Y("p",null,"Remaining time: "+at(t.gameRoom.game.timeUntilNextQuiz),1),oe(o,{quiz:t.gameRoom.game.currentQuiz,onAnswerSelected:t.sendAnswer},null,8,["quiz","onAnswerSelected"])])}const tI=Ue(YT,[["render",eI],["__scopeId","data-v-b1d5d684"]]),nI=$e({data(){return{player:lt.loadLocal()}},props:{scores:{type:Object,required:!0}}});const rI=t=>(Kt("data-v-7972775d"),t=t(),zt(),t),sI={id:"scores",class:"doodle-border"},iI=rI(()=>Y("h4",null,"Scores",-1)),oI={id:"scores-ul"},aI={id:"player-name"},cI={key:0},lI={key:1};function uI(t,e,n,r,s,i){return G(),X("div",sI,[iI,Y("ul",oI,[(G(!0),X(gt,null,Oc(t.scores,(o,a)=>(G(),X("li",{key:a},[Y("span",aI,[t.player.equals(o.player)?(G(),X("span",cI,"You")):(G(),X("span",lI,at(o.player.pseudo),1))]),ct(": "),Y("span",null,at(o.points),1)]))),128))])])}const hI=Ue(nI,[["render",uI],["__scopeId","data-v-7972775d"]]),fI=$e({data(){return{player:lt.loadLocal()}},props:{gameRoom:{type:Object,required:!0}}});const dI=t=>(Kt("data-v-e03cd7ca"),t=t(),zt(),t),pI={id:"main-game-ended"},mI=dI(()=>Y("p",null,"Game ended",-1));function gI(t,e,n,r,s,i){return G(),X("div",pI,[mI,t.gameRoom.isOwner(t.player)?(G(),X("button",{key:0,class:"pseudo-button",onClick:e[0]||(e[0]=o=>t.gameRoom.restart())}," Restart ")):Uf("",!0)])}const yI=Ue(fI,[["render",gI],["__scopeId","data-v-e03cd7ca"]]),wI=$e({data(){return{updateLoopRunning:!1}},props:{gameRoom:{type:Object,required:!0}},watch:{gameRoom:{handler(){!this.gameRoom.game.ended&&!this.updateLoopRunning&&this.runUpdateLoop()}}},methods:{runUpdateLoop(){this.$forceUpdate(),this.gameRoom.game.ended?this.updateLoopRunning=!1:(this.updateLoopRunning=!0,setTimeout(this.runUpdateLoop,300))}},mounted(){this.runUpdateLoop()},components:{GameRoomEnded:yI,GameRoomPlaying:tI,GameRoomWaiting:BT,GameRoomScores:hI}});const vI={id:"game-room-content"},_I={key:0,id:"game-room-content-started"};function EI(t,e,n,r,s,i){const o=Te("GameRoomScores"),a=Te("GameRoomEnded"),c=Te("GameRoomPlaying"),l=Te("GameRoomWaiting");return G(),X("div",vI,[t.gameRoom.game.started?(G(),X("div",_I,[oe(o,{scores:t.gameRoom.scores,id:"scores"},null,8,["scores"]),t.gameRoom.game.ended?(G(),pr(a,{key:0,"game-room":t.gameRoom},null,8,["game-room"])):(G(),pr(c,{key:1,"game-room":t.gameRoom},null,8,["game-room"]))])):(G(),pr(l,{key:1,"game-room":t.gameRoom},null,8,["game-room"]))])}const bI=Ue(wI,[["render",EI],["__scopeId","data-v-edf14c29"]]),SI=$e({data(){return{gameRoomId:this.$route.params.id,gameRoom:null,player:lt.loadLocal(),unSubscribeGameRoom:null}},components:{GameRoomContent:bI,HeaderDefault:Xs},methods:{async setGameRoom(){this.gameRoom=await Jt.loadServerFromId(this.gameRoomId)},subscribeGameRoom(){if(this.gameRoom)this.unSubscribeGameRoom=Hb(this.gameRoom.ref,async t=>this.gameRoom=await Jt.loadServerFromSnapshot(t));else throw Error("Impossible to subscribe to the gameRoom: no gameRoom.")},async joinGameRoom(){if(this.gameRoom)await this.gameRoom.addPlayerServer(this.player);else throw Error("Impossible to add player to the gameRoom: no gameRoom.")},async quitGameRoom(){if(this.gameRoom)await this.gameRoom.removePlayerServer(this.player);else throw Error("Impossible to add player to the gameRoom: no gameRoom.")}},mounted(){this.setGameRoom().then(()=>{this.subscribeGameRoom(),this.joinGameRoom()})},unmounted(){this.quitGameRoom(),this.unSubscribeGameRoom&&this.unSubscribeGameRoom()}});const TI={id:"game-room"},II={id:"game-room-information"},CI={key:1};function AI(t,e,n,r,s,i){const o=Te("HeaderDefault"),a=Te("GameRoomContent");return G(),X("div",TI,[oe(o),Y("div",II,[Y("h2",null,"Game Room "+at(t.gameRoomId),1),t.gameRoom?(G(),pr(a,{key:0,"game-room":t.gameRoom},null,8,["game-room"])):(G(),X("p",CI,"Acquiring game room data..."))])])}const RI=Ue(SI,[["render",AI],["__scopeId","data-v-898c17b4"]]),DI=[{path:"/",name:"Home",component:dS},{path:"/create-game-room",name:"Create a Game Room",component:nT},{path:"/join-game-room",name:"Join a Game Room",component:bT},{path:"/about",name:"About",component:RT},{path:"/game-room/:id",name:"Game Room",component:RI}],Ul=yv({history:Mw("/e-culture/"),routes:DI}),xI={};function NI(t,e){const n=Te("router-view");return G(),pr(n)}const kI=Ue(xI,[["render",NI]]);const Km=pw(kI);Km.use(Ul);Km.mount("#app");let Ii;lt.savedLocally()?Ii=lt.loadLocal():(Ii=lt.generate(),Ii.saveLocal());Ii.saveServer();window.addEventListener("beforeunload",()=>{sessionStorage.setItem("lastRoute",Ul.currentRoute.value.path)});const wa=sessionStorage.getItem("lastRoute")||"/";Ul.push(wa).then(()=>{console.debug(`location set to ${wa}.`)}).catch(t=>{console.error(`impossible to set location to ${wa} because ${t}`)});
