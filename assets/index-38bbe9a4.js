var Pm=Object.defineProperty;var Lm=(t,e,n)=>e in t?Pm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Oe=(t,e,n)=>(Lm(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function gc(t,e){const n=Object.create(null),s=t.split(",");for(let r=0;r<s.length;r++)n[s[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}function yc(t){if(G(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=Me(s)?Vm(s):yc(s);if(r)for(const i in r)e[i]=r[i]}return e}else{if(Me(t))return t;if(Ee(t))return t}}const $m=/;(?![^(]*\))/g,Fm=/:([^]+)/,Um=/\/\*.*?\*\//gs;function Vm(t){const e={};return t.replace(Um,"").split($m).forEach(n=>{if(n){const s=n.split(Fm);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function vc(t){let e="";if(Me(t))e=t;else if(G(t))for(let n=0;n<t.length;n++){const s=vc(t[n]);s&&(e+=s+" ")}else if(Ee(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Bm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jm=gc(Bm);function Vh(t){return!!t||t===""}const It=t=>Me(t)?t:t==null?"":G(t)||Ee(t)&&(t.toString===zh||!J(t.toString))?JSON.stringify(t,Bh,2):String(t),Bh=(t,e)=>e&&e.__v_isRef?Bh(t,e.value):cs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r])=>(n[`${s} =>`]=r,n),{})}:jh(e)?{[`Set(${e.size})`]:[...e.values()]}:Ee(e)&&!G(e)&&!Hh(e)?String(e):e,ge={},as=[],Ct=()=>{},qm=()=>!1,zm=/^on[^a-z]/,Qi=t=>zm.test(t),wc=t=>t.startsWith("onUpdate:"),rt=Object.assign,Ec=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Hm=Object.prototype.hasOwnProperty,re=(t,e)=>Hm.call(t,e),G=Array.isArray,cs=t=>Ji(t)==="[object Map]",jh=t=>Ji(t)==="[object Set]",J=t=>typeof t=="function",Me=t=>typeof t=="string",_c=t=>typeof t=="symbol",Ee=t=>t!==null&&typeof t=="object",qh=t=>Ee(t)&&J(t.then)&&J(t.catch),zh=Object.prototype.toString,Ji=t=>zh.call(t),Km=t=>Ji(t).slice(8,-1),Hh=t=>Ji(t)==="[object Object]",Tc=t=>Me(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,di=gc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xi=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Gm=/-(\w)/g,Bt=Xi(t=>t.replace(Gm,(e,n)=>n?n.toUpperCase():"")),Wm=/\B([A-Z])/g,Ms=Xi(t=>t.replace(Wm,"-$1").toLowerCase()),Yi=Xi(t=>t.charAt(0).toUpperCase()+t.slice(1)),Vo=Xi(t=>t?`on${Yi(t)}`:""),pr=(t,e)=>!Object.is(t,e),pi=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},bi=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},va=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Bu;const Qm=()=>Bu||(Bu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let _t;class Jm{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=_t,!e&&_t&&(this.index=(_t.scopes||(_t.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=_t;try{return _t=this,e()}finally{_t=n}}}on(){_t=this}off(){_t=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Xm(t,e=_t){e&&e.active&&e.effects.push(t)}function Ym(){return _t}const Sc=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Kh=t=>(t.w&vn)>0,Gh=t=>(t.n&vn)>0,Zm=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=vn},eg=t=>{const{deps:e}=t;if(e.length){let n=0;for(let s=0;s<e.length;s++){const r=e[s];Kh(r)&&!Gh(r)?r.delete(t):e[n++]=r,r.w&=~vn,r.n&=~vn}e.length=n}},wa=new WeakMap;let Ys=0,vn=1;const Ea=30;let St;const Fn=Symbol(""),_a=Symbol("");class bc{constructor(e,n=null,s){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Xm(this,s)}run(){if(!this.active)return this.fn();let e=St,n=fn;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=St,St=this,fn=!0,vn=1<<++Ys,Ys<=Ea?Zm(this):ju(this),this.fn()}finally{Ys<=Ea&&eg(this),vn=1<<--Ys,St=this.parent,fn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){St===this?this.deferStop=!0:this.active&&(ju(this),this.onStop&&this.onStop(),this.active=!1)}}function ju(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let fn=!0;const Wh=[];function Os(){Wh.push(fn),fn=!1}function Ps(){const t=Wh.pop();fn=t===void 0?!0:t}function ct(t,e,n){if(fn&&St){let s=wa.get(t);s||wa.set(t,s=new Map);let r=s.get(n);r||s.set(n,r=Sc()),Qh(r)}}function Qh(t,e){let n=!1;Ys<=Ea?Gh(t)||(t.n|=vn,n=!Kh(t)):n=!t.has(St),n&&(t.add(St),St.deps.push(t))}function Xt(t,e,n,s,r,i){const o=wa.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&G(t)){const c=Number(s);o.forEach((u,l)=>{(l==="length"||l>=c)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":G(t)?Tc(n)&&a.push(o.get("length")):(a.push(o.get(Fn)),cs(t)&&a.push(o.get(_a)));break;case"delete":G(t)||(a.push(o.get(Fn)),cs(t)&&a.push(o.get(_a)));break;case"set":cs(t)&&a.push(o.get(Fn));break}if(a.length===1)a[0]&&Ta(a[0]);else{const c=[];for(const u of a)u&&c.push(...u);Ta(Sc(c))}}function Ta(t,e){const n=G(t)?t:[...t];for(const s of n)s.computed&&qu(s);for(const s of n)s.computed||qu(s)}function qu(t,e){(t!==St||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const tg=gc("__proto__,__v_isRef,__isVue"),Jh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(_c)),ng=Ic(),sg=Ic(!1,!0),rg=Ic(!0),zu=ig();function ig(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=oe(this);for(let i=0,o=this.length;i<o;i++)ct(s,"get",i+"");const r=s[e](...n);return r===-1||r===!1?s[e](...n.map(oe)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Os();const s=oe(this)[e].apply(this,n);return Ps(),s}}),t}function og(t){const e=oe(this);return ct(e,"has",t),e.hasOwnProperty(t)}function Ic(t=!1,e=!1){return function(s,r,i){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&i===(t?e?Tg:tf:e?ef:Zh).get(s))return s;const o=G(s);if(!t){if(o&&re(zu,r))return Reflect.get(zu,r,i);if(r==="hasOwnProperty")return og}const a=Reflect.get(s,r,i);return(_c(r)?Jh.has(r):tg(r))||(t||ct(s,"get",r),e)?a:We(a)?o&&Tc(r)?a:a.value:Ee(a)?t?nf(a):Mr(a):a}}const ag=Xh(),cg=Xh(!0);function Xh(t=!1){return function(n,s,r,i){let o=n[s];if(ys(o)&&We(o)&&!We(r))return!1;if(!t&&(!Ii(r)&&!ys(r)&&(o=oe(o),r=oe(r)),!G(n)&&We(o)&&!We(r)))return o.value=r,!0;const a=G(n)&&Tc(s)?Number(s)<n.length:re(n,s),c=Reflect.set(n,s,r,i);return n===oe(i)&&(a?pr(r,o)&&Xt(n,"set",s,r):Xt(n,"add",s,r)),c}}function ug(t,e){const n=re(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&n&&Xt(t,"delete",e,void 0),s}function lg(t,e){const n=Reflect.has(t,e);return(!_c(e)||!Jh.has(e))&&ct(t,"has",e),n}function hg(t){return ct(t,"iterate",G(t)?"length":Fn),Reflect.ownKeys(t)}const Yh={get:ng,set:ag,deleteProperty:ug,has:lg,ownKeys:hg},fg={get:rg,set(t,e){return!0},deleteProperty(t,e){return!0}},dg=rt({},Yh,{get:sg,set:cg}),Cc=t=>t,Zi=t=>Reflect.getPrototypeOf(t);function Yr(t,e,n=!1,s=!1){t=t.__v_raw;const r=oe(t),i=oe(e);n||(e!==i&&ct(r,"get",e),ct(r,"get",i));const{has:o}=Zi(r),a=s?Cc:n?xc:mr;if(o.call(r,e))return a(t.get(e));if(o.call(r,i))return a(t.get(i));t!==r&&t.get(e)}function Zr(t,e=!1){const n=this.__v_raw,s=oe(n),r=oe(t);return e||(t!==r&&ct(s,"has",t),ct(s,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function ei(t,e=!1){return t=t.__v_raw,!e&&ct(oe(t),"iterate",Fn),Reflect.get(t,"size",t)}function Hu(t){t=oe(t);const e=oe(this);return Zi(e).has.call(e,t)||(e.add(t),Xt(e,"add",t,t)),this}function Ku(t,e){e=oe(e);const n=oe(this),{has:s,get:r}=Zi(n);let i=s.call(n,t);i||(t=oe(t),i=s.call(n,t));const o=r.call(n,t);return n.set(t,e),i?pr(e,o)&&Xt(n,"set",t,e):Xt(n,"add",t,e),this}function Gu(t){const e=oe(this),{has:n,get:s}=Zi(e);let r=n.call(e,t);r||(t=oe(t),r=n.call(e,t)),s&&s.call(e,t);const i=e.delete(t);return r&&Xt(e,"delete",t,void 0),i}function Wu(){const t=oe(this),e=t.size!==0,n=t.clear();return e&&Xt(t,"clear",void 0,void 0),n}function ti(t,e){return function(s,r){const i=this,o=i.__v_raw,a=oe(o),c=e?Cc:t?xc:mr;return!t&&ct(a,"iterate",Fn),o.forEach((u,l)=>s.call(r,c(u),c(l),i))}}function ni(t,e,n){return function(...s){const r=this.__v_raw,i=oe(r),o=cs(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=r[t](...s),l=n?Cc:e?xc:mr;return!e&&ct(i,"iterate",c?_a:Fn),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[l(h[0]),l(h[1])]:l(h),done:d}},[Symbol.iterator](){return this}}}}function on(t){return function(...e){return t==="delete"?!1:this}}function pg(){const t={get(i){return Yr(this,i)},get size(){return ei(this)},has:Zr,add:Hu,set:Ku,delete:Gu,clear:Wu,forEach:ti(!1,!1)},e={get(i){return Yr(this,i,!1,!0)},get size(){return ei(this)},has:Zr,add:Hu,set:Ku,delete:Gu,clear:Wu,forEach:ti(!1,!0)},n={get(i){return Yr(this,i,!0)},get size(){return ei(this,!0)},has(i){return Zr.call(this,i,!0)},add:on("add"),set:on("set"),delete:on("delete"),clear:on("clear"),forEach:ti(!0,!1)},s={get(i){return Yr(this,i,!0,!0)},get size(){return ei(this,!0)},has(i){return Zr.call(this,i,!0)},add:on("add"),set:on("set"),delete:on("delete"),clear:on("clear"),forEach:ti(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=ni(i,!1,!1),n[i]=ni(i,!0,!1),e[i]=ni(i,!1,!0),s[i]=ni(i,!0,!0)}),[t,n,e,s]}const[mg,gg,yg,vg]=pg();function Ac(t,e){const n=e?t?vg:yg:t?gg:mg;return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(re(n,r)&&r in s?n:s,r,i)}const wg={get:Ac(!1,!1)},Eg={get:Ac(!1,!0)},_g={get:Ac(!0,!1)},Zh=new WeakMap,ef=new WeakMap,tf=new WeakMap,Tg=new WeakMap;function Sg(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bg(t){return t.__v_skip||!Object.isExtensible(t)?0:Sg(Km(t))}function Mr(t){return ys(t)?t:Rc(t,!1,Yh,wg,Zh)}function Ig(t){return Rc(t,!1,dg,Eg,ef)}function nf(t){return Rc(t,!0,fg,_g,tf)}function Rc(t,e,n,s,r){if(!Ee(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const o=bg(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return r.set(t,a),a}function us(t){return ys(t)?us(t.__v_raw):!!(t&&t.__v_isReactive)}function ys(t){return!!(t&&t.__v_isReadonly)}function Ii(t){return!!(t&&t.__v_isShallow)}function sf(t){return us(t)||ys(t)}function oe(t){const e=t&&t.__v_raw;return e?oe(e):t}function rf(t){return bi(t,"__v_skip",!0),t}const mr=t=>Ee(t)?Mr(t):t,xc=t=>Ee(t)?nf(t):t;function of(t){fn&&St&&(t=oe(t),Qh(t.dep||(t.dep=Sc())))}function af(t,e){t=oe(t);const n=t.dep;n&&Ta(n)}function We(t){return!!(t&&t.__v_isRef===!0)}function Cg(t){return cf(t,!1)}function Ag(t){return cf(t,!0)}function cf(t,e){return We(t)?t:new Rg(t,e)}class Rg{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:oe(e),this._value=n?e:mr(e)}get value(){return of(this),this._value}set value(e){const n=this.__v_isShallow||Ii(e)||ys(e);e=n?e:oe(e),pr(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:mr(e),af(this))}}function ls(t){return We(t)?t.value:t}const xg={get:(t,e,n)=>ls(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return We(r)&&!We(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function uf(t){return us(t)?t:new Proxy(t,xg)}var lf;class Dg{constructor(e,n,s,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[lf]=!1,this._dirty=!0,this.effect=new bc(e,()=>{this._dirty||(this._dirty=!0,af(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const e=oe(this);return of(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}lf="__v_isReadonly";function Ng(t,e,n=!1){let s,r;const i=J(t);return i?(s=t,r=Ct):(s=t.get,r=t.set),new Dg(s,r,i||!r,n)}function dn(t,e,n,s){let r;try{r=s?t(...s):t()}catch(i){eo(i,e,n)}return r}function At(t,e,n,s){if(J(t)){const i=dn(t,e,n,s);return i&&qh(i)&&i.catch(o=>{eo(o,e,n)}),i}const r=[];for(let i=0;i<t.length;i++)r.push(At(t[i],e,n,s));return r}function eo(t,e,n,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const u=i.ec;if(u){for(let l=0;l<u.length;l++)if(u[l](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){dn(c,null,10,[t,o,a]);return}}kg(t,n,r,s)}function kg(t,e,n,s=!0){console.error(t)}let gr=!1,Sa=!1;const Ke=[];let Pt=0;const hs=[];let Ht=null,Nn=0;const hf=Promise.resolve();let Dc=null;function ff(t){const e=Dc||hf;return t?e.then(this?t.bind(this):t):e}function Mg(t){let e=Pt+1,n=Ke.length;for(;e<n;){const s=e+n>>>1;yr(Ke[s])<t?e=s+1:n=s}return e}function Nc(t){(!Ke.length||!Ke.includes(t,gr&&t.allowRecurse?Pt+1:Pt))&&(t.id==null?Ke.push(t):Ke.splice(Mg(t.id),0,t),df())}function df(){!gr&&!Sa&&(Sa=!0,Dc=hf.then(mf))}function Og(t){const e=Ke.indexOf(t);e>Pt&&Ke.splice(e,1)}function Pg(t){G(t)?hs.push(...t):(!Ht||!Ht.includes(t,t.allowRecurse?Nn+1:Nn))&&hs.push(t),df()}function Qu(t,e=gr?Pt+1:0){for(;e<Ke.length;e++){const n=Ke[e];n&&n.pre&&(Ke.splice(e,1),e--,n())}}function pf(t){if(hs.length){const e=[...new Set(hs)];if(hs.length=0,Ht){Ht.push(...e);return}for(Ht=e,Ht.sort((n,s)=>yr(n)-yr(s)),Nn=0;Nn<Ht.length;Nn++)Ht[Nn]();Ht=null,Nn=0}}const yr=t=>t.id==null?1/0:t.id,Lg=(t,e)=>{const n=yr(t)-yr(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function mf(t){Sa=!1,gr=!0,Ke.sort(Lg);const e=Ct;try{for(Pt=0;Pt<Ke.length;Pt++){const n=Ke[Pt];n&&n.active!==!1&&dn(n,null,14)}}finally{Pt=0,Ke.length=0,pf(),gr=!1,Dc=null,(Ke.length||hs.length)&&mf()}}function $g(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||ge;let r=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const l=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=s[l]||ge;d&&(r=n.map(m=>Me(m)?m.trim():m)),h&&(r=n.map(va))}let a,c=s[a=Vo(e)]||s[a=Vo(Bt(e))];!c&&i&&(c=s[a=Vo(Ms(e))]),c&&At(c,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,At(u,t,6,r)}}function gf(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!J(t)){const c=u=>{const l=gf(u,e,!0);l&&(a=!0,rt(o,l))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(Ee(t)&&s.set(t,null),null):(G(i)?i.forEach(c=>o[c]=null):rt(o,i),Ee(t)&&s.set(t,o),o)}function to(t,e){return!t||!Qi(e)?!1:(e=e.slice(2).replace(/Once$/,""),re(t,e[0].toLowerCase()+e.slice(1))||re(t,Ms(e))||re(t,e))}let gt=null,no=null;function Ci(t){const e=gt;return gt=t,no=t&&t.type.__scopeId||null,e}function Ls(t){no=t}function $s(){no=null}function Un(t,e=gt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&rl(-1);const i=Ci(e);let o;try{o=t(...r)}finally{Ci(i),s._d&&rl(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Bo(t){const{type:e,vnode:n,proxy:s,withProxy:r,props:i,propsOptions:[o],slots:a,attrs:c,emit:u,render:l,renderCache:h,data:d,setupState:m,ctx:v,inheritAttrs:w}=t;let C,R;const $=Ci(t);try{if(n.shapeFlag&4){const te=r||s;C=Ot(l.call(te,te,h,i,m,d,v)),R=c}else{const te=e;C=Ot(te.length>1?te(i,{attrs:c,slots:a,emit:u}):te(i,null)),R=e.props?c:Fg(c)}}catch(te){ir.length=0,eo(te,t,1),C=ce(jn)}let M=C;if(R&&w!==!1){const te=Object.keys(R),{shapeFlag:Se}=M;te.length&&Se&7&&(o&&te.some(wc)&&(R=Ug(R,o)),M=vs(M,R))}return n.dirs&&(M=vs(M),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&(M.transition=n.transition),C=M,Ci($),C}const Fg=t=>{let e;for(const n in t)(n==="class"||n==="style"||Qi(n))&&((e||(e={}))[n]=t[n]);return e},Ug=(t,e)=>{const n={};for(const s in t)(!wc(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Vg(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Ju(s,o,u):!!o;if(c&8){const l=e.dynamicProps;for(let h=0;h<l.length;h++){const d=l[h];if(o[d]!==s[d]&&!to(u,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Ju(s,o,u):!0:!!o;return!1}function Ju(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!to(n,i))return!0}return!1}function Bg({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const jg=t=>t.__isSuspense;function qg(t,e){e&&e.pendingBranch?G(t)?e.effects.push(...t):e.effects.push(t):Pg(t)}function mi(t,e){if(xe){let n=xe.provides;const s=xe.parent&&xe.parent.provides;s===n&&(n=xe.provides=Object.create(s)),n[t]=e}}function Qt(t,e,n=!1){const s=xe||gt;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&J(e)?e.call(s.proxy):e}}const si={};function gi(t,e,n){return yf(t,e,n)}function yf(t,e,{immediate:n,deep:s,flush:r,onTrack:i,onTrigger:o}=ge){const a=Ym()===(xe==null?void 0:xe.scope)?xe:null;let c,u=!1,l=!1;if(We(t)?(c=()=>t.value,u=Ii(t)):us(t)?(c=()=>t,s=!0):G(t)?(l=!0,u=t.some(M=>us(M)||Ii(M)),c=()=>t.map(M=>{if(We(M))return M.value;if(us(M))return Mn(M);if(J(M))return dn(M,a,2)})):J(t)?e?c=()=>dn(t,a,2):c=()=>{if(!(a&&a.isUnmounted))return h&&h(),At(t,a,3,[d])}:c=Ct,e&&s){const M=c;c=()=>Mn(M())}let h,d=M=>{h=R.onStop=()=>{dn(M,a,4)}},m;if(Er)if(d=Ct,e?n&&At(e,a,3,[c(),l?[]:void 0,d]):c(),r==="sync"){const M=Fy();m=M.__watcherHandles||(M.__watcherHandles=[])}else return Ct;let v=l?new Array(t.length).fill(si):si;const w=()=>{if(R.active)if(e){const M=R.run();(s||u||(l?M.some((te,Se)=>pr(te,v[Se])):pr(M,v)))&&(h&&h(),At(e,a,3,[M,v===si?void 0:l&&v[0]===si?[]:v,d]),v=M)}else R.run()};w.allowRecurse=!!e;let C;r==="sync"?C=w:r==="post"?C=()=>ot(w,a&&a.suspense):(w.pre=!0,a&&(w.id=a.uid),C=()=>Nc(w));const R=new bc(c,C);e?n?w():v=R.run():r==="post"?ot(R.run.bind(R),a&&a.suspense):R.run();const $=()=>{R.stop(),a&&a.scope&&Ec(a.scope.effects,R)};return m&&m.push($),$}function zg(t,e,n){const s=this.proxy,r=Me(t)?t.includes(".")?vf(s,t):()=>s[t]:t.bind(s,s);let i;J(e)?i=e:(i=e.handler,n=e);const o=xe;ws(this);const a=yf(r,i.bind(s),n);return o?ws(o):Vn(),a}function vf(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}function Mn(t,e){if(!Ee(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),We(t))Mn(t.value,e);else if(G(t))for(let n=0;n<t.length;n++)Mn(t[n],e);else if(jh(t)||cs(t))t.forEach(n=>{Mn(n,e)});else if(Hh(t))for(const n in t)Mn(t[n],e);return t}function et(t){return J(t)?{setup:t,name:t.name}:t}const yi=t=>!!t.type.__asyncLoader,wf=t=>t.type.__isKeepAlive;function Hg(t,e){Ef(t,"a",e)}function Kg(t,e){Ef(t,"da",e)}function Ef(t,e,n=xe){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(so(e,s,n),n){let r=n.parent;for(;r&&r.parent;)wf(r.parent.vnode)&&Gg(s,e,n,r),r=r.parent}}function Gg(t,e,n,s){const r=so(e,t,s,!0);_f(()=>{Ec(s[e],r)},n)}function so(t,e,n=xe,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Os(),ws(n);const a=At(e,n,t,o);return Vn(),Ps(),a});return s?r.unshift(i):r.push(i),i}}const sn=t=>(e,n=xe)=>(!Er||t==="sp")&&so(t,(...s)=>e(...s),n),Wg=sn("bm"),Qg=sn("m"),Jg=sn("bu"),Xg=sn("u"),Yg=sn("bum"),_f=sn("um"),Zg=sn("sp"),ey=sn("rtg"),ty=sn("rtc");function ny(t,e=xe){so("ec",t,e)}function sy(t,e){const n=gt;if(n===null)return t;const s=oo(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,c,u=ge]=e[i];o&&(J(o)&&(o={mounted:o,updated:o}),o.deep&&Mn(a),r.push({dir:o,instance:s,value:a,oldValue:void 0,arg:c,modifiers:u}))}return t}function An(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(Os(),At(c,n,8,[t.el,a,t,e]),Ps())}}const Tf="components";function Ne(t,e){return iy(Tf,t,!0,e)||t}const ry=Symbol();function iy(t,e,n=!0,s=!1){const r=gt||xe;if(r){const i=r.type;if(t===Tf){const a=Py(i,!1);if(a&&(a===e||a===Bt(e)||a===Yi(Bt(e))))return i}const o=Xu(r[t]||i[t],e)||Xu(r.appContext[t],e);return!o&&s?i:o}}function Xu(t,e){return t&&(t[e]||t[Bt(e)]||t[Yi(Bt(e))])}function kc(t,e,n,s){let r;const i=n&&n[s];if(G(t)||Me(t)){r=new Array(t.length);for(let o=0,a=t.length;o<a;o++)r[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,i&&i[o])}else if(Ee(t))if(t[Symbol.iterator])r=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const u=o[a];r[a]=e(t[u],u,a,i&&i[a])}}else r=[];return n&&(n[s]=r),r}const ba=t=>t?Mf(t)?oo(t)||t.proxy:ba(t.parent):null,rr=rt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ba(t.parent),$root:t=>ba(t.root),$emit:t=>t.emit,$options:t=>Mc(t),$forceUpdate:t=>t.f||(t.f=()=>Nc(t.update)),$nextTick:t=>t.n||(t.n=ff.bind(t.proxy)),$watch:t=>zg.bind(t)}),jo=(t,e)=>t!==ge&&!t.__isScriptSetup&&re(t,e),oy={get({_:t},e){const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(jo(s,e))return o[e]=1,s[e];if(r!==ge&&re(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&re(u,e))return o[e]=3,i[e];if(n!==ge&&re(n,e))return o[e]=4,n[e];Ia&&(o[e]=0)}}const l=rr[e];let h,d;if(l)return e==="$attrs"&&ct(t,"get",e),l(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==ge&&re(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,re(d,e))return d[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return jo(r,e)?(r[e]=n,!0):s!==ge&&re(s,e)?(s[e]=n,!0):re(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==ge&&re(t,o)||jo(e,o)||(a=i[0])&&re(a,o)||re(s,o)||re(rr,o)||re(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:re(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let Ia=!0;function ay(t){const e=Mc(t),n=t.proxy,s=t.ctx;Ia=!1,e.beforeCreate&&Yu(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:u,created:l,beforeMount:h,mounted:d,beforeUpdate:m,updated:v,activated:w,deactivated:C,beforeDestroy:R,beforeUnmount:$,destroyed:M,unmounted:te,render:Se,renderTracked:Be,renderTriggered:ft,errorCaptured:dt,serverPrefetch:Jn,expose:Dt,inheritAttrs:rn,components:Nt,directives:Xn,filters:In}=e;if(u&&cy(u,s,null,t.appContext.config.unwrapInjectedRef),o)for(const pe in o){const he=o[pe];J(he)&&(s[pe]=he.bind(n))}if(r){const pe=r.call(n,n);Ee(pe)&&(t.data=Mr(pe))}if(Ia=!0,i)for(const pe in i){const he=i[pe],vt=J(he)?he.bind(n,n):J(he.get)?he.get.bind(n,n):Ct,Cn=!J(he)&&J(he.set)?he.set.bind(n):Ct,wt=pt({get:vt,set:Cn});Object.defineProperty(s,pe,{enumerable:!0,configurable:!0,get:()=>wt.value,set:it=>wt.value=it})}if(a)for(const pe in a)Sf(a[pe],s,n,pe);if(c){const pe=J(c)?c.call(n):c;Reflect.ownKeys(pe).forEach(he=>{mi(he,pe[he])})}l&&Yu(l,t,"c");function Ie(pe,he){G(he)?he.forEach(vt=>pe(vt.bind(n))):he&&pe(he.bind(n))}if(Ie(Wg,h),Ie(Qg,d),Ie(Jg,m),Ie(Xg,v),Ie(Hg,w),Ie(Kg,C),Ie(ny,dt),Ie(ty,Be),Ie(ey,ft),Ie(Yg,$),Ie(_f,te),Ie(Zg,Jn),G(Dt))if(Dt.length){const pe=t.exposed||(t.exposed={});Dt.forEach(he=>{Object.defineProperty(pe,he,{get:()=>n[he],set:vt=>n[he]=vt})})}else t.exposed||(t.exposed={});Se&&t.render===Ct&&(t.render=Se),rn!=null&&(t.inheritAttrs=rn),Nt&&(t.components=Nt),Xn&&(t.directives=Xn)}function cy(t,e,n=Ct,s=!1){G(t)&&(t=Ca(t));for(const r in t){const i=t[r];let o;Ee(i)?"default"in i?o=Qt(i.from||r,i.default,!0):o=Qt(i.from||r):o=Qt(i),We(o)&&s?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function Yu(t,e,n){At(G(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Sf(t,e,n,s){const r=s.includes(".")?vf(n,s):()=>n[s];if(Me(t)){const i=e[t];J(i)&&gi(r,i)}else if(J(t))gi(r,t.bind(n));else if(Ee(t))if(G(t))t.forEach(i=>Sf(i,e,n,s));else{const i=J(t.handler)?t.handler.bind(n):e[t.handler];J(i)&&gi(r,i,t)}}function Mc(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(u=>Ai(c,u,o,!0)),Ai(c,e,o)),Ee(e)&&i.set(e,c),c}function Ai(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Ai(t,i,n,!0),r&&r.forEach(o=>Ai(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=uy[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const uy={data:Zu,props:xn,emits:xn,methods:xn,computed:xn,beforeCreate:nt,created:nt,beforeMount:nt,mounted:nt,beforeUpdate:nt,updated:nt,beforeDestroy:nt,beforeUnmount:nt,destroyed:nt,unmounted:nt,activated:nt,deactivated:nt,errorCaptured:nt,serverPrefetch:nt,components:xn,directives:xn,watch:hy,provide:Zu,inject:ly};function Zu(t,e){return e?t?function(){return rt(J(t)?t.call(this,this):t,J(e)?e.call(this,this):e)}:e:t}function ly(t,e){return xn(Ca(t),Ca(e))}function Ca(t){if(G(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function nt(t,e){return t?[...new Set([].concat(t,e))]:e}function xn(t,e){return t?rt(rt(Object.create(null),t),e):e}function hy(t,e){if(!t)return e;if(!e)return t;const n=rt(Object.create(null),t);for(const s in e)n[s]=nt(t[s],e[s]);return n}function fy(t,e,n,s=!1){const r={},i={};bi(i,io,1),t.propsDefaults=Object.create(null),bf(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Ig(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function dy(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=oe(r),[c]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const l=t.vnode.dynamicProps;for(let h=0;h<l.length;h++){let d=l[h];if(to(t.emitsOptions,d))continue;const m=e[d];if(c)if(re(i,d))m!==i[d]&&(i[d]=m,u=!0);else{const v=Bt(d);r[v]=Aa(c,a,v,m,t,!1)}else m!==i[d]&&(i[d]=m,u=!0)}}}else{bf(t,e,r,i)&&(u=!0);let l;for(const h in a)(!e||!re(e,h)&&((l=Ms(h))===h||!re(e,l)))&&(c?n&&(n[h]!==void 0||n[l]!==void 0)&&(r[h]=Aa(c,a,h,void 0,t,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!re(e,h))&&(delete i[h],u=!0)}u&&Xt(t,"set","$attrs")}function bf(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(di(c))continue;const u=e[c];let l;r&&re(r,l=Bt(c))?!i||!i.includes(l)?n[l]=u:(a||(a={}))[l]=u:to(t.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=oe(n),u=a||ge;for(let l=0;l<i.length;l++){const h=i[l];n[h]=Aa(r,c,h,u[h],t,!re(u,h))}}return o}function Aa(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=re(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&J(c)){const{propsDefaults:u}=r;n in u?s=u[n]:(ws(r),s=u[n]=c.call(null,e),Vn())}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Ms(n))&&(s=!0))}return s}function If(t,e,n=!1){const s=e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let c=!1;if(!J(t)){const l=h=>{c=!0;const[d,m]=If(h,e,!0);rt(o,d),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!i&&!c)return Ee(t)&&s.set(t,as),as;if(G(i))for(let l=0;l<i.length;l++){const h=Bt(i[l]);el(h)&&(o[h]=ge)}else if(i)for(const l in i){const h=Bt(l);if(el(h)){const d=i[l],m=o[h]=G(d)||J(d)?{type:d}:Object.assign({},d);if(m){const v=sl(Boolean,m.type),w=sl(String,m.type);m[0]=v>-1,m[1]=w<0||v<w,(v>-1||re(m,"default"))&&a.push(h)}}}const u=[o,a];return Ee(t)&&s.set(t,u),u}function el(t){return t[0]!=="$"}function tl(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function nl(t,e){return tl(t)===tl(e)}function sl(t,e){return G(e)?e.findIndex(n=>nl(n,t)):J(e)&&nl(e,t)?0:-1}const Cf=t=>t[0]==="_"||t==="$stable",Oc=t=>G(t)?t.map(Ot):[Ot(t)],py=(t,e,n)=>{if(e._n)return e;const s=Un((...r)=>Oc(e(...r)),n);return s._c=!1,s},Af=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Cf(r))continue;const i=t[r];if(J(i))e[r]=py(r,i,s);else if(i!=null){const o=Oc(i);e[r]=()=>o}}},Rf=(t,e)=>{const n=Oc(e);t.slots.default=()=>n},my=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=oe(e),bi(e,"_",n)):Af(e,t.slots={})}else t.slots={},e&&Rf(t,e);bi(t.slots,io,1)},gy=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=ge;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(rt(r,e),!n&&a===1&&delete r._):(i=!e.$stable,Af(e,r)),o=e}else e&&(Rf(t,e),o={default:1});if(i)for(const a in r)!Cf(a)&&!(a in o)&&delete r[a]};function xf(){return{app:null,config:{isNativeTag:qm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yy=0;function vy(t,e){return function(s,r=null){J(s)||(s=Object.assign({},s)),r!=null&&!Ee(r)&&(r=null);const i=xf(),o=new Set;let a=!1;const c=i.app={_uid:yy++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:Uy,get config(){return i.config},set config(u){},use(u,...l){return o.has(u)||(u&&J(u.install)?(o.add(u),u.install(c,...l)):J(u)&&(o.add(u),u(c,...l))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,l){return l?(i.components[u]=l,c):i.components[u]},directive(u,l){return l?(i.directives[u]=l,c):i.directives[u]},mount(u,l,h){if(!a){const d=ce(s,r);return d.appContext=i,l&&e?e(d,u):t(d,u,h),a=!0,c._container=u,u.__vue_app__=c,oo(d.component)||d.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(u,l){return i.provides[u]=l,c}};return c}}function Ra(t,e,n,s,r=!1){if(G(t)){t.forEach((d,m)=>Ra(d,e&&(G(e)?e[m]:e),n,s,r));return}if(yi(s)&&!r)return;const i=s.shapeFlag&4?oo(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:c}=t,u=e&&e.r,l=a.refs===ge?a.refs={}:a.refs,h=a.setupState;if(u!=null&&u!==c&&(Me(u)?(l[u]=null,re(h,u)&&(h[u]=null)):We(u)&&(u.value=null)),J(c))dn(c,a,12,[o,l]);else{const d=Me(c),m=We(c);if(d||m){const v=()=>{if(t.f){const w=d?re(h,c)?h[c]:l[c]:c.value;r?G(w)&&Ec(w,i):G(w)?w.includes(i)||w.push(i):d?(l[c]=[i],re(h,c)&&(h[c]=l[c])):(c.value=[i],t.k&&(l[t.k]=c.value))}else d?(l[c]=o,re(h,c)&&(h[c]=o)):m&&(c.value=o,t.k&&(l[t.k]=o))};o?(v.id=-1,ot(v,n)):v()}}}const ot=qg;function wy(t){return Ey(t)}function Ey(t,e){const n=Qm();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:l,parentNode:h,nextSibling:d,setScopeId:m=Ct,insertStaticContent:v}=t,w=(f,p,g,y=null,_=null,A=null,k=!1,I=null,x=!!p.dynamicChildren)=>{if(f===p)return;f&&!Gs(f,p)&&(y=D(f),it(f,_,A,!0),f=null),p.patchFlag===-2&&(x=!1,p.dynamicChildren=null);const{type:S,ref:U,shapeFlag:P}=p;switch(S){case ro:C(f,p,g,y);break;case jn:R(f,p,g,y);break;case qo:f==null&&$(p,g,y,k);break;case ze:Nt(f,p,g,y,_,A,k,I,x);break;default:P&1?Se(f,p,g,y,_,A,k,I,x):P&6?Xn(f,p,g,y,_,A,k,I,x):(P&64||P&128)&&S.process(f,p,g,y,_,A,k,I,x,se)}U!=null&&_&&Ra(U,f&&f.ref,A,p||f,!p)},C=(f,p,g,y)=>{if(f==null)s(p.el=a(p.children),g,y);else{const _=p.el=f.el;p.children!==f.children&&u(_,p.children)}},R=(f,p,g,y)=>{f==null?s(p.el=c(p.children||""),g,y):p.el=f.el},$=(f,p,g,y)=>{[f.el,f.anchor]=v(f.children,p,g,y,f.el,f.anchor)},M=({el:f,anchor:p},g,y)=>{let _;for(;f&&f!==p;)_=d(f),s(f,g,y),f=_;s(p,g,y)},te=({el:f,anchor:p})=>{let g;for(;f&&f!==p;)g=d(f),r(f),f=g;r(p)},Se=(f,p,g,y,_,A,k,I,x)=>{k=k||p.type==="svg",f==null?Be(p,g,y,_,A,k,I,x):Jn(f,p,_,A,k,I,x)},Be=(f,p,g,y,_,A,k,I)=>{let x,S;const{type:U,props:P,shapeFlag:V,transition:H,dirs:Y}=f;if(x=f.el=o(f.type,A,P&&P.is,P),V&8?l(x,f.children):V&16&&dt(f.children,x,null,y,_,A&&U!=="foreignObject",k,I),Y&&An(f,null,y,"created"),ft(x,f,f.scopeId,k,y),P){for(const fe in P)fe!=="value"&&!di(fe)&&i(x,fe,null,P[fe],A,f.children,y,_,O);"value"in P&&i(x,"value",null,P.value),(S=P.onVnodeBeforeMount)&&Mt(S,y,f)}Y&&An(f,null,y,"beforeMount");const me=(!_||_&&!_.pendingBranch)&&H&&!H.persisted;me&&H.beforeEnter(x),s(x,p,g),((S=P&&P.onVnodeMounted)||me||Y)&&ot(()=>{S&&Mt(S,y,f),me&&H.enter(x),Y&&An(f,null,y,"mounted")},_)},ft=(f,p,g,y,_)=>{if(g&&m(f,g),y)for(let A=0;A<y.length;A++)m(f,y[A]);if(_){let A=_.subTree;if(p===A){const k=_.vnode;ft(f,k,k.scopeId,k.slotScopeIds,_.parent)}}},dt=(f,p,g,y,_,A,k,I,x=0)=>{for(let S=x;S<f.length;S++){const U=f[S]=I?cn(f[S]):Ot(f[S]);w(null,U,p,g,y,_,A,k,I)}},Jn=(f,p,g,y,_,A,k)=>{const I=p.el=f.el;let{patchFlag:x,dynamicChildren:S,dirs:U}=p;x|=f.patchFlag&16;const P=f.props||ge,V=p.props||ge;let H;g&&Rn(g,!1),(H=V.onVnodeBeforeUpdate)&&Mt(H,g,p,f),U&&An(p,f,g,"beforeUpdate"),g&&Rn(g,!0);const Y=_&&p.type!=="foreignObject";if(S?Dt(f.dynamicChildren,S,I,g,y,Y,A):k||he(f,p,I,null,g,y,Y,A,!1),x>0){if(x&16)rn(I,p,P,V,g,y,_);else if(x&2&&P.class!==V.class&&i(I,"class",null,V.class,_),x&4&&i(I,"style",P.style,V.style,_),x&8){const me=p.dynamicProps;for(let fe=0;fe<me.length;fe++){const Ce=me[fe],Et=P[Ce],Zn=V[Ce];(Zn!==Et||Ce==="value")&&i(I,Ce,Et,Zn,_,f.children,g,y,O)}}x&1&&f.children!==p.children&&l(I,p.children)}else!k&&S==null&&rn(I,p,P,V,g,y,_);((H=V.onVnodeUpdated)||U)&&ot(()=>{H&&Mt(H,g,p,f),U&&An(p,f,g,"updated")},y)},Dt=(f,p,g,y,_,A,k)=>{for(let I=0;I<p.length;I++){const x=f[I],S=p[I],U=x.el&&(x.type===ze||!Gs(x,S)||x.shapeFlag&70)?h(x.el):g;w(x,S,U,null,y,_,A,k,!0)}},rn=(f,p,g,y,_,A,k)=>{if(g!==y){if(g!==ge)for(const I in g)!di(I)&&!(I in y)&&i(f,I,g[I],null,k,p.children,_,A,O);for(const I in y){if(di(I))continue;const x=y[I],S=g[I];x!==S&&I!=="value"&&i(f,I,S,x,k,p.children,_,A,O)}"value"in y&&i(f,"value",g.value,y.value)}},Nt=(f,p,g,y,_,A,k,I,x)=>{const S=p.el=f?f.el:a(""),U=p.anchor=f?f.anchor:a("");let{patchFlag:P,dynamicChildren:V,slotScopeIds:H}=p;H&&(I=I?I.concat(H):H),f==null?(s(S,g,y),s(U,g,y),dt(p.children,g,U,_,A,k,I,x)):P>0&&P&64&&V&&f.dynamicChildren?(Dt(f.dynamicChildren,V,g,_,A,k,I),(p.key!=null||_&&p===_.subTree)&&Df(f,p,!0)):he(f,p,g,U,_,A,k,I,x)},Xn=(f,p,g,y,_,A,k,I,x)=>{p.slotScopeIds=I,f==null?p.shapeFlag&512?_.ctx.activate(p,g,y,k,x):In(p,g,y,_,A,k,x):Hs(f,p,x)},In=(f,p,g,y,_,A,k)=>{const I=f.component=Dy(f,y,_);if(wf(f)&&(I.ctx.renderer=se),Ny(I),I.asyncDep){if(_&&_.registerDep(I,Ie),!f.el){const x=I.subTree=ce(jn);R(null,x,p,g)}return}Ie(I,f,p,g,_,A,k)},Hs=(f,p,g)=>{const y=p.component=f.component;if(Vg(f,p,g))if(y.asyncDep&&!y.asyncResolved){pe(y,p,g);return}else y.next=p,Og(y.update),y.update();else p.el=f.el,y.vnode=p},Ie=(f,p,g,y,_,A,k)=>{const I=()=>{if(f.isMounted){let{next:U,bu:P,u:V,parent:H,vnode:Y}=f,me=U,fe;Rn(f,!1),U?(U.el=Y.el,pe(f,U,k)):U=Y,P&&pi(P),(fe=U.props&&U.props.onVnodeBeforeUpdate)&&Mt(fe,H,U,Y),Rn(f,!0);const Ce=Bo(f),Et=f.subTree;f.subTree=Ce,w(Et,Ce,h(Et.el),D(Et),f,_,A),U.el=Ce.el,me===null&&Bg(f,Ce.el),V&&ot(V,_),(fe=U.props&&U.props.onVnodeUpdated)&&ot(()=>Mt(fe,H,U,Y),_)}else{let U;const{el:P,props:V}=p,{bm:H,m:Y,parent:me}=f,fe=yi(p);if(Rn(f,!1),H&&pi(H),!fe&&(U=V&&V.onVnodeBeforeMount)&&Mt(U,me,p),Rn(f,!0),P&&X){const Ce=()=>{f.subTree=Bo(f),X(P,f.subTree,f,_,null)};fe?p.type.__asyncLoader().then(()=>!f.isUnmounted&&Ce()):Ce()}else{const Ce=f.subTree=Bo(f);w(null,Ce,g,y,f,_,A),p.el=Ce.el}if(Y&&ot(Y,_),!fe&&(U=V&&V.onVnodeMounted)){const Ce=p;ot(()=>Mt(U,me,Ce),_)}(p.shapeFlag&256||me&&yi(me.vnode)&&me.vnode.shapeFlag&256)&&f.a&&ot(f.a,_),f.isMounted=!0,p=g=y=null}},x=f.effect=new bc(I,()=>Nc(S),f.scope),S=f.update=()=>x.run();S.id=f.uid,Rn(f,!0),S()},pe=(f,p,g)=>{p.component=f;const y=f.vnode.props;f.vnode=p,f.next=null,dy(f,p.props,y,g),gy(f,p.children,g),Os(),Qu(),Ps()},he=(f,p,g,y,_,A,k,I,x=!1)=>{const S=f&&f.children,U=f?f.shapeFlag:0,P=p.children,{patchFlag:V,shapeFlag:H}=p;if(V>0){if(V&128){Cn(S,P,g,y,_,A,k,I,x);return}else if(V&256){vt(S,P,g,y,_,A,k,I,x);return}}H&8?(U&16&&O(S,_,A),P!==S&&l(g,P)):U&16?H&16?Cn(S,P,g,y,_,A,k,I,x):O(S,_,A,!0):(U&8&&l(g,""),H&16&&dt(P,g,y,_,A,k,I,x))},vt=(f,p,g,y,_,A,k,I,x)=>{f=f||as,p=p||as;const S=f.length,U=p.length,P=Math.min(S,U);let V;for(V=0;V<P;V++){const H=p[V]=x?cn(p[V]):Ot(p[V]);w(f[V],H,g,null,_,A,k,I,x)}S>U?O(f,_,A,!0,!1,P):dt(p,g,y,_,A,k,I,x,P)},Cn=(f,p,g,y,_,A,k,I,x)=>{let S=0;const U=p.length;let P=f.length-1,V=U-1;for(;S<=P&&S<=V;){const H=f[S],Y=p[S]=x?cn(p[S]):Ot(p[S]);if(Gs(H,Y))w(H,Y,g,null,_,A,k,I,x);else break;S++}for(;S<=P&&S<=V;){const H=f[P],Y=p[V]=x?cn(p[V]):Ot(p[V]);if(Gs(H,Y))w(H,Y,g,null,_,A,k,I,x);else break;P--,V--}if(S>P){if(S<=V){const H=V+1,Y=H<U?p[H].el:y;for(;S<=V;)w(null,p[S]=x?cn(p[S]):Ot(p[S]),g,Y,_,A,k,I,x),S++}}else if(S>V)for(;S<=P;)it(f[S],_,A,!0),S++;else{const H=S,Y=S,me=new Map;for(S=Y;S<=V;S++){const ut=p[S]=x?cn(p[S]):Ot(p[S]);ut.key!=null&&me.set(ut.key,S)}let fe,Ce=0;const Et=V-Y+1;let Zn=!1,Fu=0;const Ks=new Array(Et);for(S=0;S<Et;S++)Ks[S]=0;for(S=H;S<=P;S++){const ut=f[S];if(Ce>=Et){it(ut,_,A,!0);continue}let kt;if(ut.key!=null)kt=me.get(ut.key);else for(fe=Y;fe<=V;fe++)if(Ks[fe-Y]===0&&Gs(ut,p[fe])){kt=fe;break}kt===void 0?it(ut,_,A,!0):(Ks[kt-Y]=S+1,kt>=Fu?Fu=kt:Zn=!0,w(ut,p[kt],g,null,_,A,k,I,x),Ce++)}const Uu=Zn?_y(Ks):as;for(fe=Uu.length-1,S=Et-1;S>=0;S--){const ut=Y+S,kt=p[ut],Vu=ut+1<U?p[ut+1].el:y;Ks[S]===0?w(null,kt,g,Vu,_,A,k,I,x):Zn&&(fe<0||S!==Uu[fe]?wt(kt,g,Vu,2):fe--)}}},wt=(f,p,g,y,_=null)=>{const{el:A,type:k,transition:I,children:x,shapeFlag:S}=f;if(S&6){wt(f.component.subTree,p,g,y);return}if(S&128){f.suspense.move(p,g,y);return}if(S&64){k.move(f,p,g,se);return}if(k===ze){s(A,p,g);for(let P=0;P<x.length;P++)wt(x[P],p,g,y);s(f.anchor,p,g);return}if(k===qo){M(f,p,g);return}if(y!==2&&S&1&&I)if(y===0)I.beforeEnter(A),s(A,p,g),ot(()=>I.enter(A),_);else{const{leave:P,delayLeave:V,afterLeave:H}=I,Y=()=>s(A,p,g),me=()=>{P(A,()=>{Y(),H&&H()})};V?V(A,Y,me):me()}else s(A,p,g)},it=(f,p,g,y=!1,_=!1)=>{const{type:A,props:k,ref:I,children:x,dynamicChildren:S,shapeFlag:U,patchFlag:P,dirs:V}=f;if(I!=null&&Ra(I,null,g,f,!0),U&256){p.ctx.deactivate(f);return}const H=U&1&&V,Y=!yi(f);let me;if(Y&&(me=k&&k.onVnodeBeforeUnmount)&&Mt(me,p,f),U&6)E(f.component,g,y);else{if(U&128){f.suspense.unmount(g,y);return}H&&An(f,null,p,"beforeUnmount"),U&64?f.type.remove(f,p,g,_,se,y):S&&(A!==ze||P>0&&P&64)?O(S,p,g,!1,!0):(A===ze&&P&384||!_&&U&16)&&O(x,p,g),y&&Yn(f)}(Y&&(me=k&&k.onVnodeUnmounted)||H)&&ot(()=>{me&&Mt(me,p,f),H&&An(f,null,p,"unmounted")},g)},Yn=f=>{const{type:p,el:g,anchor:y,transition:_}=f;if(p===ze){Xr(g,y);return}if(p===qo){te(f);return}const A=()=>{r(g),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(f.shapeFlag&1&&_&&!_.persisted){const{leave:k,delayLeave:I}=_,x=()=>k(g,A);I?I(f.el,A,x):x()}else A()},Xr=(f,p)=>{let g;for(;f!==p;)g=d(f),r(f),f=g;r(p)},E=(f,p,g)=>{const{bum:y,scope:_,update:A,subTree:k,um:I}=f;y&&pi(y),_.stop(),A&&(A.active=!1,it(k,f,p,g)),I&&ot(I,p),ot(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},O=(f,p,g,y=!1,_=!1,A=0)=>{for(let k=A;k<f.length;k++)it(f[k],p,g,y,_)},D=f=>f.shapeFlag&6?D(f.component.subTree):f.shapeFlag&128?f.suspense.next():d(f.anchor||f.el),F=(f,p,g)=>{f==null?p._vnode&&it(p._vnode,null,null,!0):w(p._vnode||null,f,p,null,null,null,g),Qu(),pf(),p._vnode=f},se={p:w,um:it,m:wt,r:Yn,mt:In,mc:dt,pc:he,pbc:Dt,n:D,o:t};let _e,X;return e&&([_e,X]=e(se)),{render:F,hydrate:_e,createApp:vy(F,_e)}}function Rn({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Df(t,e,n=!1){const s=t.children,r=e.children;if(G(s)&&G(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=cn(r[i]),a.el=o.el),n||Df(o,a)),a.type===ro&&(a.el=o.el)}}function _y(t){const e=t.slice(),n=[0];let s,r,i,o,a;const c=t.length;for(s=0;s<c;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const Ty=t=>t.__isTeleport,ze=Symbol(void 0),ro=Symbol(void 0),jn=Symbol(void 0),qo=Symbol(void 0),ir=[];let bt=null;function Q(t=!1){ir.push(bt=t?null:[])}function Sy(){ir.pop(),bt=ir[ir.length-1]||null}let vr=1;function rl(t){vr+=t}function Nf(t){return t.dynamicChildren=vr>0?bt||as:null,Sy(),vr>0&&bt&&bt.push(t),t}function Z(t,e,n,s,r,i){return Nf(de(t,e,n,s,r,i,!0))}function wr(t,e,n,s,r){return Nf(ce(t,e,n,s,r,!0))}function xa(t){return t?t.__v_isVNode===!0:!1}function Gs(t,e){return t.type===e.type&&t.key===e.key}const io="__vInternal",kf=({key:t})=>t??null,vi=({ref:t,ref_key:e,ref_for:n})=>t!=null?Me(t)||We(t)||J(t)?{i:gt,r:t,k:e,f:!!n}:t:null;function de(t,e=null,n=null,s=0,r=null,i=t===ze?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&kf(e),ref:e&&vi(e),scopeId:no,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:gt};return a?(Pc(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Me(n)?8:16),vr>0&&!o&&bt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&bt.push(c),c}const ce=by;function by(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===ry)&&(t=jn),xa(t)){const a=vs(t,e,!0);return n&&Pc(a,n),vr>0&&!i&&bt&&(a.shapeFlag&6?bt[bt.indexOf(t)]=a:bt.push(a)),a.patchFlag|=-2,a}if(Ly(t)&&(t=t.__vccOpts),e){e=Iy(e);let{class:a,style:c}=e;a&&!Me(a)&&(e.class=vc(a)),Ee(c)&&(sf(c)&&!G(c)&&(c=rt({},c)),e.style=yc(c))}const o=Me(t)?1:jg(t)?128:Ty(t)?64:Ee(t)?4:J(t)?2:0;return de(t,e,n,s,r,o,i,!0)}function Iy(t){return t?sf(t)||io in t?rt({},t):t:null}function vs(t,e,n=!1){const{props:s,ref:r,patchFlag:i,children:o}=t,a=e?Ay(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&kf(a),ref:e&&e.ref?n&&r?G(r)?r.concat(vi(e)):[r,vi(e)]:vi(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ze?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&vs(t.ssContent),ssFallback:t.ssFallback&&vs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Jt(t=" ",e=0){return ce(ro,null,t,e)}function Cy(t="",e=!1){return e?(Q(),wr(jn,null,t)):ce(jn,null,t)}function Ot(t){return t==null||typeof t=="boolean"?ce(jn):G(t)?ce(ze,null,t.slice()):typeof t=="object"?cn(t):ce(ro,null,String(t))}function cn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:vs(t)}function Pc(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(G(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Pc(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(io in e)?e._ctx=gt:r===3&&gt&&(gt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else J(e)?(e={default:e,_ctx:gt},n=32):(e=String(e),s&64?(n=16,e=[Jt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ay(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=vc([e.class,s.class]));else if(r==="style")e.style=yc([e.style,s.style]);else if(Qi(r)){const i=e[r],o=s[r];o&&i!==o&&!(G(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Mt(t,e,n,s=null){At(t,e,7,[n,s])}const Ry=xf();let xy=0;function Dy(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Ry,i={uid:xy++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Jm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:If(s,r),emitsOptions:gf(s,r),emit:null,emitted:null,propsDefaults:ge,inheritAttrs:s.inheritAttrs,ctx:ge,data:ge,props:ge,attrs:ge,slots:ge,refs:ge,setupState:ge,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=$g.bind(null,i),t.ce&&t.ce(i),i}let xe=null;const ws=t=>{xe=t,t.scope.on()},Vn=()=>{xe&&xe.scope.off(),xe=null};function Mf(t){return t.vnode.shapeFlag&4}let Er=!1;function Ny(t,e=!1){Er=e;const{props:n,children:s}=t.vnode,r=Mf(t);fy(t,n,r,e),my(t,s);const i=r?ky(t,e):void 0;return Er=!1,i}function ky(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=rf(new Proxy(t.ctx,oy));const{setup:s}=n;if(s){const r=t.setupContext=s.length>1?Oy(t):null;ws(t),Os();const i=dn(s,t,0,[t.props,r]);if(Ps(),Vn(),qh(i)){if(i.then(Vn,Vn),e)return i.then(o=>{il(t,o,e)}).catch(o=>{eo(o,t,0)});t.asyncDep=i}else il(t,i,e)}else Of(t,e)}function il(t,e,n){J(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ee(e)&&(t.setupState=uf(e)),Of(t,n)}let ol;function Of(t,e,n){const s=t.type;if(!t.render){if(!e&&ol&&!s.render){const r=s.template||Mc(t).template;if(r){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=s,u=rt(rt({isCustomElement:i,delimiters:a},o),c);s.render=ol(r,u)}}t.render=s.render||Ct}ws(t),Os(),ay(t),Ps(),Vn()}function My(t){return new Proxy(t.attrs,{get(e,n){return ct(t,"get","$attrs"),e[n]}})}function Oy(t){const e=s=>{t.exposed=s||{}};let n;return{get attrs(){return n||(n=My(t))},slots:t.slots,emit:t.emit,expose:e}}function oo(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(uf(rf(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in rr)return rr[n](t)},has(e,n){return n in e||n in rr}}))}function Py(t,e=!0){return J(t)?t.displayName||t.name:t.name||e&&t.__name}function Ly(t){return J(t)&&"__vccOpts"in t}const pt=(t,e)=>Ng(t,e,Er);function Pf(t,e,n){const s=arguments.length;return s===2?Ee(e)&&!G(e)?xa(e)?ce(t,null,[e]):ce(t,e):ce(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&xa(n)&&(n=[n]),ce(t,e,n))}const $y=Symbol(""),Fy=()=>Qt($y),Uy="3.2.47",Vy="http://www.w3.org/2000/svg",kn=typeof document<"u"?document:null,al=kn&&kn.createElement("template"),By={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e?kn.createElementNS(Vy,t):kn.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>kn.createTextNode(t),createComment:t=>kn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>kn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{al.innerHTML=s?`<svg>${t}</svg>`:t;const a=al.content;if(s){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function jy(t,e,n){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function qy(t,e,n){const s=t.style,r=Me(n);if(n&&!r){if(e&&!Me(e))for(const i in e)n[i]==null&&Da(s,i,"");for(const i in n)Da(s,i,n[i])}else{const i=s.display;r?e!==n&&(s.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=i)}}const cl=/\s*!important$/;function Da(t,e,n){if(G(n))n.forEach(s=>Da(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=zy(t,e);cl.test(n)?t.setProperty(Ms(s),n.replace(cl,""),"important"):t[s]=n}}const ul=["Webkit","Moz","ms"],zo={};function zy(t,e){const n=zo[e];if(n)return n;let s=Bt(e);if(s!=="filter"&&s in t)return zo[e]=s;s=Yi(s);for(let r=0;r<ul.length;r++){const i=ul[r]+s;if(i in t)return zo[e]=i}return e}const ll="http://www.w3.org/1999/xlink";function Hy(t,e,n,s,r){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(ll,e.slice(6,e.length)):t.setAttributeNS(ll,e,n);else{const i=jm(e);n==null||i&&!Vh(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function Ky(t,e,n,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const c=n??"";(t.value!==c||t.tagName==="OPTION")&&(t.value=c),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Vh(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function ns(t,e,n,s){t.addEventListener(e,n,s)}function Gy(t,e,n,s){t.removeEventListener(e,n,s)}function Wy(t,e,n,s,r=null){const i=t._vei||(t._vei={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=Qy(e);if(s){const u=i[e]=Yy(s,r);ns(t,a,u,c)}else o&&(Gy(t,a,o,c),i[e]=void 0)}}const hl=/(?:Once|Passive|Capture)$/;function Qy(t){let e;if(hl.test(t)){e={};let s;for(;s=t.match(hl);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ms(t.slice(2)),e]}let Ho=0;const Jy=Promise.resolve(),Xy=()=>Ho||(Jy.then(()=>Ho=0),Ho=Date.now());function Yy(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;At(Zy(s,n.value),e,5,[s])};return n.value=t,n.attached=Xy(),n}function Zy(t,e){if(G(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const fl=/^on[a-z]/,ev=(t,e,n,s,r=!1,i,o,a,c)=>{e==="class"?jy(t,s,r):e==="style"?qy(t,n,s):Qi(e)?wc(e)||Wy(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):tv(t,e,s,r))?Ky(t,e,s,i,o,a,c):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Hy(t,e,s,r))};function tv(t,e,n,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&fl.test(e)&&J(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||fl.test(e)&&Me(n)?!1:e in t}const dl=t=>{const e=t.props["onUpdate:modelValue"]||!1;return G(e)?n=>pi(e,n):e};function nv(t){t.target.composing=!0}function pl(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const sv={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t._assign=dl(r);const i=s||r.props&&r.props.type==="number";ns(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=va(a)),t._assign(a)}),n&&ns(t,"change",()=>{t.value=t.value.trim()}),e||(ns(t,"compositionstart",nv),ns(t,"compositionend",pl),ns(t,"change",pl))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:s,number:r}},i){if(t._assign=dl(i),t.composing||document.activeElement===t&&t.type!=="range"&&(n||s&&t.value.trim()===e||(r||t.type==="number")&&va(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},rv=rt({patchProp:ev},By);let ml;function iv(){return ml||(ml=wy(rv))}const ov=(...t)=>{const e=iv().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=av(s);if(!r)return;const i=e._component;!J(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function av(t){return Me(t)?document.querySelector(t):t}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const ss=typeof window<"u";function cv(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ue=Object.assign;function Ko(t,e){const n={};for(const s in e){const r=e[s];n[s]=Rt(r)?r.map(t):t(r)}return n}const or=()=>{},Rt=Array.isArray,uv=/\/$/,lv=t=>t.replace(uv,"");function Go(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=pv(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:o}}function hv(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function gl(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function fv(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Es(e.matched[s],n.matched[r])&&Lf(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Es(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Lf(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!dv(t[n],e[n]))return!1;return!0}function dv(t,e){return Rt(t)?yl(t,e):Rt(e)?yl(e,t):t===e}function yl(t,e){return Rt(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function pv(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/");let r=n.length-1,i,o;for(i=0;i<s.length;i++)if(o=s[i],o!==".")if(o==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(i-(i===s.length?1:0)).join("/")}var _r;(function(t){t.pop="pop",t.push="push"})(_r||(_r={}));var ar;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ar||(ar={}));function mv(t){if(!t)if(ss){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),lv(t)}const gv=/^[^#]+#/;function yv(t,e){return t.replace(gv,"#")+e}function vv(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const ao=()=>({left:window.pageXOffset,top:window.pageYOffset});function wv(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=vv(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function vl(t,e){return(history.state?history.state.position-e:-1)+t}const Na=new Map;function Ev(t,e){Na.set(t,e)}function _v(t){const e=Na.get(t);return Na.delete(t),e}let Tv=()=>location.protocol+"//"+location.host;function $f(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,c=r.slice(a);return c[0]!=="/"&&(c="/"+c),gl(c,"")}return gl(n,t)+s+r}function Sv(t,e,n,s){let r=[],i=[],o=null;const a=({state:d})=>{const m=$f(t,location),v=n.value,w=e.value;let C=0;if(d){if(n.value=m,e.value=d,o&&o===v){o=null;return}C=w?d.position-w.position:0}else s(m);r.forEach(R=>{R(n.value,v,{delta:C,type:_r.pop,direction:C?C>0?ar.forward:ar.back:ar.unknown})})};function c(){o=n.value}function u(d){r.push(d);const m=()=>{const v=r.indexOf(d);v>-1&&r.splice(v,1)};return i.push(m),m}function l(){const{history:d}=window;d.state&&d.replaceState(ue({},d.state,{scroll:ao()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",l),{pauseListeners:c,listen:u,destroy:h}}function wl(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?ao():null}}function bv(t){const{history:e,location:n}=window,s={value:$f(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,l){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:Tv()+t+c;try{e[l?"replaceState":"pushState"](u,"",d),r.value=u}catch(m){console.error(m),n[l?"replace":"assign"](d)}}function o(c,u){const l=ue({},e.state,wl(r.value.back,c,r.value.forward,!0),u,{position:r.value.position});i(c,l,!0),s.value=c}function a(c,u){const l=ue({},r.value,e.state,{forward:c,scroll:ao()});i(l.current,l,!0);const h=ue({},wl(s.value,c,null),{position:l.position+1},u);i(c,h,!1),s.value=c}return{location:s,state:r,push:a,replace:o}}function Iv(t){t=mv(t);const e=bv(t),n=Sv(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=ue({location:"",base:t,go:s,createHref:yv.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function Cv(t){return typeof t=="string"||t&&typeof t=="object"}function Ff(t){return typeof t=="string"||typeof t=="symbol"}const an={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Uf=Symbol("");var El;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(El||(El={}));function _s(t,e){return ue(new Error,{type:t,[Uf]:!0},e)}function zt(t,e){return t instanceof Error&&Uf in t&&(e==null||!!(t.type&e))}const _l="[^/]+?",Av={sensitive:!1,strict:!1,start:!0,end:!0},Rv=/[.+*?^${}()[\]/\\]/g;function xv(t,e){const n=ue({},Av,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const l=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let h=0;h<u.length;h++){const d=u[h];let m=40+(n.sensitive?.25:0);if(d.type===0)h||(r+="/"),r+=d.value.replace(Rv,"\\$&"),m+=40;else if(d.type===1){const{value:v,repeatable:w,optional:C,regexp:R}=d;i.push({name:v,repeatable:w,optional:C});const $=R||_l;if($!==_l){m+=10;try{new RegExp(`(${$})`)}catch(te){throw new Error(`Invalid custom RegExp for param "${v}" (${$}): `+te.message)}}let M=w?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;h||(M=C&&u.length<2?`(?:/${M})`:"/"+M),C&&(M+="?"),r+=M,m+=20,C&&(m+=-8),w&&(m+=-20),$===".*"&&(m+=-50)}l.push(m)}s.push(l)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const l=u.match(o),h={};if(!l)return null;for(let d=1;d<l.length;d++){const m=l[d]||"",v=i[d-1];h[v.name]=m&&v.repeatable?m.split("/"):m}return h}function c(u){let l="",h=!1;for(const d of t){(!h||!l.endsWith("/"))&&(l+="/"),h=!1;for(const m of d)if(m.type===0)l+=m.value;else if(m.type===1){const{value:v,repeatable:w,optional:C}=m,R=v in u?u[v]:"";if(Rt(R)&&!w)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const $=Rt(R)?R.join("/"):R;if(!$)if(C)d.length<2&&(l.endsWith("/")?l=l.slice(0,-1):h=!0);else throw new Error(`Missing required param "${v}"`);l+=$}}return l||"/"}return{re:o,score:s,keys:i,parse:a,stringify:c}}function Dv(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Nv(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=Dv(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Tl(s))return 1;if(Tl(r))return-1}return r.length-s.length}function Tl(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const kv={type:0,value:""},Mv=/[a-zA-Z0-9_]/;function Ov(t){if(!t)return[[]];if(t==="/")return[[kv]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,c,u="",l="";function h(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:l,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function d(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(u&&h(),o()):c===":"?(h(),n=1):d();break;case 4:d(),n=s;break;case 1:c==="("?n=2:Mv.test(c)?d():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+c:n=3:l+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,l="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),h(),o(),r}function Pv(t,e,n){const s=xv(Ov(t.path),n),r=ue(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Lv(t,e){const n=[],s=new Map;e=Il({strict:!1,end:!0,sensitive:!1},e);function r(l){return s.get(l)}function i(l,h,d){const m=!d,v=$v(l);v.aliasOf=d&&d.record;const w=Il(e,l),C=[v];if("alias"in l){const M=typeof l.alias=="string"?[l.alias]:l.alias;for(const te of M)C.push(ue({},v,{components:d?d.record.components:v.components,path:te,aliasOf:d?d.record:v}))}let R,$;for(const M of C){const{path:te}=M;if(h&&te[0]!=="/"){const Se=h.record.path,Be=Se[Se.length-1]==="/"?"":"/";M.path=h.record.path+(te&&Be+te)}if(R=Pv(M,h,w),d?d.alias.push(R):($=$||R,$!==R&&$.alias.push(R),m&&l.name&&!bl(R)&&o(l.name)),v.children){const Se=v.children;for(let Be=0;Be<Se.length;Be++)i(Se[Be],R,d&&d.children[Be])}d=d||R,(R.record.components&&Object.keys(R.record.components).length||R.record.name||R.record.redirect)&&c(R)}return $?()=>{o($)}:or}function o(l){if(Ff(l)){const h=s.get(l);h&&(s.delete(l),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(l);h>-1&&(n.splice(h,1),l.record.name&&s.delete(l.record.name),l.children.forEach(o),l.alias.forEach(o))}}function a(){return n}function c(l){let h=0;for(;h<n.length&&Nv(l,n[h])>=0&&(l.record.path!==n[h].record.path||!Vf(l,n[h]));)h++;n.splice(h,0,l),l.record.name&&!bl(l)&&s.set(l.record.name,l)}function u(l,h){let d,m={},v,w;if("name"in l&&l.name){if(d=s.get(l.name),!d)throw _s(1,{location:l});w=d.record.name,m=ue(Sl(h.params,d.keys.filter($=>!$.optional).map($=>$.name)),l.params&&Sl(l.params,d.keys.map($=>$.name))),v=d.stringify(m)}else if("path"in l)v=l.path,d=n.find($=>$.re.test(v)),d&&(m=d.parse(v),w=d.record.name);else{if(d=h.name?s.get(h.name):n.find($=>$.re.test(h.path)),!d)throw _s(1,{location:l,currentLocation:h});w=d.record.name,m=ue({},h.params,l.params),v=d.stringify(m)}const C=[];let R=d;for(;R;)C.unshift(R.record),R=R.parent;return{name:w,path:v,params:m,matched:C,meta:Uv(C)}}return t.forEach(l=>i(l)),{addRoute:i,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function Sl(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function $v(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Fv(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Fv(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="boolean"?n:n[s];return e}function bl(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Uv(t){return t.reduce((e,n)=>ue(e,n.meta),{})}function Il(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function Vf(t,e){return e.children.some(n=>n===t||Vf(t,n))}const Bf=/#/g,Vv=/&/g,Bv=/\//g,jv=/=/g,qv=/\?/g,jf=/\+/g,zv=/%5B/g,Hv=/%5D/g,qf=/%5E/g,Kv=/%60/g,zf=/%7B/g,Gv=/%7C/g,Hf=/%7D/g,Wv=/%20/g;function Lc(t){return encodeURI(""+t).replace(Gv,"|").replace(zv,"[").replace(Hv,"]")}function Qv(t){return Lc(t).replace(zf,"{").replace(Hf,"}").replace(qf,"^")}function ka(t){return Lc(t).replace(jf,"%2B").replace(Wv,"+").replace(Bf,"%23").replace(Vv,"%26").replace(Kv,"`").replace(zf,"{").replace(Hf,"}").replace(qf,"^")}function Jv(t){return ka(t).replace(jv,"%3D")}function Xv(t){return Lc(t).replace(Bf,"%23").replace(qv,"%3F")}function Yv(t){return t==null?"":Xv(t).replace(Bv,"%2F")}function Ri(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Zv(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(jf," "),o=i.indexOf("="),a=Ri(o<0?i:i.slice(0,o)),c=o<0?null:Ri(i.slice(o+1));if(a in e){let u=e[a];Rt(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function Cl(t){let e="";for(let n in t){const s=t[n];if(n=Jv(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Rt(s)?s.map(i=>i&&ka(i)):[s&&ka(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function ew(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Rt(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const tw=Symbol(""),Al=Symbol(""),$c=Symbol(""),Kf=Symbol(""),Ma=Symbol("");function Ws(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function un(t,e,n,s,r){const i=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(_s(4,{from:n,to:e})):h instanceof Error?a(h):Cv(h)?a(_s(2,{from:e,to:h})):(i&&s.enterCallbacks[r]===i&&typeof h=="function"&&i.push(h),o())},u=t.call(s&&s.instances[r],e,n,c);let l=Promise.resolve(u);t.length<3&&(l=l.then(c)),l.catch(h=>a(h))})}function Wo(t,e,n,s){const r=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(nw(a)){const u=(a.__vccOpts||a)[e];u&&r.push(un(u,n,s,i,o))}else{let c=a();r.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const l=cv(u)?u.default:u;i.components[o]=l;const d=(l.__vccOpts||l)[e];return d&&un(d,n,s,i,o)()}))}}return r}function nw(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Rl(t){const e=Qt($c),n=Qt(Kf),s=pt(()=>e.resolve(ls(t.to))),r=pt(()=>{const{matched:c}=s.value,{length:u}=c,l=c[u-1],h=n.matched;if(!l||!h.length)return-1;const d=h.findIndex(Es.bind(null,l));if(d>-1)return d;const m=xl(c[u-2]);return u>1&&xl(l)===m&&h[h.length-1].path!==m?h.findIndex(Es.bind(null,c[u-2])):d}),i=pt(()=>r.value>-1&&ow(n.params,s.value.params)),o=pt(()=>r.value>-1&&r.value===n.matched.length-1&&Lf(n.params,s.value.params));function a(c={}){return iw(c)?e[ls(t.replace)?"replace":"push"](ls(t.to)).catch(or):Promise.resolve()}return{route:s,href:pt(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}const sw=et({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Rl,setup(t,{slots:e}){const n=Mr(Rl(t)),{options:s}=Qt($c),r=pt(()=>({[Dl(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Dl(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:Pf("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),rw=sw;function iw(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ow(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Rt(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function xl(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Dl=(t,e,n)=>t??e??n,aw=et({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Qt(Ma),r=pt(()=>t.route||s.value),i=Qt(Al,0),o=pt(()=>{let u=ls(i);const{matched:l}=r.value;let h;for(;(h=l[u])&&!h.components;)u++;return u}),a=pt(()=>r.value.matched[o.value]);mi(Al,pt(()=>o.value+1)),mi(tw,a),mi(Ma,r);const c=Cg();return gi(()=>[c.value,a.value,t.name],([u,l,h],[d,m,v])=>{l&&(l.instances[h]=u,m&&m!==l&&u&&u===d&&(l.leaveGuards.size||(l.leaveGuards=m.leaveGuards),l.updateGuards.size||(l.updateGuards=m.updateGuards))),u&&l&&(!m||!Es(l,m)||!d)&&(l.enterCallbacks[h]||[]).forEach(w=>w(u))},{flush:"post"}),()=>{const u=r.value,l=t.name,h=a.value,d=h&&h.components[l];if(!d)return Nl(n.default,{Component:d,route:u});const m=h.props[l],v=m?m===!0?u.params:typeof m=="function"?m(u):m:null,C=Pf(d,ue({},v,e,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(h.instances[l]=null)},ref:c}));return Nl(n.default,{Component:C,route:u})||C}}});function Nl(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const cw=aw;function uw(t){const e=Lv(t.routes,t),n=t.parseQuery||Zv,s=t.stringifyQuery||Cl,r=t.history,i=Ws(),o=Ws(),a=Ws(),c=Ag(an);let u=an;ss&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=Ko.bind(null,E=>""+E),h=Ko.bind(null,Yv),d=Ko.bind(null,Ri);function m(E,O){let D,F;return Ff(E)?(D=e.getRecordMatcher(E),F=O):F=E,e.addRoute(F,D)}function v(E){const O=e.getRecordMatcher(E);O&&e.removeRoute(O)}function w(){return e.getRoutes().map(E=>E.record)}function C(E){return!!e.getRecordMatcher(E)}function R(E,O){if(O=ue({},O||c.value),typeof E=="string"){const f=Go(n,E,O.path),p=e.resolve({path:f.path},O),g=r.createHref(f.fullPath);return ue(f,p,{params:d(p.params),hash:Ri(f.hash),redirectedFrom:void 0,href:g})}let D;if("path"in E)D=ue({},E,{path:Go(n,E.path,O.path).path});else{const f=ue({},E.params);for(const p in f)f[p]==null&&delete f[p];D=ue({},E,{params:h(E.params)}),O.params=h(O.params)}const F=e.resolve(D,O),se=E.hash||"";F.params=l(d(F.params));const _e=hv(s,ue({},E,{hash:Qv(se),path:F.path})),X=r.createHref(_e);return ue({fullPath:_e,hash:se,query:s===Cl?ew(E.query):E.query||{}},F,{redirectedFrom:void 0,href:X})}function $(E){return typeof E=="string"?Go(n,E,c.value.path):ue({},E)}function M(E,O){if(u!==E)return _s(8,{from:O,to:E})}function te(E){return ft(E)}function Se(E){return te(ue($(E),{replace:!0}))}function Be(E){const O=E.matched[E.matched.length-1];if(O&&O.redirect){const{redirect:D}=O;let F=typeof D=="function"?D(E):D;return typeof F=="string"&&(F=F.includes("?")||F.includes("#")?F=$(F):{path:F},F.params={}),ue({query:E.query,hash:E.hash,params:"path"in F?{}:E.params},F)}}function ft(E,O){const D=u=R(E),F=c.value,se=E.state,_e=E.force,X=E.replace===!0,f=Be(D);if(f)return ft(ue($(f),{state:typeof f=="object"?ue({},se,f.state):se,force:_e,replace:X}),O||D);const p=D;p.redirectedFrom=O;let g;return!_e&&fv(s,F,D)&&(g=_s(16,{to:p,from:F}),Cn(F,F,!0,!1)),(g?Promise.resolve(g):Jn(p,F)).catch(y=>zt(y)?zt(y,2)?y:vt(y):pe(y,p,F)).then(y=>{if(y){if(zt(y,2))return ft(ue({replace:X},$(y.to),{state:typeof y.to=="object"?ue({},se,y.to.state):se,force:_e}),O||p)}else y=rn(p,F,!0,X,se);return Dt(p,F,y),y})}function dt(E,O){const D=M(E,O);return D?Promise.reject(D):Promise.resolve()}function Jn(E,O){let D;const[F,se,_e]=lw(E,O);D=Wo(F.reverse(),"beforeRouteLeave",E,O);for(const f of F)f.leaveGuards.forEach(p=>{D.push(un(p,E,O))});const X=dt.bind(null,E,O);return D.push(X),es(D).then(()=>{D=[];for(const f of i.list())D.push(un(f,E,O));return D.push(X),es(D)}).then(()=>{D=Wo(se,"beforeRouteUpdate",E,O);for(const f of se)f.updateGuards.forEach(p=>{D.push(un(p,E,O))});return D.push(X),es(D)}).then(()=>{D=[];for(const f of E.matched)if(f.beforeEnter&&!O.matched.includes(f))if(Rt(f.beforeEnter))for(const p of f.beforeEnter)D.push(un(p,E,O));else D.push(un(f.beforeEnter,E,O));return D.push(X),es(D)}).then(()=>(E.matched.forEach(f=>f.enterCallbacks={}),D=Wo(_e,"beforeRouteEnter",E,O),D.push(X),es(D))).then(()=>{D=[];for(const f of o.list())D.push(un(f,E,O));return D.push(X),es(D)}).catch(f=>zt(f,8)?f:Promise.reject(f))}function Dt(E,O,D){for(const F of a.list())F(E,O,D)}function rn(E,O,D,F,se){const _e=M(E,O);if(_e)return _e;const X=O===an,f=ss?history.state:{};D&&(F||X?r.replace(E.fullPath,ue({scroll:X&&f&&f.scroll},se)):r.push(E.fullPath,se)),c.value=E,Cn(E,O,D,X),vt()}let Nt;function Xn(){Nt||(Nt=r.listen((E,O,D)=>{if(!Xr.listening)return;const F=R(E),se=Be(F);if(se){ft(ue(se,{replace:!0}),F).catch(or);return}u=F;const _e=c.value;ss&&Ev(vl(_e.fullPath,D.delta),ao()),Jn(F,_e).catch(X=>zt(X,12)?X:zt(X,2)?(ft(X.to,F).then(f=>{zt(f,20)&&!D.delta&&D.type===_r.pop&&r.go(-1,!1)}).catch(or),Promise.reject()):(D.delta&&r.go(-D.delta,!1),pe(X,F,_e))).then(X=>{X=X||rn(F,_e,!1),X&&(D.delta&&!zt(X,8)?r.go(-D.delta,!1):D.type===_r.pop&&zt(X,20)&&r.go(-1,!1)),Dt(F,_e,X)}).catch(or)}))}let In=Ws(),Hs=Ws(),Ie;function pe(E,O,D){vt(E);const F=Hs.list();return F.length?F.forEach(se=>se(E,O,D)):console.error(E),Promise.reject(E)}function he(){return Ie&&c.value!==an?Promise.resolve():new Promise((E,O)=>{In.add([E,O])})}function vt(E){return Ie||(Ie=!E,Xn(),In.list().forEach(([O,D])=>E?D(E):O()),In.reset()),E}function Cn(E,O,D,F){const{scrollBehavior:se}=t;if(!ss||!se)return Promise.resolve();const _e=!D&&_v(vl(E.fullPath,0))||(F||!D)&&history.state&&history.state.scroll||null;return ff().then(()=>se(E,O,_e)).then(X=>X&&wv(X)).catch(X=>pe(X,E,O))}const wt=E=>r.go(E);let it;const Yn=new Set,Xr={currentRoute:c,listening:!0,addRoute:m,removeRoute:v,hasRoute:C,getRoutes:w,resolve:R,options:t,push:te,replace:Se,go:wt,back:()=>wt(-1),forward:()=>wt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Hs.add,isReady:he,install(E){const O=this;E.component("RouterLink",rw),E.component("RouterView",cw),E.config.globalProperties.$router=O,Object.defineProperty(E.config.globalProperties,"$route",{enumerable:!0,get:()=>ls(c)}),ss&&!it&&c.value===an&&(it=!0,te(r.location).catch(se=>{}));const D={};for(const se in an)D[se]=pt(()=>c.value[se]);E.provide($c,O),E.provide(Kf,Mr(D)),E.provide(Ma,c);const F=E.unmount;Yn.add(E),E.unmount=function(){Yn.delete(E),Yn.size<1&&(u=an,Nt&&Nt(),Nt=null,c.value=an,it=!1,Ie=!1),F()}}};return Xr}function es(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function lw(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Es(u,a))?s.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(u=>Es(u,c))||r.push(c))}return[n,s,r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},hw=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Wf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,l=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|u>>6,m=u&63;c||(m=64,o||(d=64)),s.push(n[l],n[h],n[d],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Gf(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||u==null||h==null)throw new fw;const d=i<<2|a>>4;if(s.push(d),u!==64){const m=a<<4&240|u>>2;if(s.push(m),h!==64){const v=u<<6&192|h;s.push(v)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dw=function(t){const e=Gf(t);return Wf.encodeByteArray(e,!0)},xi=function(t){return dw(t).replace(/\./g,"")},pw=function(t){try{return Wf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=()=>mw().__FIREBASE_DEFAULTS__,yw=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pw(t[1]);return e&&JSON.parse(e)},Qf=()=>{try{return gw()||yw()||vw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ww=t=>{var e,n;return(n=(e=Qf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ew=t=>{const e=ww(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},_w=()=>{var t;return(t=Qf())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[xi(JSON.stringify(n)),xi(JSON.stringify(o)),a].join(".")}function bw(){try{return typeof indexedDB=="object"}catch{return!1}}function Iw(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="FirebaseError";class Fs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Cw,Object.setPrototypeOf(this,Fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jf.prototype.create)}}class Jf{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Aw(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Fs(r,a,s)}}function Aw(t,e){return t.replace(Rw,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Rw=/\{\$([^}]+)}/g;function Oa(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(kl(i)&&kl(o)){if(!Oa(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function kl(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t){return t&&t._delegate?t._delegate:t}class Tr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Tw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Nw(e))try{this.getOrInitializeService({instanceIdentifier:Dn})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Dn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dn){return this.instances.has(e)}getOptions(e=Dn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Dw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Dn){return this.component?this.component.multipleInstances?e:Dn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Dw(t){return t===Dn?void 0:t}function Nw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const Mw={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},Ow=ae.INFO,Pw={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},Lw=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Pw[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xf{constructor(e){this.name=e,this._logLevel=Ow,this._logHandler=Lw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const $w=(t,e)=>e.some(n=>t instanceof n);let Ml,Ol;function Fw(){return Ml||(Ml=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Uw(){return Ol||(Ol=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yf=new WeakMap,Pa=new WeakMap,Zf=new WeakMap,Qo=new WeakMap,Fc=new WeakMap;function Vw(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(pn(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Yf.set(n,t)}).catch(()=>{}),Fc.set(e,t),e}function Bw(t){if(Pa.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Pa.set(t,e)}let La={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pa.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zf.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jw(t){La=t(La)}function qw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Jo(this),e,...n);return Zf.set(s,e.sort?e.sort():[e]),pn(s)}:Uw().includes(t)?function(...e){return t.apply(Jo(this),e),pn(Yf.get(this))}:function(...e){return pn(t.apply(Jo(this),e))}}function zw(t){return typeof t=="function"?qw(t):(t instanceof IDBTransaction&&Bw(t),$w(t,Fw())?new Proxy(t,La):t)}function pn(t){if(t instanceof IDBRequest)return Vw(t);if(Qo.has(t))return Qo.get(t);const e=zw(t);return e!==t&&(Qo.set(t,e),Fc.set(e,t)),e}const Jo=t=>Fc.get(t);function Hw(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=pn(o);return s&&o.addEventListener("upgradeneeded",c=>{s(pn(o.result),c.oldVersion,c.newVersion,pn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Kw=["get","getKey","getAll","getAllKeys","count"],Gw=["put","add","delete","clear"],Xo=new Map;function Pl(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xo.get(e))return Xo.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=Gw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Kw.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&c.done]))[0]};return Xo.set(e,i),i}jw(t=>({...t,get:(e,n,s)=>Pl(e,n)||t.get(e,n,s),has:(e,n)=>!!Pl(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Qw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Qw(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $a="@firebase/app",Ll="0.9.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=new Xf("@firebase/app"),Jw="@firebase/app-compat",Xw="@firebase/analytics-compat",Yw="@firebase/analytics",Zw="@firebase/app-check-compat",e0="@firebase/app-check",t0="@firebase/auth",n0="@firebase/auth-compat",s0="@firebase/database",r0="@firebase/database-compat",i0="@firebase/functions",o0="@firebase/functions-compat",a0="@firebase/installations",c0="@firebase/installations-compat",u0="@firebase/messaging",l0="@firebase/messaging-compat",h0="@firebase/performance",f0="@firebase/performance-compat",d0="@firebase/remote-config",p0="@firebase/remote-config-compat",m0="@firebase/storage",g0="@firebase/storage-compat",y0="@firebase/firestore",v0="@firebase/firestore-compat",w0="firebase",E0="9.21.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="[DEFAULT]",_0={[$a]:"fire-core",[Jw]:"fire-core-compat",[Yw]:"fire-analytics",[Xw]:"fire-analytics-compat",[e0]:"fire-app-check",[Zw]:"fire-app-check-compat",[t0]:"fire-auth",[n0]:"fire-auth-compat",[s0]:"fire-rtdb",[r0]:"fire-rtdb-compat",[i0]:"fire-fn",[o0]:"fire-fn-compat",[a0]:"fire-iid",[c0]:"fire-iid-compat",[u0]:"fire-fcm",[l0]:"fire-fcm-compat",[h0]:"fire-perf",[f0]:"fire-perf-compat",[d0]:"fire-rc",[p0]:"fire-rc-compat",[m0]:"fire-gcs",[g0]:"fire-gcs-compat",[y0]:"fire-fst",[v0]:"fire-fst-compat","fire-js":"fire-js",[w0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new Map,Ua=new Map;function T0(t,e){try{t.container.addComponent(e)}catch(n){qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ni(t){const e=t.name;if(Ua.has(e))return qn.debug(`There were multiple attempts to register component ${e}.`),!1;Ua.set(e,t);for(const n of Di.values())T0(n,t);return!0}function S0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},mn=new Jf("app","Firebase",b0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=E0;function ed(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Fa,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw mn.create("bad-app-name",{appName:String(r)});if(n||(n=_w()),!n)throw mn.create("no-options");const i=Di.get(r);if(i){if(Oa(n,i.options)&&Oa(s,i.config))return i;throw mn.create("duplicate-app",{appName:r})}const o=new kw(r);for(const c of Ua.values())o.addComponent(c);const a=new I0(n,s,o);return Di.set(r,a),a}function A0(t=Fa){const e=Di.get(t);if(!e&&t===Fa)return ed();if(!e)throw mn.create("no-app",{appName:t});return e}function fs(t,e,n){var s;let r=(s=_0[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qn.warn(a.join(" "));return}Ni(new Tr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="firebase-heartbeat-database",x0=1,Sr="firebase-heartbeat-store";let Yo=null;function td(){return Yo||(Yo=Hw(R0,x0,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Sr)}}}).catch(t=>{throw mn.create("idb-open",{originalErrorMessage:t.message})})),Yo}async function D0(t){try{return(await td()).transaction(Sr).objectStore(Sr).get(nd(t))}catch(e){if(e instanceof Fs)qn.warn(e.message);else{const n=mn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qn.warn(n.message)}}}async function $l(t,e){try{const s=(await td()).transaction(Sr,"readwrite");return await s.objectStore(Sr).put(e,nd(t)),s.done}catch(n){if(n instanceof Fs)qn.warn(n.message);else{const s=mn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qn.warn(s.message)}}}function nd(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=1024,k0=30*24*60*60*1e3;class M0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new P0(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Fl();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const i=new Date(r.date).valueOf();return Date.now()-i<=k0}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Fl(),{heartbeatsToSend:n,unsentEntries:s}=O0(this._heartbeatsCache.heartbeats),r=xi(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Fl(){return new Date().toISOString().substring(0,10)}function O0(t,e=N0){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Ul(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Ul(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class P0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bw()?Iw().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await D0(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return $l(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return $l(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ul(t){return xi(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(t){Ni(new Tr("platform-logger",e=>new Ww(e),"PRIVATE")),Ni(new Tr("heartbeat",e=>new M0(e),"PRIVATE")),fs($a,Ll,t),fs($a,Ll,"esm2017"),fs("fire-js","")}L0("");var $0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N,Uc=Uc||{},z=$0||self;function ki(){}function co(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Or(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function F0(t){return Object.prototype.hasOwnProperty.call(t,Zo)&&t[Zo]||(t[Zo]=++U0)}var Zo="closure_uid_"+(1e9*Math.random()>>>0),U0=0;function V0(t,e,n){return t.call.apply(t.bind,arguments)}function B0(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,s),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Qe(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Qe=V0:Qe=B0,Qe.apply(null,arguments)}function ri(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function $e(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(s,r,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(s,o)}}function Tn(){this.s=this.s,this.o=this.o}var j0=0;Tn.prototype.s=!1;Tn.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),j0!=0)&&F0(this)};Tn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sd=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Vc(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function Vl(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(co(s)){const r=t.length||0,i=s.length||0;t.length=r+i;for(let o=0;o<i;o++)t[r+o]=s[o]}else t.push(s)}}function Je(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Je.prototype.h=function(){this.defaultPrevented=!0};var q0=function(){if(!z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{z.addEventListener("test",ki,e),z.removeEventListener("test",ki,e)}catch{}return t}();function Mi(t){return/^[\s\xa0]*$/.test(t)}var Bl=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ea(t,e){return t<e?-1:t>e?1:0}function uo(){var t=z.navigator;return t&&(t=t.userAgent)?t:""}function Lt(t){return uo().indexOf(t)!=-1}function Bc(t){return Bc[" "](t),t}Bc[" "]=ki;function rd(t,e,n){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=n(e)}var z0=Lt("Opera"),Ts=Lt("Trident")||Lt("MSIE"),id=Lt("Edge"),Va=id||Ts,od=Lt("Gecko")&&!(uo().toLowerCase().indexOf("webkit")!=-1&&!Lt("Edge"))&&!(Lt("Trident")||Lt("MSIE"))&&!Lt("Edge"),H0=uo().toLowerCase().indexOf("webkit")!=-1&&!Lt("Edge");function ad(){var t=z.document;return t?t.documentMode:void 0}var Oi;e:{var ta="",na=function(){var t=uo();if(od)return/rv:([^\);]+)(\)|;)/.exec(t);if(id)return/Edge\/([\d\.]+)/.exec(t);if(Ts)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(H0)return/WebKit\/(\S+)/.exec(t);if(z0)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(na&&(ta=na?na[1]:""),Ts){var sa=ad();if(sa!=null&&sa>parseFloat(ta)){Oi=String(sa);break e}}Oi=ta}var K0={};function G0(){return rd(K0,9,function(){let t=0;const e=Bl(String(Oi)).split("."),n=Bl("9").split("."),s=Math.max(e.length,n.length);for(let o=0;t==0&&o<s;o++){var r=e[o]||"",i=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r[0].length==0&&i[0].length==0)break;t=ea(r[1].length==0?0:parseInt(r[1],10),i[1].length==0?0:parseInt(i[1],10))||ea(r[2].length==0,i[2].length==0)||ea(r[2],i[2]),r=r[3],i=i[3]}while(t==0)}return 0<=t})}var Ba;if(z.document&&Ts){var jl=ad();Ba=jl||parseInt(Oi,10)||void 0}else Ba=void 0;var W0=Ba;function br(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(od){e:{try{Bc(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Q0[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&br.$.h.call(this)}}$e(br,Je);var Q0={2:"touch",3:"pen",4:"mouse"};br.prototype.h=function(){br.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Pr="closure_listenable_"+(1e6*Math.random()|0),J0=0;function X0(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=r,this.key=++J0,this.fa=this.ia=!1}function lo(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function jc(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function cd(t){const e={};for(const n in t)e[n]=t[n];return e}const ql="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ud(t,e){let n,s;for(let r=1;r<arguments.length;r++){s=arguments[r];for(n in s)t[n]=s[n];for(let i=0;i<ql.length;i++)n=ql[i],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function ho(t){this.src=t,this.g={},this.h=0}ho.prototype.add=function(t,e,n,s,r){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=qa(t,e,s,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new X0(e,this.src,i,!!s,r),e.ia=n,t.push(e)),e};function ja(t,e){var n=e.type;if(n in t.g){var s=t.g[n],r=sd(s,e),i;(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(lo(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function qa(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==s)return r}return-1}var qc="closure_lm_"+(1e6*Math.random()|0),ra={};function ld(t,e,n,s,r){if(s&&s.once)return fd(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)ld(t,e[i],n,s,r);return null}return n=Kc(n),t&&t[Pr]?t.O(e,n,Or(s)?!!s.capture:!!s,r):hd(t,e,n,!1,s,r)}function hd(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=Or(r)?!!r.capture:!!r,a=Hc(t);if(a||(t[qc]=a=new ho(t)),n=a.add(e,n,s,o,i),n.proxy)return n;if(s=Y0(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)q0||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(pd(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Y0(){function t(n){return e.call(t.src,t.listener,n)}const e=Z0;return t}function fd(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)fd(t,e[i],n,s,r);return null}return n=Kc(n),t&&t[Pr]?t.P(e,n,Or(s)?!!s.capture:!!s,r):hd(t,e,n,!0,s,r)}function dd(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)dd(t,e[i],n,s,r);else s=Or(s)?!!s.capture:!!s,n=Kc(n),t&&t[Pr]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=qa(i,n,s,r),-1<n&&(lo(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Hc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=qa(e,n,s,r)),(n=-1<t?e[t]:null)&&zc(n))}function zc(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Pr])ja(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(pd(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=Hc(e))?(ja(n,t),n.h==0&&(n.src=null,e[qc]=null)):lo(t)}}}function pd(t){return t in ra?ra[t]:ra[t]="on"+t}function Z0(t,e){if(t.fa)t=!0;else{e=new br(e,this);var n=t.listener,s=t.la||t.src;t.ia&&zc(t),t=n.call(s,e)}return t}function Hc(t){return t=t[qc],t instanceof ho?t:null}var ia="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kc(t){return typeof t=="function"?t:(t[ia]||(t[ia]=function(e){return t.handleEvent(e)}),t[ia])}function Le(){Tn.call(this),this.i=new ho(this),this.S=this,this.J=null}$e(Le,Tn);Le.prototype[Pr]=!0;Le.prototype.removeEventListener=function(t,e,n,s){dd(this,t,e,n,s)};function Ve(t,e){var n,s=t.J;if(s)for(n=[];s;s=s.J)n.push(s);if(t=t.S,s=e.type||e,typeof e=="string")e=new Je(e,t);else if(e instanceof Je)e.target=e.target||t;else{var r=e;e=new Je(s,t),ud(e,r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=ii(o,s,!0,e)&&r}if(o=e.g=t,r=ii(o,s,!0,e)&&r,r=ii(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)o=e.g=n[i],r=ii(o,s,!1,e)&&r}Le.prototype.N=function(){if(Le.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)lo(n[s]);delete t.g[e],t.h--}}this.J=null};Le.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};Le.prototype.P=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function ii(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ja(t.i,o),r=a.call(c,s)!==!1&&r}}return r&&!s.defaultPrevented}var Gc=z.JSON.stringify;function e1(){var t=yd;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class t1{constructor(){this.h=this.g=null}add(e,n){const s=md.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var md=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new n1,t=>t.reset());class n1{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function s1(t){z.setTimeout(()=>{throw t},0)}function gd(t,e){za||r1(),Ha||(za(),Ha=!0),yd.add(t,e)}var za;function r1(){var t=z.Promise.resolve(void 0);za=function(){t.then(i1)}}var Ha=!1,yd=new t1;function i1(){for(var t;t=e1();){try{t.h.call(t.g)}catch(n){s1(n)}var e=md;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ha=!1}function fo(t,e){Le.call(this),this.h=t||1,this.g=e||z,this.j=Qe(this.qb,this),this.l=Date.now()}$e(fo,Le);N=fo.prototype;N.ga=!1;N.T=null;N.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ve(this,"tick"),this.ga&&(Wc(this),this.start()))}};N.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Wc(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}N.N=function(){fo.$.N.call(this),Wc(this),delete this.g};function Qc(t,e,n){if(typeof t=="function")n&&(t=Qe(t,n));else if(t&&typeof t.handleEvent=="function")t=Qe(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:z.setTimeout(t,e||0)}function vd(t){t.g=Qc(()=>{t.g=null,t.i&&(t.i=!1,vd(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class o1 extends Tn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vd(this)}N(){super.N(),this.g&&(z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(t){Tn.call(this),this.h=t,this.g={}}$e(Ir,Tn);var zl=[];function wd(t,e,n,s){Array.isArray(n)||(n&&(zl[0]=n.toString()),n=zl);for(var r=0;r<n.length;r++){var i=ld(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Ed(t){jc(t.g,function(e,n){this.g.hasOwnProperty(n)&&zc(e)},t),t.g={}}Ir.prototype.N=function(){Ir.$.N.call(this),Ed(this)};Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function po(){this.g=!0}po.prototype.Ea=function(){this.g=!1};function a1(t,e,n,s,r,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&h[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function c1(t,e,n,s,r,i,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+`
`+n+`
`+i+" "+o})}function os(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+l1(t,n)+(s?" "+s:"")})}function u1(t,e){t.info(function(){return"TIMEOUT: "+e})}po.prototype.info=function(){};function l1(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Gc(n)}catch{return e}}var Gn={},Hl=null;function mo(){return Hl=Hl||new Le}Gn.Ta="serverreachability";function _d(t){Je.call(this,Gn.Ta,t)}$e(_d,Je);function Cr(t){const e=mo();Ve(e,new _d(e))}Gn.STAT_EVENT="statevent";function Td(t,e){Je.call(this,Gn.STAT_EVENT,t),this.stat=e}$e(Td,Je);function st(t){const e=mo();Ve(e,new Td(e,t))}Gn.Ua="timingevent";function Sd(t,e){Je.call(this,Gn.Ua,t),this.size=e}$e(Sd,Je);function Lr(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return z.setTimeout(function(){t()},e)}var go={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},bd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Jc(){}Jc.prototype.h=null;function Kl(t){return t.h||(t.h=t.i())}function Id(){}var $r={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Xc(){Je.call(this,"d")}$e(Xc,Je);function Yc(){Je.call(this,"c")}$e(Yc,Je);var Ka;function yo(){}$e(yo,Jc);yo.prototype.g=function(){return new XMLHttpRequest};yo.prototype.i=function(){return{}};Ka=new yo;function Fr(t,e,n,s){this.l=t,this.j=e,this.m=n,this.W=s||1,this.U=new Ir(this),this.P=h1,t=Va?125:void 0,this.V=new fo(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Cd}function Cd(){this.i=null,this.g="",this.h=!1}var h1=45e3,Ga={},Pi={};N=Fr.prototype;N.setTimeout=function(t){this.P=t};function Wa(t,e,n){t.L=1,t.v=wo(Zt(e)),t.s=n,t.S=!0,Ad(t,null)}function Ad(t,e){t.G=Date.now(),Ur(t),t.A=Zt(t.v);var n=t.A,s=t.W;Array.isArray(s)||(s=[String(s)]),Pd(n.i,"t",s),t.C=0,n=t.l.I,t.h=new Cd,t.g=np(t.l,n?e:null,!t.s),0<t.O&&(t.M=new o1(Qe(t.Pa,t,t.g),t.O)),wd(t.U,t.g,"readystatechange",t.nb),e=t.I?cd(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Cr(),a1(t.j,t.u,t.A,t.m,t.W,t.s)}N.nb=function(t){t=t.target;const e=this.M;e&&Gt(t)==3?e.l():this.Pa(t)};N.Pa=function(t){try{if(t==this.g)e:{const l=Gt(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>l)&&(l!=3||Va||this.g&&(this.h.h||this.g.ja()||Jl(this.g)))){this.J||l!=4||e==7||(e==8||0>=h?Cr(3):Cr(2)),vo(this);var n=this.g.da();this.aa=n;t:if(Rd(this)){var s=Jl(this.g);t="";var r=s.length,i=Gt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){On(this),cr(this);var o="";break t}this.h.i=new z.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,c1(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.ba&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Mi(a)){var u=a;break t}}u=null}if(n=u)os(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qa(this,n);else{this.i=!1,this.o=3,st(12),On(this),cr(this);break e}}this.S?(xd(this,l,o),Va&&this.i&&l==3&&(wd(this.U,this.V,"tick",this.mb),this.V.start())):(os(this.j,this.m,o,null),Qa(this,o)),l==4&&On(this),this.i&&!this.J&&(l==4?Yd(this.l,this):(this.i=!1,Ur(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,st(12)):(this.o=0,st(13)),On(this),cr(this)}}}catch{}finally{}};function Rd(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function xd(t,e,n){let s=!0,r;for(;!t.J&&t.C<n.length;)if(r=f1(t,n),r==Pi){e==4&&(t.o=4,st(14),s=!1),os(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Ga){t.o=4,st(15),os(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else os(t.j,t.m,r,null),Qa(t,r);Rd(t)&&r!=Pi&&r!=Ga&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,st(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.ca&&(t.ca=!0,e=t.l,e.g==t&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),iu(e),e.L=!0,st(11))):(os(t.j,t.m,n,"[Invalid Chunked Response]"),On(t),cr(t))}N.mb=function(){if(this.g){var t=Gt(this.g),e=this.g.ja();this.C<e.length&&(vo(this),xd(this,t,e),this.i&&t!=4&&Ur(this))}};function f1(t,e){var n=t.C,s=e.indexOf(`
`,n);return s==-1?Pi:(n=Number(e.substring(n,s)),isNaN(n)?Ga:(s+=1,s+n>e.length?Pi:(e=e.substr(s,n),t.C=s+n,e)))}N.cancel=function(){this.J=!0,On(this)};function Ur(t){t.Y=Date.now()+t.P,Dd(t,t.P)}function Dd(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Lr(Qe(t.lb,t),e)}function vo(t){t.B&&(z.clearTimeout(t.B),t.B=null)}N.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(u1(this.j,this.A),this.L!=2&&(Cr(),st(17)),On(this),this.o=2,cr(this)):Dd(this,this.Y-t)};function cr(t){t.l.H==0||t.J||Yd(t.l,t)}function On(t){vo(t);var e=t.M;e&&typeof e.ra=="function"&&e.ra(),t.M=null,Wc(t.V),Ed(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ra())}function Qa(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Ja(n.h,t))){if(!t.K&&Ja(n.h,t)&&n.H==3){try{var s=n.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var r=s;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Fi(n),To(n);else break e;ru(n),st(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.M&&n.A==0&&!n.v&&(n.v=Lr(Qe(n.ib,n),6e3));if(1>=Fd(n.h)&&n.na){try{n.na()}catch{}n.na=void 0}}else Pn(n,11)}else if((t.K||n.g==t)&&Fi(n),!Mi(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let u=r[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.J=u[1],n.oa=u[2];const l=u[3];l!=null&&(n.qa=l,n.j.info("VER="+n.qa));const h=u[4];h!=null&&(n.Ga=h,n.j.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(s=1.5*d,n.K=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const m=t.g;if(m){const v=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var i=s.h;i.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Zc(i,i.h),i.h=null))}if(s.F){const w=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(s.Da=w,ve(s.G,s.F,w))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-t.G,n.j.info("Handshake RTT: "+n.S+"ms")),s=n;var o=t;if(s.wa=tp(s,s.I?s.oa:null,s.Y),o.K){Ud(s.h,o);var a=o,c=s.K;c&&a.setTimeout(c),a.B&&(vo(a),Ur(a)),s.g=o}else Jd(s);0<n.i.length&&So(n)}else u[0]!="stop"&&u[0]!="close"||Pn(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Pn(n,7):su(n):u[0]!="noop"&&n.l&&n.l.Aa(u),n.A=0)}}Cr(4)}catch{}}function d1(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(co(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function p1(t){if(t.sa&&typeof t.sa=="function")return t.sa();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(co(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function Nd(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(co(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=p1(t),s=d1(t),r=s.length,i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}var kd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function m1(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Bn(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Bn){this.h=e!==void 0?e:t.h,Li(this,t.j),this.s=t.s,this.g=t.g,$i(this,t.m),this.l=t.l,e=t.i;var n=new Ar;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Gl(this,n),this.o=t.o}else t&&(n=String(t).match(kd))?(this.h=!!e,Li(this,n[1]||"",!0),this.s=Zs(n[2]||""),this.g=Zs(n[3]||"",!0),$i(this,n[4]),this.l=Zs(n[5]||"",!0),Gl(this,n[6]||"",!0),this.o=Zs(n[7]||"")):(this.h=!!e,this.i=new Ar(null,this.h))}Bn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(er(e,Wl,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(er(e,Wl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(er(n,n.charAt(0)=="/"?v1:y1,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",er(n,E1)),t.join("")};function Zt(t){return new Bn(t)}function Li(t,e,n){t.j=n?Zs(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function $i(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Gl(t,e,n){e instanceof Ar?(t.i=e,_1(t.i,t.h)):(n||(e=er(e,w1)),t.i=new Ar(e,t.h))}function ve(t,e,n){t.i.set(e,n)}function wo(t){return ve(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Zs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function er(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,g1),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function g1(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Wl=/[#\/\?@]/g,y1=/[#\?:]/g,v1=/[#\?]/g,w1=/[#\?@]/g,E1=/#/g;function Ar(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Sn(t){t.g||(t.g=new Map,t.h=0,t.i&&m1(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}N=Ar.prototype;N.add=function(t,e){Sn(this),this.i=null,t=Us(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Md(t,e){Sn(t),e=Us(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Od(t,e){return Sn(t),e=Us(t,e),t.g.has(e)}N.forEach=function(t,e){Sn(this),this.g.forEach(function(n,s){n.forEach(function(r){t.call(e,r,s,this)},this)},this)};N.sa=function(){Sn(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const r=t[s];for(let i=0;i<r.length;i++)n.push(e[s])}return n};N.Z=function(t){Sn(this);let e=[];if(typeof t=="string")Od(this,t)&&(e=e.concat(this.g.get(Us(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};N.set=function(t,e){return Sn(this),this.i=null,t=Us(this,t),Od(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};N.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Pd(t,e,n){Md(t,e),0<n.length&&(t.i=null,t.g.set(Us(t,e),Vc(n)),t.h+=n.length)}N.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const i=encodeURIComponent(String(s)),o=this.Z(s);for(s=0;s<o.length;s++){var r=i;o[s]!==""&&(r+="="+encodeURIComponent(String(o[s]))),t.push(r)}}return this.i=t.join("&")};function Us(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function _1(t,e){e&&!t.j&&(Sn(t),t.i=null,t.g.forEach(function(n,s){var r=s.toLowerCase();s!=r&&(Md(this,s),Pd(this,r,n))},t)),t.j=e}var T1=class{constructor(t,e){this.h=t,this.g=e}};function Ld(t){this.l=t||S1,z.PerformanceNavigationTiming?(t=z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(z.g&&z.g.Ka&&z.g.Ka()&&z.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var S1=10;function $d(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Fd(t){return t.h?1:t.g?t.g.size:0}function Ja(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Zc(t,e){t.g?t.g.add(e):t.h=e}function Ud(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Ld.prototype.cancel=function(){if(this.i=Vd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Vd(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Vc(t.i)}function eu(){}eu.prototype.stringify=function(t){return z.JSON.stringify(t,void 0)};eu.prototype.parse=function(t){return z.JSON.parse(t,void 0)};function b1(){this.g=new eu}function I1(t,e,n){const s=n||"";try{Nd(t,function(r,i){let o=r;Or(r)&&(o=Gc(r)),e.push(s+i+"="+encodeURIComponent(o))})}catch(r){throw e.push(s+"type="+encodeURIComponent("_badmap")),r}}function C1(t,e){const n=new po;if(z.Image){const s=new Image;s.onload=ri(oi,n,s,"TestLoadImage: loaded",!0,e),s.onerror=ri(oi,n,s,"TestLoadImage: error",!1,e),s.onabort=ri(oi,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=ri(oi,n,s,"TestLoadImage: timeout",!1,e),z.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function oi(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch{}}function Vr(t){this.l=t.fc||null,this.j=t.ob||!1}$e(Vr,Jc);Vr.prototype.g=function(){return new Eo(this.l,this.j)};Vr.prototype.i=function(t){return function(){return t}}({});function Eo(t,e){Le.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=tu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$e(Eo,Le);var tu=0;N=Eo.prototype;N.open=function(t,e){if(this.readyState!=tu)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Rr(this)};N.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=tu};N.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bd(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Bd(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}N.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Br(this):Rr(this),this.readyState==3&&Bd(this)}};N.Za=function(t){this.g&&(this.response=this.responseText=t,Br(this))};N.Ya=function(t){this.g&&(this.response=t,Br(this))};N.ka=function(){this.g&&Br(this)};function Br(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Rr(t)}N.setRequestHeader=function(t,e){this.v.append(t,e)};N.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};N.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Rr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var A1=z.JSON.parse;function be(t){Le.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=jd,this.L=this.M=!1}$e(be,Le);var jd="",R1=/^https?$/i,x1=["POST","PUT"];N=be.prototype;N.Oa=function(t){this.M=t};N.ha=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ka.g(),this.C=this.u?Kl(this.u):Kl(Ka),this.g.onreadystatechange=Qe(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){Ql(this,i);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const i of s.keys())n.set(i,s.get(i));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),r=z.FormData&&t instanceof z.FormData,!(0<=sd(x1,e))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Hd(this),0<this.B&&((this.L=D1(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qe(this.ua,this)):this.A=Qc(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Ql(this,i)}};function D1(t){return Ts&&G0()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}N.ua=function(){typeof Uc<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ve(this,"timeout"),this.abort(8))};function Ql(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,qd(t),_o(t)}function qd(t){t.F||(t.F=!0,Ve(t,"complete"),Ve(t,"error"))}N.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ve(this,"complete"),Ve(this,"abort"),_o(this))};N.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_o(this,!0)),be.$.N.call(this)};N.La=function(){this.s||(this.G||this.v||this.l?zd(this):this.kb())};N.kb=function(){zd(this)};function zd(t){if(t.h&&typeof Uc<"u"&&(!t.C[1]||Gt(t)!=4||t.da()!=2)){if(t.v&&Gt(t)==4)Qc(t.La,0,t);else if(Ve(t,"readystatechange"),Gt(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=a===0){var r=String(t.I).match(kd)[1]||null;if(!r&&z.self&&z.self.location){var i=z.self.location.protocol;r=i.substr(0,i.length-1)}s=!R1.test(r?r.toLowerCase():"")}n=s}if(n)Ve(t,"complete"),Ve(t,"success");else{t.m=6;try{var o=2<Gt(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",qd(t)}}finally{_o(t)}}}}function _o(t,e){if(t.g){Hd(t);const n=t.g,s=t.C[0]?ki:null;t.g=null,t.C=null,e||Ve(t,"ready");try{n.onreadystatechange=s}catch{}}}function Hd(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(z.clearTimeout(t.A),t.A=null)}function Gt(t){return t.g?t.g.readyState:0}N.da=function(){try{return 2<Gt(this)?this.g.status:-1}catch{return-1}};N.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};N.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),A1(e)}};function Jl(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case jd:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}N.Ia=function(){return this.m};N.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Kd(t){let e="";return jc(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function nu(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Kd(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ve(t,e,n))}function Qs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Gd(t){this.Ga=0,this.i=[],this.j=new po,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Qs("failFast",!1,t),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Qs("baseRetryDelayMs",5e3,t),this.hb=Qs("retryDelaySeedMs",1e4,t),this.eb=Qs("forwardChannelMaxRetries",2,t),this.xa=Qs("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.K=void 0,this.I=t&&t.supportsCrossDomainXhr||!1,this.J="",this.h=new Ld(t&&t.concurrentRequestLimit),this.Ja=new b1,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.j.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}N=Gd.prototype;N.qa=8;N.H=1;function su(t){if(Wd(t),t.H==3){var e=t.W++,n=Zt(t.G);ve(n,"SID",t.J),ve(n,"RID",e),ve(n,"TYPE","terminate"),jr(t,n),e=new Fr(t,t.j,e,void 0),e.L=2,e.v=wo(Zt(n)),n=!1,z.navigator&&z.navigator.sendBeacon&&(n=z.navigator.sendBeacon(e.v.toString(),"")),!n&&z.Image&&(new Image().src=e.v,n=!0),n||(e.g=np(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ur(e)}ep(t)}function To(t){t.g&&(iu(t),t.g.cancel(),t.g=null)}function Wd(t){To(t),t.u&&(z.clearTimeout(t.u),t.u=null),Fi(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&z.clearTimeout(t.m),t.m=null)}function So(t){$d(t.h)||t.m||(t.m=!0,gd(t.Na,t),t.C=0)}function N1(t,e){return Fd(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.F.concat(t.i),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Lr(Qe(t.Na,t,e),Zd(t,t.C)),t.C++,!0)}N.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new Fr(this,this.j,t,void 0);let i=this.s;if(this.U&&(i?(i=cd(i),ud(i,this.U)):i=this.U),this.o!==null||this.O||(r.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var s=this.i[n];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Qd(this,r,e),n=Zt(this.G),ve(n,"RID",t),ve(n,"CVER",22),this.F&&ve(n,"X-HTTP-Session-Id",this.F),jr(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(Kd(i)))+"&"+e:this.o&&nu(n,this.o,i)),Zc(this.h,r),this.bb&&ve(n,"TYPE","init"),this.P?(ve(n,"$req",e),ve(n,"SID","null"),r.ba=!0,Wa(r,n,null)):Wa(r,n,e),this.H=2}}else this.H==3&&(t?Xl(this,t):this.i.length==0||$d(this.h)||Xl(this))};function Xl(t,e){var n;e?n=e.m:n=t.W++;const s=Zt(t.G);ve(s,"SID",t.J),ve(s,"RID",n),ve(s,"AID",t.V),jr(t,s),t.o&&t.s&&nu(s,t.o,t.s),n=new Fr(t,t.j,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.i=e.F.concat(t.i)),e=Qd(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Zc(t.h,n),Wa(n,s,e)}function jr(t,e){t.ma&&jc(t.ma,function(n,s){ve(e,s,n)}),t.l&&Nd({},function(n,s){ve(e,s,n)})}function Qd(t,e,n){n=Math.min(t.i.length,n);var s=t.l?Qe(t.l.Va,t.l,t):null;e:{var r=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=r[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<n;c++){let u=r[c].h;const l=r[c].g;if(u-=i,0>u)i=Math.max(0,r[c].h-100),a=!1;else try{I1(l,o,"req"+u+"_")}catch{s&&s(l)}}if(a){s=o.join("&");break e}}}return t=t.i.splice(0,n),e.F=t,s}function Jd(t){t.g||t.u||(t.ba=1,gd(t.Ma,t),t.A=0)}function ru(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Lr(Qe(t.Ma,t),Zd(t,t.A)),t.A++,!0)}N.Ma=function(){if(this.u=null,Xd(this),this.ca&&!(this.L||this.g==null||0>=this.S)){var t=2*this.S;this.j.info("BP detection timer enabled: "+t),this.B=Lr(Qe(this.jb,this),t)}};N.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,st(10),To(this),Xd(this))};function iu(t){t.B!=null&&(z.clearTimeout(t.B),t.B=null)}function Xd(t){t.g=new Fr(t,t.j,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Zt(t.wa);ve(e,"RID","rpc"),ve(e,"SID",t.J),ve(e,"CI",t.M?"0":"1"),ve(e,"AID",t.V),ve(e,"TYPE","xmlhttp"),jr(t,e),t.o&&t.s&&nu(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.oa,n.L=1,n.v=wo(Zt(e)),n.s=null,n.S=!0,Ad(n,t)}N.ib=function(){this.v!=null&&(this.v=null,To(this),ru(this),st(19))};function Fi(t){t.v!=null&&(z.clearTimeout(t.v),t.v=null)}function Yd(t,e){var n=null;if(t.g==e){Fi(t),iu(t),t.g=null;var s=2}else if(Ja(t.h,e))n=e.F,Ud(t.h,e),s=1;else return;if(t.H!=0){if(t.ta=e.aa,e.i)if(s==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;s=mo(),Ve(s,new Sd(s,n)),So(t)}else Jd(t);else if(r=e.o,r==3||r==0&&0<t.ta||!(s==1&&N1(t,e)||s==2&&ru(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:Pn(t,5);break;case 4:Pn(t,10);break;case 3:Pn(t,6);break;default:Pn(t,2)}}}function Zd(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.l||(n*=2),n*e}function Pn(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var s=Qe(t.pb,t);n||(n=new Bn("//www.google.com/images/cleardot.gif"),z.location&&z.location.protocol=="http"||Li(n,"https"),wo(n)),C1(n.toString(),s)}else st(2);t.H=0,t.l&&t.l.za(e),ep(t),Wd(t)}N.pb=function(t){t?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function ep(t){if(t.H=0,t.pa=[],t.l){const e=Vd(t.h);(e.length!=0||t.i.length!=0)&&(Vl(t.pa,e),Vl(t.pa,t.i),t.h.i.length=0,Vc(t.i),t.i.length=0),t.l.ya()}}function tp(t,e,n){var s=n instanceof Bn?Zt(n):new Bn(n,void 0);if(s.g!="")e&&(s.g=e+"."+s.g),$i(s,s.m);else{var r=z.location;s=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var i=new Bn(null,void 0);s&&Li(i,s),e&&(i.g=e),r&&$i(i,r),n&&(i.l=n),s=i}return n=t.F,e=t.Da,n&&e&&ve(s,n,e),ve(s,"VER",t.qa),jr(t,s),s}function np(t,e,n){if(e&&!t.I)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new be(new Vr({ob:!0})):new be(t.va),e.Oa(t.I),e}function sp(){}N=sp.prototype;N.Ba=function(){};N.Aa=function(){};N.za=function(){};N.ya=function(){};N.Va=function(){};function Ui(){if(Ts&&!(10<=Number(W0)))throw Error("Environmental error: no available transport.")}Ui.prototype.g=function(t,e){return new ht(t,e)};function ht(t,e){Le.call(this),this.g=new Gd(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Mi(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Mi(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Vs(this)}$e(ht,Le);ht.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var t=this.g,e=this.l,n=this.h||void 0;st(0),t.Y=e,t.ma=n||{},t.M=t.aa,t.G=tp(t,null,t.Y),So(t)};ht.prototype.close=function(){su(this.g)};ht.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Gc(t),t=n);e.i.push(new T1(e.fb++,t)),e.H==3&&So(e)};ht.prototype.N=function(){this.g.l=null,delete this.j,su(this.g),delete this.g,ht.$.N.call(this)};function rp(t){Xc.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}$e(rp,Xc);function ip(){Yc.call(this),this.status=1}$e(ip,Yc);function Vs(t){this.g=t}$e(Vs,sp);Vs.prototype.Ba=function(){Ve(this.g,"a")};Vs.prototype.Aa=function(t){Ve(this.g,new rp(t))};Vs.prototype.za=function(t){Ve(this.g,new ip)};Vs.prototype.ya=function(){Ve(this.g,"b")};function k1(){this.blockSize=-1}function xt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}$e(xt,k1);xt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function oa(t,e,n){n||(n=0);var s=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)s[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)s[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var i=t.g[3],o=e+(i^n&(r^i))+s[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(r^e&(n^r))+s[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=r+(n^i&(e^n))+s[2]+606105819&4294967295,r=i+(o<<17&4294967295|o>>>15),o=n+(e^r&(i^e))+s[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(i^n&(r^i))+s[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(r^e&(n^r))+s[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=r+(n^i&(e^n))+s[6]+2821735955&4294967295,r=i+(o<<17&4294967295|o>>>15),o=n+(e^r&(i^e))+s[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(i^n&(r^i))+s[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(r^e&(n^r))+s[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=r+(n^i&(e^n))+s[10]+4294925233&4294967295,r=i+(o<<17&4294967295|o>>>15),o=n+(e^r&(i^e))+s[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(i^n&(r^i))+s[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(r^e&(n^r))+s[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=r+(n^i&(e^n))+s[14]+2792965006&4294967295,r=i+(o<<17&4294967295|o>>>15),o=n+(e^r&(i^e))+s[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^i&(n^r))+s[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^r&(e^n))+s[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(i^e))+s[11]+643717713&4294967295,r=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(r^i))+s[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^i&(n^r))+s[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^r&(e^n))+s[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(i^e))+s[15]+3634488961&4294967295,r=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(r^i))+s[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^i&(n^r))+s[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^r&(e^n))+s[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(i^e))+s[3]+4107603335&4294967295,r=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(r^i))+s[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^i&(n^r))+s[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^r&(e^n))+s[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(i^e))+s[7]+1735328473&4294967295,r=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(r^i))+s[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^i)+s[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^r)+s[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=r+(i^e^n)+s[11]+1839030562&4294967295,r=i+(o<<16&4294967295|o>>>16),o=n+(r^i^e)+s[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^i)+s[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^r)+s[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=r+(i^e^n)+s[7]+4139469664&4294967295,r=i+(o<<16&4294967295|o>>>16),o=n+(r^i^e)+s[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^i)+s[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^r)+s[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=r+(i^e^n)+s[3]+3572445317&4294967295,r=i+(o<<16&4294967295|o>>>16),o=n+(r^i^e)+s[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^i)+s[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^r)+s[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=r+(i^e^n)+s[15]+530742520&4294967295,r=i+(o<<16&4294967295|o>>>16),o=n+(r^i^e)+s[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~i))+s[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~r))+s[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=r+(e^(i|~n))+s[14]+2878612391&4294967295,r=i+(o<<15&4294967295|o>>>17),o=n+(i^(r|~e))+s[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~i))+s[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~r))+s[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=r+(e^(i|~n))+s[10]+4293915773&4294967295,r=i+(o<<15&4294967295|o>>>17),o=n+(i^(r|~e))+s[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~i))+s[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~r))+s[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=r+(e^(i|~n))+s[6]+2734768916&4294967295,r=i+(o<<15&4294967295|o>>>17),o=n+(i^(r|~e))+s[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~i))+s[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~r))+s[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=r+(e^(i|~n))+s[2]+718787259&4294967295,r=i+(o<<15&4294967295|o>>>17),o=n+(i^(r|~e))+s[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+i&4294967295}xt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,s=this.m,r=this.h,i=0;i<e;){if(r==0)for(;i<=n;)oa(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(s[r++]=t.charCodeAt(i++),r==this.blockSize){oa(this,s),r=0;break}}else for(;i<e;)if(s[r++]=t[i++],r==this.blockSize){oa(this,s),r=0;break}}this.h=r,this.i+=e};xt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)t[n++]=this.g[e]>>>s&255;return t};function le(t,e){this.h=e;for(var n=[],s=!0,r=t.length-1;0<=r;r--){var i=t[r]|0;s&&i==e||(n[r]=i,s=!1)}this.g=n}var M1={};function ou(t){return-128<=t&&128>t?rd(M1,t,function(e){return new le([e|0],0>e?-1:0)}):new le([t|0],0>t?-1:0)}function $t(t){if(isNaN(t)||!isFinite(t))return ds;if(0>t)return Ue($t(-t));for(var e=[],n=1,s=0;t>=n;s++)e[s]=t/n|0,n*=Xa;return new le(e,0)}function op(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ue(op(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=$t(Math.pow(e,8)),s=ds,r=0;r<t.length;r+=8){var i=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+i),e);8>i?(i=$t(Math.pow(e,i)),s=s.R(i).add($t(o))):(s=s.R(n),s=s.add($t(o)))}return s}var Xa=4294967296,ds=ou(0),Ya=ou(1),Yl=ou(16777216);N=le.prototype;N.ea=function(){if(mt(this))return-Ue(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);t+=(0<=s?s:Xa+s)*e,e*=Xa}return t};N.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Wt(this))return"0";if(mt(this))return"-"+Ue(this).toString(t);for(var e=$t(Math.pow(t,6)),n=this,s="";;){var r=Bi(n,e).g;n=Vi(n,r.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Wt(n))return i+s;for(;6>i.length;)i="0"+i;s=i+s}};N.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Wt(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function mt(t){return t.h==-1}N.X=function(t){return t=Vi(this,t),mt(t)?-1:Wt(t)?0:1};function Ue(t){for(var e=t.g.length,n=[],s=0;s<e;s++)n[s]=~t.g[s];return new le(n,~t.h).add(Ya)}N.abs=function(){return mt(this)?Ue(this):this};N.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0,r=0;r<=e;r++){var i=s+(this.D(r)&65535)+(t.D(r)&65535),o=(i>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);s=o>>>16,i&=65535,o&=65535,n[r]=o<<16|i}return new le(n,n[n.length-1]&-2147483648?-1:0)};function Vi(t,e){return t.add(Ue(e))}N.R=function(t){if(Wt(this)||Wt(t))return ds;if(mt(this))return mt(t)?Ue(this).R(Ue(t)):Ue(Ue(this).R(t));if(mt(t))return Ue(this.R(Ue(t)));if(0>this.X(Yl)&&0>t.X(Yl))return $t(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var r=0;r<t.g.length;r++){var i=this.D(s)>>>16,o=this.D(s)&65535,a=t.D(r)>>>16,c=t.D(r)&65535;n[2*s+2*r]+=o*c,ai(n,2*s+2*r),n[2*s+2*r+1]+=i*c,ai(n,2*s+2*r+1),n[2*s+2*r+1]+=o*a,ai(n,2*s+2*r+1),n[2*s+2*r+2]+=i*a,ai(n,2*s+2*r+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new le(n,0)};function ai(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Js(t,e){this.g=t,this.h=e}function Bi(t,e){if(Wt(e))throw Error("division by zero");if(Wt(t))return new Js(ds,ds);if(mt(t))return e=Bi(Ue(t),e),new Js(Ue(e.g),Ue(e.h));if(mt(e))return e=Bi(t,Ue(e)),new Js(Ue(e.g),e.h);if(30<t.g.length){if(mt(t)||mt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ya,s=e;0>=s.X(t);)n=Zl(n),s=Zl(s);var r=ts(n,1),i=ts(s,1);for(s=ts(s,2),n=ts(n,2);!Wt(s);){var o=i.add(s);0>=o.X(t)&&(r=r.add(n),i=o),s=ts(s,1),n=ts(n,1)}return e=Vi(t,r.R(e)),new Js(r,e)}for(r=ds;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),s=Math.ceil(Math.log(n)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),i=$t(n),o=i.R(e);mt(o)||0<o.X(t);)n-=s,i=$t(n),o=i.R(e);Wt(i)&&(i=Ya),r=r.add(i),t=Vi(t,o)}return new Js(r,t)}N.gb=function(t){return Bi(this,t).h};N.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&t.D(s);return new le(n,this.h&t.h)};N.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|t.D(s);return new le(n,this.h|t.h)};N.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^t.D(s);return new le(n,this.h^t.h)};function Zl(t){for(var e=t.g.length+1,n=[],s=0;s<e;s++)n[s]=t.D(s)<<1|t.D(s-1)>>>31;return new le(n,t.h)}function ts(t,e){var n=e>>5;e%=32;for(var s=t.g.length-n,r=[],i=0;i<s;i++)r[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new le(r,t.h)}Ui.prototype.createWebChannel=Ui.prototype.g;ht.prototype.send=ht.prototype.u;ht.prototype.open=ht.prototype.m;ht.prototype.close=ht.prototype.close;go.NO_ERROR=0;go.TIMEOUT=8;go.HTTP_ERROR=6;bd.COMPLETE="complete";Id.EventType=$r;$r.OPEN="a";$r.CLOSE="b";$r.ERROR="c";$r.MESSAGE="d";Le.prototype.listen=Le.prototype.O;be.prototype.listenOnce=be.prototype.P;be.prototype.getLastError=be.prototype.Sa;be.prototype.getLastErrorCode=be.prototype.Ia;be.prototype.getStatus=be.prototype.da;be.prototype.getResponseJson=be.prototype.Wa;be.prototype.getResponseText=be.prototype.ja;be.prototype.send=be.prototype.ha;be.prototype.setWithCredentials=be.prototype.Oa;xt.prototype.digest=xt.prototype.l;xt.prototype.reset=xt.prototype.reset;xt.prototype.update=xt.prototype.j;le.prototype.add=le.prototype.add;le.prototype.multiply=le.prototype.R;le.prototype.modulo=le.prototype.gb;le.prototype.compare=le.prototype.X;le.prototype.toNumber=le.prototype.ea;le.prototype.toString=le.prototype.toString;le.prototype.getBits=le.prototype.D;le.fromNumber=$t;le.fromString=op;var O1=function(){return new Ui},P1=function(){return mo()},aa=go,L1=bd,$1=Gn,eh={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},F1=Vr,ci=Id,U1=be,V1=xt,ps=le;const th="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qe.UNAUTHENTICATED=new qe(null),qe.GOOGLE_CREDENTIALS=new qe("google-credentials-uid"),qe.FIRST_PARTY=new qe("first-party-uid"),qe.MOCK_USER=new qe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bs="9.21.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new Xf("@firebase/firestore");function nh(){return zn.logLevel}function L(t,...e){if(zn.logLevel<=ae.DEBUG){const n=e.map(au);zn.debug(`Firestore (${Bs}): ${t}`,...n)}}function en(t,...e){if(zn.logLevel<=ae.ERROR){const n=e.map(au);zn.error(`Firestore (${Bs}): ${t}`,...n)}}function Ss(t,...e){if(zn.logLevel<=ae.WARN){const n=e.map(au);zn.warn(`Firestore (${Bs}): ${t}`,...n)}}function au(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(t="Unexpected state"){const e=`FIRESTORE (${Bs}) INTERNAL ASSERTION FAILED: `+t;throw en(e),new Error(e)}function ye(t,e){t||q()}function W(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qe.UNAUTHENTICATED))}shutdown(){}}class j1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class q1{constructor(e){this.t=e,this.currentUser=qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new gn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new gn,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new gn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ye(typeof s.accessToken=="string"),new ap(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new qe(e)}}class z1{constructor(e,n,s){this.h=e,this.l=n,this.m=s,this.type="FirstParty",this.user=qe.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class H1{constructor(e,n,s){this.h=e,this.l=n,this.m=s}getToken(){return Promise.resolve(new z1(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class K1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G1{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const s=i=>{i.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.T;return this.T=i.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.I.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.I.getImmediate({optional:!0});i?r(i):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.T=n.token,new K1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=W1(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function ie(t,e){return t<e?-1:t>e?1:0}function bs(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new ke(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.timestamp=e}static fromTimestamp(e){return new K(e)}static min(){return new K(new ke(0,0))}static max(){return new K(new ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,s){n===void 0?n=0:n>e.length&&q(),s===void 0?s=e.length-n:s>e.length-n&&q(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),o=n.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class we extends xr{construct(e,n,s){return new we(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new B(T.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new we(n)}static emptyPath(){return new we([])}}const Q1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ge extends xr{construct(e,n,s){return new Ge(e,n,s)}static isValidIdentifier(e){return Q1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ge.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ge(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new B(T.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new B(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new B(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ge(n)}static emptyPath(){return new Ge([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.path=e}static fromPath(e){return new j(we.fromString(e))}static fromName(e){return new j(we.fromString(e).popFirst(5))}static empty(){return new j(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new j(new we(e.slice()))}}function J1(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=K.fromTimestamp(s===1e9?new ke(n+1,0):new ke(n,s));return new wn(r,j.empty(),e)}function X1(t){return new wn(t.readTime,t.key,-1)}class wn{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new wn(K.min(),j.empty(),-1)}static max(){return new wn(K.max(),j.empty(),-1)}}function Y1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=j.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qr(t){if(t.code!==T.FAILED_PRECONDITION||t.message!==Z1)throw t;L("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new b((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof b?n:b.resolve(n)}catch(n){return b.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):b.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):b.reject(n)}static resolve(e){return new b((n,s)=>{n(e)})}static reject(e){return new b((n,s)=>{s(e)})}static waitFor(e){return new b((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=b.resolve(!1);for(const s of e)n=n.next(r=>r?b.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new b((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(l=>{o[u]=l,++a,a===i&&s(o)},l=>r(l))}})}static doWhile(e,n){return new b((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function zr(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>n.writeSequenceNumber(s))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}cu.ct=-1;function bo(t){return t==null}function ji(t){return t===0&&1/t==-1/0}function tE(t){return typeof t=="number"&&Number.isInteger(t)&&!ji(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function up(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){this.comparator=e,this.root=n||Fe.EMPTY}insert(e,n){return new Te(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fe.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ui(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ui(this.root,e,this.comparator,!1)}getReverseIterator(){return new ui(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ui(this.root,e,this.comparator,!0)}}class ui{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fe{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Fe.RED,this.left=r??Fe.EMPTY,this.right=i??Fe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Fe(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Fe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Fe.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();const e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}}Fe.EMPTY=null,Fe.RED=!0,Fe.BLACK=!1;Fe.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(t,e,n,s,r){return this}insert(t,e,n){return new Fe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rh(this.data.getIterator())}getIteratorFrom(e){return new rh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class rh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new lt([])}unionWith(e){let n=new Xe(Ge.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new lt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bs(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new lp("Invalid base64 string: "+r):r}}(e);return new Ze(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const nE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function En(t){if(ye(!!t),typeof t=="string"){let e=0;const n=nE.exec(t);if(ye(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hn(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function lu(t){const e=t.mapValue.fields.__previous_value__;return uu(e)?lu(e):e}function Dr(t){const e=En(t.mapValue.fields.__local_write_time__.timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n,s,r,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c}}class Nr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Nr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Nr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Kn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uu(t)?4:rE(t)?9007199254740991:10:q()}function jt(t,e){if(t===e)return!0;const n=Kn(t);if(n!==Kn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Dr(t).isEqual(Dr(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=En(s.timestampValue),o=En(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Hn(s.bytesValue).isEqual(Hn(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return Re(s.geoPointValue.latitude)===Re(r.geoPointValue.latitude)&&Re(s.geoPointValue.longitude)===Re(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Re(s.integerValue)===Re(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=Re(s.doubleValue),o=Re(r.doubleValue);return i===o?ji(i)===ji(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return bs(t.arrayValue.values||[],e.arrayValue.values||[],jt);case 10:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(sh(i)!==sh(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!jt(i[a],o[a])))return!1;return!0}(t,e);default:return q()}}function kr(t,e){return(t.values||[]).find(n=>jt(n,e))!==void 0}function Is(t,e){if(t===e)return 0;const n=Kn(t),s=Kn(e);if(n!==s)return ie(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=Re(r.integerValue||r.doubleValue),a=Re(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return ih(t.timestampValue,e.timestampValue);case 4:return ih(Dr(t),Dr(e));case 5:return ie(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Hn(r),a=Hn(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const u=ie(o[c],a[c]);if(u!==0)return u}return ie(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=ie(Re(r.latitude),Re(i.latitude));return o!==0?o:ie(Re(r.longitude),Re(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,i){const o=r.values||[],a=i.values||[];for(let c=0;c<o.length&&c<a.length;++c){const u=Is(o[c],a[c]);if(u)return u}return ie(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,i){if(r===li.mapValue&&i===li.mapValue)return 0;if(r===li.mapValue)return 1;if(i===li.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),c=i.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let l=0;l<a.length&&l<u.length;++l){const h=ie(a[l],u[l]);if(h!==0)return h;const d=Is(o[a[l]],c[u[l]]);if(d!==0)return d}return ie(a.length,u.length)}(t.mapValue,e.mapValue);default:throw q()}}function ih(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=En(t),s=En(e),r=ie(n.seconds,s.seconds);return r!==0?r:ie(n.nanos,s.nanos)}function Cs(t){return Za(t)}function Za(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=En(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Hn(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,j.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(s){let r="[",i=!0;for(const o of s.values||[])i?i=!1:r+=",",r+=Za(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${Za(s.fields[a])}`;return i+"}"}(t.mapValue):q();var e,n}function ec(t){return!!t&&"integerValue"in t}function hu(t){return!!t&&"arrayValue"in t}function oh(t){return!!t&&"nullValue"in t}function ah(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wi(t){return!!t&&"mapValue"in t}function ur(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wn(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=ur(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ur(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.value=e}static empty(){return new at({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!wi(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ur(n)}setAll(e){let n=Ge.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=ur(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());wi(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];wi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Wn(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new at(ur(this.value))}}function hp(t){const e=[];return Wn(t.fields,(n,s)=>{const r=new Ge([n]);if(wi(s)){const i=hp(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new lt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new He(e,0,K.min(),K.min(),K.min(),at.empty(),0)}static newFoundDocument(e,n,s,r){return new He(e,1,n,K.min(),s,r,0)}static newNoDocument(e,n){return new He(e,2,n,K.min(),K.min(),at.empty(),0)}static newUnknownDocument(e,n){return new He(e,3,n,K.min(),K.min(),at.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=at.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=at.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof He&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new He(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){this.position=e,this.inclusive=n}}function ch(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=j.comparator(j.fromName(o.referenceValue),n.key):s=Is(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function uh(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n="asc"){this.field=e,this.dir=n}}function iE(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{}class De extends fp{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new aE(e,n,s):n==="array-contains"?new lE(e,s):n==="in"?new hE(e,s):n==="not-in"?new fE(e,s):n==="array-contains-any"?new dE(e,s):new De(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new cE(e,s):new uE(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Is(n,this.value)):n!==null&&Kn(this.value)===Kn(n)&&this.matchesComparison(Is(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class qt extends fp{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new qt(e,n)}matches(e){return dp(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function dp(t){return t.op==="and"}function pp(t){return oE(t)&&dp(t)}function oE(t){for(const e of t.filters)if(e instanceof qt)return!1;return!0}function tc(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+Cs(t.value);if(pp(t))return t.filters.map(e=>tc(e)).join(",");{const e=t.filters.map(n=>tc(n)).join(",");return`${t.op}(${e})`}}function mp(t,e){return t instanceof De?function(n,s){return s instanceof De&&n.op===s.op&&n.field.isEqual(s.field)&&jt(n.value,s.value)}(t,e):t instanceof qt?function(n,s){return s instanceof qt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((r,i,o)=>r&&mp(i,s.filters[o]),!0):!1}(t,e):void q()}function gp(t){return t instanceof De?function(e){return`${e.field.canonicalString()} ${e.op} ${Cs(e.value)}`}(t):t instanceof qt?function(e){return e.op.toString()+" {"+e.getFilters().map(gp).join(" ,")+"}"}(t):"Filter"}class aE extends De{constructor(e,n,s){super(e,n,s),this.key=j.fromName(s.referenceValue)}matches(e){const n=j.comparator(e.key,this.key);return this.matchesComparison(n)}}class cE extends De{constructor(e,n){super(e,"in",n),this.keys=yp("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uE extends De{constructor(e,n){super(e,"not-in",n),this.keys=yp("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yp(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>j.fromName(s.referenceValue))}class lE extends De{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hu(n)&&kr(n.arrayValue,this.value)}}class hE extends De{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&kr(this.value.arrayValue,n)}}class fE extends De{constructor(e,n){super(e,"not-in",n)}matches(e){if(kr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!kr(this.value.arrayValue,n)}}class dE extends De{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>kr(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ft=null}}function lh(t,e=null,n=[],s=[],r=null,i=null,o=null){return new pE(t,e,n,s,r,i,o)}function fu(t){const e=W(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>tc(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),bo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Cs(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Cs(s)).join(",")),e.ft=n}return e.ft}function du(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iE(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mp(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uh(t.startAt,e.startAt)&&uh(t.endAt,e.endAt)}function nc(t){return j.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.dt=null,this._t=null,this.startAt,this.endAt}}function mE(t,e,n,s,r,i,o,a){return new Io(t,e,n,s,r,i,o,a)}function Co(t){return new Io(t)}function hh(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gE(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function yE(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function vE(t){return t.collectionGroup!==null}function ms(t){const e=W(t);if(e.dt===null){e.dt=[];const n=yE(e),s=gE(e);if(n!==null&&s===null)n.isKeyField()||e.dt.push(new lr(n)),e.dt.push(new lr(Ge.keyField(),"asc"));else{let r=!1;for(const i of e.explicitOrderBy)e.dt.push(i),i.field.isKeyField()&&(r=!0);if(!r){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new lr(Ge.keyField(),i))}}}return e.dt}function tn(t){const e=W(t);if(!e._t)if(e.limitType==="F")e._t=lh(e.path,e.collectionGroup,ms(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of ms(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new lr(i.field,o))}const s=e.endAt?new qi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new qi(e.startAt.position,e.startAt.inclusive):null;e._t=lh(e.path,e.collectionGroup,n,e.filters,e.limit,s,r)}return e._t}function sc(t,e,n){return new Io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ao(t,e){return du(tn(t),tn(e))&&t.limitType===e.limitType}function vp(t){return`${fu(tn(t))}|lt:${t.limitType}`}function rc(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>gp(s)).join(", ")}]`),bo(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Cs(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Cs(s)).join(",")),`Target(${n})`}(tn(t))}; limitType=${t.limitType})`}function Ro(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):j.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of ms(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=ch(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,ms(n),s)||n.endAt&&!function(r,i,o){const a=ch(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,ms(n),s))}(t,e)}function wE(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wp(t){return(e,n)=>{let s=!1;for(const r of ms(t)){const i=EE(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function EE(t,e,n){const s=t.field.isKeyField()?j.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),c=o.data.field(r);return a!==null&&c!==null?Is(a,c):q()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Wn(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return up(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=new Te(j.comparator);function nn(){return _E}const Ep=new Te(j.comparator);function tr(...t){let e=Ep;for(const n of t)e=e.insert(n.key,n);return e}function _p(t){let e=Ep;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ln(){return hr()}function Tp(){return hr()}function hr(){return new js(t=>t.toString(),(t,e)=>t.isEqual(e))}const TE=new Te(j.comparator),SE=new Xe(j.comparator);function ee(...t){let e=SE;for(const n of t)e=e.add(n);return e}const bE=new Xe(ie);function IE(){return bE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ji(e)?"-0":e}}function bp(t){return{integerValue:""+t}}function CE(t,e){return tE(e)?bp(e):Sp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this._=void 0}}function AE(t,e,n){return t instanceof zi?function(s,r){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&uu(r)&&(r=lu(r)),r&&(i.fields.__previous_value__=r),{mapValue:i}}(n,e):t instanceof As?Cp(t,e):t instanceof Rs?Ap(t,e):function(s,r){const i=Ip(s,r),o=fh(i)+fh(s.wt);return ec(i)&&ec(s.wt)?bp(o):Sp(s.serializer,o)}(t,e)}function RE(t,e,n){return t instanceof As?Cp(t,e):t instanceof Rs?Ap(t,e):n}function Ip(t,e){return t instanceof Hi?ec(n=e)||function(s){return!!s&&"doubleValue"in s}(n)?e:{integerValue:0}:null;var n}class zi extends xo{}class As extends xo{constructor(e){super(),this.elements=e}}function Cp(t,e){const n=Rp(e);for(const s of t.elements)n.some(r=>jt(r,s))||n.push(s);return{arrayValue:{values:n}}}class Rs extends xo{constructor(e){super(),this.elements=e}}function Ap(t,e){let n=Rp(e);for(const s of t.elements)n=n.filter(r=>!jt(r,s));return{arrayValue:{values:n}}}class Hi extends xo{constructor(e,n){super(),this.serializer=e,this.wt=n}}function fh(t){return Re(t.integerValue||t.doubleValue)}function Rp(t){return hu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){this.field=e,this.transform=n}}function xE(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof As&&s instanceof As||n instanceof Rs&&s instanceof Rs?bs(n.elements,s.elements,jt):n instanceof Hi&&s instanceof Hi?jt(n.wt,s.wt):n instanceof zi&&s instanceof zi}(t.transform,e.transform)}class DE{constructor(e,n){this.version=e,this.transformResults=n}}class Ft{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ft}static exists(e){return new Ft(void 0,e)}static updateTime(e){return new Ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ei(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Do{}function Dp(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kp(t.key,Ft.none()):new Hr(t.key,t.data,Ft.none());{const n=t.data,s=at.empty();let r=new Xe(Ge.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new bn(t.key,s,new lt(r.toArray()),Ft.none())}}function NE(t,e,n){t instanceof Hr?function(s,r,i){const o=s.value.clone(),a=ph(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof bn?function(s,r,i){if(!Ei(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=ph(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(Np(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function fr(t,e,n,s){return t instanceof Hr?function(r,i,o,a){if(!Ei(r.precondition,i))return o;const c=r.value.clone(),u=mh(r.fieldTransforms,a,i);return c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof bn?function(r,i,o,a){if(!Ei(r.precondition,i))return o;const c=mh(r.fieldTransforms,a,i),u=i.data;return u.setAll(Np(r)),u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(l=>l.field))}(t,e,n,s):function(r,i,o){return Ei(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function kE(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Ip(s.transform,r||null);i!=null&&(n===null&&(n=at.empty()),n.set(s.field,i))}return n||null}function dh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&bs(n,s,(r,i)=>xE(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hr extends Do{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class bn extends Do{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Np(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function ph(t,e,n){const s=new Map;ye(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,RE(o,a,n[r]))}return s}function mh(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,AE(i,o,e))}return s}class kp extends Do{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ME extends Do{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&NE(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=fr(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=fr(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Tp();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const c=Dp(o,a);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(K.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,(n,s)=>dh(n,s))&&bs(this.baseMutations,e.baseMutations,(n,s)=>dh(n,s))}}class pu{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){ye(e.mutations.length===s.length);let r=TE;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new pu(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,ne;function $E(t){switch(t){default:return q();case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0}}function Mp(t){if(t===void 0)return en("GRPC error has no .code"),T.UNKNOWN;switch(t){case Ae.OK:return T.OK;case Ae.CANCELLED:return T.CANCELLED;case Ae.UNKNOWN:return T.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return T.INTERNAL;case Ae.UNAVAILABLE:return T.UNAVAILABLE;case Ae.UNAUTHENTICATED:return T.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case Ae.NOT_FOUND:return T.NOT_FOUND;case Ae.ALREADY_EXISTS:return T.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return T.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case Ae.ABORTED:return T.ABORTED;case Ae.OUT_OF_RANGE:return T.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return T.UNIMPLEMENTED;case Ae.DATA_LOSS:return T.DATA_LOSS;default:return q()}}(ne=Ae||(Ae={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return hi}static getOrCreateInstance(){return hi===null&&(hi=new mu),hi}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let hi=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=new ps([4294967295,4294967295],0);function gh(t){const e=FE().encode(t),n=new V1;return n.update(e),new Uint8Array(n.digest())}function yh(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ps([n,s],0),new ps([r,i],0)]}class gu{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new nr(`Invalid padding: ${n}`);if(s<0)throw new nr(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new nr(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new nr(`Invalid padding when bitmap length is 0: ${n}`);this.yt=8*e.length-n,this.It=ps.fromNumber(this.yt)}Tt(e,n,s){let r=e.add(n.multiply(ps.fromNumber(s)));return r.compare(UE)===1&&(r=new ps([r.getBits(0),r.getBits(1)],0)),r.modulo(this.It).toNumber()}Et(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}At(e){if(this.yt===0)return!1;const n=gh(e),[s,r]=yh(n);for(let i=0;i<this.hashCount;i++){const o=this.Tt(s,r,i);if(!this.Et(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new gu(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.yt===0)return;const n=gh(e),[s,r]=yh(n);for(let i=0;i<this.hashCount;i++){const o=this.Tt(s,r,i);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class nr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Kr.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new No(K.min(),r,new Te(ie),nn(),ee())}}class Kr{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Kr(s,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n,s,r){this.vt=e,this.removedTargetIds=n,this.key=s,this.Pt=r}}class Op{constructor(e,n){this.targetId=e,this.bt=n}}class Pp{constructor(e,n,s=Ze.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class vh{constructor(){this.Vt=0,this.St=Eh(),this.Dt=Ze.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return this.Vt!==0}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=ee(),n=ee(),s=ee();return this.St.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:q()}}),new Kr(this.Dt,this.Ct,e,n,s)}$t(){this.xt=!1,this.St=Eh()}Ft(e,n){this.xt=!0,this.St=this.St.insert(e,n)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class VE{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=nn(),this.jt=wh(),this.zt=new Te(ie)}Wt(e){for(const n of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(n,e.Pt):this.Jt(n,e.key,e.Pt);for(const n of e.removedTargetIds)this.Jt(n,e.key,e.Pt)}Yt(e){this.forEachTarget(e,n=>{const s=this.Xt(n);switch(e.state){case 0:this.Zt(n)&&s.Mt(e.resumeToken);break;case 1:s.qt(),s.Nt||s.$t(),s.Mt(e.resumeToken);break;case 2:s.qt(),s.Nt||this.removeTarget(n);break;case 3:this.Zt(n)&&(s.Ut(),s.Mt(e.resumeToken));break;case 4:this.Zt(n)&&(this.te(n),s.Mt(e.resumeToken));break;default:q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Gt.forEach((s,r)=>{this.Zt(r)&&n(r)})}ee(e){var n;const s=e.targetId,r=e.bt.count,i=this.ne(s);if(i){const o=i.target;if(nc(o))if(r===0){const a=new j(o.path);this.Jt(s,a,He.newNoDocument(a,K.min()))}else ye(r===1);else{const a=this.se(s);if(a!==r){const c=this.ie(e,a);if(c!==0){this.te(s);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(s,u)}(n=mu.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(u,l,h){var d,m,v,w,C,R;const $={localCacheCount:l,existenceFilterCount:h.count},M=h.unchangedNames;return M&&($.bloomFilter={applied:u===0,hashCount:(d=M==null?void 0:M.hashCount)!==null&&d!==void 0?d:0,bitmapLength:(w=(v=(m=M==null?void 0:M.bits)===null||m===void 0?void 0:m.bitmap)===null||v===void 0?void 0:v.length)!==null&&w!==void 0?w:0,padding:(R=(C=M==null?void 0:M.bits)===null||C===void 0?void 0:C.padding)!==null&&R!==void 0?R:0}),$}(c,a,e.bt))}}}}ie(e,n){const{unchangedNames:s,count:r}=e.bt;if(!s||!s.bits)return 1;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=s;let c,u;try{c=Hn(i).toUint8Array()}catch(l){if(l instanceof lp)return Ss("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw l}try{u=new gu(c,o,a)}catch(l){return Ss(l instanceof nr?"BloomFilter error: ":"Applying bloom filter failed: ",l),1}return u.yt===0?1:r!==n-this.re(e.targetId,u)?2:0}re(e,n){const s=this.Kt.getRemoteKeysForTarget(e);let r=0;return s.forEach(i=>{const o=this.Kt.oe(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;n.At(a)||(this.Jt(e,i,null),r++)}),r}ue(e){const n=new Map;this.Gt.forEach((i,o)=>{const a=this.ne(o);if(a){if(i.current&&nc(a.target)){const c=new j(a.target.path);this.Qt.get(c)!==null||this.ce(o,c)||this.Jt(o,c,He.newNoDocument(c,e))}i.kt&&(n.set(o,i.Ot()),i.$t())}});let s=ee();this.jt.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.ne(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.Qt.forEach((i,o)=>o.setReadTime(e));const r=new No(e,n,this.zt,this.Qt,s);return this.Qt=nn(),this.jt=wh(),this.zt=new Te(ie),r}Ht(e,n){if(!this.Zt(e))return;const s=this.ce(e,n.key)?2:0;this.Xt(e).Ft(n.key,s),this.Qt=this.Qt.insert(n.key,n),this.jt=this.jt.insert(n.key,this.ae(n.key).add(e))}Jt(e,n,s){if(!this.Zt(e))return;const r=this.Xt(e);this.ce(e,n)?r.Ft(n,1):r.Bt(n),this.jt=this.jt.insert(n,this.ae(n).delete(e)),s&&(this.Qt=this.Qt.insert(n,s))}removeTarget(e){this.Gt.delete(e)}se(e){const n=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let n=this.Gt.get(e);return n||(n=new vh,this.Gt.set(e,n)),n}ae(e){let n=this.jt.get(e);return n||(n=new Xe(ie),this.jt=this.jt.insert(e,n)),n}Zt(e){const n=this.ne(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}ne(e){const n=this.Gt.get(e);return n&&n.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new vh),this.Kt.getRemoteKeysForTarget(e).forEach(n=>{this.Jt(e,n,null)})}ce(e,n){return this.Kt.getRemoteKeysForTarget(e).has(n)}}function wh(){return new Te(j.comparator)}function Eh(){return new Te(j.comparator)}const BE=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),jE=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),qE=(()=>({and:"AND",or:"OR"}))();class zE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ic(t,e){return t.useProto3Json||bo(e)?e:{value:e}}function Ki(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lp(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HE(t,e){return Ki(t,e.toTimestamp())}function Ut(t){return ye(!!t),K.fromTimestamp(function(e){const n=En(e);return new ke(n.seconds,n.nanos)}(t))}function yu(t,e){return function(n){return new we(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function $p(t){const e=we.fromString(t);return ye(Bp(e)),e}function oc(t,e){return yu(t.databaseId,e.path)}function ca(t,e){const n=$p(e);if(n.get(1)!==t.databaseId.projectId)throw new B(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j(Fp(n))}function ac(t,e){return yu(t.databaseId,e)}function KE(t){const e=$p(t);return e.length===4?we.emptyPath():Fp(e)}function cc(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Fp(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _h(t,e,n){return{name:oc(t,e),fields:n.value.mapValue.fields}}function GE(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(ye(u===void 0||typeof u=="string"),Ze.fromBase64String(u||"")):(ye(u===void 0||u instanceof Uint8Array),Ze.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?T.UNKNOWN:Mp(c.code);return new B(u,c.message||"")}(o);n=new Pp(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=ca(t,s.document.name),i=Ut(s.document.updateTime),o=s.document.createTime?Ut(s.document.createTime):K.min(),a=new at({mapValue:{fields:s.document.fields}}),c=He.newFoundDocument(r,i,o,a),u=s.targetIds||[],l=s.removedTargetIds||[];n=new _i(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=ca(t,s.document),i=s.readTime?Ut(s.readTime):K.min(),o=He.newNoDocument(r,i),a=s.removedTargetIds||[];n=new _i([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=ca(t,s.document),i=s.removedTargetIds||[];n=new _i([],i,r,null)}else{if(!("filter"in e))return q();{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new LE(r,i),a=s.targetId;n=new Op(a,o)}}return n}function WE(t,e){let n;if(e instanceof Hr)n={update:_h(t,e.key,e.value)};else if(e instanceof kp)n={delete:oc(t,e.key)};else if(e instanceof bn)n={update:_h(t,e.key,e.data),updateMask:s_(e.fieldMask)};else{if(!(e instanceof ME))return q();n={verify:oc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof zi)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof As)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Rs)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Hi)return{fieldPath:i.field.canonicalString(),increment:o.wt};throw q()}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:HE(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:q()}(t,e.precondition)),n}function QE(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,r){let i=s.updateTime?Ut(s.updateTime):Ut(r);return i.isEqual(K.min())&&(i=Ut(r)),new DE(i,s.transformResults||[])}(n,e))):[]}function JE(t,e){return{documents:[ac(t,e.path)]}}function XE(t,e){const n={structuredQuery:{}},s=e.path;e.collectionGroup!==null?(n.parent=ac(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ac(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(c){if(c.length!==0)return Vp(qt.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const i=function(c){if(c.length!==0)return c.map(u=>function(l){return{field:rs(l.field),direction:e_(l.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=ic(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function YE(t){let e=KE(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){ye(s===1);const l=n.from[0];l.allDescendants?r=l.collectionId:e=e.child(l.collectionId)}let i=[];n.where&&(i=function(l){const h=Up(l);return h instanceof qt&&pp(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>function(h){return new lr(is(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(l)));let a=null;n.limit&&(a=function(l){let h;return h=typeof l=="object"?l.value:l,bo(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(l){const h=!!l.before,d=l.values||[];return new qi(d,h)}(n.startAt));let u=null;return n.endAt&&(u=function(l){const h=!l.before,d=l.values||[];return new qi(d,h)}(n.endAt)),mE(e,r,o,i,a,"F",c,u)}function ZE(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Up(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=is(e.unaryFilter.field);return De.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=is(e.unaryFilter.field);return De.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=is(e.unaryFilter.field);return De.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=is(e.unaryFilter.field);return De.create(i,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(t):t.fieldFilter!==void 0?function(e){return De.create(is(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return qt.create(e.compositeFilter.filters.map(n=>Up(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return q()}}(e.compositeFilter.op))}(t):q()}function e_(t){return BE[t]}function t_(t){return jE[t]}function n_(t){return qE[t]}function rs(t){return{fieldPath:t.canonicalString()}}function is(t){return Ge.fromServerFormat(t.fieldPath)}function Vp(t){return t instanceof De?function(e){if(e.op==="=="){if(ah(e.value))return{unaryFilter:{field:rs(e.field),op:"IS_NAN"}};if(oh(e.value))return{unaryFilter:{field:rs(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ah(e.value))return{unaryFilter:{field:rs(e.field),op:"IS_NOT_NAN"}};if(oh(e.value))return{unaryFilter:{field:rs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rs(e.field),op:t_(e.op),value:e.value}}}(t):t instanceof qt?function(e){const n=e.getFilters().map(s=>Vp(s));return n.length===1?n[0]:{compositeFilter:{op:n_(e.op),filters:n}}}(t):q()}function s_(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Bp(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n,s,r,i=K.min(),o=K.min(),a=Ze.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new hn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e){this.le=e}}function i_(t){const e=YE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.sn=new a_}addToCollectionParentIndex(e,n){return this.sn.add(n),b.resolve()}getCollectionParents(e,n){return b.resolve(this.sn.getEntries(n))}addFieldIndex(e,n){return b.resolve()}deleteFieldIndex(e,n){return b.resolve()}getDocumentsMatchingTarget(e,n){return b.resolve(null)}getIndexType(e,n){return b.resolve(0)}getFieldIndexes(e,n){return b.resolve([])}getNextCollectionGroupToUpdate(e){return b.resolve(null)}getMinOffset(e,n){return b.resolve(wn.min())}getMinOffsetFromCollectionGroup(e,n){return b.resolve(wn.min())}updateCollectionGroup(e,n,s){return b.resolve()}updateIndexEntries(e,n){return b.resolve()}}class a_{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Xe(we.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Xe(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new xs(0)}static kn(){return new xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(){this.changes=new js(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,He.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?b.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&fr(s.mutation,r,lt.empty(),ke.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ee()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ee()){const r=Ln();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=tr();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Ln();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ee()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=nn();const o=hr(),a=hr();return n.forEach((c,u)=>{const l=s.get(u.key);r.has(u.key)&&(l===void 0||l.mutation instanceof bn)?i=i.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),fr(l.mutation,u,l.mutation.getFieldMask(),ke.now())):o.set(u.key,lt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var h;return a.set(u,new u_(l,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=hr();let r=new Te((o,a)=>o-a),i=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let l=s.get(c)||lt.empty();l=a.applyToLocalView(u,l),s.set(c,l);const h=(r.get(a.batchId)||ee()).add(c);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,l=c.value,h=Tp();l.forEach(d=>{if(!i.has(d)){const m=Dp(n.get(d),s.get(d));m!==null&&h.set(d,m),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return b.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s){return function(r){return j.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s):this.getDocumentsMatchingCollectionQuery(e,n,s)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):b.resolve(Ln());let a=-1,c=i;return o.next(u=>b.forEach(u,(l,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(l)?b.resolve():this.remoteDocumentCache.getEntry(e,l).next(d=>{c=c.insert(l,d)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ee())).next(l=>({batchId:a,changes:_p(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(s=>{let r=tr();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s){const r=n.collectionGroup;let i=tr();return this.indexManager.getCollectionParents(e,r).next(o=>b.forEach(o,a=>{const c=function(u,l){return new Io(l,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,s).next(u=>{u.forEach((l,h)=>{i=i.insert(l,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,r))).next(i=>{r.forEach((a,c)=>{const u=c.getKey();i.get(u)===null&&(i=i.insert(u,He.newInvalidDocument(u)))});let o=tr();return i.forEach((a,c)=>{const u=r.get(a);u!==void 0&&fr(u.mutation,c,lt.empty(),ke.now()),Ro(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,n){return b.resolve(this.us.get(n))}saveBundleMetadata(e,n){var s;return this.us.set(n.id,{id:(s=n).id,version:s.version,createTime:Ut(s.createTime)}),b.resolve()}getNamedQuery(e,n){return b.resolve(this.cs.get(n))}saveNamedQuery(e,n){return this.cs.set(n.name,function(s){return{name:s.name,query:i_(s.bundledQuery),readTime:Ut(s.readTime)}}(n)),b.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.overlays=new Te(j.comparator),this.hs=new Map}getOverlay(e,n){return b.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ln();return b.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.de(e,n,i)}),b.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.hs.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.hs.delete(s)),b.resolve()}getOverlaysForCollection(e,n,s){const r=Ln(),i=n.length+1,o=new j(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return b.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Te((u,l)=>u-l);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let l=i.get(u.largestBatchId);l===null&&(l=Ln(),i=i.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const a=Ln(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=r)););return b.resolve(a)}de(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.hs.get(r.largestBatchId).delete(s.key);this.hs.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new PE(n,s));let i=this.hs.get(n);i===void 0&&(i=ee(),this.hs.set(n,i)),this.hs.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(){this.ls=new Xe(Pe.fs),this.ds=new Xe(Pe._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,n){const s=new Pe(e,n);this.ls=this.ls.add(s),this.ds=this.ds.add(s)}ws(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gs(new Pe(e,n))}ys(e,n){e.forEach(s=>this.removeReference(s,n))}ps(e){const n=new j(new we([])),s=new Pe(n,e),r=new Pe(n,e+1),i=[];return this.ds.forEachInRange([s,r],o=>{this.gs(o),i.push(o.key)}),i}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const n=new j(new we([])),s=new Pe(n,e),r=new Pe(n,e+1);let i=ee();return this.ds.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Pe(e,0),s=this.ls.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Pe{constructor(e,n){this.key=e,this.Es=n}static fs(e,n){return j.comparator(e.key,n.key)||ie(e.Es,n.Es)}static _s(e,n){return ie(e.Es,n.Es)||j.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.As=1,this.Rs=new Xe(Pe.fs)}checkEmpty(e){return b.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new OE(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Rs=this.Rs.add(new Pe(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return b.resolve(o)}lookupMutationBatch(e,n){return b.resolve(this.vs(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.Ps(s),i=r<0?0:r;return b.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return b.resolve(this.mutationQueue.length===0?-1:this.As-1)}getAllMutationBatches(e){return b.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Pe(n,0),r=new Pe(n,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([s,r],o=>{const a=this.vs(o.Es);i.push(a)}),b.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Xe(ie);return n.forEach(r=>{const i=new Pe(r,0),o=new Pe(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([i,o],a=>{s=s.add(a.Es)})}),b.resolve(this.bs(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;j.isDocumentKey(i)||(i=i.child(""));const o=new Pe(new j(i),0);let a=new Xe(ie);return this.Rs.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(c.Es)),!0)},o),b.resolve(this.bs(a))}bs(e){const n=[];return e.forEach(s=>{const r=this.vs(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ye(this.Vs(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Rs;return b.forEach(n.mutations,r=>{const i=new Pe(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=s})}Dn(e){}containsKey(e,n){const s=new Pe(n,0),r=this.Rs.firstAfterOrEqual(s);return b.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,b.resolve()}Vs(e,n){return this.Ps(e)}Ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}vs(e){const n=this.Ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this.Ss=e,this.docs=new Te(j.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.Ss(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return b.resolve(s?s.document.mutableCopy():He.newInvalidDocument(n))}getEntries(e,n){let s=nn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():He.newInvalidDocument(r))}),b.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=nn();const o=n.path,a=new j(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Y1(X1(l),s)<=0||(r.has(l.key)||Ro(n,l))&&(i=i.insert(l.key,l.mutableCopy()))}return b.resolve(i)}getAllFromCollectionGroup(e,n,s,r){q()}Ds(e,n){return b.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new m_(this)}getSize(e){return b.resolve(this.size)}}class m_ extends c_{constructor(e){super(),this.rs=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.rs.addEntry(e,r)):this.rs.removeEntry(s)}),b.waitFor(n)}getFromCache(e,n){return this.rs.getEntry(e,n)}getAllFromCache(e,n){return this.rs.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.persistence=e,this.Cs=new js(n=>fu(n),du),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.xs=0,this.Ns=new vu,this.targetCount=0,this.ks=xs.Nn()}forEachTarget(e,n){return this.Cs.forEach((s,r)=>n(r)),b.resolve()}getLastRemoteSnapshotVersion(e){return b.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return b.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),b.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.xs&&(this.xs=n),b.resolve()}$n(e){this.Cs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ks=new xs(n),this.highestTargetId=n),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,n){return this.$n(n),this.targetCount+=1,b.resolve()}updateTargetData(e,n){return this.$n(n),b.resolve()}removeTargetData(e,n){return this.Cs.delete(n.target),this.Ns.ps(n.targetId),this.targetCount-=1,b.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Cs.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Cs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),b.waitFor(i).next(()=>r)}getTargetCount(e){return b.resolve(this.targetCount)}getTargetData(e,n){const s=this.Cs.get(n)||null;return b.resolve(s)}addMatchingKeys(e,n,s){return this.Ns.ws(n,s),b.resolve()}removeMatchingKeys(e,n,s){this.Ns.ys(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),b.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ns.ps(n),b.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ns.Ts(n);return b.resolve(s)}containsKey(e,n){return b.resolve(this.Ns.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n){this.Ms={},this.overlays={},this.Os=new cu(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new g_(this),this.indexManager=new o_,this.remoteDocumentCache=function(s){return new p_(s)}(s=>this.referenceDelegate.Bs(s)),this.serializer=new r_(n),this.Ls=new h_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new f_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Ms[e.toKey()];return s||(s=new d_(n,this.referenceDelegate),this.Ms[e.toKey()]=s),s}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,n,s){L("MemoryPersistence","Starting transaction:",e);const r=new v_(this.Os.next());return this.referenceDelegate.qs(),s(r).next(i=>this.referenceDelegate.Us(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ks(e,n){return b.or(Object.values(this.Ms).map(s=>()=>s.containsKey(e,n)))}}class v_ extends eE{constructor(e){super(),this.currentSequenceNumber=e}}class wu{constructor(e){this.persistence=e,this.Gs=new vu,this.Qs=null}static js(e){return new wu(e)}get zs(){if(this.Qs)return this.Qs;throw q()}addReference(e,n,s){return this.Gs.addReference(s,n),this.zs.delete(s.toString()),b.resolve()}removeReference(e,n,s){return this.Gs.removeReference(s,n),this.zs.add(s.toString()),b.resolve()}markPotentiallyOrphaned(e,n){return this.zs.add(n.toString()),b.resolve()}removeTarget(e,n){this.Gs.ps(n.targetId).forEach(r=>this.zs.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.zs.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}qs(){this.Qs=new Set}Us(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return b.forEach(this.zs,s=>{const r=j.fromPath(s);return this.Ws(e,r).next(i=>{i||n.removeEntry(r,K.min())})}).next(()=>(this.Qs=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ws(e,n).next(s=>{s?this.zs.delete(n.toString()):this.zs.add(n.toString())})}Bs(e){return 0}Ws(e,n){return b.or([()=>b.resolve(this.Gs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ks(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.$i=s,this.Fi=r}static Bi(e,n){let s=ee(),r=ee();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Eu(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(){this.Li=!1}initialize(e,n){this.qi=e,this.indexManager=n,this.Li=!0}getDocumentsMatchingQuery(e,n,s,r){return this.Ui(e,n).next(i=>i||this.Ki(e,n,r,s)).next(i=>i||this.Gi(e,n))}Ui(e,n){if(hh(n))return b.resolve(null);let s=tn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=sc(n,null,"F"),s=tn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=ee(...i);return this.qi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const u=this.Qi(n,a);return this.ji(n,u,o,c.readTime)?this.Ui(e,sc(n,null,"F")):this.zi(e,u,n,c)}))})))}Ki(e,n,s,r){return hh(n)||r.isEqual(K.min())?this.Gi(e,n):this.qi.getDocuments(e,s).next(i=>{const o=this.Qi(n,i);return this.ji(n,o,s,r)?this.Gi(e,n):(nh()<=ae.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),rc(n)),this.zi(e,o,n,J1(r,-1)))})}Qi(e,n){let s=new Xe(wp(e));return n.forEach((r,i)=>{Ro(e,i)&&(s=s.add(i))}),s}ji(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Gi(e,n){return nh()<=ae.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",rc(n)),this.qi.getDocumentsMatchingQuery(e,n,wn.min())}zi(e,n,s,r){return this.qi.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n,s,r){this.persistence=e,this.Wi=n,this.serializer=r,this.Hi=new Te(ie),this.Ji=new js(i=>fu(i),du),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(s)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new l_(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Hi))}}function __(t,e,n,s){return new E_(t,e,n,s)}async function jp(t,e){const n=W(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Zi(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let c=ee();for(const u of r){o.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of i){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(s,c).next(u=>({tr:u,removedBatchIds:o,addedBatchIds:a}))})})}function T_(t,e){const n=W(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(o,a,c,u){const l=c.batch,h=l.keys();let d=b.resolve();return h.forEach(m=>{d=d.next(()=>u.getEntry(a,m)).next(v=>{const w=c.docVersions.get(m);ye(w!==null),v.version.compareTo(w)<0&&(l.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,l))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=ee();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function qp(t){const e=W(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Fs.getLastRemoteSnapshotVersion(n))}function S_(t,e){const n=W(t),s=e.snapshotVersion;let r=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Xi.newChangeBuffer({trackRemovals:!0});r=n.Hi;const a=[];e.targetChanges.forEach((l,h)=>{const d=r.get(h);if(!d)return;a.push(n.Fs.removeMatchingKeys(i,l.removedDocuments,h).next(()=>n.Fs.addMatchingKeys(i,l.addedDocuments,h)));let m=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Ze.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):l.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(l.resumeToken,s)),r=r.insert(h,m),function(v,w,C){return v.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(d,m,l)&&a.push(n.Fs.updateTargetData(i,m))});let c=nn(),u=ee();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,l))}),a.push(b_(i,o,e.documentUpdates).next(l=>{c=l.er,u=l.nr})),!s.isEqual(K.min())){const l=n.Fs.getLastRemoteSnapshotVersion(i).next(h=>n.Fs.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(l)}return b.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Hi=r,i))}function b_(t,e,n){let s=ee(),r=ee();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=nn();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(K.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{er:o,nr:r}})}function I_(t,e){const n=W(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function C_(t,e){const n=W(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Fs.getTargetData(s,e).next(i=>i?(r=i,b.resolve(r)):n.Fs.allocateTargetId(s).next(o=>(r=new hn(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Fs.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Hi.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(s.targetId,s),n.Ji.set(e,s.targetId)),s})}async function uc(t,e,n){const s=W(t),r=s.Hi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!zr(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.Hi=s.Hi.remove(e),s.Ji.delete(r.target)}function Th(t,e,n){const s=W(t);let r=K.min(),i=ee();return s.persistence.runTransaction("Execute query","readonly",o=>function(a,c,u){const l=W(a),h=l.Ji.get(u);return h!==void 0?b.resolve(l.Hi.get(h)):l.Fs.getTargetData(c,u)}(s,o,tn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Fs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>s.Wi.getDocumentsMatchingQuery(o,e,n?r:K.min(),n?i:ee())).next(a=>(A_(s,wE(e),a),{documents:a,sr:i})))}function A_(t,e,n){let s=t.Yi.get(e)||K.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Yi.set(e,s)}class Sh{constructor(){this.activeTargetIds=IE()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R_{constructor(){this.Wr=new Sh,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,n,s){this.Hr[e]=n}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new Sh,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{Jr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fi=null;function ua(){return fi===null?fi=268435456+Math.round(2147483648*Math.random()):fi++,"0x"+fi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je="WebChannelConnection";class k_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.wo=n+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,n,s,r,i){const o=ua(),a=this.Io(e,n);L("RestConnection",`Sending RPC '${e}' ${o}:`,a,s);const c={};return this.To(c,r,i),this.Eo(e,a,c,s).then(u=>(L("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw Ss("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",s),u})}Ao(e,n,s,r,i,o){return this.po(e,n,s,r,i)}To(e,n,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}Io(e,n){const s=D_[e];return`${this.wo}/v1/${n}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,n,s,r){const i=ua();return new Promise((o,a)=>{const c=new U1;c.setWithCredentials(!0),c.listenOnce(L1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case aa.NO_ERROR:const l=c.getResponseJson();L(je,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(l)),o(l);break;case aa.TIMEOUT:L(je,`RPC '${e}' ${i} timed out`),a(new B(T.DEADLINE_EXCEEDED,"Request time out"));break;case aa.HTTP_ERROR:const h=c.getStatus();if(L(je,`RPC '${e}' ${i} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);const m=d==null?void 0:d.error;if(m&&m.status&&m.message){const v=function(w){const C=w.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(C)>=0?C:T.UNKNOWN}(m.status);a(new B(v,m.message))}else a(new B(T.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new B(T.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{L(je,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(r);L(je,`RPC '${e}' ${i} sending request:`,r),c.send(n,"POST",u,s,15)})}Ro(e,n,s){const r=ua(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=O1(),a=P1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new F1({})),this.To(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const u=i.join("");L(je,`Creating RPC '${e}' stream ${r}: ${u}`,c);const l=o.createWebChannel(u,c);let h=!1,d=!1;const m=new N_({io:w=>{d?L(je,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(h||(L(je,`Opening RPC '${e}' stream ${r} transport.`),l.open(),h=!0),L(je,`RPC '${e}' stream ${r} sending:`,w),l.send(w))},ro:()=>l.close()}),v=(w,C,R)=>{w.listen(C,$=>{try{R($)}catch(M){setTimeout(()=>{throw M},0)}})};return v(l,ci.EventType.OPEN,()=>{d||L(je,`RPC '${e}' stream ${r} transport opened.`)}),v(l,ci.EventType.CLOSE,()=>{d||(d=!0,L(je,`RPC '${e}' stream ${r} transport closed`),m.fo())}),v(l,ci.EventType.ERROR,w=>{d||(d=!0,Ss(je,`RPC '${e}' stream ${r} transport errored:`,w),m.fo(new B(T.UNAVAILABLE,"The operation could not be completed")))}),v(l,ci.EventType.MESSAGE,w=>{var C;if(!d){const R=w.data[0];ye(!!R);const $=R,M=$.error||((C=$[0])===null||C===void 0?void 0:C.error);if(M){L(je,`RPC '${e}' stream ${r} received error:`,M);const te=M.status;let Se=function(ft){const dt=Ae[ft];if(dt!==void 0)return Mp(dt)}(te),Be=M.message;Se===void 0&&(Se=T.INTERNAL,Be="Unknown error status: "+te+" with message "+M.message),d=!0,m.fo(new B(Se,Be)),l.close()}else L(je,`RPC '${e}' stream ${r} received:`,R),m._o(R)}}),v(a,$1.STAT_EVENT,w=>{w.stat===eh.PROXY?L(je,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===eh.NOPROXY&&L(je,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.lo()},0),m}}function la(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t){return new zE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,s=1e3,r=1.5,i=6e4){this.si=e,this.timerId=n,this.vo=s,this.Po=r,this.bo=i,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const n=Math.floor(this.Vo+this.No()),s=Math.max(0,Date.now()-this.Do),r=Math.max(0,n-s);r>0&&L("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Vo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){this.So!==null&&(this.So.skipDelay(),this.So=null)}cancel(){this.So!==null&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n,s,r,i,o,a,c){this.si=e,this.Mo=s,this.Oo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new zp(e,n)}qo(){return this.state===1||this.state===5||this.Uo()}Uo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Ko()}async stop(){this.qo()&&await this.close(0)}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&this.Fo===null&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}async jo(){if(this.Uo())return this.close(0)}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}async close(e,n){this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,e!==4?this.Lo.reset():n&&n.code===T.RESOURCE_EXHAUSTED?(en(n.toString()),en("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):n&&n.code===T.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Jo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.co(n)}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),n=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.$o===n&&this.Xo(s,r)},s=>{e(()=>{const r=new B(T.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Zo(r)})})}Xo(e,n){const s=this.Yo(this.$o);this.stream=this.tu(e,n),this.stream.oo(()=>{s(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(r=>{s(()=>this.Zo(r))}),this.stream.onMessage(r=>{s(()=>this.onMessage(r))})}Ko(){this.state=5,this.Lo.xo(async()=>{this.state=0,this.start()})}Zo(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return n=>{this.si.enqueueAndForget(()=>this.$o===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class M_ extends Hp{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}tu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.Lo.reset();const n=GE(this.serializer,e),s=function(r){if(!("targetChange"in r))return K.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?K.min():i.readTime?Ut(i.readTime):K.min()}(e);return this.listener.eu(n,s)}nu(e){const n={};n.database=cc(this.serializer),n.addTarget=function(r,i){let o;const a=i.target;if(o=nc(a)?{documents:JE(r,a)}:{query:XE(r,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=Lp(r,i.resumeToken);const c=ic(r,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(K.min())>0){o.readTime=Ki(r,i.snapshotVersion.toTimestamp());const c=ic(r,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const s=ZE(this.serializer,e);s&&(n.labels=s),this.zo(n)}su(e){const n={};n.database=cc(this.serializer),n.removeTarget=e,this.zo(n)}}class O_ extends Hp{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const n=QE(e.writeResults,e.commitTime),s=Ut(e.commitTime);return this.listener.uu(s,n)}return ye(!e.writeResults||e.writeResults.length===0),this.iu=!0,this.listener.cu()}au(){const e={};e.database=cc(this.serializer),this.zo(e)}ou(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>WE(this.serializer,s))};this.zo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.hu=!1}lu(){if(this.hu)throw new B(T.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,n,s){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.po(e,n,s,r,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new B(T.UNKNOWN,r.toString())})}Ao(e,n,s,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ao(e,n,s,i,o,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(T.UNKNOWN,i.toString())})}terminate(){this.hu=!0}}class L_{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){this.du===0&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){this.state==="Online"?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,e==="Online"&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(en(n),this.wu=!1):L("OnlineStateTracker",n)}Iu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=i,this.vu.Jr(o=>{s.enqueueAndForget(async()=>{Qn(this)&&(L("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=W(a);c.Au.add(4),await Gr(c),c.Pu.set("Unknown"),c.Au.delete(4),await Mo(c)}(this))})}),this.Pu=new L_(s,r)}}async function Mo(t){if(Qn(t))for(const e of t.Ru)await e(!0)}async function Gr(t){for(const e of t.Ru)await e(!1)}function Kp(t,e){const n=W(t);n.Eu.has(e.targetId)||(n.Eu.set(e.targetId,e),Su(n)?Tu(n):qs(n).Uo()&&_u(n,e))}function Gp(t,e){const n=W(t),s=qs(n);n.Eu.delete(e),s.Uo()&&Wp(n,e),n.Eu.size===0&&(s.Uo()?s.Qo():Qn(n)&&n.Pu.set("Unknown"))}function _u(t,e){if(t.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qs(t).nu(e)}function Wp(t,e){t.bu.Lt(e),qs(t).su(e)}function Tu(t){t.bu=new VE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),he:e=>t.Eu.get(e)||null,oe:()=>t.datastore.serializer.databaseId}),qs(t).start(),t.Pu.mu()}function Su(t){return Qn(t)&&!qs(t).qo()&&t.Eu.size>0}function Qn(t){return W(t).Au.size===0}function Qp(t){t.bu=void 0}async function F_(t){t.Eu.forEach((e,n)=>{_u(t,e)})}async function U_(t,e){Qp(t),Su(t)?(t.Pu.pu(e),Tu(t)):t.Pu.set("Unknown")}async function V_(t,e,n){if(t.Pu.set("Online"),e instanceof Pp&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.Eu.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Eu.delete(o),s.bu.removeTarget(o))}(t,e)}catch(s){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Gi(t,s)}else if(e instanceof _i?t.bu.Wt(e):e instanceof Op?t.bu.ee(e):t.bu.Yt(e),!n.isEqual(K.min()))try{const s=await qp(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.bu.ue(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=r.Eu.get(c);u&&r.Eu.set(c,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const u=r.Eu.get(a);if(!u)return;r.Eu.set(a,u.withResumeToken(Ze.EMPTY_BYTE_STRING,u.snapshotVersion)),Wp(r,a);const l=new hn(u.target,a,c,u.sequenceNumber);_u(r,l)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){L("RemoteStore","Failed to raise snapshot:",s),await Gi(t,s)}}async function Gi(t,e,n){if(!zr(e))throw e;t.Au.add(1),await Gr(t),t.Pu.set("Offline"),n||(n=()=>qp(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{L("RemoteStore","Retrying IndexedDB access"),await n(),t.Au.delete(1),await Mo(t)})}function Jp(t,e){return e().catch(n=>Gi(t,n,e))}async function Oo(t){const e=W(t),n=_n(e);let s=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;B_(e);)try{const r=await I_(e.localStore,s);if(r===null){e.Tu.length===0&&n.Qo();break}s=r.batchId,j_(e,r)}catch(r){await Gi(e,r)}Xp(e)&&Yp(e)}function B_(t){return Qn(t)&&t.Tu.length<10}function j_(t,e){t.Tu.push(e);const n=_n(t);n.Uo()&&n.ru&&n.ou(e.mutations)}function Xp(t){return Qn(t)&&!_n(t).qo()&&t.Tu.length>0}function Yp(t){_n(t).start()}async function q_(t){_n(t).au()}async function z_(t){const e=_n(t);for(const n of t.Tu)e.ou(n.mutations)}async function H_(t,e,n){const s=t.Tu.shift(),r=pu.from(s,e,n);await Jp(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Oo(t)}async function K_(t,e){e&&_n(t).ru&&await async function(n,s){if(r=s.code,$E(r)&&r!==T.ABORTED){const i=n.Tu.shift();_n(n).Go(),await Jp(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Oo(n)}var r}(t,e),Xp(t)&&Yp(t)}async function Ih(t,e){const n=W(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");const s=Qn(n);n.Au.add(3),await Gr(n),s&&n.Pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Au.delete(3),await Mo(n)}async function G_(t,e){const n=W(t);e?(n.Au.delete(2),await Mo(n)):e||(n.Au.add(2),await Gr(n),n.Pu.set("Unknown"))}function qs(t){return t.Vu||(t.Vu=function(e,n,s){const r=W(e);return r.lu(),new M_(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{oo:F_.bind(null,t),co:U_.bind(null,t),eu:V_.bind(null,t)}),t.Ru.push(async e=>{e?(t.Vu.Go(),Su(t)?Tu(t):t.Pu.set("Unknown")):(await t.Vu.stop(),Qp(t))})),t.Vu}function _n(t){return t.Su||(t.Su=function(e,n,s){const r=W(e);return r.lu(),new O_(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{oo:q_.bind(null,t),co:K_.bind(null,t),cu:z_.bind(null,t),uu:H_.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Go(),await Oo(t)):(await t.Su.stop(),t.Tu.length>0&&(L("RemoteStore",`Stopping write stream with ${t.Tu.length} pending writes`),t.Tu=[]))})),t.Su}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new bu(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iu(t,e){if(en("AsyncQueue",`${e}: ${t}`),zr(t))return new B(T.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.comparator=e?(n,s)=>e(n,s)||j.comparator(n.key,s.key):(n,s)=>j.comparator(n.key,s.key),this.keyedMap=tr(),this.sortedSet=new Te(this.comparator)}static emptySet(e){return new gs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new gs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this.Du=new Te(j.comparator)}track(e){const n=e.doc.key,s=this.Du.get(n);s?e.type!==0&&s.type===3?this.Du=this.Du.insert(n,e):e.type===3&&s.type!==1?this.Du=this.Du.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Du=this.Du.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Du=this.Du.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Du=this.Du.remove(n):e.type===1&&s.type===2?this.Du=this.Du.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Du=this.Du.insert(n,{type:2,doc:e.doc}):q():this.Du=this.Du.insert(n,e)}Cu(){const e=[];return this.Du.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ds{constructor(e,n,s,r,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ds(e,n,gs.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ao(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.xu=void 0,this.listeners=[]}}class Q_{constructor(){this.queries=new js(e=>vp(e),Ao),this.onlineState="Unknown",this.Nu=new Set}}async function Zp(t,e){const n=W(t),s=e.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new W_),r)try{i.xu=await n.onListen(s)}catch(o){const a=Iu(o,`Initialization of query '${rc(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.listeners.push(e),e.ku(n.onlineState),i.xu&&e.Mu(i.xu)&&Cu(n)}async function em(t,e){const n=W(t),s=e.query;let r=!1;const i=n.queries.get(s);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),r=i.listeners.length===0)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function J_(t,e){const n=W(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Mu(r)&&(s=!0);o.xu=r}}s&&Cu(n)}function X_(t,e,n){const s=W(t),r=s.queries.get(e);if(r)for(const i of r.listeners)i.onError(n);s.queries.delete(e)}function Cu(t){t.Nu.forEach(e=>{e.next()})}class tm{constructor(e,n,s){this.query=e,this.Ou=n,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=s||{}}Mu(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Ds(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),n=!0):this.Lu(e,this.onlineState)&&(this.qu(e),n=!0),this.Fu=e,n}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let n=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),n=!0),n}Lu(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.Uu||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Bu(e){if(e.docChanges.length>0)return!0;const n=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qu(e){e=Ds.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){this.key=e}}class sm{constructor(e){this.key=e}}class Y_{constructor(e,n){this.query=e,this.Ju=n,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=ee(),this.mutatedKeys=ee(),this.Zu=wp(e),this.tc=new gs(this.Zu)}get ec(){return this.Ju}nc(e,n){const s=n?n.sc:new Ch,r=n?n.tc:this.tc;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((l,h)=>{const d=r.get(l),m=Ro(this.query,h)?h:null,v=!!d&&this.mutatedKeys.has(d.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let C=!1;d&&m?d.data.isEqual(m.data)?v!==w&&(s.track({type:3,doc:m}),C=!0):this.ic(d,m)||(s.track({type:2,doc:m}),C=!0,(c&&this.Zu(m,c)>0||u&&this.Zu(m,u)<0)&&(a=!0)):!d&&m?(s.track({type:0,doc:m}),C=!0):d&&!m&&(s.track({type:1,doc:d}),C=!0,(c||u)&&(a=!0)),C&&(m?(o=o.add(m),i=w?i.add(l):i.delete(l)):(o=o.delete(l),i=i.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),i=i.delete(l.key),s.track({type:1,doc:l})}return{tc:o,sc:s,ji:a,mutatedKeys:i}}ic(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const r=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const i=e.sc.Cu();i.sort((u,l)=>function(h,d){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return m(h)-m(d)}(u.type,l.type)||this.Zu(u.doc,l.doc)),this.rc(s);const o=n?this.oc():[],a=this.Xu.size===0&&this.current?1:0,c=a!==this.Yu;return this.Yu=a,i.length!==0||c?{snapshot:new Ds(this.query,e.tc,r,i,e.mutatedKeys,a===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),uc:o}:{uc:o}}ku(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tc:this.tc,sc:new Ch,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(n=>this.Ju=this.Ju.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ju=this.Ju.delete(n)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=ee(),this.tc.forEach(s=>{this.cc(s.key)&&(this.Xu=this.Xu.add(s.key))});const n=[];return e.forEach(s=>{this.Xu.has(s)||n.push(new sm(s))}),this.Xu.forEach(s=>{e.has(s)||n.push(new nm(s))}),n}ac(e){this.Ju=e.sr,this.Xu=ee();const n=this.nc(e.documents);return this.applyChanges(n,!0)}hc(){return Ds.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,this.Yu===0,this.hasCachedResults)}}class Z_{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class eT{constructor(e){this.key=e,this.lc=!1}}class tT{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fc={},this.dc=new js(a=>vp(a),Ao),this._c=new Map,this.wc=new Set,this.mc=new Te(j.comparator),this.gc=new Map,this.yc=new vu,this.Ic={},this.Tc=new Map,this.Ec=xs.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return this.Ac===!0}}async function nT(t,e){const n=fT(t);let s,r;const i=n.dc.get(e);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.hc();else{const o=await C_(n.localStore,tn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,r=await sT(n,e,s,a==="current",o.resumeToken),n.isPrimaryClient&&Kp(n.remoteStore,o)}return r}async function sT(t,e,n,s,r){t.Rc=(h,d,m)=>async function(v,w,C,R){let $=w.view.nc(C);$.ji&&($=await Th(v.localStore,w.query,!1).then(({documents:Se})=>w.view.nc(Se,$)));const M=R&&R.targetChanges.get(w.targetId),te=w.view.applyChanges($,v.isPrimaryClient,M);return Rh(v,w.targetId,te.uc),te.snapshot}(t,h,d,m);const i=await Th(t.localStore,e,!0),o=new Y_(e,i.sr),a=o.nc(i.documents),c=Kr.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,c);Rh(t,n,u.uc);const l=new Z_(e,n,o);return t.dc.set(e,l),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}async function rT(t,e){const n=W(t),s=n.dc.get(e),r=n._c.get(s.targetId);if(r.length>1)return n._c.set(s.targetId,r.filter(i=>!Ao(i,e))),void n.dc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await uc(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),Gp(n.remoteStore,s.targetId),lc(n,s.targetId)}).catch(qr)):(lc(n,s.targetId),await uc(n.localStore,s.targetId,!0))}async function iT(t,e,n){const s=dT(t);try{const r=await function(i,o){const a=W(i),c=ke.now(),u=o.reduce((d,m)=>d.add(m.key),ee());let l,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let m=nn(),v=ee();return a.Xi.getEntries(d,u).next(w=>{m=w,m.forEach((C,R)=>{R.isValidDocument()||(v=v.add(C))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,m)).next(w=>{l=w;const C=[];for(const R of o){const $=kE(R,l.get(R.key).overlayedDocument);$!=null&&C.push(new bn(R.key,$,hp($.value.mapValue),Ft.exists(!0)))}return a.mutationQueue.addMutationBatch(d,c,C,o)}).next(w=>{h=w;const C=w.applyToLocalDocumentSet(l,v);return a.documentOverlayCache.saveOverlays(d,w.batchId,C)})}).then(()=>({batchId:h.batchId,changes:_p(l)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let c=i.Ic[i.currentUser.toKey()];c||(c=new Te(ie)),c=c.insert(o,a),i.Ic[i.currentUser.toKey()]=c}(s,r.batchId,n),await Wr(s,r.changes),await Oo(s.remoteStore)}catch(r){const i=Iu(r,"Failed to persist write");n.reject(i)}}async function rm(t,e){const n=W(t);try{const s=await S_(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.gc.get(i);o&&(ye(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.lc=!0:r.modifiedDocuments.size>0?ye(o.lc):r.removedDocuments.size>0&&(ye(o.lc),o.lc=!1))}),await Wr(n,s,e)}catch(s){await qr(s)}}function Ah(t,e,n){const s=W(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.dc.forEach((i,o)=>{const a=o.view.ku(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=W(i);a.onlineState=o;let c=!1;a.queries.forEach((u,l)=>{for(const h of l.listeners)h.ku(o)&&(c=!0)}),c&&Cu(a)}(s.eventManager,e),r.length&&s.fc.eu(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function oT(t,e,n){const s=W(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.gc.get(e),i=r&&r.key;if(i){let o=new Te(j.comparator);o=o.insert(i,He.newNoDocument(i,K.min()));const a=ee().add(i),c=new No(K.min(),new Map,new Te(ie),o,a);await rm(s,c),s.mc=s.mc.remove(i),s.gc.delete(e),Au(s)}else await uc(s.localStore,e,!1).then(()=>lc(s,e,n)).catch(qr)}async function aT(t,e){const n=W(t),s=e.batch.batchId;try{const r=await T_(n.localStore,e);om(n,s,null),im(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Wr(n,r)}catch(r){await qr(r)}}async function cT(t,e,n){const s=W(t);try{const r=await function(i,o){const a=W(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,o).next(l=>(ye(l!==null),u=l.keys(),a.mutationQueue.removeMutationBatch(c,l))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(s.localStore,e);om(s,e,n),im(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Wr(s,r)}catch(r){await qr(r)}}function im(t,e){(t.Tc.get(e)||[]).forEach(n=>{n.resolve()}),t.Tc.delete(e)}function om(t,e,n){const s=W(t);let r=s.Ic[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Ic[s.currentUser.toKey()]=r}}function lc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t._c.get(e))t.dc.delete(s),n&&t.fc.vc(s,n);t._c.delete(e),t.isPrimaryClient&&t.yc.ps(e).forEach(s=>{t.yc.containsKey(s)||am(t,s)})}function am(t,e){t.wc.delete(e.path.canonicalString());const n=t.mc.get(e);n!==null&&(Gp(t.remoteStore,n),t.mc=t.mc.remove(e),t.gc.delete(n),Au(t))}function Rh(t,e,n){for(const s of n)s instanceof nm?(t.yc.addReference(s.key,e),uT(t,s)):s instanceof sm?(L("SyncEngine","Document no longer in limbo: "+s.key),t.yc.removeReference(s.key,e),t.yc.containsKey(s.key)||am(t,s.key)):q()}function uT(t,e){const n=e.key,s=n.path.canonicalString();t.mc.get(n)||t.wc.has(s)||(L("SyncEngine","New document in limbo: "+n),t.wc.add(s),Au(t))}function Au(t){for(;t.wc.size>0&&t.mc.size<t.maxConcurrentLimboResolutions;){const e=t.wc.values().next().value;t.wc.delete(e);const n=new j(we.fromString(e)),s=t.Ec.next();t.gc.set(s,new eT(n)),t.mc=t.mc.insert(n,s),Kp(t.remoteStore,new hn(tn(Co(n.path)),s,"TargetPurposeLimboResolution",cu.ct))}}async function Wr(t,e,n){const s=W(t),r=[],i=[],o=[];s.dc.isEmpty()||(s.dc.forEach((a,c)=>{o.push(s.Rc(c,e,n).then(u=>{if((u||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(c.targetId,u!=null&&u.fromCache?"not-current":"current"),u){r.push(u);const l=Eu.Bi(c.targetId,u);i.push(l)}}))}),await Promise.all(o),s.fc.eu(r),await async function(a,c){const u=W(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",l=>b.forEach(c,h=>b.forEach(h.$i,d=>u.persistence.referenceDelegate.addReference(l,h.targetId,d)).next(()=>b.forEach(h.Fi,d=>u.persistence.referenceDelegate.removeReference(l,h.targetId,d)))))}catch(l){if(!zr(l))throw l;L("LocalStore","Failed to update sequence numbers: "+l)}for(const l of c){const h=l.targetId;if(!l.fromCache){const d=u.Hi.get(h),m=d.snapshotVersion,v=d.withLastLimboFreeSnapshotVersion(m);u.Hi=u.Hi.insert(h,v)}}}(s.localStore,i))}async function lT(t,e){const n=W(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());const s=await jp(n.localStore,e);n.currentUser=e,function(r,i){r.Tc.forEach(o=>{o.forEach(a=>{a.reject(new B(T.CANCELLED,i))})}),r.Tc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Wr(n,s.tr)}}function hT(t,e){const n=W(t),s=n.gc.get(e);if(s&&s.lc)return ee().add(s.key);{let r=ee();const i=n._c.get(e);if(!i)return r;for(const o of i){const a=n.dc.get(o);r=r.unionWith(a.view.ec)}return r}}function fT(t){const e=W(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oT.bind(null,e),e.fc.eu=J_.bind(null,e.eventManager),e.fc.vc=X_.bind(null,e.eventManager),e}function dT(t){const e=W(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cT.bind(null,e),e}class xh{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ko(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return __(this.persistence,new w_,e.initialUser,this.serializer)}createPersistence(e){return new y_(wu.js,this.serializer)}createSharedClientState(e){return new R_}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class pT{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ah(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=lT.bind(null,this.syncEngine),await G_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Q_}createDatastore(e){const n=ko(e.databaseInfo.databaseId),s=(r=e.databaseInfo,new k_(r));var r;return function(i,o,a,c){return new P_(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,r=e.asyncQueue,i=a=>Ah(this.syncEngine,a,0),o=bh.D()?new bh:new x_,new $_(n,s,r,i,o);var n,s,r,i,o}createSyncEngine(e,n){return function(s,r,i,o,a,c,u){const l=new tT(s,r,i,o,a,c);return u&&(l.Ac=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=W(e);L("RemoteStore","RemoteStore shutting down."),n.Au.add(5),await Gr(n),n.vu.shutdown(),n.Pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):en("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=qe.UNAUTHENTICATED,this.clientId=cp.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async i=>{L("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(s,i=>(L("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Iu(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function ha(t,e){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await jp(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Dh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yT(t);L("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener(r=>Ih(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Ih(e.remoteStore,i)),t._onlineComponents=e}function gT(t){return t.name==="FirebaseError"?t.code===T.FAILED_PRECONDITION||t.code===T.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function yT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{await ha(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!gT(n))throw n;Ss("Error using user provided cache. Falling back to memory cache: "+n),await ha(t,new xh)}}else L("FirestoreClient","Using default OfflineComponentProvider"),await ha(t,new xh);return t._offlineComponents}async function um(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),await Dh(t,t._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),await Dh(t,new pT))),t._onlineComponents}function vT(t){return um(t).then(e=>e.syncEngine)}async function hc(t){const e=await um(t),n=e.eventManager;return n.onListen=nT.bind(null,e.syncEngine),n.onUnlisten=rT.bind(null,e.syncEngine),n}function wT(t,e,n={}){const s=new gn;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,c){const u=new cm({next:h=>{i.enqueueAndForget(()=>em(r,l));const d=h.docs.has(o);!d&&h.fromCache?c.reject(new B(T.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?c.reject(new B(T.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),l=new tm(Co(o.path),u,{includeMetadataChanges:!0,Uu:!0});return Zp(r,l)}(await hc(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e,n){if(!n)throw new B(T.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ET(t,e,n,s){if(e===!0&&s===!0)throw new B(T.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kh(t){if(!j.isDocumentKey(t))throw new B(T.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Mh(t){if(j.isDocumentKey(t))throw new B(T.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ru(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q()}function Vt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ru(t);throw new B(T.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new B(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ET("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Oh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Oh(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new B1;switch(n.type){case"firstParty":return new H1(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new B(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Nh.get(e);n&&(L("ComponentProvider","Removing Datastore"),Nh.delete(e),n.terminate())}(this),Promise.resolve()}}function _T(t,e,n,s={}){var r;const i=(t=Vt(t,Po))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&Ss("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),s.mockUserToken){let o,a;if(typeof s.mockUserToken=="string")o=s.mockUserToken,a=qe.MOCK_USER;else{o=Sw(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=s.mockUserToken.sub||s.mockUserToken.user_id;if(!c)throw new B(T.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new qe(c)}t._authCredentials=new j1(new ap(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ye(this.firestore,e,this._key)}}class Lo{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Lo(this.firestore,e,this._query)}}class yn extends Lo{constructor(e,n,s){super(e,n,Co(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new j(e))}withConverter(e){return new yn(this.firestore,e,this._path)}}function xu(t,e,...n){if(t=Yt(t),lm("collection","path",e),t instanceof Po){const s=we.fromString(e,...n);return Mh(s),new yn(t,null,s)}{if(!(t instanceof Ye||t instanceof yn))throw new B(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(we.fromString(e,...n));return Mh(s),new yn(t.firestore,null,s)}}function hm(t,e,...n){if(t=Yt(t),arguments.length===1&&(e=cp.A()),lm("doc","path",e),t instanceof Po){const s=we.fromString(e,...n);return kh(s),new Ye(t,null,new j(s))}{if(!(t instanceof Ye||t instanceof yn))throw new B(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(we.fromString(e,...n));return kh(s),new Ye(t.firestore,t instanceof yn?t.converter:null,new j(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new zp(this,"async_queue_retry"),this.Yc=()=>{const n=la();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Lo.ko()};const e=la();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const n=la();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const n=new gn;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}async ta(){if(this.Gc.length!==0){try{await this.Gc[0](),this.Gc.shift(),this.Lo.reset()}catch(e){if(!zr(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.Gc.length>0&&this.Lo.xo(()=>this.ta())}}Zc(e){const n=this.Kc.then(()=>(this.Wc=!0,e().catch(s=>{this.zc=s,this.Wc=!1;const r=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(s);throw en("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.Wc=!1,s))));return this.Kc=n,n}enqueueAfterDelay(e,n,s){this.Xc(),this.Jc.indexOf(e)>-1&&(n=0);const r=bu.createAndSchedule(this,e,n,s,i=>this.ea(i));return this.jc.push(r),r}Xc(){this.zc&&q()}verifyOperationInProgress(){}async na(){let e;do e=this.Kc,await e;while(e!==this.Kc)}sa(e){for(const n of this.jc)if(n.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.jc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const n=this.jc.indexOf(e);this.jc.splice(n,1)}}function Ph(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Ns extends Po{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new TT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||fm(this),this._firestoreClient.terminate()}}function ST(t,e){const n=typeof t=="object"?t:A0(),s=typeof t=="string"?t:e||"(default)",r=S0(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=Ew("firestore");i&&_T(r,...i)}return r}function Du(t){return t._firestoreClient||fm(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function fm(t){var e,n,s;const r=t._freezeSettings(),i=function(o,a,c,u){return new sE(o,a,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new mT(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=r.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.cache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ks(Ze.fromBase64String(e))}catch(n){throw new B(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ks(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=/^__.*__$/;class IT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new bn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hr(e,this.data,n,this.fieldTransforms)}}class dm{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new bn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}class Fo{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.oa(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new Fo(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ca({path:s,ha:!1});return r.la(e),r}fa(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ca({path:s,ha:!1});return r.oa(),r}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return Wi(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(e.length===0)throw this._a("Document fields must not be empty");if(pm(this.ua)&&bT.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class CT{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ko(e)}ga(e,n,s,r=!1){return new Fo({ua:e,methodName:n,ma:s,path:Ge.emptyPath(),ha:!1,wa:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mm(t){const e=t._freezeSettings(),n=ko(t._databaseId);return new CT(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AT(t,e,n,s,r,i={}){const o=t.ga(i.merge||i.mergeFields?2:0,e,n,r);ku("Data must be an object, but it was:",o,s);const a=ym(s,o);let c,u;if(i.merge)c=new lt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const l=[];for(const h of i.mergeFields){const d=fc(e,h,n);if(!o.contains(d))throw new B(T.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);wm(l,d)||l.push(d)}c=new lt(l),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new IT(new at(a),c,u)}class Uo extends Qr{_toFieldTransform(e){if(e.ua!==2)throw e.ua===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uo}}function gm(t,e,n){return new Fo({ua:3,ma:e.settings.ma,methodName:t._methodName,ha:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class RT extends Qr{constructor(e,n){super(e),this.ya=n}_toFieldTransform(e){const n=gm(this,e,!0),s=this.ya.map(i=>zs(i,n)),r=new As(s);return new xp(e.path,r)}isEqual(e){return this===e}}class xT extends Qr{constructor(e,n){super(e),this.ya=n}_toFieldTransform(e){const n=gm(this,e,!0),s=this.ya.map(i=>zs(i,n)),r=new Rs(s);return new xp(e.path,r)}isEqual(e){return this===e}}function DT(t,e,n,s){const r=t.ga(1,e,n);ku("Data must be an object, but it was:",r,s);const i=[],o=at.empty();Wn(s,(c,u)=>{const l=Mu(e,c,n);u=Yt(u);const h=r.fa(l);if(u instanceof Uo)i.push(l);else{const d=zs(u,h);d!=null&&(i.push(l),o.set(l,d))}});const a=new lt(i);return new dm(o,a,r.fieldTransforms)}function NT(t,e,n,s,r,i){const o=t.ga(1,e,n),a=[fc(e,s,n)],c=[r];if(i.length%2!=0)throw new B(T.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(fc(e,i[d])),c.push(i[d+1]);const u=[],l=at.empty();for(let d=a.length-1;d>=0;--d)if(!wm(u,a[d])){const m=a[d];let v=c[d];v=Yt(v);const w=o.fa(m);if(v instanceof Uo)u.push(m);else{const C=zs(v,w);C!=null&&(u.push(m),l.set(m,C))}}const h=new lt(u);return new dm(l,h,o.fieldTransforms)}function zs(t,e){if(vm(t=Yt(t)))return ku("Unsupported field value:",e,t),ym(t,e);if(t instanceof Qr)return function(n,s){if(!pm(s.ua))throw s._a(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ha&&e.ua!==4)throw e._a("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=zs(o,s.da(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Yt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return CE(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=ke.fromDate(n);return{timestampValue:Ki(s.serializer,r)}}if(n instanceof ke){const r=new ke(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ki(s.serializer,r)}}if(n instanceof Nu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ks)return{bytesValue:Lp(s.serializer,n._byteString)};if(n instanceof Ye){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:yu(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s._a(`Unsupported field value: ${Ru(n)}`)}(t,e)}function ym(t,e){const n={};return up(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wn(t,(s,r)=>{const i=zs(r,e.aa(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function vm(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof Nu||t instanceof ks||t instanceof Ye||t instanceof Qr)}function ku(t,e,n){if(!vm(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=Ru(n);throw s==="an object"?e._a(t+" a custom object"):e._a(t+" "+s)}}function fc(t,e,n){if((e=Yt(e))instanceof $o)return e._internalPath;if(typeof e=="string")return Mu(t,e);throw Wi("Field path arguments must be of type string or ",t,!1,void 0,n)}const kT=new RegExp("[~\\*/\\[\\]]");function Mu(t,e,n){if(e.search(kT)>=0)throw Wi(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $o(...e.split("."))._internalPath}catch{throw Wi(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wi(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new B(T.INVALID_ARGUMENT,a+t+c)}function wm(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_m("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MT extends Em{data(){return super.data()}}function _m(t,e){return typeof e=="string"?Mu(t,e):e instanceof $o?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PT{convertValue(e,n="none"){switch(Kn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Wn(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertGeoPoint(e){return new Nu(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=lu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Dr(e));default:return null}}convertTimestamp(e){const n=En(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=we.fromString(e);ye(Bp(s));const r=new Nr(s.get(1),s.get(3)),i=new j(s.popFirst(5));return r.isEqual(n)||en(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tm extends Em{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ti(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(_m("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Ti extends Tm{data(e={}){return super.data(e)}}class $T{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new sr(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ti(this._firestore,this._userDataWriter,s.key,s,new sr(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new Ti(s._firestore,s._userDataWriter,o.doc.key,o.doc,new sr(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new Ti(s._firestore,s._userDataWriter,o.doc.key,o.doc,new sr(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:FT(o.type),doc:a,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function FT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t){t=Vt(t,Ye);const e=Vt(t.firestore,Ns);return wT(Du(e),t._key).then(n=>Cm(e,t,n))}class bm extends PT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}}function UT(t,e,n){t=Vt(t,Ye);const s=Vt(t.firestore,Ns),r=LT(t.converter,e,n);return Im(s,[AT(mm(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ft.none())])}function fa(t,e,n,...s){t=Vt(t,Ye);const r=Vt(t.firestore,Ns),i=mm(r);let o;return o=typeof(e=Yt(e))=="string"||e instanceof $o?NT(i,"updateDoc",t._key,e,n,s):DT(i,"updateDoc",t._key,e),Im(r,[o.toMutation(t._key,Ft.exists(!0))])}function VT(t,...e){var n,s,r;t=Yt(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Ph(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Ph(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let c,u,l;if(t instanceof Ye)u=Vt(t.firestore,Ns),l=Co(t._key.path),c={next:h=>{e[o]&&e[o](Cm(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Vt(t,Lo);u=Vt(h.firestore,Ns),l=h._query;const d=new bm(u);c={next:m=>{e[o]&&e[o](new $T(u,d,h,m))},error:e[o+1],complete:e[o+2]},OT(t._query)}return function(h,d,m,v){const w=new cm(v),C=new tm(d,w,m);return h.asyncQueue.enqueueAndForget(async()=>Zp(await hc(h),C)),()=>{w.Sc(),h.asyncQueue.enqueueAndForget(async()=>em(await hc(h),C))}}(Du(u),l,a,c)}function Im(t,e){return function(n,s){const r=new gn;return n.asyncQueue.enqueueAndForget(async()=>iT(await vT(n),s,r)),r.promise}(Du(t),e)}function Cm(t,e,n){const s=n.docs.get(e._key),r=new bm(t);return new Tm(t,r,e._key,s,new sr(n.hasPendingWrites,n.fromCache),e.converter)}function BT(...t){return new RT("arrayUnion",t)}function jT(...t){return new xT("arrayRemove",t)}(function(t,e=!0){(function(n){Bs=n})(C0),Ni(new Tr("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new Ns(new q1(n.getProvider("auth-internal")),new G1(n.getProvider("app-check-internal")),function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new B(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nr(a.options.projectId,c)}(i,s),i);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),fs(th,"3.11.0",t),fs(th,"3.11.0","esm2017")})();var qT="firebase",zT="9.21.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs(qT,zT,"app");const HT={apiKey:"AIzaSyBdrW-op61lrviPqesC6ez5K5aSxHf_Y14",authDomain:"e-culture-71815.firebaseapp.com",projectId:"e-culture-71815",storageBucket:"e-culture-71815.appspot.com",messagingSenderId:"52761179686",appId:"1:52761179686:web:19db1bff3af727288658e7"};ed(HT);const Ou=ST(),KT=xu(Ou,"game-rooms"),GT=xu(Ou,"players");xu(Ou,"quizzes");const Tt=class{constructor(e,n){Oe(this,"id");Oe(this,"pseudo");this.id=e,this.pseudo=n}static generate(){const n=Math.floor(Math.random()*1e12),s=`user${n}`;return new Tt(n.toString(),s)}saveLocal(){localStorage.setItem(Tt.LOCAL_STORAGE_KEY,JSON.stringify(this))}static savedLocally(){return localStorage.getItem(Tt.LOCAL_STORAGE_KEY)!=null}static loadLocal(){const e=localStorage.getItem(Tt.LOCAL_STORAGE_KEY);if(e){const n=JSON.parse(e);return new Tt(n.id,n.pseudo)}else throw Error("Loading player from local storage but not in local storage.")}get ref(){return Tt.getRef(this.id)}static getRef(e){return hm(GT,e)}static async loadServerFromRef(e){const n=await Sm(e);return Tt.loadFromSnapshot(n)}saveServer(){UT(this.ref,this.doc).then(()=>console.debug(`Player ${this} saved on firestore.`)).catch(e=>console.error(`Player ${this} not saved on firestore: ${e}.`))}static loadFromSnapshot(e){var s;const n=(s=e.data())==null?void 0:s.pseudo;if(n)return new Tt(e.id,n);throw Error(`Impossible to create Player from ${e}: pseudo not in data.`)}get doc(){return{id:this.id,pseudo:this.pseudo}}equals(e){return e instanceof Tt&&this.id===e.id}};let yt=Tt;Oe(yt,"LOCAL_STORAGE_KEY","player");const WT=et({data(){return{player:yt.loadLocal()}}}),tt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n};function QT(t,e,n,s,r,i){return Q(),Z("p",null,It(t.player.pseudo),1)}const JT=tt(WT,[["render",QT]]),XT=et({components:{UserInfoSmall:JT}}),YT="/e-culture/logo/application-without-text.png";const ZT=t=>(Ls("data-v-312863de"),t=t(),$s(),t),eS=ZT(()=>de("img",{src:YT,alt:"application logo"},null,-1));function tS(t,e,n,s,r,i){const o=Ne("router-link"),a=Ne("UserInfoSmall");return Q(),Z("header",null,[ce(o,{to:"/"},{default:Un(()=>[eS]),_:1}),ce(a)])}const Jr=tt(XT,[["render",tS],["__scopeId","data-v-312863de"]]),nS=et({components:{HeaderDefault:Jr}}),sS="/e-culture/logo/application.png",rS="/e-culture/logo/company.png";const Am=t=>(Ls("data-v-a7538ab7"),t=t(),$s(),t),iS={id:"home"},oS=Am(()=>de("img",{src:sS,alt:"application logo"},null,-1)),aS={id:"actions"},cS=Am(()=>de("footer",null,[de("img",{src:rS,alt:"company logo"})],-1));function uS(t,e,n,s,r,i){const o=Ne("HeaderDefault"),a=Ne("router-link");return Q(),Z("div",iS,[ce(o),de("main",null,[oS,de("div",aS,[ce(a,{class:"pseudo-button",to:"/create-game-room"},{default:Un(()=>[Jt("Create a Game Room")]),_:1}),ce(a,{class:"pseudo-button",to:"/join-game-room"},{default:Un(()=>[Jt("Join a Game Room")]),_:1}),ce(a,{class:"pseudo-button",to:"/about"},{default:Un(()=>[Jt("About Us")]),_:1})])]),cS])}const lS=tt(nS,[["render",uS],["__scopeId","data-v-a7538ab7"]]),hS=et({components:{HeaderDefault:Jr}}),fS=de("p",null,"Create Game Room here",-1);function dS(t,e,n,s,r,i){const o=Ne("HeaderDefault");return Q(),Z(ze,null,[ce(o),fS],64)}const pS=tt(hS,[["render",dS]]),mS=et({data:()=>({gameRoomId:""})});const Rm=t=>(Ls("data-v-f6202bff"),t=t(),$s(),t),gS={id:"join-game-room-from-id"},yS=Rm(()=>de("h2",null,"Join a Game Room from an ID",-1)),vS={key:0},wS={key:1},ES=Rm(()=>de("p",null,"Please enter a Game Room ID",-1)),_S=[ES];function TS(t,e,n,s,r,i){const o=Ne("router-link");return Q(),Z("div",gS,[yS,sy(de("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>t.gameRoomId=a),placeholder:"Game Room ID"},null,512),[[sv,t.gameRoomId]]),t.gameRoomId?(Q(),Z("div",vS,[ce(o,{to:"/game-room/"+t.gameRoomId,class:"pseudo-button"},{default:Un(()=>[Jt("Join Game Room '"+It(t.gameRoomId)+"'",1)]),_:1},8,["to"])])):(Q(),Z("div",wS,_S))])}const SS=tt(mS,[["render",TS],["__scopeId","data-v-f6202bff"]]);const bS={},IS=t=>(Ls("data-v-c2eb437b"),t=t(),$s(),t),CS={id:"join-random-game-room"},AS=IS(()=>de("h2",null,"Join a Random Game Room",-1));function RS(t,e){const n=Ne("router-link");return Q(),Z("div",CS,[AS,ce(n,{to:"/game-room/random",class:"pseudo-button"},{default:Un(()=>[Jt("Join a random Game Room")]),_:1})])}const xS=tt(bS,[["render",RS],["__scopeId","data-v-c2eb437b"]]),DS=et({components:{JoinGameRoomFromId:SS,JoinGameRoomRandom:xS,HeaderDefault:Jr}});const NS={id:"join-game-room"},kS={id:"different-join"};function MS(t,e,n,s,r,i){const o=Ne("HeaderDefault"),a=Ne("JoinGameRoomRandom"),c=Ne("JoinGameRoomFromId");return Q(),Z("div",NS,[ce(o),de("div",kS,[ce(a),ce(c)])])}const OS=tt(DS,[["render",MS],["__scopeId","data-v-bae75fb0"]]),PS=et({components:{HeaderDefault:Jr}}),LS=de("p",null,"About here",-1);function $S(t,e,n,s,r,i){const o=Ne("HeaderDefault");return Q(),Z(ze,null,[ce(o),LS],64)}const FS=tt(PS,[["render",$S]]),US=et({data(){return{player:yt.loadLocal()}},props:{players:{type:Object,required:!0},owner:{type:Object}}}),VS={id:"player-list"},BS={key:0},jS={key:1},qS={key:2};function zS(t,e,n,s,r,i){return Q(),Z("div",VS,[de("ul",null,[(Q(!0),Z(ze,null,kc(t.players,o=>(Q(),Z("li",{key:o.id},[t.player.equals(o)?(Q(),Z("span",BS,"You")):(Q(),Z("span",jS,It(o.pseudo),1)),o.equals(t.owner)?(Q(),Z("span",qS," ")):Cy("",!0)]))),128))])])}const HS=tt(US,[["render",zS]]),KS=et({data(){return{player:yt.loadLocal()}},props:{gameRoom:{type:Object,required:!0}},components:{PlayersList:HS}}),GS={key:1};function WS(t,e,n,s,r,i){const o=Ne("PlayersList");return Q(),Z(ze,null,[ce(o,{players:t.gameRoom.players,owner:t.gameRoom.owner},null,8,["players","owner"]),t.gameRoom.isOwner(t.player)?(Q(),Z("button",{key:0,class:"pseudo-button",onClick:e[0]||(e[0]=(...a)=>t.gameRoom.startGameServer&&t.gameRoom.startGameServer(...a))}," Start game ")):(Q(),Z("p",GS,"Waiting for the owner to start the game..."))],64)}const QS=tt(KS,[["render",WS]]),JS=et({data(){return{selectedAnswer:null}},props:{quiz:{type:Object,required:!0}},emits:["answerSelected"],watch:{quiz(){this.selectedAnswer=null}},computed:{shuffledAnswers(){const t=[...this.quiz.answers];for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}},methods:{selectAnswer(t){this.selectedAnswer=t,this.$emit("answerSelected",t)}}});const XS=t=>(Ls("data-v-2fb97803"),t=t(),$s(),t),YS={id:"quiz"},ZS={key:0,id:"result"},eb={key:0,id:"correct-indicator"},tb={key:1,id:"incorrect-indicator"},nb=XS(()=>de("br",null,null,-1)),sb={key:1,id:"answers"},rb=["onClick"];function ib(t,e,n,s,r,i){return Q(),Z("div",YS,[de("h3",null,It(t.quiz.question),1),t.selectedAnswer?(Q(),Z("p",ZS,[Jt(" Your answer is "),t.selectedAnswer.correct?(Q(),Z("span",eb,"CORRECT")):(Q(),Z("span",tb,"INCORRECT")),nb,Jt(" Waiting for the next question... ")])):(Q(),Z("ul",sb,[(Q(!0),Z(ze,null,kc(t.shuffledAnswers,(o,a)=>(Q(),Z("li",{key:a},[de("button",{class:"pseudo-button",onClick:c=>t.selectAnswer(o)},It(o.answer),9,rb)]))),128))]))])}const ob=tt(JS,[["render",ib],["__scopeId","data-v-2fb97803"]]),ab=et({data(){return{player:yt.loadLocal()}},props:{gameRoom:{type:Object,required:!0}},methods:{runUpdateLoop(){this.gameRoom.game.ended||(this.$forceUpdate(),setTimeout(this.runUpdateLoop,100))},sendAnswer(t){this.gameRoom.sendAnswerServer(t,this.player)}},mounted(){this.runUpdateLoop()},components:{GameRoomPlayingQuiz:ob}});function cb(t,e,n,s,r,i){const o=Ne("GameRoomPlayingQuiz");return Q(),Z(ze,null,[de("p",null,"Quiz "+It(t.gameRoom.game.indexCurrentQuiz+1)+" of "+It(t.gameRoom.game.quizzes.length),1),de("p",null,"Remaining time: "+It(t.gameRoom.game.timeUntilNextQuiz),1),ce(o,{quiz:t.gameRoom.game.currentQuiz,onAnswerSelected:t.sendAnswer},null,8,["quiz","onAnswerSelected"])],64)}const ub=tt(ab,[["render",cb]]),lb=et({data(){return{player:yt.loadLocal()}},props:{scores:{type:Object,required:!0}}});const hb=t=>(Ls("data-v-084db6e8"),t=t(),$s(),t),fb={id:"scores"},db=hb(()=>de("p",null,"Scores:",-1)),pb={id:"scores-ul"},mb={id:"player-name"},gb={key:0},yb={key:1};function vb(t,e,n,s,r,i){return Q(),Z("div",fb,[db,de("ul",pb,[(Q(!0),Z(ze,null,kc(t.scores,(o,a)=>(Q(),Z("li",{key:a},[de("span",mb,[t.player.equals(o.player)?(Q(),Z("span",gb,"You")):(Q(),Z("span",yb,It(o.player.pseudo),1))]),Jt(": "),de("span",null,It(o.points),1)]))),128))])])}const wb=tt(lb,[["render",vb],["__scopeId","data-v-084db6e8"]]),Eb=et({data(){return{gameEnded:null}},props:{gameRoom:{type:Object,required:!0}},watch:{gameRoom:{handler(){this.gameEnded=this.gameRoom.game.ended},immediate:!0}},methods:{updateLoopGameEnded(){this.gameEnded=this.gameRoom.game.ended,this.gameEnded||setTimeout(()=>this.updateLoopGameEnded(),100)}},mounted(){this.updateLoopGameEnded()},components:{GameRoomPlaying:ub,GameRoomWaiting:QS,GameRoomScores:wb}}),_b={key:0},Tb={key:0};function Sb(t,e,n,s,r,i){const o=Ne("GameRoomScores"),a=Ne("GameRoomPlaying"),c=Ne("GameRoomWaiting");return t.gameRoom.game.started?(Q(),Z("div",_b,[ce(o,{scores:t.gameRoom.scores},null,8,["scores"]),t.gameEnded?(Q(),Z("p",Tb,"game ended")):(Q(),wr(a,{key:1,"game-room":t.gameRoom},null,8,["game-room"]))])):(Q(),wr(c,{key:1,"game-room":t.gameRoom},null,8,["game-room"]))}const bb=tt(Eb,[["render",Sb]]);class Lh{constructor(e,n){Oe(this,"points");Oe(this,"player");this.points=e,this.player=n}get doc(){return{points:this.points,player:this.player.ref}}addGoodAnswer(){this.points++}valueOf(){return this.points}}function xm(t,e){for(var n=[],s=0;s!=e;++s)n.push(t.unsafeNext());return n}function Ib(t,e){var n=t.clone(),s=xm(n,e);return[s,n]}function Dm(t,e){for(var n=0;n!=e;++n)t.unsafeNext()}function Cb(t,e){var n=t.clone();return Dm(n,e),n}var Ab=214013,Rb=2531011,xb=4294967295,Db=(1<<31)-1,da=function(t){return t*Ab+Rb&xb},pa=function(t){return(t&Db)>>16},Nb=function(){function t(e){this.seed=e}return t.prototype.clone=function(){return new t(this.seed)},t.prototype.next=function(){var e=new t(this.seed),n=e.unsafeNext();return[n,e]},t.prototype.unsafeNext=function(){var e=da(this.seed),n=pa(e),s=da(e),r=pa(s);this.seed=da(s);var i=pa(this.seed),o=i+(r+(n<<15)<<15);return o|0},t}(),kb=function(t){return new Nb(t)},Mb=function(){function t(e,n){this.states=e,this.index=n}return t.twist=function(e){for(var n=e.slice(),s=0;s!==t.N-t.M;++s){var r=(n[s]&t.MASK_UPPER)+(n[s+1]&t.MASK_LOWER);n[s]=n[s+t.M]^r>>>1^-(r&1)&t.A}for(var s=t.N-t.M;s!==t.N-1;++s){var i=(n[s]&t.MASK_UPPER)+(n[s+1]&t.MASK_LOWER);n[s]=n[s+t.M-t.N]^i>>>1^-(i&1)&t.A}var o=(n[t.N-1]&t.MASK_UPPER)+(n[0]&t.MASK_LOWER);return n[t.N-1]=n[t.M-1]^o>>>1^-(o&1)&t.A,n},t.seeded=function(e){var n=Array(t.N);n[0]=e;for(var s=1;s!==t.N;++s){var r=n[s-1]^n[s-1]>>>30;n[s]=Math.imul(t.F,r)+s|0}return n},t.from=function(e){return new t(t.twist(t.seeded(e)),0)},t.prototype.clone=function(){return new t(this.states,this.index)},t.prototype.next=function(){var e=new t(this.states,this.index),n=e.unsafeNext();return[n,e]},t.prototype.unsafeNext=function(){var e=this.states[this.index];return e^=this.states[this.index]>>>t.U,e^=e<<t.S&t.B,e^=e<<t.T&t.C,e^=e>>>t.L,++this.index>=t.N&&(this.states=t.twist(this.states),this.index=0),e},t.N=624,t.M=397,t.R=31,t.A=2567483615,t.F=1812433253,t.U=11,t.S=7,t.B=2636928640,t.T=15,t.C=4022730752,t.L=18,t.MASK_LOWER=Math.pow(2,t.R)-1,t.MASK_UPPER=Math.pow(2,t.R),t}();function Ob(t){return Mb.from(t)}var Pb=function(){function t(e,n,s,r){this.s01=e,this.s00=n,this.s11=s,this.s10=r}return t.prototype.clone=function(){return new t(this.s01,this.s00,this.s11,this.s10)},t.prototype.next=function(){var e=new t(this.s01,this.s00,this.s11,this.s10),n=e.unsafeNext();return[n,e]},t.prototype.unsafeNext=function(){var e=this.s00^this.s00<<23,n=this.s01^(this.s01<<23|this.s00>>>9),s=e^this.s10^(e>>>18|n<<14)^(this.s10>>>5|this.s11<<27),r=n^this.s11^n>>>18^this.s11>>>5,i=this.s00+this.s10|0;return this.s01=this.s11,this.s00=this.s10,this.s11=r,this.s10=s,i},t.prototype.jump=function(){var e=new t(this.s01,this.s00,this.s11,this.s10);return e.unsafeJump(),e},t.prototype.unsafeJump=function(){for(var e=0,n=0,s=0,r=0,i=[1667051007,2321340297,1548169110,304075285],o=0;o!==4;++o)for(var a=1;a;a<<=1)i[o]&a&&(e^=this.s01,n^=this.s00,s^=this.s11,r^=this.s10),this.unsafeNext();this.s01=e,this.s00=n,this.s11=s,this.s10=r},t}(),Lb=function(t){return new Pb(-1,~t,t|0,0)},$b=function(){function t(e,n,s,r){this.s01=e,this.s00=n,this.s11=s,this.s10=r}return t.prototype.clone=function(){return new t(this.s01,this.s00,this.s11,this.s10)},t.prototype.next=function(){var e=new t(this.s01,this.s00,this.s11,this.s10),n=e.unsafeNext();return[n,e]},t.prototype.unsafeNext=function(){var e=this.s00+this.s10|0,n=this.s10^this.s00,s=this.s11^this.s01,r=this.s00,i=this.s01;return this.s00=r<<24^i>>>8^n^n<<16,this.s01=i<<24^r>>>8^s^(s<<16|n>>>16),this.s10=s<<5^n>>>27,this.s11=n<<5^s>>>27,e},t.prototype.jump=function(){var e=new t(this.s01,this.s00,this.s11,this.s10);return e.unsafeJump(),e},t.prototype.unsafeJump=function(){for(var e=0,n=0,s=0,r=0,i=[3639956645,3750757012,1261568508,386426335],o=0;o!==4;++o)for(var a=1;a;a<<=1)i[o]&a&&(e^=this.s01,n^=this.s00,s^=this.s11,r^=this.s10),this.unsafeNext();this.s01=e,this.s00=n,this.s11=s,this.s10=r},t}(),Fb=function(t){return new $b(-1,~t,t|0,0)};function Nm(t,e){if(t.sign!==e.sign)return Pu(t,{sign:-e.sign,data:e.data});for(var n=[],s=0,r=t.data,i=e.data,o=r.length-1,a=i.length-1;o>=0||a>=0;--o,--a){var c=o>=0?r[o]:0,u=a>=0?i[a]:0,l=c+u+s;n.push(l>>>0),s=~~(l/4294967296)}return s!==0&&n.push(s),{sign:t.sign,data:n.reverse()}}function Ub(t){t.sign=1;for(var e=t.data,n=e.length-1;n>=0;--n)if(e[n]===4294967295)e[n]=0;else return e[n]+=1,t;return e.unshift(1),t}function Vb(t,e){for(var n=Math.max(t.length,e.length),s=0;s<n;++s){var r=s+t.length-n,i=s+e.length-n,o=r>=0?t[r]:0,a=i>=0?e[i]:0;if(o<a)return!0;if(o>a)return!1}return!1}function Pu(t,e){if(t.sign!==e.sign)return Nm(t,{sign:-e.sign,data:e.data});var n=t.data,s=e.data;if(Vb(n,s)){var r=Pu(e,t);return r.sign=-r.sign,r}for(var i=[],o=0,a=n.length-1,c=s.length-1;a>=0||c>=0;--a,--c){var u=a>=0?n[a]:0,l=c>=0?s[c]:0,h=u-l-o;i.push(h>>>0),o=h<0?1:0}return{sign:t.sign,data:i.reverse()}}function $h(t){for(var e=t.data,n=0;n!==e.length&&e[n]===0;++n);return n===e.length?(t.sign=1,t.data=[0],t):(e.splice(0,n),t)}function ma(t,e){if(e<0){var n=-e;t.sign=-1,t.data[0]=~~(n/4294967296),t.data[1]=n>>>0}else t.sign=1,t.data[0]=~~(e/4294967296),t.data[1]=e>>>0;return t}function Bb(t,e,n){var s=e.data[1],r=e.data[0],i=e.sign,o=n.data[1],a=n.data[0],c=n.sign;if(t.sign=1,i===1&&c===-1){var u=s+o,l=r+a+(u>4294967295?1:0);return t.data[0]=l>>>0,t.data[1]=u>>>0,t}var h=s,d=r,m=o,v=a;i===-1&&(h=o,d=a,m=s,v=r);var w=0,C=h-m;return C<0&&(w=1,C=C>>>0),t.data[0]=d-v-w,t.data[1]=C,t}function km(t,e){for(var n=t>2?~~(4294967296/t)*t:4294967296,s=e.unsafeNext()+2147483648;s>=n;)s=e.unsafeNext()+2147483648;return s%t}function Mm(t,e,n){for(var s=e.length;;){for(var r=0;r!==s;++r){var i=r===0?e[0]+1:4294967296,o=km(i,n);t[r]=o}for(var r=0;r!==s;++r){var a=t[r],c=e[r];if(a<c)return t;if(a>c)break}}}function dc(t,e,n){var s=$h(Ub(Pu(e,t))),r=s.data.slice(0),i=Mm(r,s.data,n);return $h(Nm({sign:1,data:i},t))}function jb(t,e,n){if(n!=null){var s=n.clone();return[dc(t,e,s),s]}return function(r){var i=r.clone();return[dc(t,e,i),i]}}var Xs=typeof BigInt<"u"?BigInt:void 0;function pc(t,e,n){for(var s=e-t+Xs(1),r=Xs(-2147483648),i=Xs(4294967296),o=i,a=1;o<s;)o*=i,++a;for(var c=o-o%s;;){for(var u=Xs(0),l=0;l!==a;++l){var h=n.unsafeNext();u=i*u+(Xs(h)-r)}if(u<c){var d=u%s;return d+t}}}function qb(t,e,n){if(n!=null){var s=n.clone();return[pc(t,e,s),s]}return function(r){var i=r.clone();return[pc(t,e,i),i]}}var zb=Number.MAX_SAFE_INTEGER,Hb={sign:1,data:[0,0]},Kb={sign:1,data:[0,0]},Fh={sign:1,data:[0,0]},ga=[0,0];function Gb(t,e,n,s){var r=n<=zb?ma(Fh,n):Bb(Fh,ma(Hb,e),ma(Kb,t));return r.data[1]===4294967295?(r.data[0]+=1,r.data[1]=0):r.data[1]+=1,Mm(ga,r.data,s),ga[0]*4294967296+ga[1]+t}function mc(t,e,n){var s=e-t;if(s<=4294967295){var r=km(s+1,n);return r+t}return Gb(t,e,s,n)}function Wb(t,e,n){if(n!=null){var s=n.clone();return[mc(t,e,s),s]}return function(r){var i=r.clone();return[mc(t,e,i),i]}}var Qb="module",Jb="6.0.2",Xb="ad3183ba9b712bc6c1c5a9abbb1d1e641db139d4";const Uh=Object.freeze(Object.defineProperty({__proto__:null,__commitHash:Xb,__type:Qb,__version:Jb,congruential32:kb,generateN:Ib,mersenne:Ob,skipN:Cb,uniformArrayIntDistribution:jb,uniformBigIntDistribution:qb,uniformIntDistribution:Wb,unsafeGenerateN:xm,unsafeSkipN:Dm,unsafeUniformArrayIntDistribution:dc,unsafeUniformBigIntDistribution:pc,unsafeUniformIntDistribution:mc,xoroshiro128plus:Fb,xorshift128plus:Lb},Symbol.toStringTag,{value:"Module"}));class Lu{constructor(e,n){Oe(this,"answer");Oe(this,"correct");this.answer=e,this.correct=n}static fromJson(e){const n=e.answer,s=e.correct;if(typeof n=="string"&&typeof s=="boolean")return new Lu(n,s);throw Error(`Impossible to create QuizAnswer from a JSON: incorrect field 'answer' or 'correct' in ${e}`)}}const Yb=[{question:"Which king was responsible for the Norman Conquest of England?",answers:[{answer:"William the Conqueror",correct:!0},{answer:"Richard the Lionheart",correct:!1},{answer:"Henry II",correct:!1},{answer:"Edward the Confessor",correct:!1}],tags:["history"]},{question:"Which battle marked the end of the Anglo-Saxon era and the beginning of Norman rule in England?",answers:[{answer:"The Battle of Hastings",correct:!0},{answer:"The Battle of Stamford Bridge",correct:!1},{answer:"The Battle of Bosworth Field",correct:!1},{answer:"The Battle of Agincourt",correct:!1}],tags:["history"]},{question:"Who was the first Tudor monarch of England?",answers:[{answer:"Henry VII",correct:!0},{answer:"Edward VI",correct:!1},{answer:"Mary I",correct:!1},{answer:"Elizabeth I",correct:!1}],tags:["history"]},{question:"What was the cause of the English Civil War?",answers:[{answer:"A struggle for power between the King and Parliament",correct:!0},{answer:"A rebellion against foreign rule",correct:!1},{answer:"A dispute over religious freedom",correct:!1},{answer:"A conflict over trade agreements",correct:!1}],tags:["history"]},{question:"Who was the last monarch of the House of Stuart?",answers:[{answer:"Queen Anne",correct:!0},{answer:"King James II",correct:!1},{answer:"King Charles I",correct:!1},{answer:"King William III",correct:!1}],tags:["history"]},{question:"What event led to the Glorious Revolution in England?",answers:[{answer:"The deposition of King James II and the accession of William and Mary",correct:!0},{answer:"The English Civil War",correct:!1},{answer:"The signing of the Magna Carta",correct:!1},{answer:"The Battle of Trafalgar",correct:!1}],tags:["history"]},{question:"Who was the first English monarch to be beheaded?",answers:[{answer:"King Charles I",correct:!0},{answer:"King Edward I",correct:!1},{answer:"King Henry VIII",correct:!1},{answer:"King Richard III",correct:!1}],tags:["history"]},{question:"What was the name of the ship that carried the Pilgrims to the New World?",answers:[{answer:"The Mayflower",correct:!0},{answer:"The Santa Maria",correct:!1},{answer:"The Nina",correct:!1},{answer:"The Pinta",correct:!1}],tags:["history"]},{question:"What is the highest mountain in the UK?",answers:[{answer:"Ben Nevis",correct:!0},{answer:"Snowdon",correct:!1},{answer:"Scafell Pike",correct:!1},{answer:"Slieve Donard",correct:!1}],tags:["geography"]},{question:"What is the longest river in the UK?",answers:[{answer:"River Severn",correct:!0},{answer:"River Thames",correct:!1},{answer:"River Tay",correct:!1},{answer:"River Spey",correct:!1}],tags:["geography"]},{question:"What is the largest lake in the UK?",answers:[{answer:"Loch Lomond",correct:!0},{answer:"Lake Windermere",correct:!1},{answer:"Loch Ness",correct:!1},{answer:"Lough Neagh",correct:!1}]},{question:"What is the name of the famous prehistoric monument located in Wiltshire, England?",answers:[{answer:"Stonehenge",correct:!0},{answer:"Avebury",correct:!1},{answer:"The Cerne Abbas Giant",correct:!1},{answer:"The Rollright Stones",correct:!1}],tags:["geography"]},{question:"What is the highest waterfall in the UK?",answers:[{answer:"Eas a' Chual Aluinn",correct:!0},{answer:"Sgwd Ddu",correct:!1},{answer:"Hardraw Force",correct:!1},{answer:"High Force",correct:!1}],tags:["geography"]},{question:"What is the name of the highest village in Scotland?",answers:[{answer:"Wanlockhead",correct:!0},{answer:"Tomintoul",correct:!1},{answer:"Braemar",correct:!1},{answer:"Aviemore",correct:!1}],tags:["geography"]},{question:"What is the name of the peninsula in southwestern England that is famous for its beaches and surf culture?",answers:[{answer:"Cornwall",correct:!0},{answer:"Devon",correct:!1},{answer:"Dorset",correct:!1},{answer:"Isle of Wight",correct:!1}],tags:["geography"]},{question:"What is the name of the highest mountain in Wales?",answers:[{answer:"Snowdon",correct:!0},{answer:"Cader Idris",correct:!1},{answer:"Pen y Fan",correct:!1},{answer:"Tryfan",correct:!1}],tags:["geography"]},{question:"What is the capital of the United Kingdom?",answers:[{answer:"London",correct:!0},{answer:"Paris",correct:!1},{answer:"Birmingham",correct:!1},{answer:"Manchester",correct:!1}],tags:["geography"]},{question:"How many inhabited islands belong to the United Kingdom?",answers:[{answer:"129",correct:!0},{answer:"17",correct:!1},{answer:"73",correct:!1},{answer:"214",correct:!1}],tags:["geography"]},{question:"Which of those city names is NOT in the United Kingdom?",answers:[{answer:"Bergen",correct:!0},{answer:"Belfast",correct:!1},{answer:"Glasgow",correct:!1},{answer:"Swansea",correct:!1}],tags:["geography"]},{question:"Who wrote the novel '1984', which is considered one of the most important works of dystopian fiction?",answers:[{answer:"George Orwell",correct:!0},{answer:"Aldous Huxley",correct:!1},{answer:"Ray Bradbury",correct:!1},{answer:"Margaret Atwood",correct:!1}],tags:["art","literature"]},{question:"What is the name of the famous novel by Jane Austen that follows the story of Elizabeth Bennet and Mr. Darcy?",answers:[{answer:"Pride and Prejudice",correct:!0},{answer:"Sense and Sensibility",correct:!1},{answer:"Emma",correct:!1},{answer:"Mansfield Park",correct:!1}],tags:["art","literature"]},{question:"What is the name of the Nobel Prize-winning British author who wrote the novels 'Lord of the Flies' and 'Rites of Passage'?",answers:[{answer:"William Golding",correct:!0},{answer:"J.K. Rowling",correct:!1},{answer:"Roald Dahl",correct:!1},{answer:"Kazuo Ishiguro",correct:!1}],tags:["art","literature"]},{question:"What is the name of the famous British children's author who created the character of Peter Rabbit?",answers:[{answer:"Beatrix Potter",correct:!0},{answer:"Lewis Carroll",correct:!1},{answer:"Enid Blyton",correct:!1},{answer:"Roald Dahl",correct:!1}],tags:["art","literature"]},{question:"What is the name of the famous English poet who wrote the poem 'The Waste Land'?",answers:[{answer:"T.S. Eliot",correct:!0},{answer:"William Wordsworth",correct:!1},{answer:"Samuel Taylor Coleridge",correct:!1},{answer:"John Keats",correct:!1}],tags:["art","literature"]},{question:"What is the name of the famous English playwright who wrote the plays 'Hamlet', 'Macbeth', and 'Romeo and Juliet'?",answers:[{answer:"William Shakespeare",correct:!0},{answer:"Christopher Marlowe",correct:!1},{answer:"Ben Jonson",correct:!1},{answer:"Tom Stoppard",correct:!1}],tags:["art","literature"]},{question:"What is the name of the famous Scottish novelist who wrote the novel 'Rob Roy'?",answers:[{answer:"Sir Walter Scott",correct:!0},{answer:"Robert Louis Stevenson",correct:!1},{answer:"James Hogg",correct:!1},{answer:"Irvine Welsh",correct:!1}],tags:["art","literature"]},{question:"What is the name of the famous British artist known for his vivid, colorful paintings of landscapes and portraits?",answers:[{answer:"David Hockney",correct:!0},{answer:"Banksy",correct:!1},{answer:"Tracey Emin",correct:!1},{answer:"Damien Hirst",correct:!1}],tags:["art","painting"]},{question:"What is the name of the famous British sculptor known for his abstract, modernist sculptures?",answers:[{answer:"Henry Moore",correct:!0},{answer:"Barbara Hepworth",correct:!1},{answer:"Anish Kapoor",correct:!1},{answer:"Rachel Whiteread",correct:!1}],tags:["art","painting"]},{question:"What is the name of the famous British fashion designer who created the iconic punk fashion style?",answers:[{answer:"Vivienne Westwood",correct:!0},{answer:"Alexander McQueen",correct:!1},{answer:"Stella McCartney",correct:!1},{answer:"Mary Quant",correct:!1}],tags:["art","fashion"]},{question:"What is the name of the famous British architect who designed the iconic 'Gherkin' building in London?",answers:[{answer:"Norman Foster",correct:!0},{answer:"Richard Rogers",correct:!1},{answer:"Zaha Hadid",correct:!1},{answer:"David Chipperfield",correct:!1}],tags:["art","architecture"]},{question:"What is the name of the famous British composer who wrote the music for 'The Planets' and 'Jupiter'?",answers:[{answer:"Gustav Holst",correct:!0},{answer:"Benjamin Britten",correct:!1},{answer:"Edward Elgar",correct:!1},{answer:"Ralph Vaughan Williams",correct:!1}],tags:["art","music"]},{question:"What is the name of the famous British theater director who founded the Royal Shakespeare Company?",answers:[{answer:"Peter Hall",correct:!0},{answer:"Trevor Nunn",correct:!1},{answer:"Sam Mendes",correct:!1},{answer:"Michael Grandage",correct:!1}],tags:["art","theater"]},{question:"What is the name of the famous British film director who directed 'Trainspotting' and 'Slumdog Millionaire'?",answers:[{answer:"Danny Boyle",correct:!0},{answer:"Mike Leigh",correct:!1},{answer:"Ken Loach",correct:!1},{answer:"Stephen Frears",correct:!1}],tags:["art","movie"]},{question:"What is the name of the famous annual rowing race that takes place on the River Thames in London?",answers:[{answer:"The Boat Race",correct:!0},{answer:"The Oxford and Cambridge Regatta",correct:!1},{answer:"The Henley Regatta",correct:!1},{answer:"The Head of the River Race",correct:!1}],tags:["sport"]},{question:"What is the name of the famous English rugby team that plays their home games at Twickenham stadium?",answers:[{answer:"England national rugby team",correct:!0},{answer:"Leicester Tigers",correct:!1},{answer:"Bath Rugby",correct:!1},{answer:"Harlequins",correct:!1}],tags:["sport"]},{question:"What is the name of the famous horse racing event that takes place at Aintree racecourse in Liverpool?",answers:[{answer:"The Grand National",correct:!0},{answer:"The Derby",correct:!1},{answer:"Royal Ascot",correct:!1},{answer:"Cheltenham Festival",correct:!1}],tags:["sport"]},{question:"What is the name of the famous English football stadium that is also known as the 'Theatre of Dreams'?",answers:[{answer:"Old Trafford",correct:!0},{answer:"Anfield",correct:!1},{answer:"Emirates Stadium",correct:!1},{answer:"Wembley Stadium",correct:!1}],tags:["sport"]},{question:"What is the name of the famous English tennis tournament that takes place at the All England Lawn Tennis and Croquet Club in Wimbledon?",answers:[{answer:"Wimbledon",correct:!0},{answer:"US Open",correct:!1},{answer:"French Open",correct:!1},{answer:"Australian Open",correct:!1}],tags:["sport"]},{question:"What is the name of the famous English footballer who is widely regarded as one of the greatest players of all time and played for Manchester United and the England national team?",answers:[{answer:"David Beckham",correct:!1},{answer:"Wayne Rooney",correct:!0},{answer:"Alan Shearer",correct:!1},{answer:"Gary Lineker",correct:!1}],tags:["sport"]},{question:"What is the name of the famous English boxer who is widely regarded as one of the greatest heavyweight boxers of all time?",answers:[{answer:"Tyson Fury",correct:!1},{answer:"Anthony Joshua",correct:!1},{answer:"Lennox Lewis",correct:!0},{answer:"Frank Bruno",correct:!1}],tags:["sport"]}],Kt=class{constructor(e,n,s){Oe(this,"question");Oe(this,"answers");Oe(this,"id");this.question=e,this.answers=n,this.id=s}static get ALL(){if(Kt._ALL.length===0&&(Kt.loadAll(),Kt._ALL.length===0))throw Error("Wrong loading of quizzes: no matter what, at least one quiz should exist.");return Kt._ALL}static loadAll(){Yb.map((e,n)=>{Kt._ALL.push(Kt.fromJsonAndId(e,n.toString()))})}static fromJsonAndId(e,n){const s=e.question,r=e.answers;if(typeof s=="string"&&typeof r<"u"){const i=[];return r.map(o=>{i.push(Lu.fromJson(o))}),new Kt(s,i,n)}else throw Error(`Impossible to create Quiz from a JSON: field 'question' or 'answers' is incorrect in ${e}`)}};let dr=Kt;Oe(dr,"_ALL",[]);const ln=class{constructor(e,n){Oe(this,"quizzes");Oe(this,"startTime");this.quizzes=e,this.startTime=n}static get MAX_NUMBER_OF_QUIZZES(){return dr.ALL.length}static get NUMBER_OF_QUIZZES(){return 10}static fromStringSeed(e,n){return this.fromNumberSeed(this.stringSeedToNumberSeed(e),n)}static stringSeedToNumberSeed(e){return e.split("").reduce((n,s)=>n+s.charCodeAt(0),0)}static fromNumberSeed(e,n){return new ln(this.getChosenQuizzesFromNumberSeed(e),n)}static getChosenQuizzesFromNumberSeed(e){const n=Uh.xoroshiro128plus(e),s=[],r=dr.ALL;for(let i=0;i<ln.NUMBER_OF_QUIZZES;i++){const o=Uh.unsafeUniformIntDistribution(0,r.length-1,n),a=r[o];s.push(a),r.splice(o,1)}return s}get currentQuiz(){if(this.started&&!this.ended)return this.quizzes[this.indexCurrentQuiz];throw Error("Impossible to get the current quiz: the game haven't started or has already ended.")}get secondsSinceStart(){return(Date.now().valueOf()-this.startTime.valueOf())/1e3}get indexCurrentQuiz(){if(this.started)return Math.floor(this.secondsSinceStart/ln.SECONDS_BY_QUESTION);throw Error("Impossible to calculate the index of the current quiz: the game haven't started")}get started(){return this.startTime!==null}get ended(){return this.started&&this.indexCurrentQuiz+1>ln.NUMBER_OF_QUIZZES}get secondsSinceQuizStarted(){return this.secondsSinceStart-this.indexCurrentQuiz*ln.SECONDS_BY_QUESTION}get timeUntilNextQuiz(){return Math.ceil(ln.SECONDS_BY_QUESTION-this.secondsSinceQuizStarted)}};let Si=ln;Oe(Si,"SECONDS_BY_QUESTION",10);class $n{constructor(e,n,s){Oe(this,"id");Oe(this,"scores");Oe(this,"game");this.id=e,this.scores=n,this.game=Si.fromStringSeed(this.id,s)}get owner(){var e;return((e=this.scores[0])==null?void 0:e.player)||null}isOwner(e){return e.equals(this.owner)}getScore(e){return this.scores.find(n=>n.player.equals(e))||null}static async loadServerFromId(e){const n=await Sm($n.getRef(e));if(n.exists())return await $n.loadServerFromSnapshot(n);throw Error(`Impossible to create GameRoom from ${n}: does not exists.`)}static async loadServerFromSnapshot(e){var i,o;const n=[],s=((i=e.data())==null?void 0:i.startTime)||null,r=(o=e.data())==null?void 0:o.scores;if(r instanceof Array){for(const u of r){const l=u.player;if(l instanceof Ye)n.push(yt.loadServerFromRef(l));else throw Error(`Impossible to load a Game Room from snapshot ${e}: 
            one of the instances of scores does not have a field 'player' instance of DocumentReference.`)}const a=await Promise.all(n),c=r.map((u,l)=>new Lh(u.points,a[l]));return new $n(e.id,c,s)}else throw Error(`Impossible to get GameRoom from snapshot ${e}: no data.`)}get ref(){return $n.getRef(this.id)}static getRef(e){return hm(KT,e)}get players(){return this.scores.map(e=>e.player)}async addPlayerServer(e){const n=new Lh(0,e);await fa(this.ref,{scores:BT(n.doc)})}async removePlayerServer(e){const n=this.getScore(e);if(n)await fa(this.ref,{scores:jT(n.doc)});else throw Error(`Impossible to remove player ${e} on game room ${this}: player not in game room.`)}async startGameServer(){await fa(this.ref,{startTime:Date.now()})}async sendAnswerServer(e,n){if(e.correct){const s=this.getScore(n);s&&s.addGoodAnswer()}}}const Zb=et({data(){return{gameRoomId:this.$route.params.id,gameRoom:null,player:yt.loadLocal(),unSubscribeGameRoom:null}},components:{GameRoomContent:bb,HeaderDefault:Jr},methods:{async setGameRoom(){this.gameRoom=await $n.loadServerFromId(this.gameRoomId)},subscribeGameRoom(){if(this.gameRoom)this.unSubscribeGameRoom=VT(this.gameRoom.ref,async t=>this.gameRoom=await $n.loadServerFromSnapshot(t));else throw Error("Impossible to subscribe to the gameRoom: no gameRoom.")},async joinGameRoom(){if(this.gameRoom)await this.gameRoom.addPlayerServer(this.player);else throw Error("Impossible to add player to the gameRoom: no gameRoom.")},async quitGameRoom(){if(this.gameRoom)await this.gameRoom.removePlayerServer(this.player);else throw Error("Impossible to add player to the gameRoom: no gameRoom.")}},mounted(){this.setGameRoom().then(()=>{this.subscribeGameRoom(),this.joinGameRoom()})},unmounted(){this.quitGameRoom(),this.unSubscribeGameRoom&&this.unSubscribeGameRoom()}});const eI={id:"game-room"},tI={id:"game-room-information"},nI={key:1};function sI(t,e,n,s,r,i){const o=Ne("HeaderDefault"),a=Ne("GameRoomContent");return Q(),Z("div",eI,[ce(o),de("div",tI,[de("h2",null,"Game Room "+It(t.gameRoomId),1),t.gameRoom?(Q(),wr(a,{key:0,"game-room":t.gameRoom},null,8,["game-room"])):(Q(),Z("p",nI,"Acquiring game room data..."))])])}const rI=tt(Zb,[["render",sI],["__scopeId","data-v-898c17b4"]]),iI=[{path:"/",name:"Home",component:lS},{path:"/create-game-room",name:"Create a Game Room",component:pS},{path:"/join-game-room",name:"Join a Game Room",component:OS},{path:"/about",name:"About",component:FS},{path:"/game-room/:id",name:"Game Room",component:rI}],$u=uw({history:Iv("/e-culture/"),routes:iI}),oI={};function aI(t,e){const n=Ne("router-view");return Q(),wr(n)}const cI=tt(oI,[["render",aI]]);const Om=ov(cI);Om.use($u);Om.mount("#app");if(!yt.savedLocally()){const t=yt.generate();t.saveLocal(),t.saveServer()}window.addEventListener("beforeunload",()=>{sessionStorage.setItem("lastRoute",$u.currentRoute.value.path)});const ya=sessionStorage.getItem("lastRoute")||"/";$u.push(ya).then(()=>{console.debug(`location set to ${ya}.`)}).catch(t=>{console.error(`impossible to set location to ${ya} because ${t}`)});
